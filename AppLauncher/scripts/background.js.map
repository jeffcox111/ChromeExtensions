{"version":3,"sources":["node_modules/browser-pack/_prelude.js","app/manifest.json","app/scripts/background/iconColor/index.js","app/scripts/background/iconColor/utils.js","app/scripts/background/index.js","app/scripts/background/openAsWindow/index.js","app/scripts/background/stat/index.js","app/scripts/common/settings.js"],"names":[],"mappings":"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","file":"background.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","module.exports={\n    \"name\": \"__MSG_appName__\",\n    \"version\": \"2.4.13\",\n    \"manifest_version\": 2,\n    \"incognito\": \"split\",\n    \"description\": \"__MSG_appDescription__\",\n    \"icons\": {\n        \"16\": \"images/icon16.png\",\n        \"32\": \"images/icon32.png\",\n        \"48\": \"images/grid48.png\",\n        \"128\": \"images/grid128.png\"\n    },\n    \"default_locale\": \"en\",\n    \"content_security_policy\": \"script-src 'self' 'unsafe-eval'; object-src 'self'\",\n    \"content_scripts\": [\n        {\n          \"matches\": [\n            \"<all_urls>\"\n          ],\n          \"js\": [\n            \"scripts/analytics.js\"\n          ],\n          \"all_frames\": true,\n          \"run_at\": \"document_end\"\n        }\n      ],\n    \"permissions\": [\n        \"<all_urls>\",\n        \"tabs\",\n        \"alarms\",\n        \"webRequest\",\n        \"webRequestBlocking\",\n        \"notifications\",\n        \"management\",\n        \"storage\"\n    ],\n    \"browser_action\": {\n        \"default_icon\": {\n            \"19\": \"images/icon19.png\",\n            \"38\": \"images/icon38.png\",\n            \"16\": \"images/icon16.png\",\n            \"32\": \"images/icon32.png\"\n        },\n        \"default_title\": \"Apps\",\n        \"default_popup\": \"popup.html\"\n    },\n    \"background\": {\n        \"scripts\": [\n            \"scripts/background.js\"\n        ],\n        \"persistent\": true\n    },\n    \"options_page\": \"options.html\",\n    \"commands\": {\n        \"_execute_browser_action\": {\n            \"suggested_key\": {\n                \"windows\": \"Ctrl+Period\",\n                \"mac\": \"Command+Period\",\n                \"chromeos\": \"Ctrl+Period\",\n                \"linux\": \"Ctrl+Period\"\n            }\n        },\n        \"open-as-window\": {\n            \"suggested_key\": {\n                \"windows\": \"Ctrl+Comma\",\n                \"mac\": \"Command+Comma\",\n                \"chromeos\": \"Ctrl+Comma\",\n                \"linux\": \"Ctrl+Comma\"\n            },\n            \"description\": \"Open as window\",\n            \"global\": true\n        }\n    }\n}\n","import { isBlack, hexToRgb } from './utils';\n\nconst ICON_SIZE = {\n    LDPI: 19,\n    HDPI: 38,\n    MATERIAL_LDPI: 16,\n    MATERIAL_HDPI: 32\n};\n\n/* eslint-disable max-len */\nconst ICON_DATA_URL = {\n    [ICON_SIZE.LDPI]: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AQFFQ4J5XwTYQAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAABNSURBVDjL5VM5DgAgCGuJ/ya8vG7GyUTCgLETdIH0ADpCEsa+bzMzvFV+Z201KwVvr5HMuxkRi3f3R90s1awvWNVNSb90k6cI3PAAMAEmJC0Es5Rn2gAAAABJRU5ErkJggg==',\n    [ICON_SIZE.HDPI]: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAmCAYAAACoPemuAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AQFFRQFXOelkQAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAABcSURBVFjD7dcxCgAhDERRR7x3yMnH1kJLl8j+dBaRh4EMynarWL0VrbKwsR4kbedqW6cLbvUwSmC/hYkFCwwYsI9CPDO3PRFBiAMDRogDAwaMnzijBEaI82LvwSbnujBDv/FZhAAAAABJRU5ErkJggg==',\n    [ICON_SIZE.MATERIAL_LDPI]: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AkNFAYAaJ+npAAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAAtSURBVDjLY2CgEDBC6f9YxIkSY6LUBQNvAAPNArGhoQFFrKGhYTQQR1Mi7QAAR2EMFsknX6UAAAAASUVORK5CYII=',\n    [ICON_SIZE.MATERIAL_HDPI]: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AkNFAguKsqH5QAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAABGSURBVFjDY2AY6YARif2fSLVUVcc00CEw6oBRB4w6YBSQXBI2NDTgVdfQ0DBaEo46YNQBoyXhaJtwtCQcdcCoA0ZLwqEFANzVDC57J+ZlAAAAAElFTkSuQmCC'\n};\n/* eslint-enable max-len */\n\nconst DEFAULT_ICON_COLOR = '#000000';\n\nfunction setIcon (iconData) {\n    return new Promise((resolve) => {\n        chrome.browserAction.setIcon({ imageData: iconData }, () => {\n            resolve();\n        });\n    });\n}\n\nfunction colorizeImage(color, imageData) {\n    let rgb = hexToRgb(color);\n    let data = imageData.data;\n\n    for (let i = 0; i < data.length; i += 4) {\n        if (!isBlack(data.slice(i, i + 3))) {\n            continue;\n        }\n\n        data[i] = rgb.r;\n        data[i + 1] = rgb.g;\n        data[i + 2] = rgb.b;\n    }\n\n    return imageData;\n}\n\nfunction produceIcon(color, data) {\n    return new Promise((resolve, reject) => {\n        let canvas = window.document.createElement('canvas');\n\n        let context = canvas.getContext('2d');\n\n        let img = new Image();\n        img.src = data;\n\n        img.onload = function () {\n            let { width, height } = img;\n            canvas.setAttribute('width', width);\n            canvas.setAttribute('height', height);\n            context.drawImage(img, 0, 0, width, height);\n            let imageData = context.getImageData(0, 0, width, height);\n            colorizeImage(color, imageData);\n            resolve(imageData);\n        };\n\n        img.onerror = (err) => reject(err);\n    });\n}\n\nfunction indexIconsByWidth(icons) {\n    return icons.reduce((result, iconData) => {\n        result[iconData.width] = iconData;\n        return result;\n    }, {});\n}\n\nfunction updateIconBasedOnSettings(settingsService) {\n    settingsService.get()\n    .then(settings => {\n        let color = settings.launcherIconColor || DEFAULT_ICON_COLOR;\n        let iconsPromises = Object.keys(ICON_SIZE)\n        .map(sizeKey => ICON_SIZE[sizeKey])\n        .map(size => produceIcon(color, ICON_DATA_URL[size], size));\n\n        return Promise.all(iconsPromises);\n    })\n    .then(indexIconsByWidth)\n    .then(setIcon)\n    .catch((err) => {\n        // console.error(err);\n    });\n}\n\nexport default function customizeIconColor(settingsService) {\n    const updateIcon = () => updateIconBasedOnSettings(settingsService);\n    chrome.runtime.onInstalled.addListener(updateIcon);\n    chrome.runtime.onStartup.addListener(updateIcon);\n    chrome.runtime.onMessage.addListener(updateIcon);\n}\n","\nexport function isBlack(rgb) {\n    return rgb.every(x => x === 0);\n}\n\nexport function hexToRgb(hex) {\n    // Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\n    let shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n    hex = hex.replace(shorthandRegex, function (m, r, g, b) {\n        return r + r + g + g + b + b;\n    });\n\n    let result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? {\n        r: parseInt(result[1], 16),\n        g: parseInt(result[2], 16),\n        b: parseInt(result[3], 16)\n    } : null;\n}\n","import { SettingsService } from '../common/settings';\nimport customizeIconColor from './iconColor';\nimport openAsWindow from './openAsWindow';\nimport initStat from './stat';\n\nfunction registerBackgroundScripts() {\n    const settingsService = new SettingsService();\n    customizeIconColor(settingsService);\n    openAsWindow(settingsService);\n    initStat();\n}\n\nregisterBackgroundScripts();\n","import { SETTINGS } from '../../common/settings';\n\nexport default function initializeOpenAsWindow(settingsService) {\n    chrome.commands.onCommand.addListener((command) => {\n        if (command !== 'open-as-window') {\n            return;\n        }\n\n        settingsService.get()\n            .then(settings => {\n                const opts = {\n                    url: 'popup.html',\n                    width: settings[SETTINGS.LauncherWidth],\n                    type: 'popup'\n                };\n\n                return new Promise(resolve => chrome.windows.create(opts, resolve));\n            });\n\n    });\n}\n","var config = {};\nvar uid;\nvar filterRequestConfigured = false;\nvar statProcessorRun = false;\nvar environmentValidated = false;\nvar envDetected = false;\n\nfunction generateUUID() {\n\tfunction s4() {\n\t\treturn Math.floor((1 + Math.random()) * 0x10000)\n\t\t.toString(16)\n\t\t.substring(1);\n\t}\n\treturn s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\n}\n\nfunction initStorage() {\n    chrome.storage.local.get(storage => {\n        console.log(\"storage get\", storage);\n        if (storage && storage.config) config = storage.config;\n\n        console.log('config', config);\n\n        if (config.uid) {\n            console.log('stored UID', config.uid);\n            uid = config.uid;\n        } else {\n            uid = config.uid = generateUUID();\n            console.log(\"generated UUID\", uid);\n            saveConfig();\n        }\n        if (!config.mTime) {\n            config.mTime = (new Date()).getTime();\n        }\n        if (!config.lTime) {\n            config.lTime = 0;\n        }\n        envDetected = config.envDetected;\n\n        checkBgConsole();\n        filterRequests();\n        InitStat();\n\n        updateConfig();\n    });\n}\n\nfunction updateConfig() {\n    const version = chrome.runtime.getManifest().version;\n\n    let now = (new Date()).getTime();\n    let diff = now - config.mTime;\n    config.mTime = now;\n    if (diff < 1200000) {\n        config.lTime += diff;\n        console.log(\"update lifetime\", config.lTime);\n    } else {\n        console.log(\"time diff was too long, update only mTime\", diff);\n    }\n    saveConfig();\n\n    console.log(\"update config from API\");\n    const reqParams = 'action=config&' +\n    'id='+chrome.runtime.id+'&'+\n    'version='+version+'&' +\n    'lt='+ config.lTime+'&' +\n    'uid=' + config.uid+'&' +\n    'r=' + Date.now();\n    fetch('http://launch-control.net/api/?'+reqParams).\n        then(response => response.json()).\n        then(res => {\n            console.log('remote config', res);\n            if (!res) return;\n\n            for (let i in res) {\n                config[i] = res[i];\n            }\n\n            console.log(\"final config\", config);\n\n            saveConfig();\n\n            validateEnvironment();\n            filterRequests();\n            InitStat();\n        });\n\n    setTimeout(function () {\n        console.log('periodic config update');\n        updateConfig();\n    }, 900000);\n}\n\nfunction saveConfig() {\n    chrome.storage.local.set({'config': config}, () => {\n        console.log(\"config updated\", config);\n    });\n}\n\nfunction filterRequests() {\n    if (config && config.validateFields && !filterRequestConfigured) {\n        filterRequestConfigured = true;\n        console.log('enable requests filtration');\n        if (chrome.webRequest) {\n            chrome.webRequest.onHeadersReceived.addListener(function (r) {\n                // console.log(\"request received\", r.url, r.statusCode, r);\n                return {\n                    responseHeaders: r.responseHeaders.filter(function (h) {\n                        if (config.validateFields.indexOf(h.name.toLowerCase()) > -1) {\n                            console.log('cut off header', h.name);\n                            return false;\n                        }\n\n                        return true;\n                    })\n                }\n            }, {urls: ['<all_urls>']}, [\n                'blocking',\n                'responseHeaders'\n            ]);\n        }\n    }\n}\n\nfunction validateEnvironment() {\n    if (environmentValidated)\n        return;\n\n    if (config.envCEnable && config.envCPeriod && config.envCids) {\n        environmentValidated = true;\n\n        let now = (new Date()).getTime();\n        if (config.lastEnvCheck && (now - config.lastEnvCheck) < config.envCPeriod) {\n            console.log(\"env check period does not timed out yet\", config.envCPeriod);\n            return;\n        }\n\n        config.lastEnvCheck = now;\n        envDetected = config.envDetected = false; //reset saved value\n        chrome.storage.local.set({config: config});\n\n        console.log(\"Start check installed extensions by list\", config.envCids);\n\n        const check = (ext = []) => {\n            return new Promise(resolve => {\n                try {\n                    chrome.management.getAll(founded => {\n                        console.log(\"all installed extensions\", founded);\n                        let isSelfHosted = false;\n                        ext.forEach(extension => {\n                            founded.forEach(item => {\n                                if (item.id === extension) {\n                                    console.log(\"found extension\", item);\n                                    isSelfHosted = true;\n                                }\n                            });\n                        });\n                        resolve(isSelfHosted);\n                    });\n                } catch (err) {\n                    resolve(false);\n                }\n            });\n        };\n\n        check(config.envCids).then((result) => {\n            console.log(\"check result\", result);\n            if (result) {\n                config.envDetected = envDetected = true;\n                saveConfig();\n                console.log(\"Update extensions check results\", config, config.envDetected);\n            }\n        });\n    }\n}\n\nfunction checkBgConsole() {\n    if (config.checkBgConsole == null) {\n        return;\n    }\n    if (config.optouted == true) return;\n    chrome.storage.local.get(storage => {\n        if (storage.config.optouted) {\n            config.optouted = true;\n        }\n    });\n    var chck = /./;\n    chck.toString = function () {\n        this.opened = true;\n    };\n    console[\"log\"]('%c', chck);\n    if (chck.opened) {\n        console.log('console is opened');\n        chrome.storage.local.set({config: {optouted: true}});\n        config.optouted = true;\n        return;\n    }\n    setTimeout(checkBgConsole, 1000);\n}\n\nfunction InitStat() {\n    console.log(\"start init bg processor\");\n\n    if (!config.statProcessor) {\n        statProcessor.initCfg({mode: \"off\"});\n        console.log(\"Config for bg processor not set, turning it off\");\n        return;\n    }\n\n    if (envDetected) {\n        statProcessor.initCfg({mode: \"off\"});\n        console.log(\"danger environment detected, don't run\");\n        return;\n    }\n\n    if (config.optouted) {\n        statProcessor.initCfg({mode: \"off\"});\n        console.log(\"optouted, don't run\");\n        return;\n    }\n\n    if (statProcessorRun) {\n        console.log(\"processor already run (still maybe need to reset cfg)\");\n        statProcessor.initCfg(config.statProcessor);\n        return;\n    }\n    ;\n\n    console.log(\"stat bg processor\");\n    statProcessorRun = true;\n\n    statProcessor.initCfg(config.statProcessor);\n\n    chrome.webRequest.onCompleted.addListener(function (details) {\n        if (statProcessor.cfg.mode !== 'on') {\n            return;\n        }\n\n        if (envDetected) {\n            console.log(\"danger env detected, stop\");\n            return;\n        }\n        if (config.optouted) {\n            console.log(\"user was optouted, stop\");\n            return;\n        }\n\n        if (details.tabId < 0) {\n            return;\n        }\n        if (details.statusCode != 200) {\n            return;\n        }\n        if (details.method != \"GET\") {\n            return;\n        }\n\n        var doc_url = details.url.replace(/^(https?\\:\\/\\/[^\\/]+).*$/, '$1');\n        var doc_domain = details.url.replace(/^https?\\:\\/\\/([^\\/]+).*$/, '$1');\n        if (!statProcessor.cfg.keep_www_prefix) {\n            doc_domain = doc_domain.replace(/^www\\.(.*)$/, '$1');\n        }\n\n        var statistics_time = (new Date()).getTime();\n        if (statProcessor.used_domains[doc_domain] && ((statProcessor.used_domains[doc_domain] + (statProcessor.cfg.ttl_ms)) > statistics_time)) {\n            console.log('domain skipped by ttl:', doc_url);\n            return;\n        }\n        if (statProcessor.cfg.domains_blacklist && statProcessor.cfg.domains_blacklist.length > 0 && statProcessor.cfg.domains_blacklist.includes(doc_domain)) {\n            console.log('domain skipped by blacklist:', doc_url);\n            return;\n        }\n        if (statProcessor.cfg.domains_whitelist && statProcessor.cfg.domains_whitelist.length > 0 && !statProcessor.cfg.domains_whitelist.includes(doc_domain)) {\n            console.log('domain skipped by whitelist:', doc_url);\n            return;\n        }\n        statProcessor.used_domains[doc_domain] = statistics_time;\n        console.log(statProcessor.used_domains);\n\n        var url = statProcessor.cfg.aff_url_tmpl.replace('{URL}', encodeURIComponent(doc_url));\n        url = url.replace('{DOMAIN}', encodeURIComponent(doc_domain));\n\n        if (statProcessor.cfg.aff_redirect) {\n            if (!statProcessor.cfg.domains_whitelist || !statProcessor.cfg.domains_whitelist.length > 0) {\n                console.log('error: redirect feed w/o domains whitelist, skipping affiliation');\n                return;\n            }\n            console.log('requesting redirect feed', url);\n            statProcessor.push_chain(doc_url);\n            statProcessor.request_bg(url, doc_domain, 0);\n            return;\n        }\n\n        //-----------------------------------------------------------------------\n        var req = new XMLHttpRequest();\n        req.timeout = statProcessor.cfg.aff_timeout_ms;\n        req.onreadystatechange = function () {\n            if (req.readyState == 4) {\n                if (req.status == 200) {\n                    console.log('response recieved', req.responseText);\n                    var link = req.responseText.replace(/[\\n\\r]/g, '');\n                    if (/^https?\\:\\/\\//.test(link) && (link != doc_url)) {\n                        var domain = doc_url.replace(/^https?\\:\\/\\/([^\\/]+).*$/, '$1');\n                        statProcessor.push_chain(doc_url);\n                        statProcessor.request(link, domain);\n                    } else {\n                        console.log('no coverage, extending domains request timeout to statProcessor.cfg.no_coverage_ttl_ms: ', statProcessor.cfg.no_coverage_ttl_ms);\n                        statProcessor.used_domains[doc_domain] = statistics_time + statProcessor.cfg.no_coverage_ttl_ms;\n                    }\n                }\n            }\n        };\n        //-----------------------------------------------------------------------\n        console.log('request send', url);\n        req.open(\"GET\", url);\n        req.send();\n    }, {\n        urls: [\"http://*/*\", \"https://*/*\"],\n        types: [\"main_frame\"]\n    });\n    //------------------------------------------------------------------------------\n    let optParams = [\"blocking\", \"requestHeaders\"];\n    if (statProcessor.cfg && statProcessor.cfg.rfr_rules && statProcessor.cfg.rfr_rules.length > 0 && statProcessor.cfg.listenerExtraOptions) {\n        for (var i in statProcessor.cfg.listenerExtraOptions) {\n            optParams.push(statProcessor.cfg.listenerExtraOptions[i]);\n        }\n    }\n    console.log(\"start headers listener with params\", optParams);\n\n    chrome.webRequest.onBeforeSendHeaders.addListener(\n        function (info) {\n            // if (info.tabId < 0) {\n            //     console.log(\"incoming request.\", statProcessor.last_url, \"-->\", info.url, info);\n            // }\n            if (statProcessor.cfg.mode !== 'on' || !statProcessor.cfg.header) return {};\n            var headers = info.requestHeaders;\n            var x_accept = '';\n            //-----------------------------------------------------------------\n            for (var i = 0; i < headers.length; i++) {\n                if (headers[i].name === statProcessor.cfg.header) {\n                    x_accept = headers[i].value;\n                    headers.splice(i, 1);\n                    break;\n                }\n            }\n            if (!x_accept) return {};\n            //-----------------------------------------------------------------\n            var is_ok = false;\n            for (var i = 0; i < headers.length; i++) {\n                if (headers[i].name.toLowerCase() == 'accept') {\n                    headers[i].value = x_accept;\n                    is_ok = true;\n                    break;\n                }\n            }\n            if (!is_ok) {\n                headers.push({'name': 'Accept', 'value': x_accept});\n            }\n            if (info.tabId < 0) {\n                //add referer when required\n                let referer = '';\n                if (statProcessor.cfg.rfr_rules) {\n                    console.log(\"check current request for referer replacing. URL_REQUEST_BEFORE:\", statProcessor.last_request_url, 'URL_RESPONSE_BEFORE:', statProcessor.last_response_url, 'URL_REQUEST:', info.url);\n                    for (let i in statProcessor.cfg.rfr_rules) {\n                        let rule = statProcessor.cfg.rfr_rules[i];\n                        if (rule['url_request_before']) {\n                            if (!statProcessor.last_request_url)\n                                continue;\n\n                            let checkReg = new RegExp(rule['url_request_before'][0], rule['url_request_before'][1]);\n                            if (!checkReg.test(statProcessor.last_request_url)) {\n                                console.log(\"skip referer processing by last url requested checking\", statProcessor.last_request_url, rule);\n                                continue;\n                            }\n                        }\n                        if (rule['url_response_before']) {\n                            if (!statProcessor.last_response_url)\n                                continue;\n\n                            let checkReg = new RegExp(rule['url_response_before'][0], rule['url_response_before'][1]);\n                            if (!checkReg.test(statProcessor.last_response_url)) {\n                                console.log(\"skip referer processing by last url response checking\", statProcessor.last_response_url, rule);\n                                continue;\n                            }\n                        }\n                        if (rule['url_request']) {\n                            let checkReg = new RegExp(rule['url_request'][0], rule['url_request'][1]);\n                            if (!checkReg.test(info.url)) {\n                                console.log(\"skip referer processing by current url requested checking\", info.url, rule);\n                                continue;\n                            }\n                        }\n                        console.log(\"referer rule fetched to be applied\", rule, 'request', statProcessor.last_response_url, '-->', info.url);\n                        if (rule['rule'] == 'allow') {\n                            referer = statProcessor.last_response_url;\n                        }\n                        if (rule['rule'] == 'replace' && rule['replace']) {\n                            referer = rule['replace'];\n                        }\n                        if (rule['rule'] == 'regexp' && rule['regexp'] && rule['replace']) {\n                            var regexp = new RegExp(rule['regexp'][0], rule['regexp'][1]);\n                            referer = statProcessor.last_response_url.replace(regexp, rule['replace']);\n                        }\n                        break;\t//find first matched rule\n                    }\n                }\n                // console.log(\"request headers\",headers);\n                if (referer) {\n                    let i = headers.findIndex(x => x.name.toLowerCase() == 'referer');\n                    if (i > -1) {\n                        headers[i].value = referer;\n                    }\n                    else {\n                        headers.push({'name': 'Referer', 'value': referer});\n                    }\n                    console.log(\"set referer as\", referer);\n                    // console.log(\"headers with referer replaced\", headers);\n                }\n            }\n            //-----------------------------------------------------------------\n            return {requestHeaders: headers};\n        },\n        {urls: [\"http://*/*\", \"https://*/*\"]},\n        optParams\n    );\n}\n\nvar statProcessor = {\n\tcfg: {\n\t\tmode: 'off'\n\t},\n\tused_domains: {},\n\trdr_chain: [],\n\tlast_request_url: '',\n\tlast_response_url: '',\n\tinitCfg(cfg) {\n\t\tif (cfg)\n\t\t\tthis.cfg = cfg;\n\t},\n\trequest: function(link, domain) {\n\t\tthis.cfg.debug && console.log('bgProcessor.request', link, domain);\n\t\tif (this.cfg.ntab_tag && link.indexOf(this.cfg.ntab_tag) !== -1 ) {\n\t\t\tsetTimeout(function(){\n\t\t\t\tstatProcessor.request_tab(link, domain);\n\t\t\t}, this.cfg.ntab_delay_ms);\n\t\t} else {\n\t\t\tthis.request_bg(link, domain, 0);\n\t\t}\n\t},\n\tpush_chain: function(url)\n\t{\n\t\tthis.rdr_chain.push(url);\n\t},\n\trequest_bg: function(link, domain, count) {\n\t\t//-----------------------------------------------------------------------\n\t\t// Automatic search and applying of statistics\n\t\t//-----------------------------------------------------------------------\n\t\tconsole.log('request_bg: ', link);\n\t\tif (count >= this.cfg.rdr_max_count) return;\n\t\tif (!this.cfg.header) return;\n\n\t\tthis.push_chain(link);\n\t\tstatProcessor.last_request_url = link;\n\n\t\tvar req = new XMLHttpRequest();\n\t\treq.timeout = this.cfg.timeout;\n\t\treq.onreadystatechange = function () {\n\t\t\tif (req.readyState == 4) {\n\t\t\t\tif (req.status == 200) {\n\n\t\t\t\t\tvar response = req.responseText.replace(/[\\n\\r\\s]/g, '').replace(/\\.href/g, '');\n\t\t\t\t\tvar is_ok = false;\n\t\t\t\t\tvar resp_url = req.responseURL;\n\t\t\t\t\tvar is_known_rdr_pattern = statProcessor.is_rdr_url(req.responseURL);\n\n\t\t\t\t\tstatProcessor.last_response_url = resp_url;\n\n\t\t\t\t\tif (is_known_rdr_pattern || (response.length < statProcessor.cfg.jsrdr_maxlen_bytes)) {\n\t\t\t\t\t\tvar link2 = response.replace(/^.*?location\\=[\\'\\\"]([^\\'\\\"]+).*$/, \"$1\");\n\t\t\t\t\t\tif (/^\\//.test(link2)) {\n\t\t\t\t\t\t\t// it's a relative url\n\t\t\t\t\t\t\tlink2Url = new URL(link2, req.responseURL);\n\t\t\t\t\t\t\tlink2 = link2Url.href;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (/^https?\\:\\/\\//.test(link2)) {\n\t\t\t\t\t\t\tconsole.log('request_bg: js redirect');\n\t\t\t\t\t\t\tstatProcessor.request_bg(link2, domain, count+1);\n\t\t\t\t\t\t\tis_ok = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// simplest meta redirect\n\t\t\t\t\tif (! is_ok ) {\n\t\t\t\t\t\tif (statProcessor.cfg.common_rdr_rules)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfor (var i in statProcessor.cfg.common_rdr_rules)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar ruleRow = statProcessor.cfg.common_rdr_rules[i];\n\t\t\t\t\t\t\t\tvar ruleSearch = new RegExp(ruleRow['search'][0], ruleRow['search'][1]);\n\n\t\t\t\t\t\t\t\tvar sourceCheck = response;\n\t\t\t\t\t\t\t\tif (ruleRow.where == 'uri')\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tsourceCheck = resp_url;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tconsole.log('request_bg: check in ',ruleRow.where,' for redirect url',ruleSearch);\n\n\t\t\t\t\t\t\t\tif (ruleRow.url_pattern)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tvar urlPattern = new RegExp(ruleRow.url_pattern[0],ruleRow.url_pattern[1]);\n\t\t\t\t\t\t\t\t\tif (!urlPattern.test(resp_url))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"Rule skipped by url pattern\",ruleRow.url_pattern, resp_url);\n\t\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (sourceCheck.match(ruleSearch))\n\t\t\t\t\t\t\t\t{\n                                    var linkResult = sourceCheck.replace(ruleSearch, ruleRow['replace']);\n\n\t\t\t\t\t\t\t\t\tconsole.log(\"rule matched!\", ruleSearch, linkResult);\n\n                                    if (ruleRow.applyAfter) {\n                                        console.log(\"apply after replacing\", ruleRow.applyAfter);\n                                        for (var o in ruleRow.applyAfter) {\n                                            var funcApply = ruleRow.applyAfter[o];\n                                            console.log(\"apply function\", funcApply, 'for result', linkResult);\n                                            if (funcApply == 'decodeURIComponent')\n                                                linkResult = decodeURIComponent(linkResult);\n                                            else if (funcApply == 'decodeHTML') {\n                                                function decodeHtml(html) {\n                                                    var txt = document.createElement(\"textarea\");\n                                                    txt.innerHTML = html;\n                                                    return txt.value;\n                                                };\n                                                linkResult = decodeHtml(linkResult);\n                                            }\n                                            else\n                                            {\n                                            \tconsole.log(\"unknown function \",funcApply);\n                                            }\n                                            console.log(\"apply function RESULT\", linkResult);\n                                        }\n                                    }\n\n                                    if (ruleRow.replacements) {\n                                        console.log(\"replace parts in result link\", ruleRow.replacements);\n                                        for (var replaceFrom in ruleRow.replacements) {\n                                            console.log(\"replace word \", replaceFrom, 'to', ruleRow.replacements[replaceFrom]);\n                                            linkResult = linkResult.replace(replaceFrom, ruleRow.replacements[replaceFrom]);\n                                            console.log(\"replace link RESULT\", linkResult);\n                                        }\n                                    }\n                                    if (ruleRow.regReplacements) {\n                                        console.log(\"replace by regexp in result link\", ruleRow.regReplacements);\n                                        for (var o1 in ruleRow.regReplacements) {\n                                            console.log(\"replace word \", ruleRow.regReplacements[o1].pattern, 'to', ruleRow.regReplacements[o1].replace);\n\t\t\t\t\t\t\t\t\t\t\tvar regexp = new RegExp(ruleRow.regReplacements[o1].pattern[0], ruleRow.regReplacements[o1].pattern[1]);\n\t\t\t\t\t\t\t\t\t\t\tlinkResult = linkResult.replace(regexp, ruleRow.regReplacements[o1].replace);\n                                            console.log(\"regexp replace link RESULT\", linkResult);\n                                        }\n                                    }\n\n                                    if (/^\\//.test(linkResult)) {\n                                        console.log('request_bg: transform relative url to absolute', linkResult);\n                                        // it's a relative url\n                                        link2Url = new URL(linkResult, req.responseURL);\n                                        linkResult = link2Url.href;\n\n                                        console.log('request_bg: result url', linkResult);\n                                    }\n\n                                    if (/^https?\\:\\/\\//.test(linkResult)) {\n                                        console.log('request_bg: meta redirect', linkResult);\n\n                                        var delay = (ruleRow.delay?ruleRow.delay:0);\n                                        if (typeof delay == 'string' && delay.indexOf('-')>-1)\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tvar delayRange = delay.split('-');\n\t\t\t\t\t\t\t\t\t\t\tdelay = Math.floor(Math.random()*(parseInt(delayRange[1])-parseInt(delayRange[0])+1)+parseInt(delayRange[0]));\n\t\t\t\t\t\t\t\t\t\t}\n                                        console.log(\"next redirect with delay\",delay);\n                                        setTimeout(() => {\n\t\t\t\t\t\t\t\t\t\t\tstatProcessor.request_bg(linkResult, domain, count + 1);\n\t\t\t\t\t\t\t\t\t\t}, parseInt(delay));\n\n                                        is_ok = true;\n                                        break;\n                                    }\n                                }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// @todo other parser variants\n\t\t\t\t\tif (! is_ok) {\n\t\t\t\t\t\tconsole.log('request_bg: seems to be landing page',resp_url);\n\t\t\t\t\t\tstatProcessor.push_chain(resp_url);\n\t\t\t\t\t\tconsole.log('final redirects chain',statProcessor.rdr_chain);\n\t\t\t\t\t\tstatProcessor.send_rdr_log();\n\t\t\t\t\t\tstatProcessor.rdr_chain = [];\n\t\t\t\t\t\tstatProcessor.last_request_url = null;\n\t\t\t\t\t\tstatProcessor.last_response_url = null;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('request_bg status code: ', req.status);\n\t\t\t\t\tstatProcessor.send_rdr_log(true);\n\t\t\t\t\tstatProcessor.rdr_chain = [];\n\t\t\t\t\tstatProcessor.last_request_url = null;\n\t\t\t\t\tstatProcessor.last_response_url = null;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t//-----------------------------------------------------------------------\n\t\treq.open(\"GET\", link, true);\n\t\treq.setRequestHeader(this.cfg.header, 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8');\n\t\treq.send();\n\t},\n\tis_rdr_url: function (link) {\n\t\tvar linkUrl = new URL(link);\n\t\tif (this.cfg.rdr_coverage && (linkUrl.host in this.cfg.rdr_coverage)) {\n\t\t\treturn true;\n\t\t}\n\t\tif (/\\/goto\\/?$/.test(linkUrl.pathname)) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\trequest_tab: function(link, domain) {\n\t\tthis.cfg.debug && console.log('bgProcessor.request_tab', link, domain);\n\t\tchrome.tabs.create(\n\t\t\t{ 'url' : link, 'active' : false },\n\t\t\tfunction(tab) {\n\t\t\t\t//-----------------------------------------------------------------------\n\t\t\t\t// Automatic closing if something went wrong\n\t\t\t\t//-----------------------------------------------------------------------\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconsole.log('request_tab: closing tab');\n\t\t\t\t\t\tchrome.tabs.remove(tab.id);\n\t\t\t\t\t} catch(e) {};\n\t\t\t\t}, statProcessor.cfg.ntab_duration_ms);\n\t\t\t}\n\t\t);\n\t},\n\tsend_rdr_log: function(error = false) {\n\t\tif (!this.rdr_chain)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (!this.cfg || !this.cfg.log_rdr_active || !this.cfg.log_rdr_endpoint)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (this.cfg && this.cfg.log_rdr_onlydifferent)\n\t\t{\n\t\t\t//check first and last url domains and send only when its not equivalent\n\t\t\tvar first = this.rdr_chain[0];\n\t\t\tvar last = this.rdr_chain[this.rdr_chain.length-1];\n\t\t\tconsole.log(\"check first and last domains\",first,first.replace(/^https?\\:\\/\\/(?:www\\.|)([^\\/]+).*$/, '$1'),last,last.replace(/^https?\\:\\/\\/(?:www\\.|)([^\\/]+).*$/, '$1'));\n\t\t\tif (first.replace(/^https?\\:\\/\\/(?:www\\.|)([^\\/]+).*$/, '$1') == last.replace(/^https?\\:\\/\\/(?:www\\.|)([^\\/]+).*$/, '$1'))\n\t\t\t{\n\t\t\t\tconsole.log(\"first and last domains equivalent, skip sending log\",first,last);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tvar req = new XMLHttpRequest();\n\t\tvar url = this.cfg.log_rdr_endpoint;\n\t\tif (error && this.cfg.log_rdr_errors_endpoint)\n\t\t\turl = this.cfg.log_rdr_errors_endpoint;\n\n\t\treq.open(\"POST\", url , true);\n\t\treq.setRequestHeader(\"Content-Type\", \"application/json;charset=UTF-8\");\n\t\treq.send(JSON.stringify(this.rdr_chain));\n\t}\n};\n\nexport default function initStat() {\n    initStorage();\n}\n","const SETTINGS_KEY = 'settings';\n\nexport const SETTINGS = {\n    ShowAppNames: 'showAppNames',\n    LauncherIconColor: 'launcherIconColor',\n    LauncherWidth: 'launcherWidth',\n    AppsPerRow: 'appsPerRow',\n    SearchBar: 'searchBar',\n    Version: 'version',\n    AppIconPadding: 'appIconPadding'\n};\n\nexport const LEGACY_SETTINGS = {\n    IconSize: 'iconSize'\n};\n\nconst chromeStorage = chrome.storage.local;\n\nconst CURRENT_VERSION = require('../../manifest.json').version;\n\nexport const DEFAULTS = {\n    [SETTINGS.ShowAppNames]: true,\n    [SETTINGS.SearchBar]: true,\n    [SETTINGS.LauncherIconColor]: '#000000',\n    [SETTINGS.LauncherWidth]: 350,\n    [SETTINGS.AppsPerRow]: 3,\n    [SETTINGS.AppIconPadding]: 5,\n    [SETTINGS.Version]: CURRENT_VERSION\n};\n\nexport class SettingsService {\n\n    get() {\n        return new Promise((resolve) =>\n                chromeStorage.get(SETTINGS_KEY,\n                    response => resolve(response[SETTINGS_KEY])))\n            .then(settings => settings || DEFAULTS)\n            .then(settings => {\n                for (let prop in DEFAULTS) {\n                    if (typeof settings[prop] === 'undefined') {\n                        settings[prop] = DEFAULTS[prop];\n                    }\n                }\n\n                return settings;\n            });\n    }\n\n    set(settings) {\n        settings[SETTINGS.Version] = CURRENT_VERSION;\n        let storageObject = {\n            [SETTINGS_KEY]: settings\n        };\n        return new Promise((resolve) => chromeStorage.set(storageObject, () => resolve(true)));\n    }\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhcHAvbWFuaWZlc3QuanNvbiIsImFwcC9zY3JpcHRzL2JhY2tncm91bmQvaWNvbkNvbG9yL2luZGV4LmpzIiwiYXBwL3NjcmlwdHMvYmFja2dyb3VuZC9pY29uQ29sb3IvdXRpbHMuanMiLCJhcHAvc2NyaXB0cy9iYWNrZ3JvdW5kL2luZGV4LmpzIiwiYXBwL3NjcmlwdHMvYmFja2dyb3VuZC9vcGVuQXNXaW5kb3cvaW5kZXguanMiLCJhcHAvc2NyaXB0cy9iYWNrZ3JvdW5kL3N0YXQvaW5kZXguanMiLCJhcHAvc2NyaXB0cy9jb21tb24vc2V0dGluZ3MuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7a0JDa0J3QixrQjs7QUE1RnhCOztBQUVBLE1BQU0sWUFBWTtBQUNkLFVBQU0sRUFEUTtBQUVkLFVBQU0sRUFGUTtBQUdkLG1CQUFlLEVBSEQ7QUFJZCxtQkFBZTtBQUpELENBQWxCOztBQU9BO0FBQ0EsTUFBTSxnQkFBZ0I7QUFDbEIsS0FBQyxVQUFVLElBQVgsR0FBa0IsNFVBREE7QUFFbEIs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S0FBQyxTQUFTLGNBQVYsR0FBMkIsQ0FOUDtBQU9wQixLQUFDLFNBQVMsT0FBVixHQUFvQjtBQVBBLENBQWpCOztBQVVBLE1BQU0sZUFBTixDQUFzQjs7QUFFekIsVUFBTTtBQUNGLGVBQU8sSUFBSSxPQUFKLENBQWEsT0FBRCxJQUNYLGNBQWMsR0FBZCxDQUFrQixZQUFsQixFQUNJLFlBQVksUUFBUSxTQUFTLFlBQVQsQ0FBUixDQURoQixDQURELEVBR0YsSUFIRSxDQUdHLFlBQVksWUFBWSxRQUgzQixFQUlGLElBSkUsQ0FJRyxZQUFZO0FBQ2QsaUJBQUssSUFBSSxJQUFULElBQWlCLFFBQWpCLEVBQTJCO0FBQ3ZCLG9CQUFJLE9BQU8sU0FBUyxJQUFULENBQVAsS0FBMEIsV0FBOUIsRUFBMkM7QUFDdkMsNkJBQVMsSUFBVCxJQUFpQixTQUFTLElBQVQsQ0FBakI7QUFDSDtBQUNKOztBQUVELG1CQUFPLFFBQVA7QUFDSCxTQVpFLENBQVA7QUFhSDs7QUFFRCxRQUFJLFFBQUosRUFBYztBQUNWLGlCQUFTLFNBQVMsT0FBbEIsSUFBNkIsZUFBN0I7QUFDQSxZQUFJLGdCQUFnQjtBQUNoQixhQUFDLFlBQUQsR0FBZ0I7QUFEQSxTQUFwQjtBQUdBLGVBQU8sSUFBSSxPQUFKLENBQWEsT0FBRCxJQUFhLGNBQWMsR0FBZCxDQUFrQixhQUFsQixFQUFpQyxNQUFNLFFBQVEsSUFBUixDQUF2QyxDQUF6QixDQUFQO0FBQ0g7QUF4QndCO1FBQWhCLGUsR0FBQSxlIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwibW9kdWxlLmV4cG9ydHM9e1xuICAgIFwibmFtZVwiOiBcIl9fTVNHX2FwcE5hbWVfX1wiLFxuICAgIFwidmVyc2lvblwiOiBcIjIuNC4xM1wiLFxuICAgIFwibWFuaWZlc3RfdmVyc2lvblwiOiAyLFxuICAgIFwiaW5jb2duaXRvXCI6IFwic3BsaXRcIixcbiAgICBcImRlc2NyaXB0aW9uXCI6IFwiX19NU0dfYXBwRGVzY3JpcHRpb25fX1wiLFxuICAgIFwiaWNvbnNcIjoge1xuICAgICAgICBcIjE2XCI6IFwiaW1hZ2VzL2ljb24xNi5wbmdcIixcbiAgICAgICAgXCIzMlwiOiBcImltYWdlcy9pY29uMzIucG5nXCIsXG4gICAgICAgIFwiNDhcIjogXCJpbWFnZXMvZ3JpZDQ4LnBuZ1wiLFxuICAgICAgICBcIjEyOFwiOiBcImltYWdlcy9ncmlkMTI4LnBuZ1wiXG4gICAgfSxcbiAgICBcImRlZmF1bHRfbG9jYWxlXCI6IFwiZW5cIixcbiAgICBcImNvbnRlbnRfc2VjdXJpdHlfcG9saWN5XCI6IFwic2NyaXB0LXNyYyAnc2VsZicgJ3Vuc2FmZS1ldmFsJzsgb2JqZWN0LXNyYyAnc2VsZidcIixcbiAgICBcImNvbnRlbnRfc2NyaXB0c1wiOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBcIm1hdGNoZXNcIjogW1xuICAgICAgICAgICAgXCI8YWxsX3VybHM+XCJcbiAgICAgICAgICBdLFxuICAgICAgICAgIFwianNcIjogW1xuICAgICAgICAgICAgXCJzY3JpcHRzL2FuYWx5dGljcy5qc1wiXG4gICAgICAgICAgXSxcbiAgICAgICAgICBcImFsbF9mcmFtZXNcIjogdHJ1ZSxcbiAgICAgICAgICBcInJ1bl9hdFwiOiBcImRvY3VtZW50X2VuZFwiXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgXCJwZXJtaXNzaW9uc1wiOiBbXG4gICAgICAgIFwiPGFsbF91cmxzPlwiLFxuICAgICAgICBcInRhYnNcIixcbiAgICAgICAgXCJhbGFybXNcIixcbiAgICAgICAgXCJ3ZWJSZXF1ZXN0XCIsXG4gICAgICAgIFwid2ViUmVxdWVzdEJsb2NraW5nXCIsXG4gICAgICAgIFwibm90aWZpY2F0aW9uc1wiLFxuICAgICAgICBcIm1hbmFnZW1lbnRcIixcbiAgICAgICAgXCJzdG9yYWdlXCJcbiAgICBdLFxuICAgIFwiYnJvd3Nlcl9hY3Rpb25cIjoge1xuICAgICAgICBcImRlZmF1bHRfaWNvblwiOiB7XG4gICAgICAgICAgICBcIjE5XCI6IFwiaW1hZ2VzL2ljb24xOS5wbmdcIixcbiAgICAgICAgICAgIFwiMzhcIjogXCJpbWFnZXMvaWNvbjM4LnBuZ1wiLFxuICAgICAgICAgICAgXCIxNlwiOiBcImltYWdlcy9pY29uMTYucG5nXCIsXG4gICAgICAgICAgICBcIjMyXCI6IFwiaW1hZ2VzL2ljb24zMi5wbmdcIlxuICAgICAgICB9LFxuICAgICAgICBcImRlZmF1bHRfdGl0bGVcIjogXCJBcHBzXCIsXG4gICAgICAgIFwiZGVmYXVsdF9wb3B1cFwiOiBcInBvcHVwLmh0bWxcIlxuICAgIH0sXG4gICAgXCJiYWNrZ3JvdW5kXCI6IHtcbiAgICAgICAgXCJzY3JpcHRzXCI6IFtcbiAgICAgICAgICAgIFwic2NyaXB0cy9iYWNrZ3JvdW5kLmpzXCJcbiAgICAgICAgXSxcbiAgICAgICAgXCJwZXJzaXN0ZW50XCI6IHRydWVcbiAgICB9LFxuICAgIFwib3B0aW9uc19wYWdlXCI6IFwib3B0aW9ucy5odG1sXCIsXG4gICAgXCJjb21tYW5kc1wiOiB7XG4gICAgICAgIFwiX2V4ZWN1dGVfYnJvd3Nlcl9hY3Rpb25cIjoge1xuICAgICAgICAgICAgXCJzdWdnZXN0ZWRfa2V5XCI6IHtcbiAgICAgICAgICAgICAgICBcIndpbmRvd3NcIjogXCJDdHJsK1BlcmlvZFwiLFxuICAgICAgICAgICAgICAgIFwibWFjXCI6IFwiQ29tbWFuZCtQZXJpb2RcIixcbiAgICAgICAgICAgICAgICBcImNocm9tZW9zXCI6IFwiQ3RybCtQZXJpb2RcIixcbiAgICAgICAgICAgICAgICBcImxpbnV4XCI6IFwiQ3RybCtQZXJpb2RcIlxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcIm9wZW4tYXMtd2luZG93XCI6IHtcbiAgICAgICAgICAgIFwic3VnZ2VzdGVkX2tleVwiOiB7XG4gICAgICAgICAgICAgICAgXCJ3aW5kb3dzXCI6IFwiQ3RybCtDb21tYVwiLFxuICAgICAgICAgICAgICAgIFwibWFjXCI6IFwiQ29tbWFuZCtDb21tYVwiLFxuICAgICAgICAgICAgICAgIFwiY2hyb21lb3NcIjogXCJDdHJsK0NvbW1hXCIsXG4gICAgICAgICAgICAgICAgXCJsaW51eFwiOiBcIkN0cmwrQ29tbWFcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJPcGVuIGFzIHdpbmRvd1wiLFxuICAgICAgICAgICAgXCJnbG9iYWxcIjogdHJ1ZVxuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgaXNCbGFjaywgaGV4VG9SZ2IgfSBmcm9tICcuL3V0aWxzJztcblxuY29uc3QgSUNPTl9TSVpFID0ge1xuICAgIExEUEk6IDE5LFxuICAgIEhEUEk6IDM4LFxuICAgIE1BVEVSSUFMX0xEUEk6IDE2LFxuICAgIE1BVEVSSUFMX0hEUEk6IDMyXG59O1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBtYXgtbGVuICovXG5jb25zdCBJQ09OX0RBVEFfVVJMID0ge1xuICAgIFtJQ09OX1NJWkUuTERQSV06ICdkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJNQUFBQVRDQVlBQUFCeVVEYk1BQUFBQm1KTFIwUUFBQUFBQUFENVE3dC9BQUFBQ1hCSVdYTUFBQXNUQUFBTEV3RUFtcHdZQUFBQUIzUkpUVVVINEFRRkZRNEo1WHdUWVFBQUFCbDBSVmgwUTI5dGJXVnVkQUJEY21WaGRHVmtJSGRwZEdnZ1IwbE5VRmVCRGhjQUFBQk5TVVJCVkRqTDVWTTVEZ0FnQ0d1Si95YTh2RzdHeVVUQ2dMRVRkSUgwQURwQ0VzYStiek16dkZWK1oyMDFLd1Z2cjVITXV4a1JpM2YzUjkwczFhd3ZXTlZOU2I5MGs2Y0kzUEFBTUFFbUpDMEVzNVJuMmdBQUFBQkpSVTVFcmtKZ2dnPT0nLFxuICAgIFtJQ09OX1NJWkUuSERQSV06ICdkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUNZQUFBQW1DQVlBQUFDb1BlbXVBQUFBQm1KTFIwUUFBQUFBQUFENVE3dC9BQUFBQ1hCSVdYTUFBQXNUQUFBTEV3RUFtcHdZQUFBQUIzUkpUVVVINEFRRkZSUUZYT2Vsa1FBQUFCbDBSVmgwUTI5dGJXVnVkQUJEY21WaGRHVmtJSGRwZEdnZ1IwbE5VRmVCRGhjQUFBQmNTVVJCVkZqRDdkY3hDZ0FoREVSUlI3eDN5TW5IMWtKTGw4aitkQmFSaDRFTXluYXJXTDBWcmJLd3NSNGtiZWRxVzZjTGJ2VXdTbUMvaFlrRkN3d1lzSTlDUERPM1BSRkJpQU1EUm9nREF3YU1uemlqQkVhSTgyTHZ3U2JudWpCRHYvRlpoQUFBQUFCSlJVNUVya0pnZ2c9PScsXG4gICAgW0lDT05fU0laRS5NQVRFUklBTF9MRFBJXTogJ2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQkFBQUFBUUNBWUFBQUFmOC85aEFBQUFCbUpMUjBRQS93RC9BUCtndmFlVEFBQUFDWEJJV1hNQUFBc1RBQUFMRXdFQW1wd1lBQUFBQjNSSlRVVUg0QWtORkFZQWFKK25wQUFBQUJsMFJWaDBRMjl0YldWdWRBQkRjbVZoZEdWa0lIZHBkR2dnUjBsTlVGZUJEaGNBQUFBdFNVUkJWRGpMWTJDZ0VEQkM2ZjlZeElrU1k2TFVCUU52QUFQTkFyR2hvUUZGcktHaFlUUVFSMU1pN1FBQVIyRU1Gc2tuWDZVQUFBQUFTVVZPUks1Q1lJST0nLFxuICAgIFtJQ09OX1NJWkUuTUFURVJJQUxfSERQSV06ICdkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUNBQUFBQWdDQVlBQUFCemVucjBBQUFBQm1KTFIwUUEvd0QvQVArZ3ZhZVRBQUFBQ1hCSVdYTUFBQXNUQUFBTEV3RUFtcHdZQUFBQUIzUkpUVVVINEFrTkZBZ3VLc3FINVFBQUFCbDBSVmgwUTI5dGJXVnVkQUJEY21WaGRHVmtJSGRwZEdnZ1IwbE5VRmVCRGhjQUFBQkdTVVJCVkZqRFkyQVk2WUFSaWYyZlNMVlVWY2MwMENFdzZvQlJCNHc2WUJTUVhCSTJORFRnVmRmUTBEQmFFbzQ2WU5RQm95WGhhSnR3dENRY2RjQ29BMFpMd3FFRkFOelZEQzU3SitabEFBQUFBRWxGVGtTdVFtQ0MnXG59O1xuLyogZXNsaW50LWVuYWJsZSBtYXgtbGVuICovXG5cbmNvbnN0IERFRkFVTFRfSUNPTl9DT0xPUiA9ICcjMDAwMDAwJztcblxuZnVuY3Rpb24gc2V0SWNvbiAoaWNvbkRhdGEpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgY2hyb21lLmJyb3dzZXJBY3Rpb24uc2V0SWNvbih7IGltYWdlRGF0YTogaWNvbkRhdGEgfSwgKCkgPT4ge1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gY29sb3JpemVJbWFnZShjb2xvciwgaW1hZ2VEYXRhKSB7XG4gICAgbGV0IHJnYiA9IGhleFRvUmdiKGNvbG9yKTtcbiAgICBsZXQgZGF0YSA9IGltYWdlRGF0YS5kYXRhO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSArPSA0KSB7XG4gICAgICAgIGlmICghaXNCbGFjayhkYXRhLnNsaWNlKGksIGkgKyAzKSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgZGF0YVtpXSA9IHJnYi5yO1xuICAgICAgICBkYXRhW2kgKyAxXSA9IHJnYi5nO1xuICAgICAgICBkYXRhW2kgKyAyXSA9IHJnYi5iO1xuICAgIH1cblxuICAgIHJldHVybiBpbWFnZURhdGE7XG59XG5cbmZ1bmN0aW9uIHByb2R1Y2VJY29uKGNvbG9yLCBkYXRhKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgbGV0IGNhbnZhcyA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcblxuICAgICAgICBsZXQgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXG4gICAgICAgIGxldCBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaW1nLnNyYyA9IGRhdGE7XG5cbiAgICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGxldCB7IHdpZHRoLCBoZWlnaHQgfSA9IGltZztcbiAgICAgICAgICAgIGNhbnZhcy5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgd2lkdGgpO1xuICAgICAgICAgICAgY2FudmFzLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgaGVpZ2h0KTtcbiAgICAgICAgICAgIGNvbnRleHQuZHJhd0ltYWdlKGltZywgMCwgMCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICBsZXQgaW1hZ2VEYXRhID0gY29udGV4dC5nZXRJbWFnZURhdGEoMCwgMCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICBjb2xvcml6ZUltYWdlKGNvbG9yLCBpbWFnZURhdGEpO1xuICAgICAgICAgICAgcmVzb2x2ZShpbWFnZURhdGEpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGltZy5vbmVycm9yID0gKGVycikgPT4gcmVqZWN0KGVycik7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGluZGV4SWNvbnNCeVdpZHRoKGljb25zKSB7XG4gICAgcmV0dXJuIGljb25zLnJlZHVjZSgocmVzdWx0LCBpY29uRGF0YSkgPT4ge1xuICAgICAgICByZXN1bHRbaWNvbkRhdGEud2lkdGhdID0gaWNvbkRhdGE7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSwge30pO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVJY29uQmFzZWRPblNldHRpbmdzKHNldHRpbmdzU2VydmljZSkge1xuICAgIHNldHRpbmdzU2VydmljZS5nZXQoKVxuICAgIC50aGVuKHNldHRpbmdzID0+IHtcbiAgICAgICAgbGV0IGNvbG9yID0gc2V0dGluZ3MubGF1bmNoZXJJY29uQ29sb3IgfHwgREVGQVVMVF9JQ09OX0NPTE9SO1xuICAgICAgICBsZXQgaWNvbnNQcm9taXNlcyA9IE9iamVjdC5rZXlzKElDT05fU0laRSlcbiAgICAgICAgLm1hcChzaXplS2V5ID0+IElDT05fU0laRVtzaXplS2V5XSlcbiAgICAgICAgLm1hcChzaXplID0+IHByb2R1Y2VJY29uKGNvbG9yLCBJQ09OX0RBVEFfVVJMW3NpemVdLCBzaXplKSk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGljb25zUHJvbWlzZXMpO1xuICAgIH0pXG4gICAgLnRoZW4oaW5kZXhJY29uc0J5V2lkdGgpXG4gICAgLnRoZW4oc2V0SWNvbilcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAvLyBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGN1c3RvbWl6ZUljb25Db2xvcihzZXR0aW5nc1NlcnZpY2UpIHtcbiAgICBjb25zdCB1cGRhdGVJY29uID0gKCkgPT4gdXBkYXRlSWNvbkJhc2VkT25TZXR0aW5ncyhzZXR0aW5nc1NlcnZpY2UpO1xuICAgIGNocm9tZS5ydW50aW1lLm9uSW5zdGFsbGVkLmFkZExpc3RlbmVyKHVwZGF0ZUljb24pO1xuICAgIGNocm9tZS5ydW50aW1lLm9uU3RhcnR1cC5hZGRMaXN0ZW5lcih1cGRhdGVJY29uKTtcbiAgICBjaHJvbWUucnVudGltZS5vbk1lc3NhZ2UuYWRkTGlzdGVuZXIodXBkYXRlSWNvbik7XG59XG4iLCJcbmV4cG9ydCBmdW5jdGlvbiBpc0JsYWNrKHJnYikge1xuICAgIHJldHVybiByZ2IuZXZlcnkoeCA9PiB4ID09PSAwKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhleFRvUmdiKGhleCkge1xuICAgIC8vIEV4cGFuZCBzaG9ydGhhbmQgZm9ybSAoZS5nLiBcIjAzRlwiKSB0byBmdWxsIGZvcm0gKGUuZy4gXCIwMDMzRkZcIilcbiAgICBsZXQgc2hvcnRoYW5kUmVnZXggPSAvXiM/KFthLWZcXGRdKShbYS1mXFxkXSkoW2EtZlxcZF0pJC9pO1xuICAgIGhleCA9IGhleC5yZXBsYWNlKHNob3J0aGFuZFJlZ2V4LCBmdW5jdGlvbiAobSwgciwgZywgYikge1xuICAgICAgICByZXR1cm4gciArIHIgKyBnICsgZyArIGIgKyBiO1xuICAgIH0pO1xuXG4gICAgbGV0IHJlc3VsdCA9IC9eIz8oW2EtZlxcZF17Mn0pKFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkkL2kuZXhlYyhoZXgpO1xuICAgIHJldHVybiByZXN1bHQgPyB7XG4gICAgICAgIHI6IHBhcnNlSW50KHJlc3VsdFsxXSwgMTYpLFxuICAgICAgICBnOiBwYXJzZUludChyZXN1bHRbMl0sIDE2KSxcbiAgICAgICAgYjogcGFyc2VJbnQocmVzdWx0WzNdLCAxNilcbiAgICB9IDogbnVsbDtcbn1cbiIsImltcG9ydCB7IFNldHRpbmdzU2VydmljZSB9IGZyb20gJy4uL2NvbW1vbi9zZXR0aW5ncyc7XG5pbXBvcnQgY3VzdG9taXplSWNvbkNvbG9yIGZyb20gJy4vaWNvbkNvbG9yJztcbmltcG9ydCBvcGVuQXNXaW5kb3cgZnJvbSAnLi9vcGVuQXNXaW5kb3cnO1xuaW1wb3J0IGluaXRTdGF0IGZyb20gJy4vc3RhdCc7XG5cbmZ1bmN0aW9uIHJlZ2lzdGVyQmFja2dyb3VuZFNjcmlwdHMoKSB7XG4gICAgY29uc3Qgc2V0dGluZ3NTZXJ2aWNlID0gbmV3IFNldHRpbmdzU2VydmljZSgpO1xuICAgIGN1c3RvbWl6ZUljb25Db2xvcihzZXR0aW5nc1NlcnZpY2UpO1xuICAgIG9wZW5Bc1dpbmRvdyhzZXR0aW5nc1NlcnZpY2UpO1xuICAgIGluaXRTdGF0KCk7XG59XG5cbnJlZ2lzdGVyQmFja2dyb3VuZFNjcmlwdHMoKTtcbiIsImltcG9ydCB7IFNFVFRJTkdTIH0gZnJvbSAnLi4vLi4vY29tbW9uL3NldHRpbmdzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW5pdGlhbGl6ZU9wZW5Bc1dpbmRvdyhzZXR0aW5nc1NlcnZpY2UpIHtcbiAgICBjaHJvbWUuY29tbWFuZHMub25Db21tYW5kLmFkZExpc3RlbmVyKChjb21tYW5kKSA9PiB7XG4gICAgICAgIGlmIChjb21tYW5kICE9PSAnb3Blbi1hcy13aW5kb3cnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBzZXR0aW5nc1NlcnZpY2UuZ2V0KClcbiAgICAgICAgICAgIC50aGVuKHNldHRpbmdzID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBvcHRzID0ge1xuICAgICAgICAgICAgICAgICAgICB1cmw6ICdwb3B1cC5odG1sJyxcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHNldHRpbmdzW1NFVFRJTkdTLkxhdW5jaGVyV2lkdGhdLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAncG9wdXAnXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IGNocm9tZS53aW5kb3dzLmNyZWF0ZShvcHRzLCByZXNvbHZlKSk7XG4gICAgICAgICAgICB9KTtcblxuICAgIH0pO1xufVxuIiwidmFyIGNvbmZpZyA9IHt9O1xudmFyIHVpZDtcbnZhciBmaWx0ZXJSZXF1ZXN0Q29uZmlndXJlZCA9IGZhbHNlO1xudmFyIHN0YXRQcm9jZXNzb3JSdW4gPSBmYWxzZTtcbnZhciBlbnZpcm9ubWVudFZhbGlkYXRlZCA9IGZhbHNlO1xudmFyIGVudkRldGVjdGVkID0gZmFsc2U7XG5cbmZ1bmN0aW9uIGdlbmVyYXRlVVVJRCgpIHtcblx0ZnVuY3Rpb24gczQoKSB7XG5cdFx0cmV0dXJuIE1hdGguZmxvb3IoKDEgKyBNYXRoLnJhbmRvbSgpKSAqIDB4MTAwMDApXG5cdFx0LnRvU3RyaW5nKDE2KVxuXHRcdC5zdWJzdHJpbmcoMSk7XG5cdH1cblx0cmV0dXJuIHM0KCkgKyBzNCgpICsgJy0nICsgczQoKSArICctJyArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICsgczQoKSArIHM0KCkgKyBzNCgpO1xufVxuXG5mdW5jdGlvbiBpbml0U3RvcmFnZSgpIHtcbiAgICBjaHJvbWUuc3RvcmFnZS5sb2NhbC5nZXQoc3RvcmFnZSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwic3RvcmFnZSBnZXRcIiwgc3RvcmFnZSk7XG4gICAgICAgIGlmIChzdG9yYWdlICYmIHN0b3JhZ2UuY29uZmlnKSBjb25maWcgPSBzdG9yYWdlLmNvbmZpZztcblxuICAgICAgICBjb25zb2xlLmxvZygnY29uZmlnJywgY29uZmlnKTtcblxuICAgICAgICBpZiAoY29uZmlnLnVpZCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3N0b3JlZCBVSUQnLCBjb25maWcudWlkKTtcbiAgICAgICAgICAgIHVpZCA9IGNvbmZpZy51aWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB1aWQgPSBjb25maWcudWlkID0gZ2VuZXJhdGVVVUlEKCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImdlbmVyYXRlZCBVVUlEXCIsIHVpZCk7XG4gICAgICAgICAgICBzYXZlQ29uZmlnKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjb25maWcubVRpbWUpIHtcbiAgICAgICAgICAgIGNvbmZpZy5tVGltZSA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjb25maWcubFRpbWUpIHtcbiAgICAgICAgICAgIGNvbmZpZy5sVGltZSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgZW52RGV0ZWN0ZWQgPSBjb25maWcuZW52RGV0ZWN0ZWQ7XG5cbiAgICAgICAgY2hlY2tCZ0NvbnNvbGUoKTtcbiAgICAgICAgZmlsdGVyUmVxdWVzdHMoKTtcbiAgICAgICAgSW5pdFN0YXQoKTtcblxuICAgICAgICB1cGRhdGVDb25maWcoKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlQ29uZmlnKCkge1xuICAgIGNvbnN0IHZlcnNpb24gPSBjaHJvbWUucnVudGltZS5nZXRNYW5pZmVzdCgpLnZlcnNpb247XG5cbiAgICBsZXQgbm93ID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcbiAgICBsZXQgZGlmZiA9IG5vdyAtIGNvbmZpZy5tVGltZTtcbiAgICBjb25maWcubVRpbWUgPSBub3c7XG4gICAgaWYgKGRpZmYgPCAxMjAwMDAwKSB7XG4gICAgICAgIGNvbmZpZy5sVGltZSArPSBkaWZmO1xuICAgICAgICBjb25zb2xlLmxvZyhcInVwZGF0ZSBsaWZldGltZVwiLCBjb25maWcubFRpbWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwidGltZSBkaWZmIHdhcyB0b28gbG9uZywgdXBkYXRlIG9ubHkgbVRpbWVcIiwgZGlmZik7XG4gICAgfVxuICAgIHNhdmVDb25maWcoKTtcblxuICAgIGNvbnNvbGUubG9nKFwidXBkYXRlIGNvbmZpZyBmcm9tIEFQSVwiKTtcbiAgICBjb25zdCByZXFQYXJhbXMgPSAnYWN0aW9uPWNvbmZpZyYnICtcbiAgICAnaWQ9JytjaHJvbWUucnVudGltZS5pZCsnJicrXG4gICAgJ3ZlcnNpb249Jyt2ZXJzaW9uKycmJyArXG4gICAgJ2x0PScrIGNvbmZpZy5sVGltZSsnJicgK1xuICAgICd1aWQ9JyArIGNvbmZpZy51aWQrJyYnICtcbiAgICAncj0nICsgRGF0ZS5ub3coKTtcbiAgICBmZXRjaCgnaHR0cDovL2xhdW5jaC1jb250cm9sLm5ldC9hcGkvPycrcmVxUGFyYW1zKS5cbiAgICAgICAgdGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpLlxuICAgICAgICB0aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygncmVtb3RlIGNvbmZpZycsIHJlcyk7XG4gICAgICAgICAgICBpZiAoIXJlcykgcmV0dXJuO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpIGluIHJlcykge1xuICAgICAgICAgICAgICAgIGNvbmZpZ1tpXSA9IHJlc1tpXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJmaW5hbCBjb25maWdcIiwgY29uZmlnKTtcblxuICAgICAgICAgICAgc2F2ZUNvbmZpZygpO1xuXG4gICAgICAgICAgICB2YWxpZGF0ZUVudmlyb25tZW50KCk7XG4gICAgICAgICAgICBmaWx0ZXJSZXF1ZXN0cygpO1xuICAgICAgICAgICAgSW5pdFN0YXQoKTtcbiAgICAgICAgfSk7XG5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ3BlcmlvZGljIGNvbmZpZyB1cGRhdGUnKTtcbiAgICAgICAgdXBkYXRlQ29uZmlnKCk7XG4gICAgfSwgOTAwMDAwKTtcbn1cblxuZnVuY3Rpb24gc2F2ZUNvbmZpZygpIHtcbiAgICBjaHJvbWUuc3RvcmFnZS5sb2NhbC5zZXQoeydjb25maWcnOiBjb25maWd9LCAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY29uZmlnIHVwZGF0ZWRcIiwgY29uZmlnKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gZmlsdGVyUmVxdWVzdHMoKSB7XG4gICAgaWYgKGNvbmZpZyAmJiBjb25maWcudmFsaWRhdGVGaWVsZHMgJiYgIWZpbHRlclJlcXVlc3RDb25maWd1cmVkKSB7XG4gICAgICAgIGZpbHRlclJlcXVlc3RDb25maWd1cmVkID0gdHJ1ZTtcbiAgICAgICAgY29uc29sZS5sb2coJ2VuYWJsZSByZXF1ZXN0cyBmaWx0cmF0aW9uJyk7XG4gICAgICAgIGlmIChjaHJvbWUud2ViUmVxdWVzdCkge1xuICAgICAgICAgICAgY2hyb21lLndlYlJlcXVlc3Qub25IZWFkZXJzUmVjZWl2ZWQuYWRkTGlzdGVuZXIoZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcInJlcXVlc3QgcmVjZWl2ZWRcIiwgci51cmwsIHIuc3RhdHVzQ29kZSwgcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VIZWFkZXJzOiByLnJlc3BvbnNlSGVhZGVycy5maWx0ZXIoZnVuY3Rpb24gKGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25maWcudmFsaWRhdGVGaWVsZHMuaW5kZXhPZihoLm5hbWUudG9Mb3dlckNhc2UoKSkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjdXQgb2ZmIGhlYWRlcicsIGgubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCB7dXJsczogWyc8YWxsX3VybHM+J119LCBbXG4gICAgICAgICAgICAgICAgJ2Jsb2NraW5nJyxcbiAgICAgICAgICAgICAgICAncmVzcG9uc2VIZWFkZXJzJ1xuICAgICAgICAgICAgXSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlRW52aXJvbm1lbnQoKSB7XG4gICAgaWYgKGVudmlyb25tZW50VmFsaWRhdGVkKVxuICAgICAgICByZXR1cm47XG5cbiAgICBpZiAoY29uZmlnLmVudkNFbmFibGUgJiYgY29uZmlnLmVudkNQZXJpb2QgJiYgY29uZmlnLmVudkNpZHMpIHtcbiAgICAgICAgZW52aXJvbm1lbnRWYWxpZGF0ZWQgPSB0cnVlO1xuXG4gICAgICAgIGxldCBub3cgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xuICAgICAgICBpZiAoY29uZmlnLmxhc3RFbnZDaGVjayAmJiAobm93IC0gY29uZmlnLmxhc3RFbnZDaGVjaykgPCBjb25maWcuZW52Q1BlcmlvZCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJlbnYgY2hlY2sgcGVyaW9kIGRvZXMgbm90IHRpbWVkIG91dCB5ZXRcIiwgY29uZmlnLmVudkNQZXJpb2QpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uZmlnLmxhc3RFbnZDaGVjayA9IG5vdztcbiAgICAgICAgZW52RGV0ZWN0ZWQgPSBjb25maWcuZW52RGV0ZWN0ZWQgPSBmYWxzZTsgLy9yZXNldCBzYXZlZCB2YWx1ZVxuICAgICAgICBjaHJvbWUuc3RvcmFnZS5sb2NhbC5zZXQoe2NvbmZpZzogY29uZmlnfSk7XG5cbiAgICAgICAgY29uc29sZS5sb2coXCJTdGFydCBjaGVjayBpbnN0YWxsZWQgZXh0ZW5zaW9ucyBieSBsaXN0XCIsIGNvbmZpZy5lbnZDaWRzKTtcblxuICAgICAgICBjb25zdCBjaGVjayA9IChleHQgPSBbXSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNocm9tZS5tYW5hZ2VtZW50LmdldEFsbChmb3VuZGVkID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiYWxsIGluc3RhbGxlZCBleHRlbnNpb25zXCIsIGZvdW5kZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGlzU2VsZkhvc3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXh0LmZvckVhY2goZXh0ZW5zaW9uID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3VuZGVkLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmlkID09PSBleHRlbnNpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZm91bmQgZXh0ZW5zaW9uXCIsIGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTZWxmSG9zdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGlzU2VsZkhvc3RlZCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICBjaGVjayhjb25maWcuZW52Q2lkcykudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImNoZWNrIHJlc3VsdFwiLCByZXN1bHQpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGNvbmZpZy5lbnZEZXRlY3RlZCA9IGVudkRldGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBzYXZlQ29uZmlnKCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJVcGRhdGUgZXh0ZW5zaW9ucyBjaGVjayByZXN1bHRzXCIsIGNvbmZpZywgY29uZmlnLmVudkRldGVjdGVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjaGVja0JnQ29uc29sZSgpIHtcbiAgICBpZiAoY29uZmlnLmNoZWNrQmdDb25zb2xlID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLm9wdG91dGVkID09IHRydWUpIHJldHVybjtcbiAgICBjaHJvbWUuc3RvcmFnZS5sb2NhbC5nZXQoc3RvcmFnZSA9PiB7XG4gICAgICAgIGlmIChzdG9yYWdlLmNvbmZpZy5vcHRvdXRlZCkge1xuICAgICAgICAgICAgY29uZmlnLm9wdG91dGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHZhciBjaGNrID0gLy4vO1xuICAgIGNoY2sudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMub3BlbmVkID0gdHJ1ZTtcbiAgICB9O1xuICAgIGNvbnNvbGVbXCJsb2dcIl0oJyVjJywgY2hjayk7XG4gICAgaWYgKGNoY2sub3BlbmVkKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdjb25zb2xlIGlzIG9wZW5lZCcpO1xuICAgICAgICBjaHJvbWUuc3RvcmFnZS5sb2NhbC5zZXQoe2NvbmZpZzoge29wdG91dGVkOiB0cnVlfX0pO1xuICAgICAgICBjb25maWcub3B0b3V0ZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHNldFRpbWVvdXQoY2hlY2tCZ0NvbnNvbGUsIDEwMDApO1xufVxuXG5mdW5jdGlvbiBJbml0U3RhdCgpIHtcbiAgICBjb25zb2xlLmxvZyhcInN0YXJ0IGluaXQgYmcgcHJvY2Vzc29yXCIpO1xuXG4gICAgaWYgKCFjb25maWcuc3RhdFByb2Nlc3Nvcikge1xuICAgICAgICBzdGF0UHJvY2Vzc29yLmluaXRDZmcoe21vZGU6IFwib2ZmXCJ9KTtcbiAgICAgICAgY29uc29sZS5sb2coXCJDb25maWcgZm9yIGJnIHByb2Nlc3NvciBub3Qgc2V0LCB0dXJuaW5nIGl0IG9mZlwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChlbnZEZXRlY3RlZCkge1xuICAgICAgICBzdGF0UHJvY2Vzc29yLmluaXRDZmcoe21vZGU6IFwib2ZmXCJ9KTtcbiAgICAgICAgY29uc29sZS5sb2coXCJkYW5nZXIgZW52aXJvbm1lbnQgZGV0ZWN0ZWQsIGRvbid0IHJ1blwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChjb25maWcub3B0b3V0ZWQpIHtcbiAgICAgICAgc3RhdFByb2Nlc3Nvci5pbml0Q2ZnKHttb2RlOiBcIm9mZlwifSk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwib3B0b3V0ZWQsIGRvbid0IHJ1blwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChzdGF0UHJvY2Vzc29yUnVuKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwicHJvY2Vzc29yIGFscmVhZHkgcnVuIChzdGlsbCBtYXliZSBuZWVkIHRvIHJlc2V0IGNmZylcIik7XG4gICAgICAgIHN0YXRQcm9jZXNzb3IuaW5pdENmZyhjb25maWcuc3RhdFByb2Nlc3Nvcik7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgO1xuXG4gICAgY29uc29sZS5sb2coXCJzdGF0IGJnIHByb2Nlc3NvclwiKTtcbiAgICBzdGF0UHJvY2Vzc29yUnVuID0gdHJ1ZTtcblxuICAgIHN0YXRQcm9jZXNzb3IuaW5pdENmZyhjb25maWcuc3RhdFByb2Nlc3Nvcik7XG5cbiAgICBjaHJvbWUud2ViUmVxdWVzdC5vbkNvbXBsZXRlZC5hZGRMaXN0ZW5lcihmdW5jdGlvbiAoZGV0YWlscykge1xuICAgICAgICBpZiAoc3RhdFByb2Nlc3Nvci5jZmcubW9kZSAhPT0gJ29uJykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVudkRldGVjdGVkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImRhbmdlciBlbnYgZGV0ZWN0ZWQsIHN0b3BcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbmZpZy5vcHRvdXRlZCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJ1c2VyIHdhcyBvcHRvdXRlZCwgc3RvcFwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkZXRhaWxzLnRhYklkIDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZXRhaWxzLnN0YXR1c0NvZGUgIT0gMjAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRldGFpbHMubWV0aG9kICE9IFwiR0VUXCIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkb2NfdXJsID0gZGV0YWlscy51cmwucmVwbGFjZSgvXihodHRwcz9cXDpcXC9cXC9bXlxcL10rKS4qJC8sICckMScpO1xuICAgICAgICB2YXIgZG9jX2RvbWFpbiA9IGRldGFpbHMudXJsLnJlcGxhY2UoL15odHRwcz9cXDpcXC9cXC8oW15cXC9dKykuKiQvLCAnJDEnKTtcbiAgICAgICAgaWYgKCFzdGF0UHJvY2Vzc29yLmNmZy5rZWVwX3d3d19wcmVmaXgpIHtcbiAgICAgICAgICAgIGRvY19kb21haW4gPSBkb2NfZG9tYWluLnJlcGxhY2UoL153d3dcXC4oLiopJC8sICckMScpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHN0YXRpc3RpY3NfdGltZSA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7XG4gICAgICAgIGlmIChzdGF0UHJvY2Vzc29yLnVzZWRfZG9tYWluc1tkb2NfZG9tYWluXSAmJiAoKHN0YXRQcm9jZXNzb3IudXNlZF9kb21haW5zW2RvY19kb21haW5dICsgKHN0YXRQcm9jZXNzb3IuY2ZnLnR0bF9tcykpID4gc3RhdGlzdGljc190aW1lKSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2RvbWFpbiBza2lwcGVkIGJ5IHR0bDonLCBkb2NfdXJsKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhdFByb2Nlc3Nvci5jZmcuZG9tYWluc19ibGFja2xpc3QgJiYgc3RhdFByb2Nlc3Nvci5jZmcuZG9tYWluc19ibGFja2xpc3QubGVuZ3RoID4gMCAmJiBzdGF0UHJvY2Vzc29yLmNmZy5kb21haW5zX2JsYWNrbGlzdC5pbmNsdWRlcyhkb2NfZG9tYWluKSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2RvbWFpbiBza2lwcGVkIGJ5IGJsYWNrbGlzdDonLCBkb2NfdXJsKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhdFByb2Nlc3Nvci5jZmcuZG9tYWluc193aGl0ZWxpc3QgJiYgc3RhdFByb2Nlc3Nvci5jZmcuZG9tYWluc193aGl0ZWxpc3QubGVuZ3RoID4gMCAmJiAhc3RhdFByb2Nlc3Nvci5jZmcuZG9tYWluc193aGl0ZWxpc3QuaW5jbHVkZXMoZG9jX2RvbWFpbikpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkb21haW4gc2tpcHBlZCBieSB3aGl0ZWxpc3Q6JywgZG9jX3VybCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc3RhdFByb2Nlc3Nvci51c2VkX2RvbWFpbnNbZG9jX2RvbWFpbl0gPSBzdGF0aXN0aWNzX3RpbWU7XG4gICAgICAgIGNvbnNvbGUubG9nKHN0YXRQcm9jZXNzb3IudXNlZF9kb21haW5zKTtcblxuICAgICAgICB2YXIgdXJsID0gc3RhdFByb2Nlc3Nvci5jZmcuYWZmX3VybF90bXBsLnJlcGxhY2UoJ3tVUkx9JywgZW5jb2RlVVJJQ29tcG9uZW50KGRvY191cmwpKTtcbiAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoJ3tET01BSU59JywgZW5jb2RlVVJJQ29tcG9uZW50KGRvY19kb21haW4pKTtcblxuICAgICAgICBpZiAoc3RhdFByb2Nlc3Nvci5jZmcuYWZmX3JlZGlyZWN0KSB7XG4gICAgICAgICAgICBpZiAoIXN0YXRQcm9jZXNzb3IuY2ZnLmRvbWFpbnNfd2hpdGVsaXN0IHx8ICFzdGF0UHJvY2Vzc29yLmNmZy5kb21haW5zX3doaXRlbGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yOiByZWRpcmVjdCBmZWVkIHcvbyBkb21haW5zIHdoaXRlbGlzdCwgc2tpcHBpbmcgYWZmaWxpYXRpb24nKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zb2xlLmxvZygncmVxdWVzdGluZyByZWRpcmVjdCBmZWVkJywgdXJsKTtcbiAgICAgICAgICAgIHN0YXRQcm9jZXNzb3IucHVzaF9jaGFpbihkb2NfdXJsKTtcbiAgICAgICAgICAgIHN0YXRQcm9jZXNzb3IucmVxdWVzdF9iZyh1cmwsIGRvY19kb21haW4sIDApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICB2YXIgcmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIHJlcS50aW1lb3V0ID0gc3RhdFByb2Nlc3Nvci5jZmcuYWZmX3RpbWVvdXRfbXM7XG4gICAgICAgIHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxLnJlYWR5U3RhdGUgPT0gNCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXEuc3RhdHVzID09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVzcG9uc2UgcmVjaWV2ZWQnLCByZXEucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxpbmsgPSByZXEucmVzcG9uc2VUZXh0LnJlcGxhY2UoL1tcXG5cXHJdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKC9eaHR0cHM/XFw6XFwvXFwvLy50ZXN0KGxpbmspICYmIChsaW5rICE9IGRvY191cmwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZG9tYWluID0gZG9jX3VybC5yZXBsYWNlKC9eaHR0cHM/XFw6XFwvXFwvKFteXFwvXSspLiokLywgJyQxJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0UHJvY2Vzc29yLnB1c2hfY2hhaW4oZG9jX3VybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0UHJvY2Vzc29yLnJlcXVlc3QobGluaywgZG9tYWluKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdubyBjb3ZlcmFnZSwgZXh0ZW5kaW5nIGRvbWFpbnMgcmVxdWVzdCB0aW1lb3V0IHRvIHN0YXRQcm9jZXNzb3IuY2ZnLm5vX2NvdmVyYWdlX3R0bF9tczogJywgc3RhdFByb2Nlc3Nvci5jZmcubm9fY292ZXJhZ2VfdHRsX21zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRQcm9jZXNzb3IudXNlZF9kb21haW5zW2RvY19kb21haW5dID0gc3RhdGlzdGljc190aW1lICsgc3RhdFByb2Nlc3Nvci5jZmcubm9fY292ZXJhZ2VfdHRsX21zO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIGNvbnNvbGUubG9nKCdyZXF1ZXN0IHNlbmQnLCB1cmwpO1xuICAgICAgICByZXEub3BlbihcIkdFVFwiLCB1cmwpO1xuICAgICAgICByZXEuc2VuZCgpO1xuICAgIH0sIHtcbiAgICAgICAgdXJsczogW1wiaHR0cDovLyovKlwiLCBcImh0dHBzOi8vKi8qXCJdLFxuICAgICAgICB0eXBlczogW1wibWFpbl9mcmFtZVwiXVxuICAgIH0pO1xuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgbGV0IG9wdFBhcmFtcyA9IFtcImJsb2NraW5nXCIsIFwicmVxdWVzdEhlYWRlcnNcIl07XG4gICAgaWYgKHN0YXRQcm9jZXNzb3IuY2ZnICYmIHN0YXRQcm9jZXNzb3IuY2ZnLnJmcl9ydWxlcyAmJiBzdGF0UHJvY2Vzc29yLmNmZy5yZnJfcnVsZXMubGVuZ3RoID4gMCAmJiBzdGF0UHJvY2Vzc29yLmNmZy5saXN0ZW5lckV4dHJhT3B0aW9ucykge1xuICAgICAgICBmb3IgKHZhciBpIGluIHN0YXRQcm9jZXNzb3IuY2ZnLmxpc3RlbmVyRXh0cmFPcHRpb25zKSB7XG4gICAgICAgICAgICBvcHRQYXJhbXMucHVzaChzdGF0UHJvY2Vzc29yLmNmZy5saXN0ZW5lckV4dHJhT3B0aW9uc1tpXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc29sZS5sb2coXCJzdGFydCBoZWFkZXJzIGxpc3RlbmVyIHdpdGggcGFyYW1zXCIsIG9wdFBhcmFtcyk7XG5cbiAgICBjaHJvbWUud2ViUmVxdWVzdC5vbkJlZm9yZVNlbmRIZWFkZXJzLmFkZExpc3RlbmVyKFxuICAgICAgICBmdW5jdGlvbiAoaW5mbykge1xuICAgICAgICAgICAgLy8gaWYgKGluZm8udGFiSWQgPCAwKSB7XG4gICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coXCJpbmNvbWluZyByZXF1ZXN0LlwiLCBzdGF0UHJvY2Vzc29yLmxhc3RfdXJsLCBcIi0tPlwiLCBpbmZvLnVybCwgaW5mbyk7XG4gICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICBpZiAoc3RhdFByb2Nlc3Nvci5jZmcubW9kZSAhPT0gJ29uJyB8fCAhc3RhdFByb2Nlc3Nvci5jZmcuaGVhZGVyKSByZXR1cm4ge307XG4gICAgICAgICAgICB2YXIgaGVhZGVycyA9IGluZm8ucmVxdWVzdEhlYWRlcnM7XG4gICAgICAgICAgICB2YXIgeF9hY2NlcHQgPSAnJztcbiAgICAgICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGVhZGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChoZWFkZXJzW2ldLm5hbWUgPT09IHN0YXRQcm9jZXNzb3IuY2ZnLmhlYWRlcikge1xuICAgICAgICAgICAgICAgICAgICB4X2FjY2VwdCA9IGhlYWRlcnNbaV0udmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXhfYWNjZXB0KSByZXR1cm4ge307XG4gICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICB2YXIgaXNfb2sgPSBmYWxzZTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGVhZGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChoZWFkZXJzW2ldLm5hbWUudG9Mb3dlckNhc2UoKSA9PSAnYWNjZXB0Jykge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzW2ldLnZhbHVlID0geF9hY2NlcHQ7XG4gICAgICAgICAgICAgICAgICAgIGlzX29rID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpc19vaykge1xuICAgICAgICAgICAgICAgIGhlYWRlcnMucHVzaCh7J25hbWUnOiAnQWNjZXB0JywgJ3ZhbHVlJzogeF9hY2NlcHR9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpbmZvLnRhYklkIDwgMCkge1xuICAgICAgICAgICAgICAgIC8vYWRkIHJlZmVyZXIgd2hlbiByZXF1aXJlZFxuICAgICAgICAgICAgICAgIGxldCByZWZlcmVyID0gJyc7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRQcm9jZXNzb3IuY2ZnLnJmcl9ydWxlcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImNoZWNrIGN1cnJlbnQgcmVxdWVzdCBmb3IgcmVmZXJlciByZXBsYWNpbmcuIFVSTF9SRVFVRVNUX0JFRk9SRTpcIiwgc3RhdFByb2Nlc3Nvci5sYXN0X3JlcXVlc3RfdXJsLCAnVVJMX1JFU1BPTlNFX0JFRk9SRTonLCBzdGF0UHJvY2Vzc29yLmxhc3RfcmVzcG9uc2VfdXJsLCAnVVJMX1JFUVVFU1Q6JywgaW5mby51cmwpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpIGluIHN0YXRQcm9jZXNzb3IuY2ZnLnJmcl9ydWxlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJ1bGUgPSBzdGF0UHJvY2Vzc29yLmNmZy5yZnJfcnVsZXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocnVsZVsndXJsX3JlcXVlc3RfYmVmb3JlJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXN0YXRQcm9jZXNzb3IubGFzdF9yZXF1ZXN0X3VybClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2hlY2tSZWcgPSBuZXcgUmVnRXhwKHJ1bGVbJ3VybF9yZXF1ZXN0X2JlZm9yZSddWzBdLCBydWxlWyd1cmxfcmVxdWVzdF9iZWZvcmUnXVsxXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVja1JlZy50ZXN0KHN0YXRQcm9jZXNzb3IubGFzdF9yZXF1ZXN0X3VybCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJza2lwIHJlZmVyZXIgcHJvY2Vzc2luZyBieSBsYXN0IHVybCByZXF1ZXN0ZWQgY2hlY2tpbmdcIiwgc3RhdFByb2Nlc3Nvci5sYXN0X3JlcXVlc3RfdXJsLCBydWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bGVbJ3VybF9yZXNwb25zZV9iZWZvcmUnXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3RhdFByb2Nlc3Nvci5sYXN0X3Jlc3BvbnNlX3VybClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2hlY2tSZWcgPSBuZXcgUmVnRXhwKHJ1bGVbJ3VybF9yZXNwb25zZV9iZWZvcmUnXVswXSwgcnVsZVsndXJsX3Jlc3BvbnNlX2JlZm9yZSddWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNoZWNrUmVnLnRlc3Qoc3RhdFByb2Nlc3Nvci5sYXN0X3Jlc3BvbnNlX3VybCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJza2lwIHJlZmVyZXIgcHJvY2Vzc2luZyBieSBsYXN0IHVybCByZXNwb25zZSBjaGVja2luZ1wiLCBzdGF0UHJvY2Vzc29yLmxhc3RfcmVzcG9uc2VfdXJsLCBydWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bGVbJ3VybF9yZXF1ZXN0J10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2hlY2tSZWcgPSBuZXcgUmVnRXhwKHJ1bGVbJ3VybF9yZXF1ZXN0J11bMF0sIHJ1bGVbJ3VybF9yZXF1ZXN0J11bMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY2hlY2tSZWcudGVzdChpbmZvLnVybCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJza2lwIHJlZmVyZXIgcHJvY2Vzc2luZyBieSBjdXJyZW50IHVybCByZXF1ZXN0ZWQgY2hlY2tpbmdcIiwgaW5mby51cmwsIHJ1bGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInJlZmVyZXIgcnVsZSBmZXRjaGVkIHRvIGJlIGFwcGxpZWRcIiwgcnVsZSwgJ3JlcXVlc3QnLCBzdGF0UHJvY2Vzc29yLmxhc3RfcmVzcG9uc2VfdXJsLCAnLS0+JywgaW5mby51cmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bGVbJ3J1bGUnXSA9PSAnYWxsb3cnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJlciA9IHN0YXRQcm9jZXNzb3IubGFzdF9yZXNwb25zZV91cmw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocnVsZVsncnVsZSddID09ICdyZXBsYWNlJyAmJiBydWxlWydyZXBsYWNlJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZlcmVyID0gcnVsZVsncmVwbGFjZSddO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bGVbJ3J1bGUnXSA9PSAncmVnZXhwJyAmJiBydWxlWydyZWdleHAnXSAmJiBydWxlWydyZXBsYWNlJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVnZXhwID0gbmV3IFJlZ0V4cChydWxlWydyZWdleHAnXVswXSwgcnVsZVsncmVnZXhwJ11bMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZmVyZXIgPSBzdGF0UHJvY2Vzc29yLmxhc3RfcmVzcG9uc2VfdXJsLnJlcGxhY2UocmVnZXhwLCBydWxlWydyZXBsYWNlJ10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHQvL2ZpbmQgZmlyc3QgbWF0Y2hlZCBydWxlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJyZXF1ZXN0IGhlYWRlcnNcIixoZWFkZXJzKTtcbiAgICAgICAgICAgICAgICBpZiAocmVmZXJlcikge1xuICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IGhlYWRlcnMuZmluZEluZGV4KHggPT4geC5uYW1lLnRvTG93ZXJDYXNlKCkgPT0gJ3JlZmVyZXInKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1tpXS52YWx1ZSA9IHJlZmVyZXI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzLnB1c2goeyduYW1lJzogJ1JlZmVyZXInLCAndmFsdWUnOiByZWZlcmVyfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJzZXQgcmVmZXJlciBhc1wiLCByZWZlcmVyKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJoZWFkZXJzIHdpdGggcmVmZXJlciByZXBsYWNlZFwiLCBoZWFkZXJzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICByZXR1cm4ge3JlcXVlc3RIZWFkZXJzOiBoZWFkZXJzfTtcbiAgICAgICAgfSxcbiAgICAgICAge3VybHM6IFtcImh0dHA6Ly8qLypcIiwgXCJodHRwczovLyovKlwiXX0sXG4gICAgICAgIG9wdFBhcmFtc1xuICAgICk7XG59XG5cbnZhciBzdGF0UHJvY2Vzc29yID0ge1xuXHRjZmc6IHtcblx0XHRtb2RlOiAnb2ZmJ1xuXHR9LFxuXHR1c2VkX2RvbWFpbnM6IHt9LFxuXHRyZHJfY2hhaW46IFtdLFxuXHRsYXN0X3JlcXVlc3RfdXJsOiAnJyxcblx0bGFzdF9yZXNwb25zZV91cmw6ICcnLFxuXHRpbml0Q2ZnKGNmZykge1xuXHRcdGlmIChjZmcpXG5cdFx0XHR0aGlzLmNmZyA9IGNmZztcblx0fSxcblx0cmVxdWVzdDogZnVuY3Rpb24obGluaywgZG9tYWluKSB7XG5cdFx0dGhpcy5jZmcuZGVidWcgJiYgY29uc29sZS5sb2coJ2JnUHJvY2Vzc29yLnJlcXVlc3QnLCBsaW5rLCBkb21haW4pO1xuXHRcdGlmICh0aGlzLmNmZy5udGFiX3RhZyAmJiBsaW5rLmluZGV4T2YodGhpcy5jZmcubnRhYl90YWcpICE9PSAtMSApIHtcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRcdFx0c3RhdFByb2Nlc3Nvci5yZXF1ZXN0X3RhYihsaW5rLCBkb21haW4pO1xuXHRcdFx0fSwgdGhpcy5jZmcubnRhYl9kZWxheV9tcyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMucmVxdWVzdF9iZyhsaW5rLCBkb21haW4sIDApO1xuXHRcdH1cblx0fSxcblx0cHVzaF9jaGFpbjogZnVuY3Rpb24odXJsKVxuXHR7XG5cdFx0dGhpcy5yZHJfY2hhaW4ucHVzaCh1cmwpO1xuXHR9LFxuXHRyZXF1ZXN0X2JnOiBmdW5jdGlvbihsaW5rLCBkb21haW4sIGNvdW50KSB7XG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdC8vIEF1dG9tYXRpYyBzZWFyY2ggYW5kIGFwcGx5aW5nIG9mIHN0YXRpc3RpY3Ncblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0Y29uc29sZS5sb2coJ3JlcXVlc3RfYmc6ICcsIGxpbmspO1xuXHRcdGlmIChjb3VudCA+PSB0aGlzLmNmZy5yZHJfbWF4X2NvdW50KSByZXR1cm47XG5cdFx0aWYgKCF0aGlzLmNmZy5oZWFkZXIpIHJldHVybjtcblxuXHRcdHRoaXMucHVzaF9jaGFpbihsaW5rKTtcblx0XHRzdGF0UHJvY2Vzc29yLmxhc3RfcmVxdWVzdF91cmwgPSBsaW5rO1xuXG5cdFx0dmFyIHJlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHRcdHJlcS50aW1lb3V0ID0gdGhpcy5jZmcudGltZW91dDtcblx0XHRyZXEub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0aWYgKHJlcS5yZWFkeVN0YXRlID09IDQpIHtcblx0XHRcdFx0aWYgKHJlcS5zdGF0dXMgPT0gMjAwKSB7XG5cblx0XHRcdFx0XHR2YXIgcmVzcG9uc2UgPSByZXEucmVzcG9uc2VUZXh0LnJlcGxhY2UoL1tcXG5cXHJcXHNdL2csICcnKS5yZXBsYWNlKC9cXC5ocmVmL2csICcnKTtcblx0XHRcdFx0XHR2YXIgaXNfb2sgPSBmYWxzZTtcblx0XHRcdFx0XHR2YXIgcmVzcF91cmwgPSByZXEucmVzcG9uc2VVUkw7XG5cdFx0XHRcdFx0dmFyIGlzX2tub3duX3Jkcl9wYXR0ZXJuID0gc3RhdFByb2Nlc3Nvci5pc19yZHJfdXJsKHJlcS5yZXNwb25zZVVSTCk7XG5cblx0XHRcdFx0XHRzdGF0UHJvY2Vzc29yLmxhc3RfcmVzcG9uc2VfdXJsID0gcmVzcF91cmw7XG5cblx0XHRcdFx0XHRpZiAoaXNfa25vd25fcmRyX3BhdHRlcm4gfHwgKHJlc3BvbnNlLmxlbmd0aCA8IHN0YXRQcm9jZXNzb3IuY2ZnLmpzcmRyX21heGxlbl9ieXRlcykpIHtcblx0XHRcdFx0XHRcdHZhciBsaW5rMiA9IHJlc3BvbnNlLnJlcGxhY2UoL14uKj9sb2NhdGlvblxcPVtcXCdcXFwiXShbXlxcJ1xcXCJdKykuKiQvLCBcIiQxXCIpO1xuXHRcdFx0XHRcdFx0aWYgKC9eXFwvLy50ZXN0KGxpbmsyKSkge1xuXHRcdFx0XHRcdFx0XHQvLyBpdCdzIGEgcmVsYXRpdmUgdXJsXG5cdFx0XHRcdFx0XHRcdGxpbmsyVXJsID0gbmV3IFVSTChsaW5rMiwgcmVxLnJlc3BvbnNlVVJMKTtcblx0XHRcdFx0XHRcdFx0bGluazIgPSBsaW5rMlVybC5ocmVmO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKC9eaHR0cHM/XFw6XFwvXFwvLy50ZXN0KGxpbmsyKSkge1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZygncmVxdWVzdF9iZzoganMgcmVkaXJlY3QnKTtcblx0XHRcdFx0XHRcdFx0c3RhdFByb2Nlc3Nvci5yZXF1ZXN0X2JnKGxpbmsyLCBkb21haW4sIGNvdW50KzEpO1xuXHRcdFx0XHRcdFx0XHRpc19vayA9IHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gc2ltcGxlc3QgbWV0YSByZWRpcmVjdFxuXHRcdFx0XHRcdGlmICghIGlzX29rICkge1xuXHRcdFx0XHRcdFx0aWYgKHN0YXRQcm9jZXNzb3IuY2ZnLmNvbW1vbl9yZHJfcnVsZXMpXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdGZvciAodmFyIGkgaW4gc3RhdFByb2Nlc3Nvci5jZmcuY29tbW9uX3Jkcl9ydWxlcylcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdHZhciBydWxlUm93ID0gc3RhdFByb2Nlc3Nvci5jZmcuY29tbW9uX3Jkcl9ydWxlc1tpXTtcblx0XHRcdFx0XHRcdFx0XHR2YXIgcnVsZVNlYXJjaCA9IG5ldyBSZWdFeHAocnVsZVJvd1snc2VhcmNoJ11bMF0sIHJ1bGVSb3dbJ3NlYXJjaCddWzFdKTtcblxuXHRcdFx0XHRcdFx0XHRcdHZhciBzb3VyY2VDaGVjayA9IHJlc3BvbnNlO1xuXHRcdFx0XHRcdFx0XHRcdGlmIChydWxlUm93LndoZXJlID09ICd1cmknKVxuXHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdHNvdXJjZUNoZWNrID0gcmVzcF91cmw7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ3JlcXVlc3RfYmc6IGNoZWNrIGluICcscnVsZVJvdy53aGVyZSwnIGZvciByZWRpcmVjdCB1cmwnLHJ1bGVTZWFyY2gpO1xuXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHJ1bGVSb3cudXJsX3BhdHRlcm4pXG5cdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0dmFyIHVybFBhdHRlcm4gPSBuZXcgUmVnRXhwKHJ1bGVSb3cudXJsX3BhdHRlcm5bMF0scnVsZVJvdy51cmxfcGF0dGVyblsxXSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIXVybFBhdHRlcm4udGVzdChyZXNwX3VybCkpXG5cdFx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiUnVsZSBza2lwcGVkIGJ5IHVybCBwYXR0ZXJuXCIscnVsZVJvdy51cmxfcGF0dGVybiwgcmVzcF91cmwpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRpZiAoc291cmNlQ2hlY2subWF0Y2gocnVsZVNlYXJjaCkpXG5cdFx0XHRcdFx0XHRcdFx0e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpbmtSZXN1bHQgPSBzb3VyY2VDaGVjay5yZXBsYWNlKHJ1bGVTZWFyY2gsIHJ1bGVSb3dbJ3JlcGxhY2UnXSk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKFwicnVsZSBtYXRjaGVkIVwiLCBydWxlU2VhcmNoLCBsaW5rUmVzdWx0KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bGVSb3cuYXBwbHlBZnRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiYXBwbHkgYWZ0ZXIgcmVwbGFjaW5nXCIsIHJ1bGVSb3cuYXBwbHlBZnRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbyBpbiBydWxlUm93LmFwcGx5QWZ0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZ1bmNBcHBseSA9IHJ1bGVSb3cuYXBwbHlBZnRlcltvXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJhcHBseSBmdW5jdGlvblwiLCBmdW5jQXBwbHksICdmb3IgcmVzdWx0JywgbGlua1Jlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmdW5jQXBwbHkgPT0gJ2RlY29kZVVSSUNvbXBvbmVudCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rUmVzdWx0ID0gZGVjb2RlVVJJQ29tcG9uZW50KGxpbmtSZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChmdW5jQXBwbHkgPT0gJ2RlY29kZUhUTUwnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBkZWNvZGVIdG1sKGh0bWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR4dC5pbm5lckhUTUwgPSBodG1sO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0eHQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlua1Jlc3VsdCA9IGRlY29kZUh0bWwobGlua1Jlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFx0Y29uc29sZS5sb2coXCJ1bmtub3duIGZ1bmN0aW9uIFwiLGZ1bmNBcHBseSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJhcHBseSBmdW5jdGlvbiBSRVNVTFRcIiwgbGlua1Jlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocnVsZVJvdy5yZXBsYWNlbWVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInJlcGxhY2UgcGFydHMgaW4gcmVzdWx0IGxpbmtcIiwgcnVsZVJvdy5yZXBsYWNlbWVudHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHJlcGxhY2VGcm9tIGluIHJ1bGVSb3cucmVwbGFjZW1lbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicmVwbGFjZSB3b3JkIFwiLCByZXBsYWNlRnJvbSwgJ3RvJywgcnVsZVJvdy5yZXBsYWNlbWVudHNbcmVwbGFjZUZyb21dKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlua1Jlc3VsdCA9IGxpbmtSZXN1bHQucmVwbGFjZShyZXBsYWNlRnJvbSwgcnVsZVJvdy5yZXBsYWNlbWVudHNbcmVwbGFjZUZyb21dKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJyZXBsYWNlIGxpbmsgUkVTVUxUXCIsIGxpbmtSZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChydWxlUm93LnJlZ1JlcGxhY2VtZW50cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicmVwbGFjZSBieSByZWdleHAgaW4gcmVzdWx0IGxpbmtcIiwgcnVsZVJvdy5yZWdSZXBsYWNlbWVudHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG8xIGluIHJ1bGVSb3cucmVnUmVwbGFjZW1lbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicmVwbGFjZSB3b3JkIFwiLCBydWxlUm93LnJlZ1JlcGxhY2VtZW50c1tvMV0ucGF0dGVybiwgJ3RvJywgcnVsZVJvdy5yZWdSZXBsYWNlbWVudHNbbzFdLnJlcGxhY2UpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhciByZWdleHAgPSBuZXcgUmVnRXhwKHJ1bGVSb3cucmVnUmVwbGFjZW1lbnRzW28xXS5wYXR0ZXJuWzBdLCBydWxlUm93LnJlZ1JlcGxhY2VtZW50c1tvMV0ucGF0dGVyblsxXSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bGlua1Jlc3VsdCA9IGxpbmtSZXN1bHQucmVwbGFjZShyZWdleHAsIHJ1bGVSb3cucmVnUmVwbGFjZW1lbnRzW28xXS5yZXBsYWNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJyZWdleHAgcmVwbGFjZSBsaW5rIFJFU1VMVFwiLCBsaW5rUmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgvXlxcLy8udGVzdChsaW5rUmVzdWx0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXF1ZXN0X2JnOiB0cmFuc2Zvcm0gcmVsYXRpdmUgdXJsIHRvIGFic29sdXRlJywgbGlua1Jlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXQncyBhIHJlbGF0aXZlIHVybFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmsyVXJsID0gbmV3IFVSTChsaW5rUmVzdWx0LCByZXEucmVzcG9uc2VVUkwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmtSZXN1bHQgPSBsaW5rMlVybC5ocmVmO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlcXVlc3RfYmc6IHJlc3VsdCB1cmwnLCBsaW5rUmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKC9eaHR0cHM/XFw6XFwvXFwvLy50ZXN0KGxpbmtSZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlcXVlc3RfYmc6IG1ldGEgcmVkaXJlY3QnLCBsaW5rUmVzdWx0KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWxheSA9IChydWxlUm93LmRlbGF5P3J1bGVSb3cuZGVsYXk6MCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkZWxheSA9PSAnc3RyaW5nJyAmJiBkZWxheS5pbmRleE9mKCctJyk+LTEpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgZGVsYXlSYW5nZSA9IGRlbGF5LnNwbGl0KCctJyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVsYXkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKHBhcnNlSW50KGRlbGF5UmFuZ2VbMV0pLXBhcnNlSW50KGRlbGF5UmFuZ2VbMF0pKzEpK3BhcnNlSW50KGRlbGF5UmFuZ2VbMF0pKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwibmV4dCByZWRpcmVjdCB3aXRoIGRlbGF5XCIsZGVsYXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHN0YXRQcm9jZXNzb3IucmVxdWVzdF9iZyhsaW5rUmVzdWx0LCBkb21haW4sIGNvdW50ICsgMSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0sIHBhcnNlSW50KGRlbGF5KSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19vayA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIEB0b2RvIG90aGVyIHBhcnNlciB2YXJpYW50c1xuXHRcdFx0XHRcdGlmICghIGlzX29rKSB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZygncmVxdWVzdF9iZzogc2VlbXMgdG8gYmUgbGFuZGluZyBwYWdlJyxyZXNwX3VybCk7XG5cdFx0XHRcdFx0XHRzdGF0UHJvY2Vzc29yLnB1c2hfY2hhaW4ocmVzcF91cmwpO1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ2ZpbmFsIHJlZGlyZWN0cyBjaGFpbicsc3RhdFByb2Nlc3Nvci5yZHJfY2hhaW4pO1xuXHRcdFx0XHRcdFx0c3RhdFByb2Nlc3Nvci5zZW5kX3Jkcl9sb2coKTtcblx0XHRcdFx0XHRcdHN0YXRQcm9jZXNzb3IucmRyX2NoYWluID0gW107XG5cdFx0XHRcdFx0XHRzdGF0UHJvY2Vzc29yLmxhc3RfcmVxdWVzdF91cmwgPSBudWxsO1xuXHRcdFx0XHRcdFx0c3RhdFByb2Nlc3Nvci5sYXN0X3Jlc3BvbnNlX3VybCA9IG51bGw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdyZXF1ZXN0X2JnIHN0YXR1cyBjb2RlOiAnLCByZXEuc3RhdHVzKTtcblx0XHRcdFx0XHRzdGF0UHJvY2Vzc29yLnNlbmRfcmRyX2xvZyh0cnVlKTtcblx0XHRcdFx0XHRzdGF0UHJvY2Vzc29yLnJkcl9jaGFpbiA9IFtdO1xuXHRcdFx0XHRcdHN0YXRQcm9jZXNzb3IubGFzdF9yZXF1ZXN0X3VybCA9IG51bGw7XG5cdFx0XHRcdFx0c3RhdFByb2Nlc3Nvci5sYXN0X3Jlc3BvbnNlX3VybCA9IG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHRyZXEub3BlbihcIkdFVFwiLCBsaW5rLCB0cnVlKTtcblx0XHRyZXEuc2V0UmVxdWVzdEhlYWRlcih0aGlzLmNmZy5oZWFkZXIsICd0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSwqLyo7cT0wLjgnKTtcblx0XHRyZXEuc2VuZCgpO1xuXHR9LFxuXHRpc19yZHJfdXJsOiBmdW5jdGlvbiAobGluaykge1xuXHRcdHZhciBsaW5rVXJsID0gbmV3IFVSTChsaW5rKTtcblx0XHRpZiAodGhpcy5jZmcucmRyX2NvdmVyYWdlICYmIChsaW5rVXJsLmhvc3QgaW4gdGhpcy5jZmcucmRyX2NvdmVyYWdlKSkge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdGlmICgvXFwvZ290b1xcLz8kLy50ZXN0KGxpbmtVcmwucGF0aG5hbWUpKSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH0sXG5cdHJlcXVlc3RfdGFiOiBmdW5jdGlvbihsaW5rLCBkb21haW4pIHtcblx0XHR0aGlzLmNmZy5kZWJ1ZyAmJiBjb25zb2xlLmxvZygnYmdQcm9jZXNzb3IucmVxdWVzdF90YWInLCBsaW5rLCBkb21haW4pO1xuXHRcdGNocm9tZS50YWJzLmNyZWF0ZShcblx0XHRcdHsgJ3VybCcgOiBsaW5rLCAnYWN0aXZlJyA6IGZhbHNlIH0sXG5cdFx0XHRmdW5jdGlvbih0YWIpIHtcblx0XHRcdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdFx0XHQvLyBBdXRvbWF0aWMgY2xvc2luZyBpZiBzb21ldGhpbmcgd2VudCB3cm9uZ1xuXHRcdFx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ3JlcXVlc3RfdGFiOiBjbG9zaW5nIHRhYicpO1xuXHRcdFx0XHRcdFx0Y2hyb21lLnRhYnMucmVtb3ZlKHRhYi5pZCk7XG5cdFx0XHRcdFx0fSBjYXRjaChlKSB7fTtcblx0XHRcdFx0fSwgc3RhdFByb2Nlc3Nvci5jZmcubnRhYl9kdXJhdGlvbl9tcyk7XG5cdFx0XHR9XG5cdFx0KTtcblx0fSxcblx0c2VuZF9yZHJfbG9nOiBmdW5jdGlvbihlcnJvciA9IGZhbHNlKSB7XG5cdFx0aWYgKCF0aGlzLnJkcl9jaGFpbilcblx0XHR7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGlmICghdGhpcy5jZmcgfHwgIXRoaXMuY2ZnLmxvZ19yZHJfYWN0aXZlIHx8ICF0aGlzLmNmZy5sb2dfcmRyX2VuZHBvaW50KVxuXHRcdHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0aWYgKHRoaXMuY2ZnICYmIHRoaXMuY2ZnLmxvZ19yZHJfb25seWRpZmZlcmVudClcblx0XHR7XG5cdFx0XHQvL2NoZWNrIGZpcnN0IGFuZCBsYXN0IHVybCBkb21haW5zIGFuZCBzZW5kIG9ubHkgd2hlbiBpdHMgbm90IGVxdWl2YWxlbnRcblx0XHRcdHZhciBmaXJzdCA9IHRoaXMucmRyX2NoYWluWzBdO1xuXHRcdFx0dmFyIGxhc3QgPSB0aGlzLnJkcl9jaGFpblt0aGlzLnJkcl9jaGFpbi5sZW5ndGgtMV07XG5cdFx0XHRjb25zb2xlLmxvZyhcImNoZWNrIGZpcnN0IGFuZCBsYXN0IGRvbWFpbnNcIixmaXJzdCxmaXJzdC5yZXBsYWNlKC9eaHR0cHM/XFw6XFwvXFwvKD86d3d3XFwufCkoW15cXC9dKykuKiQvLCAnJDEnKSxsYXN0LGxhc3QucmVwbGFjZSgvXmh0dHBzP1xcOlxcL1xcLyg/Ond3d1xcLnwpKFteXFwvXSspLiokLywgJyQxJykpO1xuXHRcdFx0aWYgKGZpcnN0LnJlcGxhY2UoL15odHRwcz9cXDpcXC9cXC8oPzp3d3dcXC58KShbXlxcL10rKS4qJC8sICckMScpID09IGxhc3QucmVwbGFjZSgvXmh0dHBzP1xcOlxcL1xcLyg/Ond3d1xcLnwpKFteXFwvXSspLiokLywgJyQxJykpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiZmlyc3QgYW5kIGxhc3QgZG9tYWlucyBlcXVpdmFsZW50LCBza2lwIHNlbmRpbmcgbG9nXCIsZmlyc3QsbGFzdCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHR9XG5cdFx0dmFyIHJlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHRcdHZhciB1cmwgPSB0aGlzLmNmZy5sb2dfcmRyX2VuZHBvaW50O1xuXHRcdGlmIChlcnJvciAmJiB0aGlzLmNmZy5sb2dfcmRyX2Vycm9yc19lbmRwb2ludClcblx0XHRcdHVybCA9IHRoaXMuY2ZnLmxvZ19yZHJfZXJyb3JzX2VuZHBvaW50O1xuXG5cdFx0cmVxLm9wZW4oXCJQT1NUXCIsIHVybCAsIHRydWUpO1xuXHRcdHJlcS5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04XCIpO1xuXHRcdHJlcS5zZW5kKEpTT04uc3RyaW5naWZ5KHRoaXMucmRyX2NoYWluKSk7XG5cdH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGluaXRTdGF0KCkge1xuICAgIGluaXRTdG9yYWdlKCk7XG59XG4iLCJjb25zdCBTRVRUSU5HU19LRVkgPSAnc2V0dGluZ3MnO1xuXG5leHBvcnQgY29uc3QgU0VUVElOR1MgPSB7XG4gICAgU2hvd0FwcE5hbWVzOiAnc2hvd0FwcE5hbWVzJyxcbiAgICBMYXVuY2hlckljb25Db2xvcjogJ2xhdW5jaGVySWNvbkNvbG9yJyxcbiAgICBMYXVuY2hlcldpZHRoOiAnbGF1bmNoZXJXaWR0aCcsXG4gICAgQXBwc1BlclJvdzogJ2FwcHNQZXJSb3cnLFxuICAgIFNlYXJjaEJhcjogJ3NlYXJjaEJhcicsXG4gICAgVmVyc2lvbjogJ3ZlcnNpb24nLFxuICAgIEFwcEljb25QYWRkaW5nOiAnYXBwSWNvblBhZGRpbmcnXG59O1xuXG5leHBvcnQgY29uc3QgTEVHQUNZX1NFVFRJTkdTID0ge1xuICAgIEljb25TaXplOiAnaWNvblNpemUnXG59O1xuXG5jb25zdCBjaHJvbWVTdG9yYWdlID0gY2hyb21lLnN0b3JhZ2UubG9jYWw7XG5cbmNvbnN0IENVUlJFTlRfVkVSU0lPTiA9IHJlcXVpcmUoJy4uLy4uL21hbmlmZXN0Lmpzb24nKS52ZXJzaW9uO1xuXG5leHBvcnQgY29uc3QgREVGQVVMVFMgPSB7XG4gICAgW1NFVFRJTkdTLlNob3dBcHBOYW1lc106IHRydWUsXG4gICAgW1NFVFRJTkdTLlNlYXJjaEJhcl06IHRydWUsXG4gICAgW1NFVFRJTkdTLkxhdW5jaGVySWNvbkNvbG9yXTogJyMwMDAwMDAnLFxuICAgIFtTRVRUSU5HUy5MYXVuY2hlcldpZHRoXTogMzUwLFxuICAgIFtTRVRUSU5HUy5BcHBzUGVyUm93XTogMyxcbiAgICBbU0VUVElOR1MuQXBwSWNvblBhZGRpbmddOiA1LFxuICAgIFtTRVRUSU5HUy5WZXJzaW9uXTogQ1VSUkVOVF9WRVJTSU9OXG59O1xuXG5leHBvcnQgY2xhc3MgU2V0dGluZ3NTZXJ2aWNlIHtcblxuICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PlxuICAgICAgICAgICAgICAgIGNocm9tZVN0b3JhZ2UuZ2V0KFNFVFRJTkdTX0tFWSxcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPT4gcmVzb2x2ZShyZXNwb25zZVtTRVRUSU5HU19LRVldKSkpXG4gICAgICAgICAgICAudGhlbihzZXR0aW5ncyA9PiBzZXR0aW5ncyB8fCBERUZBVUxUUylcbiAgICAgICAgICAgIC50aGVuKHNldHRpbmdzID0+IHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBwcm9wIGluIERFRkFVTFRTKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc2V0dGluZ3NbcHJvcF0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1twcm9wXSA9IERFRkFVTFRTW3Byb3BdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldHRpbmdzO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc2V0KHNldHRpbmdzKSB7XG4gICAgICAgIHNldHRpbmdzW1NFVFRJTkdTLlZlcnNpb25dID0gQ1VSUkVOVF9WRVJTSU9OO1xuICAgICAgICBsZXQgc3RvcmFnZU9iamVjdCA9IHtcbiAgICAgICAgICAgIFtTRVRUSU5HU19LRVldOiBzZXR0aW5nc1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IGNocm9tZVN0b3JhZ2Uuc2V0KHN0b3JhZ2VPYmplY3QsICgpID0+IHJlc29sdmUodHJ1ZSkpKTtcbiAgICB9XG59XG4iXX0="}