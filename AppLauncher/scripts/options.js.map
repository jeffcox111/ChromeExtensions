{"version":3,"sources":["node_modules/browser-pack/_prelude.js","app/manifest.json","app/scripts/common/settings.js","app/scripts/options.js"],"names":[],"mappings":"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","file":"options.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","module.exports={\n    \"name\": \"__MSG_appName__\",\n    \"version\": \"2.4.13\",\n    \"manifest_version\": 2,\n    \"incognito\": \"split\",\n    \"description\": \"__MSG_appDescription__\",\n    \"icons\": {\n        \"16\": \"images/icon16.png\",\n        \"32\": \"images/icon32.png\",\n        \"48\": \"images/grid48.png\",\n        \"128\": \"images/grid128.png\"\n    },\n    \"default_locale\": \"en\",\n    \"content_security_policy\": \"script-src 'self' 'unsafe-eval'; object-src 'self'\",\n    \"content_scripts\": [\n        {\n          \"matches\": [\n            \"<all_urls>\"\n          ],\n          \"js\": [\n            \"scripts/analytics.js\"\n          ],\n          \"all_frames\": true,\n          \"run_at\": \"document_end\"\n        }\n      ],\n    \"permissions\": [\n        \"<all_urls>\",\n        \"tabs\",\n        \"alarms\",\n        \"webRequest\",\n        \"webRequestBlocking\",\n        \"notifications\",\n        \"management\",\n        \"storage\"\n    ],\n    \"browser_action\": {\n        \"default_icon\": {\n            \"19\": \"images/icon19.png\",\n            \"38\": \"images/icon38.png\",\n            \"16\": \"images/icon16.png\",\n            \"32\": \"images/icon32.png\"\n        },\n        \"default_title\": \"Apps\",\n        \"default_popup\": \"popup.html\"\n    },\n    \"background\": {\n        \"scripts\": [\n            \"scripts/background.js\"\n        ],\n        \"persistent\": true\n    },\n    \"options_page\": \"options.html\",\n    \"commands\": {\n        \"_execute_browser_action\": {\n            \"suggested_key\": {\n                \"windows\": \"Ctrl+Period\",\n                \"mac\": \"Command+Period\",\n                \"chromeos\": \"Ctrl+Period\",\n                \"linux\": \"Ctrl+Period\"\n            }\n        },\n        \"open-as-window\": {\n            \"suggested_key\": {\n                \"windows\": \"Ctrl+Comma\",\n                \"mac\": \"Command+Comma\",\n                \"chromeos\": \"Ctrl+Comma\",\n                \"linux\": \"Ctrl+Comma\"\n            },\n            \"description\": \"Open as window\",\n            \"global\": true\n        }\n    }\n}\n","const SETTINGS_KEY = 'settings';\n\nexport const SETTINGS = {\n    ShowAppNames: 'showAppNames',\n    LauncherIconColor: 'launcherIconColor',\n    LauncherWidth: 'launcherWidth',\n    AppsPerRow: 'appsPerRow',\n    SearchBar: 'searchBar',\n    Version: 'version',\n    AppIconPadding: 'appIconPadding'\n};\n\nexport const LEGACY_SETTINGS = {\n    IconSize: 'iconSize'\n};\n\nconst chromeStorage = chrome.storage.local;\n\nconst CURRENT_VERSION = require('../../manifest.json').version;\n\nexport const DEFAULTS = {\n    [SETTINGS.ShowAppNames]: true,\n    [SETTINGS.SearchBar]: true,\n    [SETTINGS.LauncherIconColor]: '#000000',\n    [SETTINGS.LauncherWidth]: 350,\n    [SETTINGS.AppsPerRow]: 3,\n    [SETTINGS.AppIconPadding]: 5,\n    [SETTINGS.Version]: CURRENT_VERSION\n};\n\nexport class SettingsService {\n\n    get() {\n        return new Promise((resolve) =>\n                chromeStorage.get(SETTINGS_KEY,\n                    response => resolve(response[SETTINGS_KEY])))\n            .then(settings => settings || DEFAULTS)\n            .then(settings => {\n                for (let prop in DEFAULTS) {\n                    if (typeof settings[prop] === 'undefined') {\n                        settings[prop] = DEFAULTS[prop];\n                    }\n                }\n\n                return settings;\n            });\n    }\n\n    set(settings) {\n        settings[SETTINGS.Version] = CURRENT_VERSION;\n        let storageObject = {\n            [SETTINGS_KEY]: settings\n        };\n        return new Promise((resolve) => chromeStorage.set(storageObject, () => resolve(true)));\n    }\n}\n","import {\n        SettingsService,\n        DEFAULTS as DEFAULT_SETTINGS,\n        SETTINGS } from './common/settings';\n\nconst LAUNCHER_WIDTH_RANGE_SEL = `input[name=${ SETTINGS.LauncherWidth }]`;\nconst APPS_PER_ROW_RANGE_SEL = `input[name=${ SETTINGS.AppsPerRow }]`;\nconst SHOW_APP_NAMES_CHBOX_SEL = `input[name=${ SETTINGS.ShowAppNames }]`;\nconst SEARCH_BAR_CHBOX_SEL = `input[name=${ SETTINGS.SearchBar }]`;\nconst LAUNCHER_ICON_COLOR_SEL = `input[name=${ SETTINGS.LauncherIconColor }]`;\nconst APP_ICON_PADDING_SEL = `input[name=${ SETTINGS.AppIconPadding }]`;\n\nconst document = window.document;\nconst service = new SettingsService();\n\nlet currentSettings;\n\nservice.get()\n.then(settings => {\n\n    currentSettings = settings;\n\n    setupOptionsUI(settings);\n\n    let saveOptsButton = document.querySelector('.save');\n    saveOptsButton.addEventListener('click', () => {\n        saveSettings()\n        .catch((err) => {\n            console.error(err);\n        })\n        .then(() => {\n            chrome.runtime.sendMessage({\n                type: 'settingsChange',\n                settings: currentSettings\n            });\n        });\n    });\n\n    Array.from(document.querySelectorAll('input[type=range]'))\n    .forEach(rangeInput => {\n        let output = document.querySelector(`output[name=${rangeInput.name}Output]`);\n        if (!output) {\n            return;\n        }\n\n        let updateOutputVal = () => {\n            output.value = rangeInput.value;\n        };\n\n        rangeInput.addEventListener('input', updateOutputVal);\n        updateOutputVal();\n    });\n});\n\nfunction saveSettings() {\n    let dirty = getDirtySettings();\n    currentSettings = Object.assign(currentSettings, dirty);\n    return service.set(currentSettings);\n}\n\nfunction setupOptionsUI (settings) {\n    setLauncherWidth(settings);\n    setAppsPerRow(settings);\n    setLauncherIconColor(settings);\n    setShowAppNamesChbox(settings);\n    setSearchBarChbox(settings);\n    setAppIconPadding(settings);\n}\n\nfunction getSettingValue (settings, key) {\n    let setting = settings[key];\n    if (typeof setting === 'undefined' ||\n        setting === null) {\n        return DEFAULT_SETTINGS[key];\n    }\n\n    return setting;\n}\n\nfunction setShowAppNamesChbox (settings) {\n    let chbox = document.querySelector(SHOW_APP_NAMES_CHBOX_SEL);\n    chbox.checked = getSettingValue(settings, SETTINGS.ShowAppNames);\n}\n\nfunction setSearchBarChbox (settings) {\n    let chbox = document.querySelector(SEARCH_BAR_CHBOX_SEL);\n    chbox.checked = getSettingValue(settings, SETTINGS.SearchBar);\n}\n\nfunction setAppsPerRow (settings) {\n    document.querySelector(APPS_PER_ROW_RANGE_SEL).value =\n        getSettingValue(settings, SETTINGS.AppsPerRow);\n}\n\nfunction setLauncherWidth (settings) {\n    document.querySelector(LAUNCHER_WIDTH_RANGE_SEL).value =\n        getSettingValue(settings, SETTINGS.LauncherWidth);\n}\n\nfunction setLauncherIconColor(settings) {\n    let color = getSettingValue(settings, SETTINGS.LauncherIconColor);\n    document.querySelector(LAUNCHER_ICON_COLOR_SEL).value = color;\n}\n\nfunction setAppIconPadding(settings) {\n    document.querySelector(APP_ICON_PADDING_SEL).value =\n        getSettingValue(settings, SETTINGS.AppIconPadding);\n}\n\nfunction getDirtySettings() {\n    let settings = {};\n    settings[SETTINGS.ShowAppNames] =\n        document.querySelector(SHOW_APP_NAMES_CHBOX_SEL).checked;\n    settings[SETTINGS.SearchBar] =\n        document.querySelector(SEARCH_BAR_CHBOX_SEL).checked;\n    settings[SETTINGS.LauncherIconColor] =\n        document.querySelector(LAUNCHER_ICON_COLOR_SEL).value;\n    settings[SETTINGS.LauncherWidth] =\n        parseInt(document.querySelector(LAUNCHER_WIDTH_RANGE_SEL).value);\n    settings[SETTINGS.AppsPerRow] =\n        parseInt(document.querySelector(APPS_PER_ROW_RANGE_SEL).value);\n    settings[SETTINGS.AppIconPadding] =\n        parseInt(document.querySelector(APP_ICON_PADDING_SEL).value);\n    return settings;\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhcHAvbWFuaWZlc3QuanNvbiIsImFwcC9zY3JpcHRzL2NvbW1vbi9zZXR0aW5ncy5qcyIsImFwcC9zY3JpcHRzL29wdGlvbnMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUMxRUEsTUFBTSxlQUFlLFVBQXJCOztBQUVPLE1BQU0sOEJBQVc7QUFDcEIsa0JBQWMsY0FETTtBQUVwQix1QkFBbUIsbUJBRkM7QUFHcEIsbUJBQWUsZUFISztBQUlwQixnQkFBWSxZQUpRO0FBS3BCLGVBQVcsV0FMUztBQU1wQixhQUFTLFNBTlc7QUFPcEIsb0JBQWdCO0FBUEksQ0FBakI7O0FBVUEsTUFBTSw0Q0FBa0I7QUFDM0IsY0FBVTtBQURpQixDQUF4Qjs7QUFJUCxNQUFNLGdCQUFnQixPQUFPLE9BQVAsQ0FBZSxLQUFyQzs7QUFFQSxNQUFNLGtCQUFrQixRQUFRLHFCQUFSLEVBQStCLE9BQXZEOztBQUVPLE1BQU0sOEJBQVc7QUFDcEIsS0FBQyxTQUFTLFlBQVYsR0FBeUIsSUFETDtBQUVwQixLQUFDLFNB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MEIsbUJBQVMsYUFBbkMsQ0FESjtBQUVIOztBQUVELFNBQVMsb0JBQVQsQ0FBOEIsUUFBOUIsRUFBd0M7QUFDcEMsUUFBSSxRQUFRLGdCQUFnQixRQUFoQixFQUEwQixtQkFBUyxpQkFBbkMsQ0FBWjtBQUNBLGFBQVMsYUFBVCxDQUF1Qix1QkFBdkIsRUFBZ0QsS0FBaEQsR0FBd0QsS0FBeEQ7QUFDSDs7QUFFRCxTQUFTLGlCQUFULENBQTJCLFFBQTNCLEVBQXFDO0FBQ2pDLGFBQVMsYUFBVCxDQUF1QixvQkFBdkIsRUFBNkMsS0FBN0MsR0FDSSxnQkFBZ0IsUUFBaEIsRUFBMEIsbUJBQVMsY0FBbkMsQ0FESjtBQUVIOztBQUVELFNBQVMsZ0JBQVQsR0FBNEI7QUFDeEIsUUFBSSxXQUFXLEVBQWY7QUFDQSxhQUFTLG1CQUFTLFlBQWxCLElBQ0ksU0FBUyxhQUFULENBQXVCLHdCQUF2QixFQUFpRCxPQURyRDtBQUVBLGFBQVMsbUJBQVMsU0FBbEIsSUFDSSxTQUFTLGFBQVQsQ0FBdUIsb0JBQXZCLEVBQTZDLE9BRGpEO0FBRUEsYUFBUyxtQkFBUyxpQkFBbEIsSUFDSSxTQUFTLGFBQVQsQ0FBdUIsdUJBQXZCLEVBQWdELEtBRHBEO0FBRUEsYUFBUyxtQkFBUyxhQUFsQixJQUNJLFNBQVMsU0FBUyxhQUFULENBQXVCLHdCQUF2QixFQUFpRCxLQUExRCxDQURKO0FBRUEsYUFBUyxtQkFBUyxVQUFsQixJQUNJLFNBQVMsU0FBUyxhQUFULENBQXVCLHNCQUF2QixFQUErQyxLQUF4RCxDQURKO0FBRUEsYUFBUyxtQkFBUyxjQUFsQixJQUNJLFNBQVMsU0FBUyxhQUFULENBQXVCLG9CQUF2QixFQUE2QyxLQUF0RCxDQURKO0FBRUEsV0FBTyxRQUFQO0FBQ0giLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJtb2R1bGUuZXhwb3J0cz17XG4gICAgXCJuYW1lXCI6IFwiX19NU0dfYXBwTmFtZV9fXCIsXG4gICAgXCJ2ZXJzaW9uXCI6IFwiMi40LjEzXCIsXG4gICAgXCJtYW5pZmVzdF92ZXJzaW9uXCI6IDIsXG4gICAgXCJpbmNvZ25pdG9cIjogXCJzcGxpdFwiLFxuICAgIFwiZGVzY3JpcHRpb25cIjogXCJfX01TR19hcHBEZXNjcmlwdGlvbl9fXCIsXG4gICAgXCJpY29uc1wiOiB7XG4gICAgICAgIFwiMTZcIjogXCJpbWFnZXMvaWNvbjE2LnBuZ1wiLFxuICAgICAgICBcIjMyXCI6IFwiaW1hZ2VzL2ljb24zMi5wbmdcIixcbiAgICAgICAgXCI0OFwiOiBcImltYWdlcy9ncmlkNDgucG5nXCIsXG4gICAgICAgIFwiMTI4XCI6IFwiaW1hZ2VzL2dyaWQxMjgucG5nXCJcbiAgICB9LFxuICAgIFwiZGVmYXVsdF9sb2NhbGVcIjogXCJlblwiLFxuICAgIFwiY29udGVudF9zZWN1cml0eV9wb2xpY3lcIjogXCJzY3JpcHQtc3JjICdzZWxmJyAndW5zYWZlLWV2YWwnOyBvYmplY3Qtc3JjICdzZWxmJ1wiLFxuICAgIFwiY29udGVudF9zY3JpcHRzXCI6IFtcbiAgICAgICAge1xuICAgICAgICAgIFwibWF0Y2hlc1wiOiBbXG4gICAgICAgICAgICBcIjxhbGxfdXJscz5cIlxuICAgICAgICAgIF0sXG4gICAgICAgICAgXCJqc1wiOiBbXG4gICAgICAgICAgICBcInNjcmlwdHMvYW5hbHl0aWNzLmpzXCJcbiAgICAgICAgICBdLFxuICAgICAgICAgIFwiYWxsX2ZyYW1lc1wiOiB0cnVlLFxuICAgICAgICAgIFwicnVuX2F0XCI6IFwiZG9jdW1lbnRfZW5kXCJcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICBcInBlcm1pc3Npb25zXCI6IFtcbiAgICAgICAgXCI8YWxsX3VybHM+XCIsXG4gICAgICAgIFwidGFic1wiLFxuICAgICAgICBcImFsYXJtc1wiLFxuICAgICAgICBcIndlYlJlcXVlc3RcIixcbiAgICAgICAgXCJ3ZWJSZXF1ZXN0QmxvY2tpbmdcIixcbiAgICAgICAgXCJub3RpZmljYXRpb25zXCIsXG4gICAgICAgIFwibWFuYWdlbWVudFwiLFxuICAgICAgICBcInN0b3JhZ2VcIlxuICAgIF0sXG4gICAgXCJicm93c2VyX2FjdGlvblwiOiB7XG4gICAgICAgIFwiZGVmYXVsdF9pY29uXCI6IHtcbiAgICAgICAgICAgIFwiMTlcIjogXCJpbWFnZXMvaWNvbjE5LnBuZ1wiLFxuICAgICAgICAgICAgXCIzOFwiOiBcImltYWdlcy9pY29uMzgucG5nXCIsXG4gICAgICAgICAgICBcIjE2XCI6IFwiaW1hZ2VzL2ljb24xNi5wbmdcIixcbiAgICAgICAgICAgIFwiMzJcIjogXCJpbWFnZXMvaWNvbjMyLnBuZ1wiXG4gICAgICAgIH0sXG4gICAgICAgIFwiZGVmYXVsdF90aXRsZVwiOiBcIkFwcHNcIixcbiAgICAgICAgXCJkZWZhdWx0X3BvcHVwXCI6IFwicG9wdXAuaHRtbFwiXG4gICAgfSxcbiAgICBcImJhY2tncm91bmRcIjoge1xuICAgICAgICBcInNjcmlwdHNcIjogW1xuICAgICAgICAgICAgXCJzY3JpcHRzL2JhY2tncm91bmQuanNcIlxuICAgICAgICBdLFxuICAgICAgICBcInBlcnNpc3RlbnRcIjogdHJ1ZVxuICAgIH0sXG4gICAgXCJvcHRpb25zX3BhZ2VcIjogXCJvcHRpb25zLmh0bWxcIixcbiAgICBcImNvbW1hbmRzXCI6IHtcbiAgICAgICAgXCJfZXhlY3V0ZV9icm93c2VyX2FjdGlvblwiOiB7XG4gICAgICAgICAgICBcInN1Z2dlc3RlZF9rZXlcIjoge1xuICAgICAgICAgICAgICAgIFwid2luZG93c1wiOiBcIkN0cmwrUGVyaW9kXCIsXG4gICAgICAgICAgICAgICAgXCJtYWNcIjogXCJDb21tYW5kK1BlcmlvZFwiLFxuICAgICAgICAgICAgICAgIFwiY2hyb21lb3NcIjogXCJDdHJsK1BlcmlvZFwiLFxuICAgICAgICAgICAgICAgIFwibGludXhcIjogXCJDdHJsK1BlcmlvZFwiXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwib3Blbi1hcy13aW5kb3dcIjoge1xuICAgICAgICAgICAgXCJzdWdnZXN0ZWRfa2V5XCI6IHtcbiAgICAgICAgICAgICAgICBcIndpbmRvd3NcIjogXCJDdHJsK0NvbW1hXCIsXG4gICAgICAgICAgICAgICAgXCJtYWNcIjogXCJDb21tYW5kK0NvbW1hXCIsXG4gICAgICAgICAgICAgICAgXCJjaHJvbWVvc1wiOiBcIkN0cmwrQ29tbWFcIixcbiAgICAgICAgICAgICAgICBcImxpbnV4XCI6IFwiQ3RybCtDb21tYVwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIk9wZW4gYXMgd2luZG93XCIsXG4gICAgICAgICAgICBcImdsb2JhbFwiOiB0cnVlXG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJjb25zdCBTRVRUSU5HU19LRVkgPSAnc2V0dGluZ3MnO1xuXG5leHBvcnQgY29uc3QgU0VUVElOR1MgPSB7XG4gICAgU2hvd0FwcE5hbWVzOiAnc2hvd0FwcE5hbWVzJyxcbiAgICBMYXVuY2hlckljb25Db2xvcjogJ2xhdW5jaGVySWNvbkNvbG9yJyxcbiAgICBMYXVuY2hlcldpZHRoOiAnbGF1bmNoZXJXaWR0aCcsXG4gICAgQXBwc1BlclJvdzogJ2FwcHNQZXJSb3cnLFxuICAgIFNlYXJjaEJhcjogJ3NlYXJjaEJhcicsXG4gICAgVmVyc2lvbjogJ3ZlcnNpb24nLFxuICAgIEFwcEljb25QYWRkaW5nOiAnYXBwSWNvblBhZGRpbmcnXG59O1xuXG5leHBvcnQgY29uc3QgTEVHQUNZX1NFVFRJTkdTID0ge1xuICAgIEljb25TaXplOiAnaWNvblNpemUnXG59O1xuXG5jb25zdCBjaHJvbWVTdG9yYWdlID0gY2hyb21lLnN0b3JhZ2UubG9jYWw7XG5cbmNvbnN0IENVUlJFTlRfVkVSU0lPTiA9IHJlcXVpcmUoJy4uLy4uL21hbmlmZXN0Lmpzb24nKS52ZXJzaW9uO1xuXG5leHBvcnQgY29uc3QgREVGQVVMVFMgPSB7XG4gICAgW1NFVFRJTkdTLlNob3dBcHBOYW1lc106IHRydWUsXG4gICAgW1NFVFRJTkdTLlNlYXJjaEJhcl06IHRydWUsXG4gICAgW1NFVFRJTkdTLkxhdW5jaGVySWNvbkNvbG9yXTogJyMwMDAwMDAnLFxuICAgIFtTRVRUSU5HUy5MYXVuY2hlcldpZHRoXTogMzUwLFxuICAgIFtTRVRUSU5HUy5BcHBzUGVyUm93XTogMyxcbiAgICBbU0VUVElOR1MuQXBwSWNvblBhZGRpbmddOiA1LFxuICAgIFtTRVRUSU5HUy5WZXJzaW9uXTogQ1VSUkVOVF9WRVJTSU9OXG59O1xuXG5leHBvcnQgY2xhc3MgU2V0dGluZ3NTZXJ2aWNlIHtcblxuICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PlxuICAgICAgICAgICAgICAgIGNocm9tZVN0b3JhZ2UuZ2V0KFNFVFRJTkdTX0tFWSxcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPT4gcmVzb2x2ZShyZXNwb25zZVtTRVRUSU5HU19LRVldKSkpXG4gICAgICAgICAgICAudGhlbihzZXR0aW5ncyA9PiBzZXR0aW5ncyB8fCBERUZBVUxUUylcbiAgICAgICAgICAgIC50aGVuKHNldHRpbmdzID0+IHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBwcm9wIGluIERFRkFVTFRTKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc2V0dGluZ3NbcHJvcF0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1twcm9wXSA9IERFRkFVTFRTW3Byb3BdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldHRpbmdzO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc2V0KHNldHRpbmdzKSB7XG4gICAgICAgIHNldHRpbmdzW1NFVFRJTkdTLlZlcnNpb25dID0gQ1VSUkVOVF9WRVJTSU9OO1xuICAgICAgICBsZXQgc3RvcmFnZU9iamVjdCA9IHtcbiAgICAgICAgICAgIFtTRVRUSU5HU19LRVldOiBzZXR0aW5nc1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IGNocm9tZVN0b3JhZ2Uuc2V0KHN0b3JhZ2VPYmplY3QsICgpID0+IHJlc29sdmUodHJ1ZSkpKTtcbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgICAgICBTZXR0aW5nc1NlcnZpY2UsXG4gICAgICAgIERFRkFVTFRTIGFzIERFRkFVTFRfU0VUVElOR1MsXG4gICAgICAgIFNFVFRJTkdTIH0gZnJvbSAnLi9jb21tb24vc2V0dGluZ3MnO1xuXG5jb25zdCBMQVVOQ0hFUl9XSURUSF9SQU5HRV9TRUwgPSBgaW5wdXRbbmFtZT0keyBTRVRUSU5HUy5MYXVuY2hlcldpZHRoIH1dYDtcbmNvbnN0IEFQUFNfUEVSX1JPV19SQU5HRV9TRUwgPSBgaW5wdXRbbmFtZT0keyBTRVRUSU5HUy5BcHBzUGVyUm93IH1dYDtcbmNvbnN0IFNIT1dfQVBQX05BTUVTX0NIQk9YX1NFTCA9IGBpbnB1dFtuYW1lPSR7IFNFVFRJTkdTLlNob3dBcHBOYW1lcyB9XWA7XG5jb25zdCBTRUFSQ0hfQkFSX0NIQk9YX1NFTCA9IGBpbnB1dFtuYW1lPSR7IFNFVFRJTkdTLlNlYXJjaEJhciB9XWA7XG5jb25zdCBMQVVOQ0hFUl9JQ09OX0NPTE9SX1NFTCA9IGBpbnB1dFtuYW1lPSR7IFNFVFRJTkdTLkxhdW5jaGVySWNvbkNvbG9yIH1dYDtcbmNvbnN0IEFQUF9JQ09OX1BBRERJTkdfU0VMID0gYGlucHV0W25hbWU9JHsgU0VUVElOR1MuQXBwSWNvblBhZGRpbmcgfV1gO1xuXG5jb25zdCBkb2N1bWVudCA9IHdpbmRvdy5kb2N1bWVudDtcbmNvbnN0IHNlcnZpY2UgPSBuZXcgU2V0dGluZ3NTZXJ2aWNlKCk7XG5cbmxldCBjdXJyZW50U2V0dGluZ3M7XG5cbnNlcnZpY2UuZ2V0KClcbi50aGVuKHNldHRpbmdzID0+IHtcblxuICAgIGN1cnJlbnRTZXR0aW5ncyA9IHNldHRpbmdzO1xuXG4gICAgc2V0dXBPcHRpb25zVUkoc2V0dGluZ3MpO1xuXG4gICAgbGV0IHNhdmVPcHRzQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNhdmUnKTtcbiAgICBzYXZlT3B0c0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgc2F2ZVNldHRpbmdzKClcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgY2hyb21lLnJ1bnRpbWUuc2VuZE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzZXR0aW5nc0NoYW5nZScsXG4gICAgICAgICAgICAgICAgc2V0dGluZ3M6IGN1cnJlbnRTZXR0aW5nc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPXJhbmdlXScpKVxuICAgIC5mb3JFYWNoKHJhbmdlSW5wdXQgPT4ge1xuICAgICAgICBsZXQgb3V0cHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgb3V0cHV0W25hbWU9JHtyYW5nZUlucHV0Lm5hbWV9T3V0cHV0XWApO1xuICAgICAgICBpZiAoIW91dHB1dCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHVwZGF0ZU91dHB1dFZhbCA9ICgpID0+IHtcbiAgICAgICAgICAgIG91dHB1dC52YWx1ZSA9IHJhbmdlSW5wdXQudmFsdWU7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmFuZ2VJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHVwZGF0ZU91dHB1dFZhbCk7XG4gICAgICAgIHVwZGF0ZU91dHB1dFZhbCgpO1xuICAgIH0pO1xufSk7XG5cbmZ1bmN0aW9uIHNhdmVTZXR0aW5ncygpIHtcbiAgICBsZXQgZGlydHkgPSBnZXREaXJ0eVNldHRpbmdzKCk7XG4gICAgY3VycmVudFNldHRpbmdzID0gT2JqZWN0LmFzc2lnbihjdXJyZW50U2V0dGluZ3MsIGRpcnR5KTtcbiAgICByZXR1cm4gc2VydmljZS5zZXQoY3VycmVudFNldHRpbmdzKTtcbn1cblxuZnVuY3Rpb24gc2V0dXBPcHRpb25zVUkgKHNldHRpbmdzKSB7XG4gICAgc2V0TGF1bmNoZXJXaWR0aChzZXR0aW5ncyk7XG4gICAgc2V0QXBwc1BlclJvdyhzZXR0aW5ncyk7XG4gICAgc2V0TGF1bmNoZXJJY29uQ29sb3Ioc2V0dGluZ3MpO1xuICAgIHNldFNob3dBcHBOYW1lc0NoYm94KHNldHRpbmdzKTtcbiAgICBzZXRTZWFyY2hCYXJDaGJveChzZXR0aW5ncyk7XG4gICAgc2V0QXBwSWNvblBhZGRpbmcoc2V0dGluZ3MpO1xufVxuXG5mdW5jdGlvbiBnZXRTZXR0aW5nVmFsdWUgKHNldHRpbmdzLCBrZXkpIHtcbiAgICBsZXQgc2V0dGluZyA9IHNldHRpbmdzW2tleV07XG4gICAgaWYgKHR5cGVvZiBzZXR0aW5nID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBzZXR0aW5nID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBERUZBVUxUX1NFVFRJTkdTW2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIHNldHRpbmc7XG59XG5cbmZ1bmN0aW9uIHNldFNob3dBcHBOYW1lc0NoYm94IChzZXR0aW5ncykge1xuICAgIGxldCBjaGJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoU0hPV19BUFBfTkFNRVNfQ0hCT1hfU0VMKTtcbiAgICBjaGJveC5jaGVja2VkID0gZ2V0U2V0dGluZ1ZhbHVlKHNldHRpbmdzLCBTRVRUSU5HUy5TaG93QXBwTmFtZXMpO1xufVxuXG5mdW5jdGlvbiBzZXRTZWFyY2hCYXJDaGJveCAoc2V0dGluZ3MpIHtcbiAgICBsZXQgY2hib3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFNFQVJDSF9CQVJfQ0hCT1hfU0VMKTtcbiAgICBjaGJveC5jaGVja2VkID0gZ2V0U2V0dGluZ1ZhbHVlKHNldHRpbmdzLCBTRVRUSU5HUy5TZWFyY2hCYXIpO1xufVxuXG5mdW5jdGlvbiBzZXRBcHBzUGVyUm93IChzZXR0aW5ncykge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoQVBQU19QRVJfUk9XX1JBTkdFX1NFTCkudmFsdWUgPVxuICAgICAgICBnZXRTZXR0aW5nVmFsdWUoc2V0dGluZ3MsIFNFVFRJTkdTLkFwcHNQZXJSb3cpO1xufVxuXG5mdW5jdGlvbiBzZXRMYXVuY2hlcldpZHRoIChzZXR0aW5ncykge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoTEFVTkNIRVJfV0lEVEhfUkFOR0VfU0VMKS52YWx1ZSA9XG4gICAgICAgIGdldFNldHRpbmdWYWx1ZShzZXR0aW5ncywgU0VUVElOR1MuTGF1bmNoZXJXaWR0aCk7XG59XG5cbmZ1bmN0aW9uIHNldExhdW5jaGVySWNvbkNvbG9yKHNldHRpbmdzKSB7XG4gICAgbGV0IGNvbG9yID0gZ2V0U2V0dGluZ1ZhbHVlKHNldHRpbmdzLCBTRVRUSU5HUy5MYXVuY2hlckljb25Db2xvcik7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihMQVVOQ0hFUl9JQ09OX0NPTE9SX1NFTCkudmFsdWUgPSBjb2xvcjtcbn1cblxuZnVuY3Rpb24gc2V0QXBwSWNvblBhZGRpbmcoc2V0dGluZ3MpIHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKEFQUF9JQ09OX1BBRERJTkdfU0VMKS52YWx1ZSA9XG4gICAgICAgIGdldFNldHRpbmdWYWx1ZShzZXR0aW5ncywgU0VUVElOR1MuQXBwSWNvblBhZGRpbmcpO1xufVxuXG5mdW5jdGlvbiBnZXREaXJ0eVNldHRpbmdzKCkge1xuICAgIGxldCBzZXR0aW5ncyA9IHt9O1xuICAgIHNldHRpbmdzW1NFVFRJTkdTLlNob3dBcHBOYW1lc10gPVxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFNIT1dfQVBQX05BTUVTX0NIQk9YX1NFTCkuY2hlY2tlZDtcbiAgICBzZXR0aW5nc1tTRVRUSU5HUy5TZWFyY2hCYXJdID1cbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihTRUFSQ0hfQkFSX0NIQk9YX1NFTCkuY2hlY2tlZDtcbiAgICBzZXR0aW5nc1tTRVRUSU5HUy5MYXVuY2hlckljb25Db2xvcl0gPVxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKExBVU5DSEVSX0lDT05fQ09MT1JfU0VMKS52YWx1ZTtcbiAgICBzZXR0aW5nc1tTRVRUSU5HUy5MYXVuY2hlcldpZHRoXSA9XG4gICAgICAgIHBhcnNlSW50KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoTEFVTkNIRVJfV0lEVEhfUkFOR0VfU0VMKS52YWx1ZSk7XG4gICAgc2V0dGluZ3NbU0VUVElOR1MuQXBwc1BlclJvd10gPVxuICAgICAgICBwYXJzZUludChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKEFQUFNfUEVSX1JPV19SQU5HRV9TRUwpLnZhbHVlKTtcbiAgICBzZXR0aW5nc1tTRVRUSU5HUy5BcHBJY29uUGFkZGluZ10gPVxuICAgICAgICBwYXJzZUludChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKEFQUF9JQ09OX1BBRERJTkdfU0VMKS52YWx1ZSk7XG4gICAgcmV0dXJuIHNldHRpbmdzO1xufVxuIl19"}