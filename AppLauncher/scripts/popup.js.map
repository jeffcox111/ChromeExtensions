{"version":3,"sources":["node_modules/browser-pack/_prelude.js","app/manifest.json","app/scripts/common/settings.js","app/scripts/popup/index.js","app/scripts/popup/launcher.js","app/scripts/popup/model/apps.js","app/scripts/popup/model/grid.js","app/scripts/popup/model/index.js","app/scripts/popup/services/apps.js","app/scripts/popup/services/icons.js","app/scripts/popup/services/index.js","app/scripts/popup/ui/appElementBuilder.js","app/scripts/popup/ui/events.js","app/scripts/popup/ui/index.js","app/scripts/popup/ui/searchElementBuilder.js","node_modules/browserify/lib/_empty.js","node_modules/constants-browserify/constants.json","node_modules/events/events.js","node_modules/sortablejs/Sortable.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC1EA,MAAM,eAAe,UAArB;;AAEO,MAAM,8BAAW;AACpB,kBAAc,cADM;AAEpB,uBAAmB,mBAFC;AAGpB,mBAAe,eAHK;AAIpB,gBAAY,YAJQ;AAKpB,eAAW,WALS;AAMpB,aAAS,SANW;AAOpB,oBAAgB;AAPI,CAAjB;;AAUA,MAAM,4CAAkB;AAC3B,cAAU;AADiB,CAAxB;;AAIP,MAAM,gBAAgB,OAAO,OAAP,CAAe,KAArC;;AAEA,MAAM,kBAAkB,QAAQ,qBAAR,EAA+B,OAAvD;;AAEO,MAAM,8BAAW;AACpB,KAAC,SAAS,YAAV,GAAyB,IADL;AAEpB,KAAC,SAAS,SAAV,GAAsB,IAFF;AAGpB,KAAC,SAAS,iBAAV,GAA8B,SAHV;AAIpB,KAAC,SAAS,aAAV,GAA0B,GAJN;AAKpB,KAAC,SAAS,UAAV,GAAuB,CALH;AAMpB,KAAC,SAAS,cAAV,GAA2B,CANP;AAOpB,KAAC,SAAS,OAAV,GAAoB;AAPA,CAAjB;;AAUA,MAAM,eAAN,CAAsB;;AAEzB,UAAM;AACF,eAAO,IAAI,OAAJ,CAAa,OAAD,IACX,cAAc,GAAd,CAAkB,YAAlB,EACI,YAAY,QAAQ,SAAS,YAAT,CAAR,CADhB,CADD,EAGF,IAHE,CAGG,YAAY,YAAY,QAH3B,EAIF,IAJE,CAIG,YAAY;AACd,iBAAK,IAAI,IAAT,IAAiB,QAAjB,EAA2B;AACvB,oBAAI,OAAO,SAAS,IAAT,CAAP,KAA0B,WAA9B,EAA2C;AACvC,6BAAS,IAAT,IAAiB,SAAS,IAAT,CAAjB;AACH;AACJ;;AAED,mBAAO,QAAP;AACH,SAZE,CAAP;AAaH;;AAED,QAAI,QAAJ,EAAc;AACV,iBAAS,SAAS,OAAlB,IAA6B,eAA7B;AACA,YAAI,gBAAgB;AAChB,aAAC,YAAD,GAAgB;AADA,SAApB;AAGA,eAAO,IAAI,OAAJ,CAAa,OAAD,IAAa,cAAc,GAAd,CAAkB,aAAlB,EAAiC,MAAM,QAAQ,IAAR,CAAvC,CAAzB,CAAP;AACH;AAxBwB;QAAhB,e,GAAA,e;;;;;AC9Bb;;AACA;;AACA;;;;;;AAEA,IAAI,WAAW,IAAI,kBAAJ,CAAiB,IAAI,qBAAJ,EAAjB,EAAoC,IAAI,yBAAJ,EAApC,CAAf;AACA,SAAS,UAAT,GACG,KADH,CACU,GAAD,IAAS;AACZ,YAAQ,KAAR,CAAc,GAAd,EAAmB,IAAI,KAAvB;AACH,CAHH;;;;;;;;;ACLA;;AACA;;AACA;;;;AACA;;AAKA;;;;AACA,MAAM,oBAAoB,SAAS,aAAT,CAAuB,mBAAvB,CAA1B;AACA,MAAM,oBAAoB,SAAS,aAAT,CAAuB,wBAAvB,CAA1B;AACA,MAAM,iBAAiB,SAAS,aAAT,CAAuB,aAAvB,CAAvB;AACA,MAAM,eAAe,SAAS,aAAT,CAAuB,eAAvB,CAArB;AACA,MAAM,YAAY,SAAS,aAAT,CAAuB,aAAvB,CAAlB;;AAEA,MAAM,mBAAmB,OAAO,UAAhC;;AAEe,MAAM,YAAN,CAAmB;;AAE9B,gBAAa,WAAb,EAA0B,eAA1B,EAA2C;AACvC,aAAK,WAAL,GAAmB,WAAnB;AACA,aAAK,eAAL,GAAuB,eAAvB;;AAEA,aAAK,IAAL,GAAY,IAAZ;AACA,aAAK,QAAL,GAAgB,IAAhB;AACA,aAAK,gBAAL,GAAwB,EAAxB;AACA,aAAK,QAAL,GAAgB,IAAhB;AACA,aAAK,WAAL,GAAmB,CAAnB;AACA,aAAK,YAAL,GAAoB,IAApB;;AAEA,aAAK,eAAL,GAAuB,iBAAvB;AACA,aAAK,eAAL,GAAuB,iBAAvB;AACA,aAAK,aAAL,GAAqB,cAArB;AACA,aAAK,WAAL,GAAmB,YAAnB;AACA,aAAK,QAAL,GAAgB,SAAhB;AACA,aAAK,eAAL,GAAuB,CAAvB;AACH;;AAED,iBAAc;AACV;AACA;AACA,eAAO,QAAQ,GAAR,CAAY,CAAE,KAAK,eAAL,CAAqB,GAArB,EAAF,EAA8B,KAAK,WAAL,CAAiB,IAAjB,EAA9B,CAAZ,EACN,IADM,CACD,CAAC,CAAE,QAAF,EAAY,IAAZ,CAAD,KAAwB;AAC1B,iBAAK,QAAL,GAAgB,QAAhB;;AAEA,+BAAmB,QAAnB;;AAEA,iBAAK,IAAL,GAAY,IAAI,qBAAJ,CAAmB,IAAnB,CAAZ;AACA,iBAAK,QAAL,GAAgB,IAAI,WAAJ,CAAS,KAAK,MAAd,EAAsB,SAAS,mBAAS,UAAlB,CAAtB,CAAhB;;AAEA,iBAAK,IAAL,CAAU,IAAV;AACA,iBAAK,gBAAL;AACA,iBAAK,wBAAL;AACA,iBAAK,mBAAL;AACA,iBAAK,wBAAL;AACA,iBAAK,WAAL;AACH,SAfM,CAAP;AAgBH;;AAED,SAAM,IAAN,EAAY;AACR,aAAK,eAAL,CAAqB,SAArB,GAAiC,EAAjC;;AAEA;AACA,aAAK,OAAL,CAAa,OAAO;AAChB,gBAAI,IAAI,EAAJ,IAAU,KAAK,gBAAnB,EAAqC;AACjC,qBAAK,eAAL,CAAqB,WAArB,CAAiC,KAAK,gBAAL,CAAsB,IAAI,EAA1B,CAAjC;AACA;AACH;;AAED,gBAAI,eAAe,SAAS,aAAT,CAAuB,IAAvB,CAAnB;AACA,gBAAI,aAAa,sBAAkB,MAAlB,CAAyB,GAAzB,EAA8B,KAA9B,EAAjB;;AAEA,yCAAoB,UAApB,EAAgC,IAAhC;;AAEA,yBAAa,WAAb,CAAyB,UAAzB;AACA,iBAAK,eAAL,CAAqB,WAArB,CAAiC,YAAjC;;AAEA,iBAAK,gBAAL,CAAsB,IAAI,EAA1B,IAAgC,YAAhC;AACH,SAfD;AAgBH;;AAED,qBAAiB,YAAjB,EAA+B;AAC3B,gBAAQ,GAAR,CAAY,IAAZ;AACA,aAAK,eAAL,CAAqB,KAArB,CAA2B,OAA3B,GAAqC,MAArC;AACA,aAAK,kBAAL;AACA,gBAAQ,GAAR,CAAY,YAAZ,EAA0B,KAAK,eAA/B;AACA,qBAAa,OAAb,CAAqB,OAAO;AACxB;AACA,gBAAI,aAAa,KAAjB;AACA,iBAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,KAAK,IAAL,CAAU,IAAV,CAAe,MAAnC,EAA2C,GAA3C,EAAgD;AAC5C,oBAAI,IAAI,IAAJ,KAAa,KAAK,IAAL,CAAU,IAAV,CAAe,CAAf,EAAkB,IAAnC,EAAyC;AACrC,4BAAQ,GAAR,CAAY,cAAZ;AACA,iCAAa,IAAb;AACH;AACJ;AACD,gBAAI,CAAC,UAAL,EAAiB;AACb,oBAAI,mBAAmB,SAAS,aAAT,CAAuB,IAAvB,CAAvB;AACA,oBAAI,aAAa,yBAAqB,MAArB,CAA4B,GAA5B,EAAiC,KAAjC,EAAjB;;AAEA,iCAAiB,WAAjB,CAA6B,UAA7B;AACA,qBAAK,eAAL,CAAqB,WAArB,CAAiC,gBAAjC;AACH;AAGJ,SAlBD;;AAqBA;AACA;AACA;AACH;AACD,yBAAqB;AACjB,aAAK,eAAL,CAAqB,SAArB,GAAiC,EAAjC;AACH;AACD,sBAAkB,CAAlB,EAAqB;AACjB,YAAI,KAAK,SAAS,aAAT,CAAuB,IAAvB,CAAT;AACA,WAAG,SAAH,CAAa,GAAb,CAAiB,mBAAjB;AACA,WAAG,WAAH,GAAiB,uBAAuB,CAAxC;AACA,eAAO,EAAP;AACH;AACD,+BAA2B;AACvB,8BAAsB,KAAK,WAA3B,EAAwC,KAAK,IAA7C;AACA,mCAA2B,KAAK,QAAhC,EAA0C,KAAK,IAA/C;;AAEA,aAAK,IAAL,CAAU,EAAV,CAAa,kBAAW,QAAxB,EAAkC,MAAM,KAAK,IAAL,CAAU,KAAK,IAAL,CAAU,OAAV,EAAV,CAAxC;AACH;;AAED,aAAU;AACN,yBAAiB,SAAjB,CAA2B,KAAK,WAAhC;AACA,eAAO,KAAP;AACH;;AAED,gBAAa;AACT,yBAAiB,SAAjB,CAA2B,KAAK,WAAhC,EAA6C,EAAE,mBAAmB,IAArB,EAA7C;AACA,eAAO,KAAP;AACH;;AAED,WAAQ,IAAR,EAAc;AACV,aAAK,YAAL,CAAkB,MAAlB,CAAyB,UAAzB,EAAqC,CAAC,CAAC,IAAvC;AACA,aAAK,IAAL,CAAU,MAAV,CAAiB,IAAjB;AACH;;AAED,oBAAgB,KAAhB,EAAuB;AACnB,aAAK,WAAL,GAAmB,KAAnB;AACA,aAAK,IAAL,CAAU,YAAV,CAAuB,KAAvB;AACH;;AAED,uBAAoB;AAChB,YAAI,cAAJ;;AAEA,YAAI,QAAS,IAAD,IAAU;AAClB,gBAAI,CAAC,cAAD,IAAmB,KAAK,QAAL,KAAkB,KAAK,QAA9C,EAAwD;AACpD;AACH;;AAED,gBAAI,QAAQ,wBAAwB,cAAxB,CAAZ;AACA,gBAAI,MAAM,KAAK,IAAL,CAAU,OAAV,CAAkB,KAAlB,CAAV;AACA,iBAAK,IAAL,CAAU,OAAV,CAAkB,GAAlB,EAAuB,KAAK,QAA5B;AACA,6BAAiB,IAAjB;AACH,SATD;;AAWA,YAAI,WAAY,IAAD,IAAU;AACrB,6BAAiB,KAAK,IAAtB;AACH,SAFD;;AAIA,aAAK,YAAL,GAAoB,qBAAS,MAAT,CAAgB,KAAK,eAArB,EAAsC;AACtD,uBAAW,IAD2C;AAEtD,uBAAW,GAF2C;AAGtD,iBAHsD;AAItD;AAJsD,SAAtC,CAApB;AAMH;;AAED,kBAAc;AACV,YAAI,YAAY,KAAK,QAAL,CAAc,mBAAS,SAAvB,CAAhB;AACA,YAAI,aAAa,YACb,eADa,GAEb,+BAFJ;AAGA,iBAAS,aAAT,CAAuB,UAAvB,EAAmC,KAAnC;AACH;;AAED,0BAAsB;AAClB,YAAI,CAAC,KAAK,QAAL,CAAc,mBAAS,SAAvB,CAAL,EAAwC;AACpC;AACH;;AAED,YAAI,cAAc,SAAS,aAAT,CAAuB,oBAAvB,CAAlB;AACA,YAAI,CAAC,WAAL,EAAkB;AACd;AACH;;AAED,oBAAY,gBAAZ,CAA6B,OAA7B,EAAsC,KAAK;AACvC,oBAAQ,GAAR,CAAY,YAAZ;AACA,gBAAI,OAAO,YAAY,KAAvB;AACA,gBAAI,EAAE,OAAF,KAAc,EAAd,IAAoB,KAAK,IAAL,CAAU,QAAV,CAAmB,MAA3C,EAAmD;AAC/C,qBAAK,eAAL,CAAqB,KAAK,IAAL,CAAU,QAAV,CAAmB,CAAnB,EAAsB,EAA3C;AACA,qBAAK,MAAL;AACA;AACH;;AAED,gBAAI,EAAE,OAAF,KAAc,EAAlB,EAAsB;AAClB;AACA,oBAAI,QAAQ,SAAS,aAAT,CAAuB,iBAAvB,CAAZ;AACA,sBAAM,KAAN;AACA,uBAAO,MAAM,YAAb;AACA;AACH;;AAED,iBAAK,MAAL,CAAY,IAAZ;AACH,SAlBD;AAsBH;AACD,+BAA2B;AACvB,YAAI,gBAAgB,SAAS,aAAT,CAAuB,aAAvB,CAApB;AACA,YAAI,CAAC,aAAL,EAAoB;AAChB;AACH;AACD,sBAAc,gBAAd,CAA+B,OAA/B,EAAwC,KAAK;AACzC,gBAAI,EAAE,OAAF,KAAc,EAAlB,EAAsB;AAClB,wBAAQ,GAAR,CAAY,QAAZ;AACA,kBAAE,cAAF;AACA,qBAAK,mBAAL;AACH;AACD,gBAAI,CAAC,EAAE,MAAF,CAAS,KAAT,CAAe,MAApB,EAA4B;AACxB,qBAAK,WAAL,CAAiB,SAAjB,CAA2B,GAA3B,CAA+B,QAA/B;AACA,qBAAK,QAAL,CAAc,iBAAd;AACA,qBAAK,kBAAL;AACA,qBAAK,QAAL,CAAc,iBAAd;AACA;AACA,qBAAK,aAAL,CAAmB,KAAnB,GAA2B,EAAE,MAAF,CAAS,KAApC;AACH,aAPD,MAOO;AACH,oBAAI,KAAK,WAAL,CAAiB,SAAjB,CAA2B,QAA3B,CAAoC,QAApC,CAAJ,EAAmD;AAC/C,yBAAK,WAAL,CAAiB,SAAjB,CAA2B,MAA3B,CAAkC,QAAlC;AACH;AACD,qBAAK,aAAL,CAAmB,KAAnB,GAA2B,EAAE,MAAF,CAAS,KAApC;AACH;AACJ,SAnBD;;AAqBA,aAAK,WAAL,CAAiB,gBAAjB,CAAkC,OAAlC,EAA2C,KAAK;AAC5C,iBAAK,WAAL,CAAiB,SAAjB,CAA2B,GAA3B,CAA+B,QAA/B;AACA,iBAAK,QAAL,CAAc,iBAAd;AACA;AACA,iBAAK,aAAL,CAAmB,KAAnB,GAA2B,EAA3B;AACA,iBAAK,kBAAL;AACA,iBAAK,QAAL,CAAc,iBAAd;AACA;AACH,SARD;;AAUA,aAAK,QAAL,CAAc,gBAAd,CAA+B,OAA/B,EAAwC,KAAK,KAAK,mBAAL,EAA7C;AACH;AACD,0BAAsB;AAClB;AACA,YAAI,CAAC,KAAK,eAAV,EAA2B;AACvB;AACA,kBAAM,YAAY,SAAS,aAAT,CAAuB,YAAvB,CAAlB;AACA,iBAAK,eAAL,GAAuB,UAAU,YAAjC;AACA,sBAAU,KAAV,CAAgB,MAAhB,GAAyB,KAAK,eAAL,GAAuB,IAAhD;AACH;AACD,aAAK,eAAL,CAAqB,KAArB,CAA2B,OAA3B,GAAqC,MAArC;AACA,aAAK,eAAL,CAAqB,SAArB,CAA+B,MAA/B,CAAsC,QAAtC;AACA,aAAK,eAAL;;AAEA,cAAM,MAAO,kDAAiD,KAAK,aAAL,CAAmB,KAAM,EAAvF;AACA,gBAAQ,GAAR,CAAY,GAAZ;AACA,cAAM,GAAN,EACK,IADL,CACU,YAAY,SAAS,IAAT,EADtB;AAEI;AAFJ,SAGK,IAHL,CAGU,YAAY;AACf,iBAAK,eAAL,CAAqB,SAArB,GAAiC,EAAjC;AACA,iBAAK,gBAAL,CAAsB,QAAtB;AACF,SANL,EAOK,KAPL,CAOa,GAAD,IAAS;AACb,oBAAQ,GAAR,CAAY,GAAZ;AACH,SATL;AAUH;AACD,aAAS,IAAT,EAAe;AACX,aAAK,IAAL,EAAW,SAAX,CAAqB,GAArB,CAAyB,QAAzB;AACH;AACD,aAAS,IAAT,EAAe;AACX,aAAK,IAAL,EAAW,KAAX,CAAiB,OAAjB,GAA2B,MAA3B;AACH;AACD,sBAAkB;AACd;AACA,cAAM,MAAO;;SAAb;AAGA,aAAK,eAAL,CAAqB,SAArB,GAAiC,GAAjC;AACH;;AAhR6B;;kBAAb,Y;AAoRrB,SAAS,uBAAT,CAAkC,EAAlC,EAAsC;AAClC,WAAO,GAAG,UAAH,CAAc,CAAd,EAAiB,OAAjB,CAAyB,KAAhC;AACH;;AAED,SAAS,kBAAT,CAA6B,QAA7B,EAAuC;AACnC,QAAI,UAAU,EAAd;;AAEA,QAAI,SAAS,mBAAS,YAAlB,CAAJ,EAAqC;AACjC,gBAAQ,IAAR,CAAa,cAAb;AACH;;AAED,QAAI,SAAS,mBAAS,SAAlB,CAAJ,EAAkC;AAC9B,gBAAQ,IAAR,CAAa,WAAb;AACH;;AAED,WAAO,QAAP,CAAgB,eAAhB,CAAgC,SAAhC,IAA6C,MAAM,QAAQ,IAAR,CAAa,GAAb,CAAnD;;AAEA,QAAI,gBAAgB,SAAS,mBAAS,aAAlB,CAApB;AACA,aAAS,eAAT,CAAyB,KAAzB,CAA+B,WAA/B,CAA2C,iBAA3C,EAA+D,GAAE,aAAc,IAA/E;;AAEA,QAAI,aAAa,SAAS,mBAAS,UAAlB,CAAjB;AACA,aAAS,eAAT,CAAyB,KAAzB,CAA+B,WAA/B,CAA2C,cAA3C,EAA2D,UAA3D;;AAEA,QAAI,iBAAiB,SAAS,mBAAS,cAAlB,CAArB;AACA,aAAS,eAAT,CAAyB,KAAzB,CAA+B,WAA/B,CAA2C,kBAA3C,EAA+D,cAA/D;AACH;;AAED,SAAS,qBAAT,CAAgC,WAAhC,EAA6C,IAA7C,EAAmD;AAC/C,QAAI,YAAY,MAAM,YAAY,SAAZ,CAAsB,KAAK,UAA3B,CAAtB;;AAEA,SAAK,EAAL,CAAQ,kBAAW,SAAnB,EAA8B,SAA9B;AACA,SAAK,EAAL,CAAQ,kBAAW,KAAnB,EAA0B,SAA1B;AACA,SAAK,EAAL,CAAQ,kBAAW,OAAnB,EAA4B,SAA5B;AACH;;AAED,SAAS,0BAAT,CAAqC,IAArC,EAA2C,IAA3C,EAAiD;AAC7C,QAAI,iBAAiB,MAAM;AACvB,YAAI,aAAa,KAAK,OAAL,GAAe,MAAhC;AACA,aAAK,UAAL,GAAkB,UAAlB;AACH,KAHD;;AAKA,SAAK,EAAL,CAAQ,kBAAW,KAAnB,EAA0B,cAA1B;AACA,SAAK,EAAL,CAAQ,kBAAW,OAAnB,EAA4B,cAA5B;AACA,SAAK,EAAL,CAAQ,kBAAW,QAAnB,EAA6B,cAA7B;AACH;;;;;;;;;;ACjVD;;AAEO,MAAM,kCAAa;AACtB,WAAO,KADe;AAEtB,aAAS,SAFa;AAGtB,eAAW,WAHW;AAItB,cAAU;AAJY,CAAnB;;AAOA,MAAM,cAAN,SAA6B,oBAA7B,CAA0C;;AAE7C,gBAAa,QAAb,EAAuB;AACnB;;AAEA,aAAK,IAAL,GAAY,SAAS,KAAT,EAAZ;AACA,aAAK,QAAL,GAAgB,KAAK,IAArB;;AAEA,aAAK,OAAL,GAAe,KAAK,IAAL,CAAU,MAAV,CAAiB,CAAC,MAAD,EAAS,GAAT,KAAiB;AAC7C,mBAAO,IAAI,EAAX,IAAiB,GAAjB;AACA,mBAAO,MAAP;AACH,SAHc,EAIf,EAJe,CAAf;AAKH;;AAED,QAAI,UAAJ,GAAkB;AACd,eAAO,KAAK,IAAL,CAAU,KAAV,EAAP;AACH;;AAED,cAAW;AACP,eAAO,KAAK,QAAZ;AACH;;AAED,QAAK,GAAL,EAAU;AACN,aAAK,IAAL,CAAU,IAAV,CAAe,GAAf;AACA,aAAK,OAAL,CAAa,IAAI,EAAjB,IAAuB,GAAvB;AACA,aAAK,IAAL,CAAU,WAAW,KAArB,EAA4B,GAA5B;AACH;;AAED,WAAQ,GAAR,EAAa;AACT,YAAI,MAAM,KAAK,IAAL,CAAU,OAAV,CAAkB,GAAlB,CAAV;AACA,aAAK,IAAL,CAAU,MAAV,CAAiB,GAAjB,EAAsB,CAAtB;AACA,eAAO,KAAK,OAAL,CAAa,IAAI,EAAjB,CAAP;AACA,aAAK,IAAL,CAAU,WAAW,OAArB,EAA8B,GAA9B;AACH;;AAED,WAAQ,IAAR,EAAc;AACV,YAAI,CAAC,IAAL,EAAW;AACP,iBAAK,QAAL,GAAgB,KAAK,UAArB;AACA,iBAAK,UAAL,GAAkB,IAAlB;AACA,iBAAK,IAAL,CAAU,WAAW,QAArB;AACA;AACH;;AAED,aAAK,UAAL,GAAkB,OAAO,KAAK,WAAL,EAAzB;;AAEA,YAAI,WAAW,KAAK,IAAL,CACV,MADU,CACH,KAAK,EAAE,IAAF,CAAO,WAAP,GAAqB,OAArB,CAA6B,KAAK,UAAlC,MAAkD,CAAC,CADrD,CAAf;;AAGA,YAAI,WAAW,SAAS,GAAT,CAAa,CAAC,CAAD,EAAI,CAAJ,MAAW,EAAE,OAAO,CAAT,EAAY,OAAO,EAAE,IAAF,CAAO,WAAP,EAAnB,EAAX,CAAb,CAAf;AACA,iBAAS,IAAT,CAAc,CAAC,CAAD,EAAI,CAAJ,KAAU;AACpB,gBAAI,OAAO,EAAE,KAAF,CAAQ,OAAR,CAAgB,IAAhB,CAAX;AAAA,gBACI,OAAO,EAAE,KAAF,CAAQ,OAAR,CAAgB,IAAhB,CADX;;AAGA,gBAAI,SAAS,IAAb,EAAmB;AACf,uBAAO,EAAE,KAAF,GAAU,EAAE,KAAnB;AACH;;AAED,mBAAO,OAAO,IAAd;AACH,SATD;;AAWA,aAAK,QAAL,GAAgB,SAAS,GAAT,CAAa,MAAM,SAAS,GAAG,KAAZ,CAAnB,CAAhB;;AAEA,aAAK,IAAL,CAAU,WAAW,QAArB;AACH;;AAED,YAAS,GAAT,EAAc,OAAd,EAAuB;AACnB,YAAI,KAAK,UAAT,EAAqB;AACjB,kBAAM,IAAI,KAAJ,CAAU,0CAAV,CAAN;AACH;;AAED,YAAI,CAAC,aAAa,OAAb,EAAsB,KAAK,IAAL,CAAU,MAAhC,CAAL,EAA8C;AAC1C,kBAAM,IAAI,KAAJ,CAAW,gCAAgC,OAAS,EAApD,CAAN;AACH;;AAED,YAAI,MAAM,KAAK,IAAf;AACA,YAAI,YAAY,IAAI,OAAJ,CAAY,GAAZ,CAAhB;AACA,YAAI,cAAc,OAAlB,EAA2B;AACvB;AACH;;AAED,YAAI,MAAJ,CAAW,SAAX,EAAsB,CAAtB;AACA,YAAI,MAAJ,CAAW,OAAX,EAAoB,CAApB,EAAuB,GAAvB;;AAEA,aAAK,IAAL,CAAU,WAAW,SAArB,EAAgC,GAAhC,EAAqC,SAArC,EAAgD,OAAhD;AACH;;AAED,eAAW,GAAX,EAAgB;AACZ,eAAO,KAAK,IAAL,CAAU,GAAV,CAAP;AACH;;AAED,iBAAc,KAAd,EAAqB;AACjB,eAAO,KAAK,QAAL,CAAc,GAAd,CAAkB,OAAO,IAAI,EAA7B,EAAiC,OAAjC,CAAyC,KAAzC,CAAP;AACH;;AAED,YAAS,KAAT,EAAgB;AACZ,eAAO,KAAK,OAAL,CAAa,KAAb,CAAP;AACH;;AAED,QAAI,MAAJ,GAAc;AACV,eAAO,KAAK,IAAL,CAAU,MAAjB;AACH;;AArG4C;;QAApC,c,GAAA,c;AAyGb,SAAS,YAAT,CAAsB,GAAtB,EAA2B,gBAA3B,EAA6C;AACzC,WAAO,QAAQ,KAAK,CAAb,IACP,QAAQ,IADD,IAEP,OAAO,CAFA,IAGP,MAAM,gBAHN;AAIH;;;;;;;;ACvHD,MAAM,OAAO;AACT,UAAM,MADG;AAET,WAAO,OAFE;AAGT,QAAI,IAHK;AAIT,UAAM;AAJG,CAAb;;AAOO,MAAM,IAAN,CAAW;;AAEd,gBAAa,UAAb,EAAyB,SAAzB,EAAoC;AAChC,aAAK,UAAL,GAAkB,UAAlB;AACA,aAAK,SAAL,GAAiB,SAAjB;AACH;;AAED,gBAAa;AACT,eAAO,KAAK,IAAL,CAAU,KAAK,UAAL,GAAkB,KAAK,SAAjC,CAAP;AACH;;AAED,iBAAc;AACV,eAAO,KAAK,SAAL,KAAmB,KAAK,SAA/B;AACH;;AAED,mBAAgB,QAAhB,EAA0B;AACtB,eAAO,WAAW,KAAK,SAAhB,GAA4B,KAAK,UAAL,GAAkB,KAAK,SAA1D;AACH;;AAED,sBAAmB,QAAnB,EAA6B,MAA7B,EAAqC;AACjC,YAAI,aAAa,KAAK,UAAL,EAAjB;AACA,eAAO,CAAC,aAAa,QAAb,GAAwB,MAAzB,IAAmC,UAA1C;AACH;;AAED,kBAAe,IAAf,EAAqB,SAArB,EAAgC;;AAE5B,YAAI,SAAS,KAAK,IAAlB,EAAwB;AACpB,mBAAO,CAAC,CAAR;AACH;;AAED,YAAI,SAAS,KAAK,KAAlB,EAAyB;AACrB,mBAAO,CAAP;AACH;;AAED,YAAI,SAAS,KAAK,EAAlB,EAAsB;AAClB,mBAAO,CAAC,SAAR;AACH;;AAED,YAAI,SAAS,KAAK,IAAlB,EAAwB;AACpB,mBAAO,SAAP;AACH;;AAED,eAAO,CAAP;AAEH;;AAED,eAAY,QAAZ,EAAsB,IAAtB,EAA4B;AACxB,YAAI,SAAS,KAAK,aAAL,CAAmB,IAAnB,EAAyB,KAAK,SAA9B,CAAb;AACA,YAAI,SAAS,KAAK,iBAAL,CAAuB,QAAvB,EAAiC,MAAjC,CAAb;;AAEA,eAAO,CAAC,KAAK,cAAL,CAAoB,MAApB,CAAR,EAAqC;AACjC,sBAAU,KAAK,aAAL,CAAmB,IAAnB,EAAyB,KAAK,SAA9B,CAAV;AACA,qBAAS,KAAK,iBAAL,CAAuB,QAAvB,EAAiC,MAAjC,CAAT;AACH;;AAED,eAAO,MAAP;AACH;AAxDa;QAAL,I,GAAA,I;;;;;;;;;;;;;;iBCPJ,c;;;;;;iBAAgB,U;;;;;;;;;iBAChB,I;;;;;;;;;;ACDT,MAAM,YAAY,WAAlB;AACA,MAAM,QAAQ,OAAd;;AAEA,MAAM,qBAAqB,OAAO,OAAP,CAAe,KAA1C;;AAEA,MAAM,QAAQ,KAAK,EAAE,EAArB;;AAEe,MAAM,WAAN,CAAkB;;AAE7B,cAAW,IAAX,EAAiB;AACb,YAAI,CAAC,IAAD,IAAS,CAAC,KAAK,MAAnB,EAA2B;AACvB;AACH;;AAED,YAAI,YAAY,KAAK,SAAL,CAAe,KAAK,GAAL,CAAS,KAAT,CAAf,CAAhB;;AAEA,eAAO,OAAP,CAAe,KAAf,CAAqB,GAArB,CAAyB;AACrB,mBAAO;AADc,SAAzB,EAEG,MAAM;AACL,gBAAI,OAAO,OAAP,CAAe,SAAnB,EAA8B;AAC1B,wBAAQ,KAAR,CAAc,OAAO,OAAP,CAAe,SAA7B;AACH;AACJ,SAND;AAOH;;AAED,WAAQ;AACJ,eAAO,QAAQ,GAAR,CAAY,CAAE,cAAF,EAAkB,SAAlB,CAAZ,EACN,IADM,CACD,CAAC,CAAE,aAAF,EAAiB,IAAjB,CAAD,KAA6B;AAC/B,gBAAI,QAAQ,cAAc,KAA1B;AACA,gBAAI,cAAc,gBAAgB,IAAhB,EAAsB,QAAQ,KAAK,KAAL,CAAW,KAAX,CAAR,GAA4B,IAAlD,CAAlB;AACA,mBAAO,WAAP;AACH,SALM,CAAP;AAMH;;AAzB4B;;kBAAZ,W;AA6BrB,SAAS,OAAT,GAAmB;AACf,WAAO,IAAI,OAAJ,CAAa,OAAD,IAAa;AAC5B,eAAO,UAAP,CAAkB,MAAlB,CAA0B,UAAD,IAAgB,QAAQ,UAAR,CAAzC;AACH,KAFM,EAGN,IAHM,CAGA,UAAD,IAAgB;AAClB,eAAO,WAAW,MAAX,CAAkB,KAAK;AAC1B,mBAAO,EAAE,IAAF,KAAW,SAAX,IACP,EAAE,IAAF,KAAW,KADJ,IAEP,EAAE,OAFF;AAGH,SAJM,CAAP;AAKH,KATM,CAAP;AAUH;;AAED,SAAS,eAAT,CAA0B,IAA1B,EAAgC,KAAhC,EAAuC;AACnC,QAAI,CAAC,KAAD,IAAU,CAAC,MAAM,MAArB,EAA6B;AACzB,eAAO,KAAK,KAAL,EAAP;AACA,aAAK,IAAL,CAAU,UAAU,CAAV,EAAa,CAAb,EAAgB;AACtB,gBAAI,QAAQ,EAAE,IAAd;AAAA,gBACA,QAAQ,EAAE,IADV;;AAGA,gBAAI,QAAQ,KAAZ,EAAmB;AACf,uBAAO,CAAP;AACH,aAFD,MAEO,IAAI,UAAU,KAAd,EAAqB;AACxB,uBAAO,CAAP;AACH;;AAED,mBAAO,CAAC,CAAR;AACH,SAXD;;AAaA,eAAO,IAAP;AACH;;AAED,QAAI,SAAS,KAAK,GAAL,CAAS,KAAT,CAAb;AACA,YAAQ,MAAM,MAAN,CAAa,WAAW,MAAX,EAAmB,KAAnB,CAAb,CAAR;;AAEA,QAAI,SAAS,IAAI,KAAJ,CAAU,MAAM,MAAhB,CAAb;AACA,SAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,MAAM,MAA1B,EAAkC,GAAlC,EAAuC;AACnC,YAAI,YAAY,OAAO,OAAP,CAAe,MAAM,CAAN,CAAf,CAAhB;AACA,YAAI,cAAc,CAAC,CAAnB,EAAsB;AAClB;AACH;;AAED,eAAO,CAAP,IAAY,KAAK,SAAL,CAAZ;AACH;;AAED,WAAO,OAAO,MAAP,CAAc,KAAK,CAAnB,CAAP;AACH;;AAED,SAAS,YAAT,GAAyB;AACrB,WAAO,IAAI,OAAJ,CAAa,OAAD,IAAa;AAC5B,2BAAmB,GAAnB,CAAuB,OAAvB,EAAiC,QAAD,IAAc,QAAQ,QAAR,CAA9C;AACH,KAFM,CAAP;AAGH;;AAED,SAAS,UAAT,CAAoB,IAApB,EAA0B,IAA1B,EAAgC;AAC5B,WAAO,KAAK,MAAL,CAAY,KAAK,KAAK,OAAL,CAAa,CAAb,MAAoB,CAAC,CAAtC,CAAP;AACH;;;;;;;;AC5FD,IAAI,eAAe,EAAnB;;AAEe,MAAM,WAAN,CAAkB;;AAE7B,WAAO,UAAP,CAAmB,GAAnB,EAAwB;AACpB,YAAI,WAAW,YAAY,GAAZ,CAAf;;AAEA,YAAI,aAAa,cAAb,CAA4B,QAA5B,CAAJ,EAA2C;AACvC,mBAAO,aAAa,QAAb,CAAP;AACH;;AAED,YAAI,QAAQ,IAAI,KAAhB;;AAEA,YAAI,SAAS,SAAS,KAAT,CAAb;AACA,qBAAa,QAAb,IAAyB,MAAzB;;AAEA,eAAO,MAAP;AACH;AAf4B;;kBAAZ,W;AAkBrB,SAAS,QAAT,CAAmB,KAAnB,EAA0B;AACtB,WAAO,MAAM,MAAN,CAAa,KAAK,EAAE,IAAF,KAAW,KAAK,GAAL,CAAS,GAAG,MAAM,GAAN,CAAU,KAAK,EAAE,IAAjB,CAAZ,CAA7B,EACF,GADE,CACE,KAAK,EAAE,GADT,CAAP;AAEH;;AAED,SAAS,WAAT,CAAqB,GAArB,EAA0B;AACtB,WAAO,IAAI,EAAX;AACH;;;;;;;;;;;;;;yCC3BQ,O;;;;;;;;;0CACA,O;;;;;;;;;;;;;;ACDT;;AAEO,MAAM,iBAAN,CAAwB;;AAE3B,gBAAY,GAAZ,EAAiB;AACb,aAAK,GAAL,GAAW,GAAX;AACH;;AAED,WAAO,MAAP,CAAc,GAAd,EAAmB;AACf,eAAO,IAAI,iBAAJ,CAAsB,GAAtB,CAAP;AACH;;AAED,YAAQ;AACJ,YAAI,EAAE,GAAF,KAAU,IAAd;AACA,YAAI,UAAU,sBAAY,UAAZ,CAAuB,GAAvB,CAAd;AACA,YAAI,SAAS,SAAS,aAAT,CAAuB,KAAvB,CAAb;AACA,eAAO,SAAP,GAAmB,KAAnB;AACA,eAAO,YAAP,CAAoB,OAApB,EAA6B,IAAI,IAAjC;AACA,eAAO,YAAP,CAAoB,UAApB,EAAgC,GAAhC;AACA,eAAO,SAAP,GAAmB,8BACd,uDAAuD,OAAS,aADlD,GAEd,0BAA0B,IAAI,IAAM,QAFtB,GAGf,QAHJ;AAIA,eAAO,OAAP,CAAe,KAAf,GAAuB,IAAI,EAA3B;AACA,eAAO,MAAP;AACH;AAvB0B;QAAlB,iB,GAAA,iB;;;;;;;;QC+BG,mB,GAAA,mB;AAjChB,MAAM,QAAQ,EAAd;AACA,MAAM,SAAS,EAAf;AACA,MAAM,aAAa,EAAnB;AACA,MAAM,aAAa,EAAnB;AACA,MAAM,aAAa;AACjB,MAAI,IADa;AAEjB,MAAI,MAFa;AAGjB,MAAI,MAHa;AAIjB,MAAI;AAJa,CAAnB;;AAOA,IAAI,oBAAoB;AACtB,SAAO,CACH,sBADG,EAEH,yBAFG,EAGH,0BAHG,CADe;AAMtB,WAAS,CACL,sBADK,EAEL,2BAFK,CANa;AAUtB,eAAa,CACT,iCADS,CAVS;AAatB,SAAO,CACH,sBADG;AAbe,CAAxB;;AAkBA,IAAI,mBAAJ;;AAEA,MAAM,EAAE,QAAF,KAAe,MAArB;;AAEO,SAAS,mBAAT,CAA6B,UAA7B,EAAyC,QAAzC,EAAmD;;AAExD,MAAI,CAAC,mBAAL,EAA0B;AACxB,0BAAsB,mBAAmB,QAAnB,CAAtB;AACD;;AAED,OAAK,IAAI,SAAT,IAAsB,mBAAtB,EAA2C;AACzC,wBAAoB,SAApB,EAA+B,OAA/B,CAAwC,QAAD,IAAc;AACnD,iBAAW,gBAAX,CAA4B,SAA5B,EAAuC,QAAvC;AACD,KAFD;AAGD;AACF;;AAED,SAAS,kBAAT,CAA6B,QAA7B,EAAuC;AACrC,SAAO,OAAO,IAAP,CAAY,iBAAZ,EACN,MADM,CACC,CAAC,MAAD,EAAS,SAAT,KAAuB;;AAE7B,WAAO,SAAP,IAAoB,kBAAkB,SAAlB,EACnB,GADmB,CACf,YAAY,SAAS,IAAT,CAAc,QAAd,CADG,CAApB;;AAGA,WAAO,MAAP;AACD,GAPM,EAQP,EARO,CAAP;AASD;;AAED,SAAS,sBAAT,CAAiC,EAAjC,EAAqC;AACnC,OAAK,eAAL,CAAqB,GAAG,aAAH,CAAiB,OAAjB,CAAyB,KAA9C;AACD;;AAED,SAAS,2BAAT,CAAsC,EAAtC,EAA0C;AACxC,MAAI,GAAG,KAAH,KAAa,CAAjB,EAAoB;AAClB;AACD;;AAED,KAAG,cAAH;AACA,KAAG,eAAH;AACA,OAAK,SAAL;AACD;;AAED,SAAS,iCAAT,CAA4C,EAA5C,EAAgD;AAC9C,KAAG,cAAH;AACA,KAAG,eAAH;AACD;;AAED,SAAS,sBAAT,CAAiC,EAAjC,EAAqC;AACnC,MAAI,MAAM,GAAG,OAAb;AAAA,MACA,KAAK,GAAG,aADR;;AAGA,MAAI,OAAO,UAAP,IAAqB,OAAO,UAAhC,EAA4C;AAC1C,QAAI,QAAQ,GAAG,OAAH,CAAW,KAAvB;AACA,QAAI,eAAe,KAAK,IAAL,CAAU,YAAV,CAAuB,KAAvB,CAAnB;AACA,QAAI,cAAc,KAAK,QAAL,CAAc,UAAd,CAAyB,YAAzB,EAAuC,WAAW,GAAX,CAAvC,CAAlB;AACA,aAAS,gBAAT,CAA0B,iBAA1B,EAA6C,WAA7C,EAA0D,KAA1D;AACD;AACF;;AAED,SAAS,yBAAT,CAAoC,EAApC,EAAwC;AACtC,MAAI,GAAG,OAAH,KAAe,KAAnB,EAA0B;AACxB,WAAO,KAAK,MAAL,EAAP;AACD;AACF;;AAED,SAAS,0BAAT,CAAqC,EAArC,EAAyC;AACvC,MAAI,GAAG,OAAH,KAAe,MAAnB,EAA2B;AACzB,SAAK,SAAL;AACD;AACF;;AAED,SAAS,sBAAT,CAAiC,EAAjC,EAAqC;AACnC,MAAI,GAAG,KAAH,KAAa,CAAjB,EAAoB;AAClB;AACD;;AAED,KAAG,cAAH;AACA,KAAG,eAAH;;AAEA,OAAK,MAAL;AACD;;;;;;;;;;;;;;8BC9GQ,iB;;;;;;;;;iCACA,oB;;;;;;;;;mBACA,mB;;;;;;;;;;;;ACFT;;AAEA;;AAEO,MAAM,oBAAN,CAA2B;;AAE9B,gBAAY,GAAZ,EAAiB;AACb,aAAK,GAAL,GAAW,GAAX;AACH;;AAED,WAAO,MAAP,CAAc,GAAd,EAAmB;AACf,eAAO,IAAI,oBAAJ,CAAyB,GAAzB,CAAP;AACH;;AAED,YAAQ;AACJ,YAAI,EAAE,GAAF,KAAU,IAAd;AACA,YAAI,UAAU,IAAI,IAAlB;AACA,YAAI,OAAO,SAAS,aAAT,CAAuB,GAAvB,CAAX;AACA,aAAK,SAAL,CAAe,GAAf,CAAmB,UAAnB;AACA,aAAK,YAAL,CAAkB,MAAlB,EAA0B,IAAI,GAA9B;AACA,aAAK,YAAL,CAAkB,QAAlB,EAA4B,QAA5B;AACA,YAAI,MAAM,SAAS,aAAT,CAAuB,KAAvB,CAAV;AACA,YAAI,SAAJ,GAAgB,KAAhB;AACA,YAAI,YAAJ,CAAiB,OAAjB,EAA0B,IAAI,WAA9B;AACA,YAAI,YAAJ,CAAiB,UAAjB,EAA6B,GAA7B;AACA,YAAI,SAAJ,GAAgB,8BACK,uDAAuD,OAAS;;mCADrE,GAIK,0BAA0B,IAAI,IAAM,QAJzC,GAKA,QALhB;AAMA,aAAK,WAAL,CAAiB,GAAjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAO,IAAP;AACH;AArC6B;QAArB,oB,GAAA,oB;;;ACJb;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"popup.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","module.exports={\n    \"name\": \"__MSG_appName__\",\n    \"version\": \"2.4.13\",\n    \"manifest_version\": 2,\n    \"incognito\": \"split\",\n    \"description\": \"__MSG_appDescription__\",\n    \"icons\": {\n        \"16\": \"images/icon16.png\",\n        \"32\": \"images/icon32.png\",\n        \"48\": \"images/grid48.png\",\n        \"128\": \"images/grid128.png\"\n    },\n    \"default_locale\": \"en\",\n    \"content_security_policy\": \"script-src 'self' 'unsafe-eval'; object-src 'self'\",\n    \"content_scripts\": [\n        {\n          \"matches\": [\n            \"<all_urls>\"\n          ],\n          \"js\": [\n            \"scripts/analytics.js\"\n          ],\n          \"all_frames\": true,\n          \"run_at\": \"document_end\"\n        }\n      ],\n    \"permissions\": [\n        \"<all_urls>\",\n        \"tabs\",\n        \"alarms\",\n        \"webRequest\",\n        \"webRequestBlocking\",\n        \"notifications\",\n        \"management\",\n        \"storage\"\n    ],\n    \"browser_action\": {\n        \"default_icon\": {\n            \"19\": \"images/icon19.png\",\n            \"38\": \"images/icon38.png\",\n            \"16\": \"images/icon16.png\",\n            \"32\": \"images/icon32.png\"\n        },\n        \"default_title\": \"Apps\",\n        \"default_popup\": \"popup.html\"\n    },\n    \"background\": {\n        \"scripts\": [\n            \"scripts/background.js\"\n        ],\n        \"persistent\": true\n    },\n    \"options_page\": \"options.html\",\n    \"commands\": {\n        \"_execute_browser_action\": {\n            \"suggested_key\": {\n                \"windows\": \"Ctrl+Period\",\n                \"mac\": \"Command+Period\",\n                \"chromeos\": \"Ctrl+Period\",\n                \"linux\": \"Ctrl+Period\"\n            }\n        },\n        \"open-as-window\": {\n            \"suggested_key\": {\n                \"windows\": \"Ctrl+Comma\",\n                \"mac\": \"Command+Comma\",\n                \"chromeos\": \"Ctrl+Comma\",\n                \"linux\": \"Ctrl+Comma\"\n            },\n            \"description\": \"Open as window\",\n            \"global\": true\n        }\n    }\n}\n","const SETTINGS_KEY = 'settings';\n\nexport const SETTINGS = {\n    ShowAppNames: 'showAppNames',\n    LauncherIconColor: 'launcherIconColor',\n    LauncherWidth: 'launcherWidth',\n    AppsPerRow: 'appsPerRow',\n    SearchBar: 'searchBar',\n    Version: 'version',\n    AppIconPadding: 'appIconPadding'\n};\n\nexport const LEGACY_SETTINGS = {\n    IconSize: 'iconSize'\n};\n\nconst chromeStorage = chrome.storage.local;\n\nconst CURRENT_VERSION = require('../../manifest.json').version;\n\nexport const DEFAULTS = {\n    [SETTINGS.ShowAppNames]: true,\n    [SETTINGS.SearchBar]: true,\n    [SETTINGS.LauncherIconColor]: '#000000',\n    [SETTINGS.LauncherWidth]: 350,\n    [SETTINGS.AppsPerRow]: 3,\n    [SETTINGS.AppIconPadding]: 5,\n    [SETTINGS.Version]: CURRENT_VERSION\n};\n\nexport class SettingsService {\n\n    get() {\n        return new Promise((resolve) =>\n                chromeStorage.get(SETTINGS_KEY,\n                    response => resolve(response[SETTINGS_KEY])))\n            .then(settings => settings || DEFAULTS)\n            .then(settings => {\n                for (let prop in DEFAULTS) {\n                    if (typeof settings[prop] === 'undefined') {\n                        settings[prop] = DEFAULTS[prop];\n                    }\n                }\n\n                return settings;\n            });\n    }\n\n    set(settings) {\n        settings[SETTINGS.Version] = CURRENT_VERSION;\n        let storageObject = {\n            [SETTINGS_KEY]: settings\n        };\n        return new Promise((resolve) => chromeStorage.set(storageObject, () => resolve(true)));\n    }\n}\n","import { SettingsService } from '../common/settings';\nimport { AppsService } from './services';\nimport AppsLauncher from './launcher';\n\nlet launcher = new AppsLauncher(new AppsService(), new SettingsService());\nlauncher.initialize()\n  .catch((err) => {\n      console.error(err, err.stack);\n  });\n","import { APPS_EVENT, AppsCollection, Grid } from './model';\nimport { SETTINGS } from '../common/settings';\nimport Sortable from 'sortablejs';\nimport {\n    AppElementBuilder,\n    SearchElementBuilder,\n    applyEventListeners\n} from './ui';\nimport { CLIENT_RENEG_LIMIT } from 'tls';\nconst APPS_LIST_ELEMENT = document.querySelector('.apps-list.filter');\nconst SEARCHED_APP_LIST = document.querySelector('.apps-list.search-apps');\nconst DOWNLOAD_FIELD = document.querySelector('.downloader');\nconst CLOSE_SEARCH = document.querySelector('.search-close');\nconst FIND_APPS = document.querySelector('.search-img');\n\nconst chromeManagement = chrome.management;\n\nexport default class AppsLauncher {\n\n    constructor (appsService, settingsService) {\n        this.appsService = appsService;\n        this.settingsService = settingsService;\n\n        this.apps = null;\n        this.appsGrid = null;\n        this.appElementsCache = {};\n        this.settings = null;\n        this.activeAppId = 0;\n        this.sortableGrid = null;\n\n        this.appsListElement = APPS_LIST_ELEMENT;\n        this.searchedAppList = SEARCHED_APP_LIST;\n        this.downloadField = DOWNLOAD_FIELD;\n        this.closeSearch = CLOSE_SEARCH;\n        this.findApps = FIND_APPS;\n        this.containerHeight = 0;\n    }\n\n    initialize () {\n        // this.settingsService.get() - get sett. from storage\n        // this.appsService.load() - returns ordered app list\n        return Promise.all([ this.settingsService.get(), this.appsService.load() ])\n        .then(([ settings, apps ]) => {\n            this.settings = settings;\n\n            applyStyleSettings(settings);\n\n            this.apps = new AppsCollection(apps);\n            this.appsGrid = new Grid(apps.length, settings[SETTINGS.AppsPerRow]);\n\n            this.draw(apps);\n            this.makeGridSortable();\n            this.registerAppEventHandlers();\n            this.initializeSearchBar();\n            this.initializeWebstoreSearch() ;\n            this.handleFocus();\n        });\n    }\n\n    draw (apps) {\n        this.appsListElement.innerHTML = '';\n\n        // TODO cache elements\n        apps.forEach(app => {\n            if (app.id in this.appElementsCache) {\n                this.appsListElement.appendChild(this.appElementsCache[app.id]);\n                return;\n            }\n\n            let appsListItem = document.createElement('li');\n            let appElement = AppElementBuilder.create(app).build();\n\n            applyEventListeners(appElement, this);\n\n            appsListItem.appendChild(appElement);\n            this.appsListElement.appendChild(appsListItem);\n\n            this.appElementsCache[app.id] = appsListItem;\n        });\n    }\n\n    drawSerchResults(searchedApps) {\n        console.log(this);\n        this.appsListElement.style.display = 'none';\n        this.clearSearchResults();\n        console.log(searchedApps, this.searchedAppList)\n        searchedApps.forEach(app => {\n            //console.log('-----', this.apps.apps)\n            let theSameApp = false;\n            for (let i = 0; i < this.apps.apps.length; i++) {\n                if (app.name === this.apps.apps[i].name) {\n                    console.log('the same app')\n                    theSameApp = true;\n                }\n            }\n            if (!theSameApp) {\n                let searchedListItem = document.createElement('li');\n                let appElement = SearchElementBuilder.create(app).build();\n    \n                searchedListItem.appendChild(appElement);\n                this.searchedAppList.appendChild(searchedListItem);\n            }\n           \n\n        })\n       \n\n        // for (let i = 0; i < 10; i++) {\n        //     this.searchedAppList.appendChild(this.createSearchedApp(i));\n        // }\n    }\n    clearSearchResults() {\n        this.searchedAppList.innerHTML = '';\n    }\n    createSearchedApp(i) {\n        let li = document.createElement('li');\n        li.classList.add('searched-app-item');\n        li.textContent = 'searched-app-item ' + i;\n        return li;\n    }\n    registerAppEventHandlers() {\n        saveOrderOnAppsEvents(this.appsService, this.apps);\n        updateGridSizeOnAppsEvents(this.appsGrid, this.apps);\n\n        this.apps.on(APPS_EVENT.FILTERED, () => this.draw(this.apps.display()));\n    }\n\n    launch () {\n        chromeManagement.launchApp(this.activeAppId);\n        window.close();\n    }\n\n    uninstall () {\n        chromeManagement.uninstall(this.activeAppId, { showConfirmDialog: true });\n        window.close();\n    }\n\n    filter (term) {\n        this.sortableGrid.option('disabled', !!term);\n        this.apps.filter(term);\n    }\n\n    updateActiveApp(appId) {\n        this.activeAppId = appId;\n        this.apps.getIndexById(appId);\n    }\n\n    makeGridSortable () {\n        let currentElement;\n\n        let onEnd = (evnt) => {\n            if (!currentElement || evnt.oldIndex === evnt.newIndex) {\n                return;\n            }\n\n            let appId = getAppIdFromAppListItem(currentElement);\n            let app = this.apps.getById(appId);\n            this.apps.reorder(app, evnt.newIndex);\n            currentElement = null;\n        };\n\n        let onUpdate = (evnt) => {\n            currentElement = evnt.item;\n        };\n\n        this.sortableGrid = Sortable.create(this.appsListElement, {\n            draggable: 'li',\n            animation: 150,\n            onEnd,\n            onUpdate\n        });\n    }\n\n    handleFocus() {\n        let hasSearch = this.settings[SETTINGS.SearchBar];\n        let selToFocus = hasSearch ?\n            '.search_input' :\n            '.apps-list .app:first-of-type';\n        document.querySelector(selToFocus).focus();\n    }\n\n    initializeSearchBar() {\n        if (!this.settings[SETTINGS.SearchBar]) {\n            return;\n        }\n\n        let searchInput = document.querySelector('input.search_input');\n        if (!searchInput) {\n            return;\n        }\n\n        searchInput.addEventListener('keyup', e => {\n            console.log('на фильтре')\n            let term = searchInput.value;\n            if (e.keyCode === 13 && this.apps.filtered.length) {\n                this.updateActiveApp(this.apps.filtered[0].id);\n                this.launch();\n                return;\n            }\n\n            if (e.keyCode === 40) {\n                // this.updateActiveApp(this.apps.filtered[0].id);\n                let appEl = document.querySelector('.apps-list .app');\n                appEl.focus();\n                return appEl.offsetHeight;\n                // force redraw element\n            }\n\n            this.filter(term);\n        });\n\n\n\n    }\n    initializeWebstoreSearch() {\n        let downloadInput = document.querySelector('.downloader');\n        if (!downloadInput) {\n            return;\n        }\n        downloadInput.addEventListener('keyup', e => {\n            if (e.keyCode === 13) {\n                console.log('inside')\n                e.preventDefault();\n                this.handleSearchRequest();\n            }\n            if (!e.target.value.length) {\n                this.closeSearch.classList.add('hidden');\n                this.hideList('searchedAppList');\n                this.clearSearchResults();\n                this.showList('appsListElement');\n                //this.appsListElement.style.display = \"flex\";\n                this.downloadField.value = e.target.value;\n            } else {\n                if (this.closeSearch.classList.contains('hidden')) {\n                    this.closeSearch.classList.remove('hidden');\n                }\n                this.downloadField.value = e.target.value;\n            }\n        });\n\n        this.closeSearch.addEventListener('click', e => {\n            this.closeSearch.classList.add('hidden');\n            this.hideList('searchedAppList');\n            //this.searchedAppList.classList.add('hidden');\n            this.downloadField.value = '';\n            this.clearSearchResults();\n            this.showList('appsListElement');\n            //this.appsListElement.style.display = \"flex\";\n        });\n\n        this.findApps.addEventListener('click', e => this.handleSearchRequest());\n    }\n    handleSearchRequest() {\n        //this.clearSearchResults();\n        if (!this.containerHeight) {\n            // set height to body\n            const container = document.querySelector('.container');\n            this.containerHeight = container.clientHeight;\n            container.style.height = this.containerHeight + 'px';\n        }\n        this.appsListElement.style.display = \"none\";\n        this.searchedAppList.classList.remove('hidden');\n        this.insertPreloader();\n\n        const url = `http://launch-control.net/api/?action=search&q=${this.downloadField.value}`;\n        console.log(url)\n        fetch(url)\n            .then(response => response.json())\n            //.then(response => JSON.parse(response))\n            .then(objArray => {\n               this.searchedAppList.innerHTML = '';\n               this.drawSerchResults(objArray) \n            })\n            .catch( (err) => {\n                console.log(err);\n            })\n    }\n    hideList(list) {\n        this[list].classList.add('hidden');\n    }\n    showList(list) {\n        this[list].style.display = 'flex';\n    }\n    insertPreloader() {\n        //this.preloader.classList.remove('hidden')\n        const img = `\n            <img class=\"search-preloader\" src=\"../images/loading_1.gif\" alt=\"preloader\" />\n        `\n        this.searchedAppList.innerHTML = img;\n    }\n\n}\n\nfunction getAppIdFromAppListItem (li) {\n    return li.childNodes[0].dataset.appId;\n}\n\nfunction applyStyleSettings (settings) {\n    let classes = [];\n\n    if (settings[SETTINGS.ShowAppNames]) {\n        classes.push('showAppNames');\n    }\n\n    if (settings[SETTINGS.SearchBar]) {\n        classes.push('hasSearch');\n    }\n\n    window.document.documentElement.className += ' ' + classes.join(' ');\n\n    let launcherWidth = settings[SETTINGS.LauncherWidth];\n    document.documentElement.style.setProperty('--launcherWidth', `${launcherWidth}px`);\n\n    let appsPerRow = settings[SETTINGS.AppsPerRow];\n    document.documentElement.style.setProperty('--appsPerRow', appsPerRow);\n\n    let appIconPadding = settings[SETTINGS.AppIconPadding];\n    document.documentElement.style.setProperty('--appIconPadding', appIconPadding);\n}\n\nfunction saveOrderOnAppsEvents (appsService, apps) {\n    let saveOrder = () => appsService.saveOrder(apps.collection);\n\n    apps.on(APPS_EVENT.REORDERED, saveOrder);\n    apps.on(APPS_EVENT.ADDED, saveOrder);\n    apps.on(APPS_EVENT.REMOVED, saveOrder);\n}\n\nfunction updateGridSizeOnAppsEvents (grid, apps) {\n    let updateGridSize = () => {\n        let itemsCount = apps.display().length;\n        grid.itemsCount = itemsCount;\n    };\n\n    apps.on(APPS_EVENT.ADDED, updateGridSize);\n    apps.on(APPS_EVENT.REMOVED, updateGridSize);\n    apps.on(APPS_EVENT.FILTERED, updateGridSize);\n}\n","import { EventEmitter } from 'events';\n\nexport const APPS_EVENT = {\n    ADDED: 'add',\n    REMOVED: 'removed',\n    REORDERED: 'reordered',\n    FILTERED: 'filtered'\n};\n\nexport class AppsCollection extends EventEmitter {\n\n    constructor (appsList) {\n        super();\n\n        this.apps = appsList.slice();\n        this.filtered = this.apps;\n\n        this.mapById = this.apps.reduce((result, app) => {\n            result[app.id] = app;\n            return result;\n        },\n        {});\n    }\n\n    get collection () {\n        return this.apps.slice();\n    }\n\n    display () {\n        return this.filtered;\n    }\n\n    add (app) {\n        this.apps.push(app);\n        this.mapById[app.id] = app;\n        this.emit(APPS_EVENT.ADDED, app);\n    }\n\n    remove (app) {\n        let idx = this.apps.indexOf(app);\n        this.apps.splice(idx, 1);\n        delete this.mapById[app.id];\n        this.emit(APPS_EVENT.REMOVED, app);\n    }\n\n    filter (term) {\n        if (!term) {\n            this.filtered = this.collection;\n            this.filterTerm = null;\n            this.emit(APPS_EVENT.FILTERED);\n            return;\n        }\n\n        this.filterTerm = term = term.toUpperCase();\n\n        let filtered = this.apps\n            .filter(x => x.name.toUpperCase().indexOf(this.filterTerm) !== -1);\n\n        let orderMap = filtered.map((x, i) => ({ index: i, value: x.name.toUpperCase() }));\n        orderMap.sort((a, b) => {\n            let aIdx = a.value.indexOf(term),\n                bIdx = b.value.indexOf(term);\n\n            if (aIdx === bIdx) {\n                return a.value > b.value;\n            }\n\n            return aIdx > bIdx;\n        });\n\n        this.filtered = orderMap.map(el => filtered[el.index]);\n\n        this.emit(APPS_EVENT.FILTERED);\n    }\n\n    reorder (app, toIndex) {\n        if (this.filterTerm) {\n            throw new Error('Cannot reorder filtered apps collection.');\n        }\n\n        if (!isValidIndex(toIndex, this.apps.length)) {\n            throw new Error(`Invalid app reorder toIndex: ${ toIndex }`);\n        }\n\n        let arr = this.apps;\n        let fromIndex = arr.indexOf(app);\n        if (fromIndex === toIndex) {\n            return;\n        }\n\n        arr.splice(fromIndex, 1);\n        arr.splice(toIndex, 0, app);\n\n        this.emit(APPS_EVENT.REORDERED, app, fromIndex, toIndex);\n    }\n\n    getByIndex(idx) {\n        return this.apps[idx];\n    }\n\n    getIndexById (appId) {\n        return this.filtered.map(app => app.id).indexOf(appId);\n    }\n\n    getById (appId) {\n        return this.mapById[appId];\n    }\n\n    get length () {\n        return this.apps.length;\n    }\n\n}\n\nfunction isValidIndex(idx, collectionLength) {\n    return idx !== void 0 &&\n    idx !== null &&\n    idx >= 0 &&\n    idx < collectionLength;\n}\n","const MOVE = {\n    LEFT: 'left',\n    RIGHT: 'right',\n    UP: 'up',\n    DOWN: 'down'\n};\n\nexport class Grid {\n\n    constructor (itemsCount, gridWidth) {\n        this.itemsCount = itemsCount;\n        this.gridWidth = gridWidth;\n    }\n\n    rowsCount () {\n        return Math.ceil(this.itemsCount / this.gridWidth);\n    }\n\n    cellsCount () {\n        return this.rowsCount() * this.gridWidth;\n    }\n\n    positionExists (position) {\n        return position / this.gridWidth < this.itemsCount / this.gridWidth;\n    }\n\n    translatePosition (position, vector) {\n        let cellsCount = this.cellsCount();\n        return (cellsCount + position + vector) % cellsCount;\n    }\n\n    getListVector (move, gridWidth) {\n\n        if (move === MOVE.LEFT) {\n            return -1;\n        }\n\n        if (move === MOVE.RIGHT) {\n            return 1;\n        }\n\n        if (move === MOVE.UP) {\n            return -gridWidth;\n        }\n\n        if (move === MOVE.DOWN) {\n            return gridWidth;\n        }\n\n        return 0;\n\n    }\n\n    moveOnGrid (position, move) {\n        let vector = this.getListVector(move, this.gridWidth);\n        let newPos = this.translatePosition(position, vector);\n\n        while (!this.positionExists(newPos)) {\n            vector += this.getListVector(move, this.gridWidth);\n            newPos = this.translatePosition(position, vector);\n        }\n\n        return newPos;\n    }\n}\n","export { AppsCollection, APPS_EVENT } from './apps';\nexport { Grid } from './grid';\n","const EXTENSION = 'extension';\nconst THEME = 'theme';\n\nconst chromeLocalStorage = chrome.storage.local;\n\nconst getId = x => x.id;\n\nexport default class AppsService {\n\n    saveOrder (apps) {\n        if (!apps || !apps.length) {\n            return;\n        }\n\n        let appsOrder = JSON.stringify(apps.map(getId));\n\n        chrome.storage.local.set({\n            order: appsOrder\n        }, () => {\n            if (chrome.runtime.lastError) {\n                console.error(chrome.runtime.lastError);\n            }\n        });\n    }\n\n    load () {\n        return Promise.all([ getAppsOrder(), getApps() ])\n        .then(([ orderResponse, apps ]) => {\n            let order = orderResponse.order;\n            let orderedApps = composeAppsList(apps, order ? JSON.parse(order) : null);\n            return orderedApps;\n        });\n    }\n\n}\n\nfunction getApps() {\n    return new Promise((resolve) => {\n        chrome.management.getAll((extensions) => resolve(extensions));\n    })\n    .then((extensions) => {\n        return extensions.filter(x => {\n            return x.type !== EXTENSION &&\n            x.type !== THEME &&\n            x.enabled;\n        });\n    });\n}\n\nfunction composeAppsList (apps, order) {\n    if (!order || !order.length) {\n        apps = apps.slice();\n        apps.sort(function (a, b) {\n            let aname = a.name,\n            bname = b.name;\n\n            if (aname > bname) {\n                return 1;\n            } else if (aname === bname) {\n                return 0;\n            }\n\n            return -1;\n        });\n\n        return apps;\n    }\n\n    let appIds = apps.map(getId);\n    order = order.concat(difference(appIds, order));\n\n    let result = new Array(order.length);\n    for (let i = 0; i < order.length; i++) {\n        let curAppIdx = appIds.indexOf(order[i]);\n        if (curAppIdx === -1) {\n            continue;\n        }\n\n        result[i] = apps[curAppIdx];\n    }\n\n    return result.filter(x => x);\n}\n\nfunction getAppsOrder () {\n    return new Promise((resolve) => {\n        chromeLocalStorage.get('order', (response) => resolve(response));\n    });\n}\n\nfunction difference(arr1, arr2) {\n    return arr1.filter(i => arr2.indexOf(i) === -1);\n}\n","let appIconCache = {};\n\nexport default class IconService {\n\n    static getIconUrl (app) {\n        let cacheKey = getCacheKey(app);\n\n        if (appIconCache.hasOwnProperty(cacheKey)) {\n            return appIconCache[cacheKey];\n        }\n\n        let icons = app.icons;\n\n        let result = findIcon(icons);\n        appIconCache[cacheKey] = result;\n\n        return result;\n    }\n}\n\nfunction findIcon (icons) {\n    return icons.filter(x => x.size === Math.max(...icons.map(i => i.size)))\n        .map(x => x.url);\n}\n\nfunction getCacheKey(app) {\n    return app.id;\n}\n","export { default as AppsService } from './apps';\nexport { default as IconService } from './icons';\n","import { IconService } from '../services';\n\nexport class AppElementBuilder {\n\n    constructor(app) {\n        this.app = app;\n    }\n\n    static create(app) {\n        return new AppElementBuilder(app);\n    }\n\n    build() {\n        let { app } = this;\n        let iconUrl = IconService.getIconUrl(app);\n        let result = document.createElement('div');\n        result.className = 'app';\n        result.setAttribute('title', app.name);\n        result.setAttribute('tabindex', '1');\n        result.innerHTML = '<div class=\"app_content\">' +\n            `<div class=\"app_icon\" style=\"background-image: url('${ iconUrl }')\" ></div>` +\n            `<div class=\"app_name\" >${ app.name }</div>` +\n            '</div>';\n        result.dataset.appId = app.id;\n        return result;\n    }\n}\n","const ENTER = 13;\nconst DELETE = 46;\nconst ARROW_DOWN = 40;\nconst ARROW_LEFT = 37;\nconst GRID_MOVES = {\n  38: 'up',\n  40: 'down',\n  37: 'left',\n  39: 'right'\n};\n\nlet appEventListeners = {\n  keyup: [\n      updateFocusOnArrowKeys,\n      launchActiveAppOnEnterKey,\n      deleteActiveAppOnDeleteKey\n  ],\n  mouseup: [\n      launchActiveAppOnClick,\n      deleteActiveAppOnRightClick\n  ],\n  contextmenu: [\n      cancelDefaultActionForContextMenu\n  ],\n  focus: [\n      changeActiveAppOnFocus\n  ]\n};\n\nlet boundEventListeners;\n\nconst { document } = window;\n\nexport function applyEventListeners(appElement, launcher) {\n\n  if (!boundEventListeners) {\n    boundEventListeners = bindEventListeners(launcher);\n  }\n\n  for (let eventName in boundEventListeners) {\n    boundEventListeners[eventName].forEach((listener) => {\n      appElement.addEventListener(eventName, listener);\n    });\n  }\n}\n\nfunction bindEventListeners (launcher) {\n  return Object.keys(appEventListeners)\n  .reduce((result, eventName) => {\n\n    result[eventName] = appEventListeners[eventName]\n    .map(listener => listener.bind(launcher));\n\n    return result;\n  },\n  {});\n}\n\nfunction changeActiveAppOnFocus (ev) {\n  this.updateActiveApp(ev.currentTarget.dataset.appId);\n}\n\nfunction deleteActiveAppOnRightClick (ev) {\n  if (ev.which !== 3) {\n    return;\n  }\n\n  ev.preventDefault();\n  ev.stopPropagation();\n  this.uninstall();\n}\n\nfunction cancelDefaultActionForContextMenu (ev) {\n  ev.preventDefault();\n  ev.stopPropagation();\n}\n\nfunction updateFocusOnArrowKeys (ev) {\n  let key = ev.keyCode,\n  el = ev.currentTarget;\n\n  if (key >= ARROW_LEFT && key <= ARROW_DOWN) {\n    let appId = el.dataset.appId;\n    let currentIndex = this.apps.getIndexById(appId);\n    let targetIndex = this.appsGrid.moveOnGrid(currentIndex, GRID_MOVES[key]);\n    document.querySelectorAll('.apps-list .app')[targetIndex].focus();\n  }\n}\n\nfunction launchActiveAppOnEnterKey (ev) {\n  if (ev.keyCode === ENTER) {\n    return this.launch();\n  }\n}\n\nfunction deleteActiveAppOnDeleteKey (ev) {\n  if (ev.keyCode === DELETE) {\n    this.uninstall();\n  }\n}\n\nfunction launchActiveAppOnClick (ev) {\n  if (ev.which !== 1) {\n    return;\n  }\n\n  ev.preventDefault();\n  ev.stopPropagation();\n\n  this.launch();\n}\n","export { AppElementBuilder } from './appElementBuilder';\nexport { SearchElementBuilder } from './searchElementBuilder';\nexport { applyEventListeners } from './events';\n","import { DH_CHECK_P_NOT_PRIME } from \"constants\";\n\n//import { IconService } from '../services';\n\nexport class SearchElementBuilder {\n\n    constructor(app) {\n        this.app = app;\n    }\n\n    static create(app) {\n        return new SearchElementBuilder(app);\n    }\n\n    build() {\n        let { app } = this;\n        let iconUrl = app.icon;\n        let link = document.createElement('a');\n        link.classList.add('app-link');\n        link.setAttribute('href', app.url);\n        link.setAttribute('target', '_blank');\n        let div = document.createElement('div');\n        div.className = 'app';\n        div.setAttribute('title', app.description);\n        div.setAttribute('tabindex', '1');\n        div.innerHTML = '<div class=\"app_content\">' +\n                            `<div class=\"app_icon\" style=\"background-image: url('${ iconUrl }')\" >\n                                <span class=\"add-icon\"></span>\n                            </div>` +\n                            `<div class=\"app_name\" >${ app.name }</div>` +\n                        '</div>';\n        link.appendChild(div);\n        // link.addEventListener('click', e => {\n        //     chrome.management.generateAppForLink(app.url, app.name);\n        // })\n        // result.innerHTML = `\n        //                     <div class=\"app_content\">\n        //                         <div class=\"app_icon\" style=\"background-image: url('${ iconUrl }')\" ></div>\n        //                         <div class=\"app_name\" >${ app.name }</div>\n        //                     </div>`;\n        return link;\n    }\n}\n\n","","module.exports={\n  \"O_RDONLY\": 0,\n  \"O_WRONLY\": 1,\n  \"O_RDWR\": 2,\n  \"S_IFMT\": 61440,\n  \"S_IFREG\": 32768,\n  \"S_IFDIR\": 16384,\n  \"S_IFCHR\": 8192,\n  \"S_IFBLK\": 24576,\n  \"S_IFIFO\": 4096,\n  \"S_IFLNK\": 40960,\n  \"S_IFSOCK\": 49152,\n  \"O_CREAT\": 512,\n  \"O_EXCL\": 2048,\n  \"O_NOCTTY\": 131072,\n  \"O_TRUNC\": 1024,\n  \"O_APPEND\": 8,\n  \"O_DIRECTORY\": 1048576,\n  \"O_NOFOLLOW\": 256,\n  \"O_SYNC\": 128,\n  \"O_SYMLINK\": 2097152,\n  \"O_NONBLOCK\": 4,\n  \"S_IRWXU\": 448,\n  \"S_IRUSR\": 256,\n  \"S_IWUSR\": 128,\n  \"S_IXUSR\": 64,\n  \"S_IRWXG\": 56,\n  \"S_IRGRP\": 32,\n  \"S_IWGRP\": 16,\n  \"S_IXGRP\": 8,\n  \"S_IRWXO\": 7,\n  \"S_IROTH\": 4,\n  \"S_IWOTH\": 2,\n  \"S_IXOTH\": 1,\n  \"E2BIG\": 7,\n  \"EACCES\": 13,\n  \"EADDRINUSE\": 48,\n  \"EADDRNOTAVAIL\": 49,\n  \"EAFNOSUPPORT\": 47,\n  \"EAGAIN\": 35,\n  \"EALREADY\": 37,\n  \"EBADF\": 9,\n  \"EBADMSG\": 94,\n  \"EBUSY\": 16,\n  \"ECANCELED\": 89,\n  \"ECHILD\": 10,\n  \"ECONNABORTED\": 53,\n  \"ECONNREFUSED\": 61,\n  \"ECONNRESET\": 54,\n  \"EDEADLK\": 11,\n  \"EDESTADDRREQ\": 39,\n  \"EDOM\": 33,\n  \"EDQUOT\": 69,\n  \"EEXIST\": 17,\n  \"EFAULT\": 14,\n  \"EFBIG\": 27,\n  \"EHOSTUNREACH\": 65,\n  \"EIDRM\": 90,\n  \"EILSEQ\": 92,\n  \"EINPROGRESS\": 36,\n  \"EINTR\": 4,\n  \"EINVAL\": 22,\n  \"EIO\": 5,\n  \"EISCONN\": 56,\n  \"EISDIR\": 21,\n  \"ELOOP\": 62,\n  \"EMFILE\": 24,\n  \"EMLINK\": 31,\n  \"EMSGSIZE\": 40,\n  \"EMULTIHOP\": 95,\n  \"ENAMETOOLONG\": 63,\n  \"ENETDOWN\": 50,\n  \"ENETRESET\": 52,\n  \"ENETUNREACH\": 51,\n  \"ENFILE\": 23,\n  \"ENOBUFS\": 55,\n  \"ENODATA\": 96,\n  \"ENODEV\": 19,\n  \"ENOENT\": 2,\n  \"ENOEXEC\": 8,\n  \"ENOLCK\": 77,\n  \"ENOLINK\": 97,\n  \"ENOMEM\": 12,\n  \"ENOMSG\": 91,\n  \"ENOPROTOOPT\": 42,\n  \"ENOSPC\": 28,\n  \"ENOSR\": 98,\n  \"ENOSTR\": 99,\n  \"ENOSYS\": 78,\n  \"ENOTCONN\": 57,\n  \"ENOTDIR\": 20,\n  \"ENOTEMPTY\": 66,\n  \"ENOTSOCK\": 38,\n  \"ENOTSUP\": 45,\n  \"ENOTTY\": 25,\n  \"ENXIO\": 6,\n  \"EOPNOTSUPP\": 102,\n  \"EOVERFLOW\": 84,\n  \"EPERM\": 1,\n  \"EPIPE\": 32,\n  \"EPROTO\": 100,\n  \"EPROTONOSUPPORT\": 43,\n  \"EPROTOTYPE\": 41,\n  \"ERANGE\": 34,\n  \"EROFS\": 30,\n  \"ESPIPE\": 29,\n  \"ESRCH\": 3,\n  \"ESTALE\": 70,\n  \"ETIME\": 101,\n  \"ETIMEDOUT\": 60,\n  \"ETXTBSY\": 26,\n  \"EWOULDBLOCK\": 35,\n  \"EXDEV\": 18,\n  \"SIGHUP\": 1,\n  \"SIGINT\": 2,\n  \"SIGQUIT\": 3,\n  \"SIGILL\": 4,\n  \"SIGTRAP\": 5,\n  \"SIGABRT\": 6,\n  \"SIGIOT\": 6,\n  \"SIGBUS\": 10,\n  \"SIGFPE\": 8,\n  \"SIGKILL\": 9,\n  \"SIGUSR1\": 30,\n  \"SIGSEGV\": 11,\n  \"SIGUSR2\": 31,\n  \"SIGPIPE\": 13,\n  \"SIGALRM\": 14,\n  \"SIGTERM\": 15,\n  \"SIGCHLD\": 20,\n  \"SIGCONT\": 19,\n  \"SIGSTOP\": 17,\n  \"SIGTSTP\": 18,\n  \"SIGTTIN\": 21,\n  \"SIGTTOU\": 22,\n  \"SIGURG\": 16,\n  \"SIGXCPU\": 24,\n  \"SIGXFSZ\": 25,\n  \"SIGVTALRM\": 26,\n  \"SIGPROF\": 27,\n  \"SIGWINCH\": 28,\n  \"SIGIO\": 23,\n  \"SIGSYS\": 12,\n  \"SSL_OP_ALL\": 2147486719,\n  \"SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION\": 262144,\n  \"SSL_OP_CIPHER_SERVER_PREFERENCE\": 4194304,\n  \"SSL_OP_CISCO_ANYCONNECT\": 32768,\n  \"SSL_OP_COOKIE_EXCHANGE\": 8192,\n  \"SSL_OP_CRYPTOPRO_TLSEXT_BUG\": 2147483648,\n  \"SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS\": 2048,\n  \"SSL_OP_EPHEMERAL_RSA\": 0,\n  \"SSL_OP_LEGACY_SERVER_CONNECT\": 4,\n  \"SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER\": 32,\n  \"SSL_OP_MICROSOFT_SESS_ID_BUG\": 1,\n  \"SSL_OP_MSIE_SSLV2_RSA_PADDING\": 0,\n  \"SSL_OP_NETSCAPE_CA_DN_BUG\": 536870912,\n  \"SSL_OP_NETSCAPE_CHALLENGE_BUG\": 2,\n  \"SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG\": 1073741824,\n  \"SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG\": 8,\n  \"SSL_OP_NO_COMPRESSION\": 131072,\n  \"SSL_OP_NO_QUERY_MTU\": 4096,\n  \"SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION\": 65536,\n  \"SSL_OP_NO_SSLv2\": 16777216,\n  \"SSL_OP_NO_SSLv3\": 33554432,\n  \"SSL_OP_NO_TICKET\": 16384,\n  \"SSL_OP_NO_TLSv1\": 67108864,\n  \"SSL_OP_NO_TLSv1_1\": 268435456,\n  \"SSL_OP_NO_TLSv1_2\": 134217728,\n  \"SSL_OP_PKCS1_CHECK_1\": 0,\n  \"SSL_OP_PKCS1_CHECK_2\": 0,\n  \"SSL_OP_SINGLE_DH_USE\": 1048576,\n  \"SSL_OP_SINGLE_ECDH_USE\": 524288,\n  \"SSL_OP_SSLEAY_080_CLIENT_DH_BUG\": 128,\n  \"SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG\": 0,\n  \"SSL_OP_TLS_BLOCK_PADDING_BUG\": 512,\n  \"SSL_OP_TLS_D5_BUG\": 256,\n  \"SSL_OP_TLS_ROLLBACK_BUG\": 8388608,\n  \"ENGINE_METHOD_DSA\": 2,\n  \"ENGINE_METHOD_DH\": 4,\n  \"ENGINE_METHOD_RAND\": 8,\n  \"ENGINE_METHOD_ECDH\": 16,\n  \"ENGINE_METHOD_ECDSA\": 32,\n  \"ENGINE_METHOD_CIPHERS\": 64,\n  \"ENGINE_METHOD_DIGESTS\": 128,\n  \"ENGINE_METHOD_STORE\": 256,\n  \"ENGINE_METHOD_PKEY_METHS\": 512,\n  \"ENGINE_METHOD_PKEY_ASN1_METHS\": 1024,\n  \"ENGINE_METHOD_ALL\": 65535,\n  \"ENGINE_METHOD_NONE\": 0,\n  \"DH_CHECK_P_NOT_SAFE_PRIME\": 2,\n  \"DH_CHECK_P_NOT_PRIME\": 1,\n  \"DH_UNABLE_TO_CHECK_GENERATOR\": 4,\n  \"DH_NOT_SUITABLE_GENERATOR\": 8,\n  \"NPN_ENABLED\": 1,\n  \"RSA_PKCS1_PADDING\": 1,\n  \"RSA_SSLV23_PADDING\": 2,\n  \"RSA_NO_PADDING\": 3,\n  \"RSA_PKCS1_OAEP_PADDING\": 4,\n  \"RSA_X931_PADDING\": 5,\n  \"RSA_PKCS1_PSS_PADDING\": 6,\n  \"POINT_CONVERSION_COMPRESSED\": 2,\n  \"POINT_CONVERSION_UNCOMPRESSED\": 4,\n  \"POINT_CONVERSION_HYBRID\": 6,\n  \"F_OK\": 0,\n  \"R_OK\": 4,\n  \"W_OK\": 2,\n  \"X_OK\": 1,\n  \"UV_UDP_REUSEADDR\": 4\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","/**!\n * Sortable\n * @author\tRubaXa   <trash@rubaxa.org>\n * @author\towenm    <owen23355@gmail.com>\n * @license MIT\n */\n\n(function sortableModule(factory) {\n\t\"use strict\";\n\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(factory);\n\t}\n\telse if (typeof module != \"undefined\" && typeof module.exports != \"undefined\") {\n\t\tmodule.exports = factory();\n\t}\n\telse {\n\t\t/* jshint sub:true */\n\t\twindow[\"Sortable\"] = factory();\n\t}\n})(function sortableFactory() {\n\t\"use strict\";\n\n\tif (typeof window === \"undefined\" || !window.document) {\n\t\treturn function sortableError() {\n\t\t\tthrow new Error(\"Sortable.js requires a window with a document\");\n\t\t};\n\t}\n\n\tvar dragEl,\n\t\tparentEl,\n\t\tghostEl,\n\t\tcloneEl,\n\t\trootEl,\n\t\tnextEl,\n\t\tlastDownEl,\n\n\t\tscrollEl,\n\t\tscrollParentEl,\n\t\tscrollCustomFn,\n\n\t\toldIndex,\n\t\tnewIndex,\n\n\t\tactiveGroup,\n\t\tputSortable,\n\n\t\tautoScrolls = [],\n\t\tscrolling = false,\n\n\t\tawaitingDragStarted = false,\n\t\tignoreNextClick = false,\n\t\tsortables = [],\n\n\t\tpointerElemChangedInterval,\n\t\tlastPointerElemX,\n\t\tlastPointerElemY,\n\n\t\ttapEvt,\n\t\ttouchEvt,\n\n\t\tmoved,\n\n\n\t\tlastTarget,\n\t\tlastDirection,\n\t\tpastFirstInvertThresh = false,\n\t\tisCircumstantialInvert = false,\n\t\tlastMode, // 'swap' or 'insert'\n\n\t\ttargetMoveDistance,\n\n\t\t// For positioning ghost absolutely\n\t\tghostRelativeParent,\n\t\tghostRelativeParentInitialScroll = [], // (left, top)\n\n\n\t\tforRepaintDummy,\n\t\trealDragElRect, // dragEl rect after current animation\n\n\t\t/** @const */\n\t\tR_SPACE = /\\s+/g,\n\n\t\texpando = 'Sortable' + (new Date).getTime(),\n\n\t\twin = window,\n\t\tdocument = win.document,\n\t\tparseInt = win.parseInt,\n\t\tsetTimeout = win.setTimeout,\n\n\t\t$ = win.jQuery || win.Zepto,\n\t\tPolymer = win.Polymer,\n\n\t\tcaptureMode = {\n\t\t\tcapture: false,\n\t\t\tpassive: false\n\t\t},\n\n\t\tIE11OrLess = !!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\\.|msie|iemobile)/i),\n\t\tEdge = !!navigator.userAgent.match(/Edge/i),\n\t\tFireFox = !!navigator.userAgent.match(/firefox/i),\n\t\tSafari = !!(navigator.userAgent.match(/safari/i) && !navigator.userAgent.match(/chrome/i) && !navigator.userAgent.match(/android/i)),\n\t\tIOS = !!(navigator.userAgent.match(/iP(ad|od|hone)/i)),\n\n\t\tPositionGhostAbsolutely = IOS,\n\n\t\tCSSFloatProperty = Edge || IE11OrLess ? 'cssFloat' : 'float',\n\n\t\t// This will not pass for IE9, because IE9 DnD only works on anchors\n\t\tsupportDraggable = ('draggable' in document.createElement('div')),\n\n\t\tsupportCssPointerEvents = (function() {\n\t\t\t// false when <= IE11\n\t\t\tif (IE11OrLess) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar el = document.createElement('x');\n\t\t\tel.style.cssText = 'pointer-events:auto';\n\t\t\treturn el.style.pointerEvents === 'auto';\n\t\t})(),\n\n\t\t_silent = false,\n\t\t_alignedSilent = false,\n\n\t\tabs = Math.abs,\n\t\tmin = Math.min,\n\t\tmax = Math.max,\n\n\t\tsavedInputChecked = [],\n\n\t\t_detectDirection = function(el, options) {\n\t\t\tvar elCSS = _css(el),\n\t\t\t\telWidth = parseInt(elCSS.width)\n\t\t\t\t\t- parseInt(elCSS.paddingLeft)\n\t\t\t\t\t- parseInt(elCSS.paddingRight)\n\t\t\t\t\t- parseInt(elCSS.borderLeftWidth)\n\t\t\t\t\t- parseInt(elCSS.borderRightWidth),\n\t\t\t\tchild1 = _getChild(el, 0, options),\n\t\t\t\tchild2 = _getChild(el, 1, options),\n\t\t\t\tfirstChildCSS = child1 && _css(child1),\n\t\t\t\tsecondChildCSS = child2 && _css(child2),\n\t\t\t\tfirstChildWidth = firstChildCSS && parseInt(firstChildCSS.marginLeft) + parseInt(firstChildCSS.marginRight) + _getRect(child1).width,\n\t\t\t\tsecondChildWidth = secondChildCSS && parseInt(secondChildCSS.marginLeft) + parseInt(secondChildCSS.marginRight) + _getRect(child2).width;\n\n\t\t\tif (elCSS.display === 'flex') {\n\t\t\t\treturn elCSS.flexDirection === 'column' || elCSS.flexDirection === 'column-reverse'\n\t\t\t\t? 'vertical' : 'horizontal';\n\t\t\t}\n\n\t\t\tif (elCSS.display === 'grid') {\n\t\t\t\treturn elCSS.gridTemplateColumns.split(' ').length <= 1 ? 'vertical' : 'horizontal';\n\t\t\t}\n\n\t\t\tif (child1 && firstChildCSS.float !== 'none') {\n\t\t\t\tvar touchingSideChild2 = firstChildCSS.float === 'left' ? 'left' : 'right';\n\n\t\t\t\treturn child2 && (secondChildCSS.clear === 'both' || secondChildCSS.clear === touchingSideChild2) ?\n\t\t\t\t\t'vertical' : 'horizontal';\n\t\t\t}\n\n\t\t\treturn (child1 &&\n\t\t\t\t(\n\t\t\t\t\tfirstChildCSS.display === 'block' ||\n\t\t\t\t\tfirstChildCSS.display === 'flex' ||\n\t\t\t\t\tfirstChildCSS.display === 'table' ||\n\t\t\t\t\tfirstChildCSS.display === 'grid' ||\n\t\t\t\t\tfirstChildWidth >= elWidth &&\n\t\t\t\t\telCSS[CSSFloatProperty] === 'none' ||\n\t\t\t\t\tchild2 &&\n\t\t\t\t\telCSS[CSSFloatProperty] === 'none' &&\n\t\t\t\t\tfirstChildWidth + secondChildWidth > elWidth\n\t\t\t\t) ?\n\t\t\t\t'vertical' : 'horizontal'\n\t\t\t);\n\t\t},\n\n\t\t/**\n\t\t * Detects first nearest empty sortable to X and Y position using emptyInsertThreshold.\n\t\t * @param  {Number} x      X position\n\t\t * @param  {Number} y      Y position\n\t\t * @return {HTMLElement}   Element of the first found nearest Sortable\n\t\t */\n\t\t_detectNearestEmptySortable = function(x, y) {\n\t\t\tfor (var i = 0; i < sortables.length; i++) {\n\t\t\t\tif (_lastChild(sortables[i])) continue;\n\n\t\t\t\tvar rect = _getRect(sortables[i]),\n\t\t\t\t\tthreshold = sortables[i][expando].options.emptyInsertThreshold,\n\t\t\t\t\tinsideHorizontally = x >= (rect.left - threshold) && x <= (rect.right + threshold),\n\t\t\t\t\tinsideVertically = y >= (rect.top - threshold) && y <= (rect.bottom + threshold);\n\n\t\t\t\tif (insideHorizontally && insideVertically) {\n\t\t\t\t\treturn sortables[i];\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_isClientInRowColumn = function(x, y, el, axis, options) {\n\t\t\tvar targetRect = _getRect(el),\n\t\t\t\ttargetS1Opp = axis === 'vertical' ? targetRect.left : targetRect.top,\n\t\t\t\ttargetS2Opp = axis === 'vertical' ? targetRect.right : targetRect.bottom,\n\t\t\t\tmouseOnOppAxis = axis === 'vertical' ? x : y;\n\n\t\t\treturn targetS1Opp < mouseOnOppAxis && mouseOnOppAxis < targetS2Opp;\n\t\t},\n\n\t\t_isElInRowColumn = function(el1, el2, axis) {\n\t\t\tvar el1Rect = el1 === dragEl && realDragElRect || _getRect(el1),\n\t\t\t\tel2Rect = el2 === dragEl && realDragElRect || _getRect(el2),\n\t\t\t\tel1S1Opp = axis === 'vertical' ? el1Rect.left : el1Rect.top,\n\t\t\t\tel1S2Opp = axis === 'vertical' ? el1Rect.right : el1Rect.bottom,\n\t\t\t\tel1OppLength = axis === 'vertical' ? el1Rect.width : el1Rect.height,\n\t\t\t\tel2S1Opp = axis === 'vertical' ? el2Rect.left : el2Rect.top,\n\t\t\t\tel2S2Opp = axis === 'vertical' ? el2Rect.right : el2Rect.bottom,\n\t\t\t\tel2OppLength = axis === 'vertical' ? el2Rect.width : el2Rect.height;\n\n\t\t\treturn (\n\t\t\t\tel1S1Opp === el2S1Opp ||\n\t\t\t\tel1S2Opp === el2S2Opp ||\n\t\t\t\t(el1S1Opp + el1OppLength / 2) === (el2S1Opp + el2OppLength / 2)\n\t\t\t);\n\t\t},\n\n\t\t_getParentAutoScrollElement = function(el, includeSelf) {\n\t\t\t// skip to window\n\t\t\tif (!el || !el.getBoundingClientRect) return _getWindowScrollingElement();\n\n\t\t\tvar elem = el;\n\t\t\tvar gotSelf = false;\n\t\t\tdo {\n\t\t\t\t// we don't need to get elem css if it isn't even overflowing in the first place (performance)\n\t\t\t\tif (elem.clientWidth < elem.scrollWidth || elem.clientHeight < elem.scrollHeight) {\n\t\t\t\t\tvar elemCSS = _css(elem);\n\t\t\t\t\tif (\n\t\t\t\t\t\telem.clientWidth < elem.scrollWidth && (elemCSS.overflowX == 'auto' || elemCSS.overflowX == 'scroll') ||\n\t\t\t\t\t\telem.clientHeight < elem.scrollHeight && (elemCSS.overflowY == 'auto' || elemCSS.overflowY == 'scroll')\n\t\t\t\t\t) {\n\t\t\t\t\t\tif (!elem || !elem.getBoundingClientRect || elem === document.body) return _getWindowScrollingElement();\n\n\t\t\t\t\t\tif (gotSelf || includeSelf) return elem;\n\t\t\t\t\t\tgotSelf = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t/* jshint boss:true */\n\t\t\t} while (elem = elem.parentNode);\n\n\t\t\treturn _getWindowScrollingElement();\n\t\t},\n\n\t\t_getWindowScrollingElement = function() {\n\t\t\tif (IE11OrLess) {\n\t\t\t\treturn document.documentElement;\n\t\t\t} else {\n\t\t\t\treturn document.scrollingElement;\n\t\t\t}\n\t\t},\n\n\t\t_scrollBy = function(el, x, y) {\n\t\t\tel.scrollLeft += x;\n\t\t\tel.scrollTop += y;\n\t\t},\n\n\t\t_autoScroll = _throttle(function (/**Event*/evt, /**Object*/options, /**HTMLElement*/rootEl, /**Boolean*/isFallback) {\n\t\t\t// Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n\t\t\tif (options.scroll) {\n\t\t\t\tvar _this = rootEl ? rootEl[expando] : window,\n\t\t\t\t\tsens = options.scrollSensitivity,\n\t\t\t\t\tspeed = options.scrollSpeed,\n\n\t\t\t\t\tx = evt.clientX,\n\t\t\t\t\ty = evt.clientY,\n\n\t\t\t\t\twinScroller = _getWindowScrollingElement(),\n\n\t\t\t\t\tscrollThisInstance = false;\n\n\t\t\t\t// Detect scrollEl\n\t\t\t\tif (scrollParentEl !== rootEl) {\n\t\t\t\t\t_clearAutoScrolls();\n\n\t\t\t\t\tscrollEl = options.scroll;\n\t\t\t\t\tscrollCustomFn = options.scrollFn;\n\n\t\t\t\t\tif (scrollEl === true) {\n\t\t\t\t\t\tscrollEl = _getParentAutoScrollElement(rootEl, true);\n\t\t\t\t\t\tscrollParentEl = scrollEl;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t\tvar layersOut = 0;\n\t\t\t\tvar currentParent = scrollEl;\n\t\t\t\tdo {\n\t\t\t\t\tvar\tel = currentParent,\n\t\t\t\t\t\trect = _getRect(el),\n\n\t\t\t\t\t\ttop = rect.top,\n\t\t\t\t\t\tbottom = rect.bottom,\n\t\t\t\t\t\tleft = rect.left,\n\t\t\t\t\t\tright = rect.right,\n\n\t\t\t\t\t\twidth = rect.width,\n\t\t\t\t\t\theight = rect.height,\n\n\t\t\t\t\t\tscrollWidth,\n\t\t\t\t\t\tscrollHeight,\n\n\t\t\t\t\t\tcss,\n\n\t\t\t\t\t\tvx,\n\t\t\t\t\t\tvy,\n\n\t\t\t\t\t\tcanScrollX,\n\t\t\t\t\t\tcanScrollY,\n\n\t\t\t\t\t\tscrollPosX,\n\t\t\t\t\t\tscrollPosY;\n\n\n\t\t\t\t\tscrollWidth = el.scrollWidth;\n\t\t\t\t\tscrollHeight = el.scrollHeight;\n\n\t\t\t\t\tcss = _css(el);\n\n\t\t\t\t\tscrollPosX = el.scrollLeft;\n\t\t\t\t\tscrollPosY = el.scrollTop;\n\n\t\t\t\t\tif (el === winScroller) {\n\t\t\t\t\t\tcanScrollX = width < scrollWidth && (css.overflowX === 'auto' || css.overflowX === 'scroll' || css.overflowX === 'visible');\n\t\t\t\t\t\tcanScrollY = height < scrollHeight && (css.overflowY === 'auto' || css.overflowY === 'scroll' || css.overflowY === 'visible');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcanScrollX = width < scrollWidth && (css.overflowX === 'auto' || css.overflowX === 'scroll');\n\t\t\t\t\t\tcanScrollY = height < scrollHeight && (css.overflowY === 'auto' || css.overflowY === 'scroll');\n\t\t\t\t\t}\n\n\t\t\t\t\tvx = canScrollX && (abs(right - x) <= sens && (scrollPosX + width) < scrollWidth) - (abs(left - x) <= sens && !!scrollPosX);\n\n\t\t\t\t\tvy = canScrollY && (abs(bottom - y) <= sens && (scrollPosY + height) < scrollHeight) - (abs(top - y) <= sens && !!scrollPosY);\n\n\n\t\t\t\t\tif (!autoScrolls[layersOut]) {\n\t\t\t\t\t\tfor (var i = 0; i <= layersOut; i++) {\n\t\t\t\t\t\t\tif (!autoScrolls[i]) {\n\t\t\t\t\t\t\t\tautoScrolls[i] = {};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (autoScrolls[layersOut].vx != vx || autoScrolls[layersOut].vy != vy || autoScrolls[layersOut].el !== el) {\n\t\t\t\t\t\tautoScrolls[layersOut].el = el;\n\t\t\t\t\t\tautoScrolls[layersOut].vx = vx;\n\t\t\t\t\t\tautoScrolls[layersOut].vy = vy;\n\n\t\t\t\t\t\tclearInterval(autoScrolls[layersOut].pid);\n\n\t\t\t\t\t\tif (el && (vx != 0 || vy != 0)) {\n\t\t\t\t\t\t\tscrollThisInstance = true;\n\t\t\t\t\t\t\t/* jshint loopfunc:true */\n\t\t\t\t\t\t\tautoScrolls[layersOut].pid = setInterval((function () {\n\t\t\t\t\t\t\t\t// emulate drag over during autoscroll (fallback), emulating native DnD behaviour\n\t\t\t\t\t\t\t\tif (isFallback && this.layer === 0) {\n\t\t\t\t\t\t\t\t\tSortable.active._emulateDragOver(true);\n\t\t\t\t\t\t\t\t\tSortable.active._onTouchMove(touchEvt, true);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvar scrollOffsetY = autoScrolls[this.layer].vy ? autoScrolls[this.layer].vy * speed : 0;\n\t\t\t\t\t\t\t\tvar scrollOffsetX = autoScrolls[this.layer].vx ? autoScrolls[this.layer].vx * speed : 0;\n\n\t\t\t\t\t\t\t\tif ('function' === typeof(scrollCustomFn)) {\n\t\t\t\t\t\t\t\t\tif (scrollCustomFn.call(_this, scrollOffsetX, scrollOffsetY, evt, touchEvt, autoScrolls[this.layer].el) !== 'continue') {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t_scrollBy(autoScrolls[this.layer].el, scrollOffsetX, scrollOffsetY);\n\t\t\t\t\t\t\t}).bind({layer: layersOut}), 24);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlayersOut++;\n\t\t\t\t} while (options.bubbleScroll && currentParent !== winScroller && (currentParent = _getParentAutoScrollElement(currentParent, false)));\n\t\t\t\tscrolling = scrollThisInstance; // in case another function catches scrolling as false in between when it is not\n\t\t\t}\n\t\t}, 30),\n\n\t\t_clearAutoScrolls = function () {\n\t\t\tautoScrolls.forEach(function(autoScroll) {\n\t\t\t\tclearInterval(autoScroll.pid);\n\t\t\t});\n\t\t\tautoScrolls = [];\n\t\t},\n\n\t\t_prepareGroup = function (options) {\n\t\t\tfunction toFn(value, pull) {\n\t\t\t\treturn function(to, from, dragEl, evt) {\n\t\t\t\t\tvar sameGroup = to.options.group.name &&\n\t\t\t\t\t\t\t\t\tfrom.options.group.name &&\n\t\t\t\t\t\t\t\t\tto.options.group.name === from.options.group.name;\n\n\t\t\t\t\tif (value == null && (pull || sameGroup)) {\n\t\t\t\t\t\t// Default pull value\n\t\t\t\t\t\t// Default pull and put value if same group\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} else if (value == null || value === false) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else if (pull && value === 'clone') {\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t} else if (typeof value === 'function') {\n\t\t\t\t\t\treturn toFn(value(to, from, dragEl, evt), pull)(to, from, dragEl, evt);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar otherGroup = (pull ? to : from).options.group.name;\n\n\t\t\t\t\t\treturn (value === true ||\n\t\t\t\t\t\t(typeof value === 'string' && value === otherGroup) ||\n\t\t\t\t\t\t(value.join && value.indexOf(otherGroup) > -1));\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tvar group = {};\n\t\t\tvar originalGroup = options.group;\n\n\t\t\tif (!originalGroup || typeof originalGroup != 'object') {\n\t\t\t\toriginalGroup = {name: originalGroup};\n\t\t\t}\n\n\t\t\tgroup.name = originalGroup.name;\n\t\t\tgroup.checkPull = toFn(originalGroup.pull, true);\n\t\t\tgroup.checkPut = toFn(originalGroup.put);\n\t\t\tgroup.revertClone = originalGroup.revertClone;\n\n\t\t\toptions.group = group;\n\t\t},\n\n\t\t_checkAlignment = function(evt) {\n\t\t\tif (!dragEl || !dragEl.parentNode) return;\n\t\t\tdragEl.parentNode[expando] && dragEl.parentNode[expando]._computeIsAligned(evt);\n\t\t},\n\n\t\t_isTrueParentSortable = function(el, target) {\n\t\t\tvar trueParent = target;\n\t\t\twhile (!trueParent[expando]) {\n\t\t\t\ttrueParent = trueParent.parentNode;\n\t\t\t}\n\n\t\t\treturn el === trueParent;\n\t\t},\n\n\t\t_artificalBubble = function(sortable, originalEvt, method) {\n\t\t\t// Artificial IE bubbling\n\t\t\tvar nextParent = sortable.parentNode;\n\t\t\twhile (nextParent && !nextParent[expando]) {\n\t\t\t\tnextParent = nextParent.parentNode;\n\t\t\t}\n\n\t\t\tif (nextParent) {\n\t\t\t\tnextParent[expando][method](_extend(originalEvt, {\n\t\t\t\t\tartificialBubble: true\n\t\t\t\t}));\n\t\t\t}\n\t\t},\n\n\t\t_hideGhostForTarget = function() {\n\t\t\tif (!supportCssPointerEvents && ghostEl) {\n\t\t\t\t_css(ghostEl, 'display', 'none');\n\t\t\t}\n\t\t},\n\n\t\t_unhideGhostForTarget = function() {\n\t\t\tif (!supportCssPointerEvents && ghostEl) {\n\t\t\t\t_css(ghostEl, 'display', '');\n\t\t\t}\n\t\t};\n\n\n\t// #1184 fix - Prevent click event on fallback if dragged but item not changed position\n\tdocument.addEventListener('click', function(evt) {\n\t\tif (ignoreNextClick) {\n\t\t\tevt.preventDefault();\n\t\t\tevt.stopPropagation && evt.stopPropagation();\n\t\t\tevt.stopImmediatePropagation && evt.stopImmediatePropagation();\n\t\t\tignoreNextClick = false;\n\t\t\treturn false;\n\t\t}\n\t}, true);\n\n\tvar nearestEmptyInsertDetectEvent = function(evt) {\n\t\tevt = evt.touches ? evt.touches[0] : evt;\n\t\tif (dragEl) {\n\t\t\tvar nearest = _detectNearestEmptySortable(evt.clientX, evt.clientY);\n\n\t\t\tif (nearest) {\n\t\t\t\tnearest[expando]._onDragOver({\n\t\t\t\t\tclientX: evt.clientX,\n\t\t\t\t\tclientY: evt.clientY,\n\t\t\t\t\ttarget: nearest,\n\t\t\t\t\trootEl: nearest\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\t// We do not want this to be triggered if completed (bubbling canceled), so only define it here\n\t_on(document, 'dragover', nearestEmptyInsertDetectEvent);\n\t_on(document, 'mousemove', nearestEmptyInsertDetectEvent);\n\t_on(document, 'touchmove', nearestEmptyInsertDetectEvent);\n\n\t/**\n\t * @class  Sortable\n\t * @param  {HTMLElement}  el\n\t * @param  {Object}       [options]\n\t */\n\tfunction Sortable(el, options) {\n\t\tif (!(el && el.nodeType && el.nodeType === 1)) {\n\t\t\tthrow 'Sortable: `el` must be HTMLElement, not ' + {}.toString.call(el);\n\t\t}\n\n\t\tthis.el = el; // root element\n\t\tthis.options = options = _extend({}, options);\n\n\n\t\t// Export instance\n\t\tel[expando] = this;\n\n\t\t// Default options\n\t\tvar defaults = {\n\t\t\tgroup: null,\n\t\t\tsort: true,\n\t\t\tdisabled: false,\n\t\t\tstore: null,\n\t\t\thandle: null,\n\t\t\tscroll: true,\n\t\t\tscrollSensitivity: 30,\n\t\t\tscrollSpeed: 10,\n\t\t\tbubbleScroll: true,\n\t\t\tdraggable: /[uo]l/i.test(el.nodeName) ? '>li' : '>*',\n\t\t\tswapThreshold: 1, // percentage; 0 <= x <= 1\n\t\t\tinvertSwap: false, // invert always\n\t\t\tinvertedSwapThreshold: null, // will be set to same as swapThreshold if default\n\t\t\tremoveCloneOnHide: true,\n\t\t\tdirection: function() {\n\t\t\t\treturn _detectDirection(el, this.options);\n\t\t\t},\n\t\t\tghostClass: 'sortable-ghost',\n\t\t\tchosenClass: 'sortable-chosen',\n\t\t\tdragClass: 'sortable-drag',\n\t\t\tignore: 'a, img',\n\t\t\tfilter: null,\n\t\t\tpreventOnFilter: true,\n\t\t\tanimation: 0,\n\t\t\teasing: null,\n\t\t\tsetData: function (dataTransfer, dragEl) {\n\t\t\t\tdataTransfer.setData('Text', dragEl.textContent);\n\t\t\t},\n\t\t\tdropBubble: false,\n\t\t\tdragoverBubble: false,\n\t\t\tdataIdAttr: 'data-id',\n\t\t\tdelay: 0,\n\t\t\ttouchStartThreshold: parseInt(window.devicePixelRatio, 10) || 1,\n\t\t\tforceFallback: false,\n\t\t\tfallbackClass: 'sortable-fallback',\n\t\t\tfallbackOnBody: false,\n\t\t\tfallbackTolerance: 0,\n\t\t\tfallbackOffset: {x: 0, y: 0},\n\t\t\tsupportPointer: Sortable.supportPointer !== false && (\n\t\t\t\t('PointerEvent' in window) ||\n\t\t\t\twindow.navigator && ('msPointerEnabled' in window.navigator) // microsoft\n\t\t\t),\n\t\t\temptyInsertThreshold: 5\n\t\t};\n\n\n\t\t// Set default options\n\t\tfor (var name in defaults) {\n\t\t\t!(name in options) && (options[name] = defaults[name]);\n\t\t}\n\n\t\t_prepareGroup(options);\n\n\t\t// Bind all private methods\n\t\tfor (var fn in this) {\n\t\t\tif (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n\t\t\t\tthis[fn] = this[fn].bind(this);\n\t\t\t}\n\t\t}\n\n\t\t// Setup drag mode\n\t\tthis.nativeDraggable = options.forceFallback ? false : supportDraggable;\n\n\t\tif (this.nativeDraggable) {\n\t\t\t// Touch start threshold cannot be greater than the native dragstart threshold\n\t\t\tthis.options.touchStartThreshold = 1;\n\t\t}\n\n\t\t// Bind events\n\t\tif (options.supportPointer) {\n\t\t\t_on(el, 'pointerdown', this._onTapStart);\n\t\t} else {\n\t\t\t_on(el, 'mousedown', this._onTapStart);\n\t\t\t_on(el, 'touchstart', this._onTapStart);\n\t\t}\n\n\t\tif (this.nativeDraggable) {\n\t\t\t_on(el, 'dragover', this);\n\t\t\t_on(el, 'dragenter', this);\n\t\t}\n\n\t\tsortables.push(this.el);\n\n\t\t// Restore sorting\n\t\toptions.store && options.store.get && this.sort(options.store.get(this) || []);\n\t}\n\n\tSortable.prototype = /** @lends Sortable.prototype */ {\n\t\tconstructor: Sortable,\n\n\t\t_computeIsAligned: function(evt) {\n\t\t\tvar target;\n\n\t\t\tif (ghostEl && !supportCssPointerEvents) {\n\t\t\t\t_hideGhostForTarget();\n\t\t\t\ttarget = document.elementFromPoint(evt.clientX, evt.clientY);\n\t\t\t\t_unhideGhostForTarget();\n\t\t\t} else {\n\t\t\t\ttarget = evt.target;\n\t\t\t}\n\n\t\t\ttarget = _closest(target, this.options.draggable, this.el, false);\n\t\t\tif (_alignedSilent) return;\n\t\t\tif (!dragEl || dragEl.parentNode !== this.el) return;\n\n\t\t\tvar children = this.el.children;\n\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t// Don't change for target in case it is changed to aligned before onDragOver is fired\n\t\t\t\tif (_closest(children[i], this.options.draggable, this.el, false) && children[i] !== target) {\n\t\t\t\t\tchildren[i].sortableMouseAligned = _isClientInRowColumn(evt.clientX, evt.clientY, children[i], this._getDirection(evt, null), this.options);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Used for nulling last target when not in element, nothing to do with checking if aligned\n\t\t\tif (!_closest(target, this.options.draggable, this.el, true)) {\n\t\t\t\tlastTarget = null;\n\t\t\t}\n\n\t\t\t_alignedSilent = true;\n\t\t\tsetTimeout(function() {\n\t\t\t\t_alignedSilent = false;\n\t\t\t}, 30);\n\n\t\t},\n\n\t\t_getDirection: function(evt, target) {\n\t\t\treturn (typeof this.options.direction === 'function') ? this.options.direction.call(this, evt, target, dragEl) : this.options.direction;\n\t\t},\n\n\t\t_onTapStart: function (/** Event|TouchEvent */evt) {\n\t\t\tif (!evt.cancelable) return;\n\t\t\tvar _this = this,\n\t\t\t\tel = this.el,\n\t\t\t\toptions = this.options,\n\t\t\t\tpreventOnFilter = options.preventOnFilter,\n\t\t\t\ttype = evt.type,\n\t\t\t\ttouch = evt.touches && evt.touches[0],\n\t\t\t\ttarget = (touch || evt).target,\n\t\t\t\toriginalTarget = evt.target.shadowRoot && ((evt.path && evt.path[0]) || (evt.composedPath && evt.composedPath()[0])) || target,\n\t\t\t\tfilter = options.filter,\n\t\t\t\tstartIndex;\n\n\t\t\t_saveInputCheckedState(el);\n\n\n\t\t\t// IE: Calls events in capture mode if event element is nested. This ensures only correct element's _onTapStart goes through.\n\t\t\t// This process is also done in _onDragOver\n\t\t\tif (IE11OrLess && !evt.artificialBubble && !_isTrueParentSortable(el, target)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Don't trigger start event when an element is been dragged, otherwise the evt.oldindex always wrong when set option.group.\n\t\t\tif (dragEl) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (/mousedown|pointerdown/.test(type) && evt.button !== 0 || options.disabled) {\n\t\t\t\treturn; // only left button and enabled\n\t\t\t}\n\n\t\t\t// cancel dnd if original target is content editable\n\t\t\tif (originalTarget.isContentEditable) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttarget = _closest(target, options.draggable, el, false);\n\n\t\t\tif (!target) {\n\t\t\t\tif (IE11OrLess) {\n\t\t\t\t\t_artificalBubble(el, evt, '_onTapStart');\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (lastDownEl === target) {\n\t\t\t\t// Ignoring duplicate `down`\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Get the index of the dragged element within its parent\n\t\t\tstartIndex = _index(target, options.draggable);\n\n\t\t\t// Check filter\n\t\t\tif (typeof filter === 'function') {\n\t\t\t\tif (filter.call(this, evt, target, this)) {\n\t\t\t\t\t_dispatchEvent(_this, originalTarget, 'filter', target, el, el, startIndex);\n\t\t\t\t\tpreventOnFilter && evt.cancelable && evt.preventDefault();\n\t\t\t\t\treturn; // cancel dnd\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (filter) {\n\t\t\t\tfilter = filter.split(',').some(function (criteria) {\n\t\t\t\t\tcriteria = _closest(originalTarget, criteria.trim(), el, false);\n\n\t\t\t\t\tif (criteria) {\n\t\t\t\t\t\t_dispatchEvent(_this, criteria, 'filter', target, el, el, startIndex);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (filter) {\n\t\t\t\t\tpreventOnFilter && evt.cancelable && evt.preventDefault();\n\t\t\t\t\treturn; // cancel dnd\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (options.handle && !_closest(originalTarget, options.handle, el, false)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Prepare `dragstart`\n\t\t\tthis._prepareDragStart(evt, touch, target, startIndex);\n\t\t},\n\n\n\t\t_handleAutoScroll: function(evt, fallback) {\n\t\t\tif (!dragEl || !this.options.scroll) return;\n\t\t\tvar x = evt.clientX,\n\t\t\t\ty = evt.clientY,\n\n\t\t\t\telem = document.elementFromPoint(x, y),\n\t\t\t\t_this = this;\n\n\t\t\t// IE does not seem to have native autoscroll,\n\t\t\t// Edge's autoscroll seems too conditional,\n\t\t\t// MACOS Safari does not have autoscroll,\n\t\t\t// Firefox and Chrome are good\n\t\t\tif (fallback || Edge || IE11OrLess || Safari) {\n\t\t\t\t_autoScroll(evt, _this.options, elem, fallback);\n\n\t\t\t\t// Listener for pointer element change\n\t\t\t\tvar ogElemScroller = _getParentAutoScrollElement(elem, true);\n\t\t\t\tif (\n\t\t\t\t\tscrolling &&\n\t\t\t\t\t(\n\t\t\t\t\t\t!pointerElemChangedInterval ||\n\t\t\t\t\t\tx !== lastPointerElemX ||\n\t\t\t\t\t\ty !== lastPointerElemY\n\t\t\t\t\t)\n\t\t\t\t) {\n\n\t\t\t\t\tpointerElemChangedInterval && clearInterval(pointerElemChangedInterval);\n\t\t\t\t\t// Detect for pointer elem change, emulating native DnD behaviour\n\t\t\t\t\tpointerElemChangedInterval = setInterval(function() {\n\t\t\t\t\t\tif (!dragEl) return;\n\t\t\t\t\t\t// could also check if scroll direction on newElem changes due to parent autoscrolling\n\t\t\t\t\t\tvar newElem = _getParentAutoScrollElement(document.elementFromPoint(x, y), true);\n\t\t\t\t\t\tif (newElem !== ogElemScroller) {\n\t\t\t\t\t\t\togElemScroller = newElem;\n\t\t\t\t\t\t\t_clearAutoScrolls();\n\t\t\t\t\t\t\t_autoScroll(evt, _this.options, ogElemScroller, fallback);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 10);\n\t\t\t\t\tlastPointerElemX = x;\n\t\t\t\t\tlastPointerElemY = y;\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\t// if DnD is enabled (and browser has good autoscrolling), first autoscroll will already scroll, so get parent autoscroll of first autoscroll\n\t\t\t\tif (!_this.options.bubbleScroll || _getParentAutoScrollElement(elem, true) === _getWindowScrollingElement()) {\n\t\t\t\t\t_clearAutoScrolls();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t_autoScroll(evt, _this.options, _getParentAutoScrollElement(elem, false), false);\n\t\t\t}\n\t\t},\n\n\t\t_prepareDragStart: function (/** Event */evt, /** Touch */touch, /** HTMLElement */target, /** Number */startIndex) {\n\t\t\tvar _this = this,\n\t\t\t\tel = _this.el,\n\t\t\t\toptions = _this.options,\n\t\t\t\townerDocument = el.ownerDocument,\n\t\t\t\tdragStartFn;\n\n\t\t\tif (target && !dragEl && (target.parentNode === el)) {\n\t\t\t\trootEl = el;\n\t\t\t\tdragEl = target;\n\t\t\t\tparentEl = dragEl.parentNode;\n\t\t\t\tnextEl = dragEl.nextSibling;\n\t\t\t\tlastDownEl = target;\n\t\t\t\tactiveGroup = options.group;\n\t\t\t\toldIndex = startIndex;\n\n\t\t\t\ttapEvt = {\n\t\t\t\t\ttarget: dragEl,\n\t\t\t\t\tclientX: (touch || evt).clientX,\n\t\t\t\t\tclientY: (touch || evt).clientY\n\t\t\t\t};\n\n\t\t\t\tthis._lastX = (touch || evt).clientX;\n\t\t\t\tthis._lastY = (touch || evt).clientY;\n\n\t\t\t\tdragEl.style['will-change'] = 'all';\n\t\t\t\t// undo animation if needed\n\t\t\t\tdragEl.style.transition = '';\n\t\t\t\tdragEl.style.transform = '';\n\n\t\t\t\tdragStartFn = function () {\n\t\t\t\t\t// Delayed drag has been triggered\n\t\t\t\t\t// we can re-enable the events: touchmove/mousemove\n\t\t\t\t\t_this._disableDelayedDragEvents();\n\n\t\t\t\t\tif (!FireFox && _this.nativeDraggable) {\n\t\t\t\t\t\tdragEl.draggable = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Bind the events: dragstart/dragend\n\t\t\t\t\t_this._triggerDragStart(evt, touch);\n\n\t\t\t\t\t// Drag start event\n\t\t\t\t\t_dispatchEvent(_this, rootEl, 'choose', dragEl, rootEl, rootEl, oldIndex);\n\n\t\t\t\t\t// Chosen item\n\t\t\t\t\t_toggleClass(dragEl, options.chosenClass, true);\n\t\t\t\t};\n\n\t\t\t\t// Disable \"draggable\"\n\t\t\t\toptions.ignore.split(',').forEach(function (criteria) {\n\t\t\t\t\t_find(dragEl, criteria.trim(), _disableDraggable);\n\t\t\t\t});\n\n\t\t\t\tif (options.supportPointer) {\n\t\t\t\t\t_on(ownerDocument, 'pointerup', _this._onDrop);\n\t\t\t\t} else {\n\t\t\t\t\t_on(ownerDocument, 'mouseup', _this._onDrop);\n\t\t\t\t\t_on(ownerDocument, 'touchend', _this._onDrop);\n\t\t\t\t\t_on(ownerDocument, 'touchcancel', _this._onDrop);\n\t\t\t\t}\n\n\t\t\t\t// Make dragEl draggable (must be before delay for FireFox)\n\t\t\t\tif (FireFox && this.nativeDraggable) {\n\t\t\t\t\tthis.options.touchStartThreshold = 4;\n\t\t\t\t\tdragEl.draggable = true;\n\t\t\t\t}\n\n\t\t\t\t// Delay is impossible for native DnD in Edge or IE\n\t\t\t\tif (options.delay && (!this.nativeDraggable || !(Edge || IE11OrLess))) {\n\t\t\t\t\t// If the user moves the pointer or let go the click or touch\n\t\t\t\t\t// before the delay has been reached:\n\t\t\t\t\t// disable the delayed drag\n\t\t\t\t\t_on(ownerDocument, 'mouseup', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'touchend', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'touchcancel', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'mousemove', _this._delayedDragTouchMoveHandler);\n\t\t\t\t\t_on(ownerDocument, 'touchmove', _this._delayedDragTouchMoveHandler);\n\t\t\t\t\toptions.supportPointer && _on(ownerDocument, 'pointermove', _this._delayedDragTouchMoveHandler);\n\n\t\t\t\t\t_this._dragStartTimer = setTimeout(dragStartFn, options.delay);\n\t\t\t\t} else {\n\t\t\t\t\tdragStartFn();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_delayedDragTouchMoveHandler: function (/** TouchEvent|PointerEvent **/e) {\n\t\t\tvar touch = e.touches ? e.touches[0] : e;\n\t\t\tif (max(abs(touch.clientX - this._lastX), abs(touch.clientY - this._lastY))\n\t\t\t\t\t>= Math.floor(this.options.touchStartThreshold / (this.nativeDraggable && window.devicePixelRatio || 1))\n\t\t\t) {\n\t\t\t\tthis._disableDelayedDrag();\n\t\t\t}\n\t\t},\n\n\t\t_disableDelayedDrag: function () {\n\t\t\tdragEl && _disableDraggable(dragEl);\n\t\t\tclearTimeout(this._dragStartTimer);\n\n\t\t\tthis._disableDelayedDragEvents();\n\t\t},\n\n\t\t_disableDelayedDragEvents: function () {\n\t\t\tvar ownerDocument = this.el.ownerDocument;\n\t\t\t_off(ownerDocument, 'mouseup', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'touchend', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'touchcancel', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'mousemove', this._delayedDragTouchMoveHandler);\n\t\t\t_off(ownerDocument, 'touchmove', this._delayedDragTouchMoveHandler);\n\t\t\t_off(ownerDocument, 'pointermove', this._delayedDragTouchMoveHandler);\n\t\t},\n\n\t\t_triggerDragStart: function (/** Event */evt, /** Touch */touch) {\n\t\t\ttouch = touch || (evt.pointerType == 'touch' ? evt : null);\n\n\t\t\tif (!this.nativeDraggable || touch) {\n\t\t\t\tif (this.options.supportPointer) {\n\t\t\t\t\t_on(document, 'pointermove', this._onTouchMove);\n\t\t\t\t} else if (touch) {\n\t\t\t\t\t_on(document, 'touchmove', this._onTouchMove);\n\t\t\t\t} else {\n\t\t\t\t\t_on(document, 'mousemove', this._onTouchMove);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t_on(dragEl, 'dragend', this);\n\t\t\t\t_on(rootEl, 'dragstart', this._onDragStart);\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tif (document.selection) {\n\t\t\t\t\t// Timeout neccessary for IE9\n\t\t\t\t\t_nextTick(function () {\n\t\t\t\t\t\tdocument.selection.empty();\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t}\n\t\t},\n\n\t\t_dragStarted: function (fallback, evt) {\n\t\t\tawaitingDragStarted = false;\n\t\t\tif (rootEl && dragEl) {\n\t\t\t\tif (this.nativeDraggable) {\n\t\t\t\t\t_on(document, 'dragover', this._handleAutoScroll);\n\t\t\t\t\t_on(document, 'dragover', _checkAlignment);\n\t\t\t\t}\n\t\t\t\tvar options = this.options;\n\n\t\t\t\t// Apply effect\n\t\t\t\t!fallback && _toggleClass(dragEl, options.dragClass, false);\n\t\t\t\t_toggleClass(dragEl, options.ghostClass, true);\n\n\t\t\t\t// In case dragging an animated element\n\t\t\t\t_css(dragEl, 'transform', '');\n\n\t\t\t\tSortable.active = this;\n\n\t\t\t\tfallback && this._appendGhost();\n\n\t\t\t\t// Drag start event\n\t\t\t\t_dispatchEvent(this, rootEl, 'start', dragEl, rootEl, rootEl, oldIndex, undefined, evt);\n\t\t\t} else {\n\t\t\t\tthis._nulling();\n\t\t\t}\n\t\t},\n\n\t\t_emulateDragOver: function (forAutoScroll) {\n\t\t\tif (touchEvt) {\n\t\t\t\tif (this._lastX === touchEvt.clientX && this._lastY === touchEvt.clientY && !forAutoScroll) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._lastX = touchEvt.clientX;\n\t\t\t\tthis._lastY = touchEvt.clientY;\n\n\t\t\t\t_hideGhostForTarget();\n\n\t\t\t\tvar target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n\t\t\t\tvar parent = target;\n\n\t\t\t\twhile (target && target.shadowRoot) {\n\t\t\t\t\ttarget = target.shadowRoot.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n\t\t\t\t\tparent = target;\n\t\t\t\t}\n\n\t\t\t\tif (parent) {\n\t\t\t\t\tdo {\n\t\t\t\t\t\tif (parent[expando]) {\n\t\t\t\t\t\t\tvar inserted;\n\n\t\t\t\t\t\t\tinserted = parent[expando]._onDragOver({\n\t\t\t\t\t\t\t\tclientX: touchEvt.clientX,\n\t\t\t\t\t\t\t\tclientY: touchEvt.clientY,\n\t\t\t\t\t\t\t\ttarget: target,\n\t\t\t\t\t\t\t\trootEl: parent\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tif (inserted && !this.options.dragoverBubble) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttarget = parent; // store last element\n\t\t\t\t\t}\n\t\t\t\t\t/* jshint boss:true */\n\t\t\t\t\twhile (parent = parent.parentNode);\n\t\t\t\t}\n\t\t\t\tdragEl.parentNode[expando]._computeIsAligned(touchEvt);\n\n\t\t\t\t_unhideGhostForTarget();\n\t\t\t}\n\t\t},\n\n\n\t\t_onTouchMove: function (/**TouchEvent*/evt, forAutoScroll) {\n\t\t\tif (tapEvt) {\n\t\t\t\tvar\toptions = this.options,\n\t\t\t\t\tfallbackTolerance = options.fallbackTolerance,\n\t\t\t\t\tfallbackOffset = options.fallbackOffset,\n\t\t\t\t\ttouch = evt.touches ? evt.touches[0] : evt,\n\t\t\t\t\tmatrix = ghostEl && _matrix(ghostEl),\n\t\t\t\t\tscaleX = ghostEl && matrix && matrix.a,\n\t\t\t\t\tscaleY = ghostEl && matrix && matrix.d,\n\t\t\t\t\trelativeScrollOffset = PositionGhostAbsolutely && ghostRelativeParent && _getRelativeScrollOffset(ghostRelativeParent),\n\t\t\t\t\tdx = ((touch.clientX - tapEvt.clientX)\n\t\t\t\t\t\t\t+ fallbackOffset.x) / (scaleX || 1)\n\t\t\t\t\t\t\t+ (relativeScrollOffset ? (relativeScrollOffset[0] - ghostRelativeParentInitialScroll[0]) : 0) / (scaleX || 1),\n\t\t\t\t\tdy = ((touch.clientY - tapEvt.clientY)\n\t\t\t\t\t\t\t+ fallbackOffset.y) / (scaleY || 1)\n\t\t\t\t\t\t\t+ (relativeScrollOffset ? (relativeScrollOffset[1] - ghostRelativeParentInitialScroll[1]) : 0) / (scaleY || 1),\n\t\t\t\t\ttranslate3d = evt.touches ? 'translate3d(' + dx + 'px,' + dy + 'px,0)' : 'translate(' + dx + 'px,' + dy + 'px)';\n\n\t\t\t\t// only set the status to dragging, when we are actually dragging\n\t\t\t\tif (!Sortable.active && !awaitingDragStarted) {\n\t\t\t\t\tif (fallbackTolerance &&\n\t\t\t\t\t\tmin(abs(touch.clientX - this._lastX), abs(touch.clientY - this._lastY)) < fallbackTolerance\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis._onDragStart(evt, true);\n\t\t\t\t}\n\n\t\t\t\t!forAutoScroll && this._handleAutoScroll(touch, true);\n\n\t\t\t\tmoved = true;\n\t\t\t\ttouchEvt = touch;\n\n\t\t\t\t_css(ghostEl, 'webkitTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'mozTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'msTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'transform', translate3d);\n\n\t\t\t\tevt.cancelable && evt.preventDefault();\n\t\t\t}\n\t\t},\n\n\t\t_appendGhost: function () {\n\t\t\t// Bug if using scale(): https://stackoverflow.com/questions/2637058\n\t\t\t// Not being adjusted for\n\t\t\tif (!ghostEl) {\n\t\t\t\tvar container = this.options.fallbackOnBody ? document.body : rootEl,\n\t\t\t\t\trect = _getRect(dragEl, true, container, !PositionGhostAbsolutely),\n\t\t\t\t\tcss = _css(dragEl),\n\t\t\t\t\toptions = this.options;\n\n\t\t\t\t// Position absolutely\n\t\t\t\tif (PositionGhostAbsolutely) {\n\t\t\t\t\t// Get relatively positioned parent\n\t\t\t\t\tghostRelativeParent = container;\n\n\t\t\t\t\twhile (\n\t\t\t\t\t\t_css(ghostRelativeParent, 'position') === 'static' &&\n\t\t\t\t\t\t_css(ghostRelativeParent, 'transform') === 'none' &&\n\t\t\t\t\t\tghostRelativeParent !== document\n\t\t\t\t\t) {\n\t\t\t\t\t\tghostRelativeParent = ghostRelativeParent.parentNode;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (ghostRelativeParent !== document) {\n\t\t\t\t\t\tvar ghostRelativeParentRect = _getRect(ghostRelativeParent, true);\n\n\t\t\t\t\t\trect.top -= ghostRelativeParentRect.top;\n\t\t\t\t\t\trect.left -= ghostRelativeParentRect.left;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (ghostRelativeParent !== document.body && ghostRelativeParent !== document.documentElement) {\n\t\t\t\t\t\tif (ghostRelativeParent === document) ghostRelativeParent = _getWindowScrollingElement();\n\n\t\t\t\t\t\trect.top += ghostRelativeParent.scrollTop;\n\t\t\t\t\t\trect.left += ghostRelativeParent.scrollLeft;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tghostRelativeParent = _getWindowScrollingElement();\n\t\t\t\t\t}\n\t\t\t\t\tghostRelativeParentInitialScroll = _getRelativeScrollOffset(ghostRelativeParent);\n\t\t\t\t}\n\n\n\t\t\t\tghostEl = dragEl.cloneNode(true);\n\n\t\t\t\t_toggleClass(ghostEl, options.ghostClass, false);\n\t\t\t\t_toggleClass(ghostEl, options.fallbackClass, true);\n\t\t\t\t_toggleClass(ghostEl, options.dragClass, true);\n\n\t\t\t\t_css(ghostEl, 'box-sizing', 'border-box');\n\t\t\t\t_css(ghostEl, 'margin', 0);\n\t\t\t\t_css(ghostEl, 'top', rect.top);\n\t\t\t\t_css(ghostEl, 'left', rect.left);\n\t\t\t\t_css(ghostEl, 'width', rect.width);\n\t\t\t\t_css(ghostEl, 'height', rect.height);\n\t\t\t\t_css(ghostEl, 'opacity', '0.8');\n\t\t\t\t_css(ghostEl, 'position', (PositionGhostAbsolutely ? 'absolute' : 'fixed'));\n\t\t\t\t_css(ghostEl, 'zIndex', '100000');\n\t\t\t\t_css(ghostEl, 'pointerEvents', 'none');\n\n\t\t\t\tcontainer.appendChild(ghostEl);\n\t\t\t}\n\t\t},\n\n\t\t_onDragStart: function (/**Event*/evt, /**boolean*/fallback) {\n\t\t\tvar _this = this;\n\t\t\tvar dataTransfer = evt.dataTransfer;\n\t\t\tvar options = _this.options;\n\n\t\t\t// Setup clone\n\t\t\tcloneEl = _clone(dragEl);\n\n\t\t\tcloneEl.draggable = false;\n\t\t\tcloneEl.style['will-change'] = '';\n\n\t\t\tthis._hideClone();\n\n\t\t\t_toggleClass(cloneEl, _this.options.chosenClass, false);\n\n\n\t\t\t// #1143: IFrame support workaround\n\t\t\t_this._cloneId = _nextTick(function () {\n\t\t\t\tif (!_this.options.removeCloneOnHide) {\n\t\t\t\t\trootEl.insertBefore(cloneEl, dragEl);\n\t\t\t\t}\n\t\t\t\t_dispatchEvent(_this, rootEl, 'clone', dragEl);\n\t\t\t});\n\n\n\t\t\t!fallback && _toggleClass(dragEl, options.dragClass, true);\n\n\t\t\t// Set proper drop events\n\t\t\tif (fallback) {\n\t\t\t\tignoreNextClick = true;\n\t\t\t\t_this._loopId = setInterval(_this._emulateDragOver, 50);\n\t\t\t} else {\n\t\t\t\t// Undo what was set in _prepareDragStart before drag started\n\t\t\t\t_off(document, 'mouseup', _this._onDrop);\n\t\t\t\t_off(document, 'touchend', _this._onDrop);\n\t\t\t\t_off(document, 'touchcancel', _this._onDrop);\n\n\t\t\t\tif (dataTransfer) {\n\t\t\t\t\tdataTransfer.effectAllowed = 'move';\n\t\t\t\t\toptions.setData && options.setData.call(_this, dataTransfer, dragEl);\n\t\t\t\t}\n\n\t\t\t\t_on(document, 'drop', _this);\n\n\t\t\t\t// #1276 fix:\n\t\t\t\t_css(dragEl, 'transform', 'translateZ(0)');\n\t\t\t}\n\n\t\t\tawaitingDragStarted = true;\n\n\t\t\t_this._dragStartId = _nextTick(_this._dragStarted.bind(_this, fallback, evt));\n\t\t\t_on(document, 'selectstart', _this);\n\t\t\tif (Safari) {\n\t\t\t\t_css(document.body, 'user-select', 'none');\n\t\t\t}\n\t\t},\n\n\n\t\t// Returns true - if no further action is needed (either inserted or another condition)\n\t\t_onDragOver: function (/**Event*/evt) {\n\t\t\tvar el = this.el,\n\t\t\t\ttarget = evt.target,\n\t\t\t\tdragRect,\n\t\t\t\ttargetRect,\n\t\t\t\trevert,\n\t\t\t\toptions = this.options,\n\t\t\t\tgroup = options.group,\n\t\t\t\tactiveSortable = Sortable.active,\n\t\t\t\tisOwner = (activeGroup === group),\n\t\t\t\tcanSort = options.sort,\n\t\t\t\t_this = this;\n\n\t\t\tif (_silent) return;\n\n\t\t\t// IE event order fix\n\t\t\tif (IE11OrLess && !evt.rootEl && !evt.artificialBubble && !_isTrueParentSortable(el, target)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Return invocation when dragEl is inserted (or completed)\n\t\t\tfunction completed(insertion) {\n\t\t\t\tif (insertion) {\n\t\t\t\t\tif (isOwner) {\n\t\t\t\t\t\tactiveSortable._hideClone();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tactiveSortable._showClone(_this);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (activeSortable) {\n\t\t\t\t\t\t// Set ghost class to new sortable's ghost class\n\t\t\t\t\t\t_toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : activeSortable.options.ghostClass, false);\n\t\t\t\t\t\t_toggleClass(dragEl, options.ghostClass, true);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (putSortable !== _this && _this !== Sortable.active) {\n\t\t\t\t\t\tputSortable = _this;\n\t\t\t\t\t} else if (_this === Sortable.active) {\n\t\t\t\t\t\tputSortable = null;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Animation\n\t\t\t\t\tdragRect && _this._animate(dragRect, dragEl);\n\t\t\t\t\ttarget && targetRect && _this._animate(targetRect, target);\n\t\t\t\t}\n\n\n\t\t\t\t// Null lastTarget if it is not inside a previously swapped element\n\t\t\t\tif ((target === dragEl && !dragEl.animated) || (target === el && !target.animated)) {\n\t\t\t\t\tlastTarget = null;\n\t\t\t\t}\n\t\t\t\t// no bubbling and not fallback\n\t\t\t\tif (!options.dragoverBubble && !evt.rootEl && target !== document) {\n\t\t\t\t\t_this._handleAutoScroll(evt);\n\t\t\t\t\tdragEl.parentNode[expando]._computeIsAligned(evt);\n\t\t\t\t}\n\n\t\t\t\t!options.dragoverBubble && evt.stopPropagation && evt.stopPropagation();\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// Call when dragEl has been inserted\n\t\t\tfunction changed() {\n\t\t\t\t_dispatchEvent(_this, rootEl, 'change', target, el, rootEl, oldIndex, _index(dragEl, options.draggable), evt);\n\t\t\t}\n\n\n\t\t\tif (evt.preventDefault !== void 0) {\n\t\t\t\tevt.cancelable && evt.preventDefault();\n\t\t\t}\n\n\n\t\t\tmoved = true;\n\n\t\t\ttarget = _closest(target, options.draggable, el, true);\n\n\t\t\t// target is dragEl or target is animated\n\t\t\tif (!!_closest(evt.target, null, dragEl, true) || target.animated) {\n\t\t\t\treturn completed(false);\n\t\t\t}\n\n\t\t\tif (target !== dragEl) {\n\t\t\t\tignoreNextClick = false;\n\t\t\t}\n\n\t\t\tif (activeSortable && !options.disabled &&\n\t\t\t\t(isOwner\n\t\t\t\t\t? canSort || (revert = !rootEl.contains(dragEl)) // Reverting item into the original list\n\t\t\t\t\t: (\n\t\t\t\t\t\tputSortable === this ||\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\t(this.lastPutMode = activeGroup.checkPull(this, activeSortable, dragEl, evt)) &&\n\t\t\t\t\t\t\tgroup.checkPut(this, activeSortable, dragEl, evt)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tvar axis = this._getDirection(evt, target);\n\n\t\t\t\tdragRect = _getRect(dragEl);\n\n\t\t\t\tif (revert) {\n\t\t\t\t\tthis._hideClone();\n\t\t\t\t\tparentEl = rootEl; // actualization\n\n\t\t\t\t\tif (nextEl) {\n\t\t\t\t\t\trootEl.insertBefore(dragEl, nextEl);\n\t\t\t\t\t} else {\n\t\t\t\t\t\trootEl.appendChild(dragEl);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn completed(true);\n\t\t\t\t}\n\n\t\t\t\tvar elLastChild = _lastChild(el);\n\n\t\t\t\tif (!elLastChild || _ghostIsLast(evt, axis, el) && !elLastChild.animated) {\n\t\t\t\t\t// assign target only if condition is true\n\t\t\t\t\tif (elLastChild && el === evt.target) {\n\t\t\t\t\t\ttarget = elLastChild;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (target) {\n\t\t\t\t\t\ttargetRect = _getRect(target);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (isOwner) {\n\t\t\t\t\t\tactiveSortable._hideClone();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tactiveSortable._showClone(this);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, !!target) !== false) {\n\t\t\t\t\t\tel.appendChild(dragEl);\n\t\t\t\t\t\tparentEl = el; // actualization\n\t\t\t\t\t\trealDragElRect = null;\n\n\t\t\t\t\t\tchanged();\n\t\t\t\t\t\treturn completed(true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (target && target !== dragEl && target.parentNode === el) {\n\t\t\t\t\tvar direction = 0,\n\t\t\t\t\t\ttargetBeforeFirstSwap,\n\t\t\t\t\t\taligned = target.sortableMouseAligned,\n\t\t\t\t\t\tdifferentLevel = dragEl.parentNode !== el,\n\t\t\t\t\t\tside1 = axis === 'vertical' ? 'top' : 'left',\n\t\t\t\t\t\tscrolledPastTop = _isScrolledPast(target, 'top') || _isScrolledPast(dragEl, 'top'),\n\t\t\t\t\t\tscrollBefore = scrolledPastTop ? scrolledPastTop.scrollTop : void 0;\n\n\n\t\t\t\t\tif (lastTarget !== target) {\n\t\t\t\t\t\tlastMode = null;\n\t\t\t\t\t\ttargetBeforeFirstSwap = _getRect(target)[side1];\n\t\t\t\t\t\tpastFirstInvertThresh = false;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Reference: https://www.lucidchart.com/documents/view/10fa0e93-e362-4126-aca2-b709ee56bd8b/0\n\t\t\t\t\tif (\n\t\t\t\t\t\t_isElInRowColumn(dragEl, target, axis) && aligned ||\n\t\t\t\t\t\tdifferentLevel ||\n\t\t\t\t\t\tscrolledPastTop ||\n\t\t\t\t\t\toptions.invertSwap ||\n\t\t\t\t\t\tlastMode === 'insert' ||\n\t\t\t\t\t\t// Needed, in the case that we are inside target and inserted because not aligned... aligned will stay false while inside\n\t\t\t\t\t\t// and lastMode will change to 'insert', but we must swap\n\t\t\t\t\t\tlastMode === 'swap'\n\t\t\t\t\t) {\n\t\t\t\t\t\t// New target that we will be inside\n\t\t\t\t\t\tif (lastMode !== 'swap') {\n\t\t\t\t\t\t\tisCircumstantialInvert = options.invertSwap || differentLevel;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdirection = _getSwapDirection(evt, target, axis,\n\t\t\t\t\t\t\toptions.swapThreshold, options.invertedSwapThreshold == null ? options.swapThreshold : options.invertedSwapThreshold,\n\t\t\t\t\t\t\tisCircumstantialInvert,\n\t\t\t\t\t\t\tlastTarget === target);\n\t\t\t\t\t\tlastMode = 'swap';\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Insert at position\n\t\t\t\t\t\tdirection = _getInsertDirection(target);\n\t\t\t\t\t\tlastMode = 'insert';\n\t\t\t\t\t}\n\t\t\t\t\tif (direction === 0) return completed(false);\n\n\t\t\t\t\trealDragElRect = null;\n\t\t\t\t\tlastTarget = target;\n\n\t\t\t\t\tlastDirection = direction;\n\n\t\t\t\t\ttargetRect = _getRect(target);\n\n\t\t\t\t\tvar nextSibling = target.nextElementSibling,\n\t\t\t\t\t\tafter = false;\n\n\t\t\t\t\tafter = direction === 1;\n\n\t\t\t\t\tvar moveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, after);\n\n\t\t\t\t\tif (moveVector !== false) {\n\t\t\t\t\t\tif (moveVector === 1 || moveVector === -1) {\n\t\t\t\t\t\t\tafter = (moveVector === 1);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_silent = true;\n\t\t\t\t\t\tsetTimeout(_unsilent, 30);\n\n\t\t\t\t\t\tif (isOwner) {\n\t\t\t\t\t\t\tactiveSortable._hideClone();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tactiveSortable._showClone(this);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (after && !nextSibling) {\n\t\t\t\t\t\t\tel.appendChild(dragEl);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttarget.parentNode.insertBefore(dragEl, after ? nextSibling : target);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Undo chrome's scroll adjustment\n\t\t\t\t\t\tif (scrolledPastTop) {\n\t\t\t\t\t\t\t_scrollBy(scrolledPastTop, 0, scrollBefore - scrolledPastTop.scrollTop);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tparentEl = dragEl.parentNode; // actualization\n\n\t\t\t\t\t\t// must be done before animation\n\t\t\t\t\t\tif (targetBeforeFirstSwap !== undefined && !isCircumstantialInvert) {\n\t\t\t\t\t\t\ttargetMoveDistance = abs(targetBeforeFirstSwap - _getRect(target)[side1]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tchanged();\n\n\t\t\t\t\t\treturn completed(true);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (el.contains(dragEl)) {\n\t\t\t\t\treturn completed(false);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (IE11OrLess && !evt.rootEl) {\n\t\t\t\t_artificalBubble(el, evt, '_onDragOver');\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\n\t\t_animate: function (prevRect, target) {\n\t\t\tvar ms = this.options.animation;\n\n\t\t\tif (ms) {\n\t\t\t\tvar currentRect = _getRect(target);\n\n\t\t\t\tif (target === dragEl) {\n\t\t\t\t\trealDragElRect = currentRect;\n\t\t\t\t}\n\n\t\t\t\tif (prevRect.nodeType === 1) {\n\t\t\t\t\tprevRect = _getRect(prevRect);\n\t\t\t\t}\n\n\t\t\t\t// Check if actually moving position\n\t\t\t\tif ((prevRect.left + prevRect.width / 2) !== (currentRect.left + currentRect.width / 2)\n\t\t\t\t\t|| (prevRect.top + prevRect.height / 2) !== (currentRect.top + currentRect.height / 2)\n\t\t\t\t) {\n\t\t\t\t\tvar matrix = _matrix(this.el),\n\t\t\t\t\t\tscaleX = matrix && matrix.a,\n\t\t\t\t\t\tscaleY = matrix && matrix.d;\n\n\t\t\t\t\t_css(target, 'transition', 'none');\n\t\t\t\t\t_css(target, 'transform', 'translate3d('\n\t\t\t\t\t\t+ (prevRect.left - currentRect.left) / (scaleX ? scaleX : 1) + 'px,'\n\t\t\t\t\t\t+ (prevRect.top - currentRect.top) / (scaleY ? scaleY : 1) + 'px,0)'\n\t\t\t\t\t);\n\n\t\t\t\t\tforRepaintDummy = target.offsetWidth; // repaint\n\t\t\t\t\t_css(target, 'transition', 'transform ' + ms + 'ms' + (this.options.easing ? ' ' + this.options.easing : ''));\n\t\t\t\t\t_css(target, 'transform', 'translate3d(0,0,0)');\n\t\t\t\t}\n\n\t\t\t\t(typeof target.animated === 'number') && clearTimeout(target.animated);\n\t\t\t\ttarget.animated = setTimeout(function () {\n\t\t\t\t\t_css(target, 'transition', '');\n\t\t\t\t\t_css(target, 'transform', '');\n\t\t\t\t\ttarget.animated = false;\n\t\t\t\t}, ms);\n\t\t\t}\n\t\t},\n\n\t\t_offUpEvents: function () {\n\t\t\tvar ownerDocument = this.el.ownerDocument;\n\n\t\t\t_off(document, 'touchmove', this._onTouchMove);\n\t\t\t_off(document, 'pointermove', this._onTouchMove);\n\t\t\t_off(ownerDocument, 'mouseup', this._onDrop);\n\t\t\t_off(ownerDocument, 'touchend', this._onDrop);\n\t\t\t_off(ownerDocument, 'pointerup', this._onDrop);\n\t\t\t_off(ownerDocument, 'touchcancel', this._onDrop);\n\t\t\t_off(document, 'selectstart', this);\n\t\t},\n\n\t\t_onDrop: function (/**Event*/evt) {\n\t\t\tvar el = this.el,\n\t\t\t\toptions = this.options;\n\t\t\tawaitingDragStarted = false;\n\t\t\tscrolling = false;\n\t\t\tisCircumstantialInvert = false;\n\t\t\tpastFirstInvertThresh = false;\n\n\t\t\tclearInterval(this._loopId);\n\n\t\t\tclearInterval(pointerElemChangedInterval);\n\t\t\t_clearAutoScrolls();\n\t\t\t_cancelThrottle();\n\n\t\t\tclearTimeout(this._dragStartTimer);\n\n\t\t\t_cancelNextTick(this._cloneId);\n\t\t\t_cancelNextTick(this._dragStartId);\n\n\t\t\t// Unbind events\n\t\t\t_off(document, 'mousemove', this._onTouchMove);\n\n\n\t\t\tif (this.nativeDraggable) {\n\t\t\t\t_off(document, 'drop', this);\n\t\t\t\t_off(el, 'dragstart', this._onDragStart);\n\t\t\t\t_off(document, 'dragover', this._handleAutoScroll);\n\t\t\t\t_off(document, 'dragover', _checkAlignment);\n\t\t\t}\n\n\t\t\tif (Safari) {\n\t\t\t\t_css(document.body, 'user-select', '');\n\t\t\t}\n\n\t\t\tthis._offUpEvents();\n\n\t\t\tif (evt) {\n\t\t\t\tif (moved) {\n\t\t\t\t\tevt.cancelable && evt.preventDefault();\n\t\t\t\t\t!options.dropBubble && evt.stopPropagation();\n\t\t\t\t}\n\n\t\t\t\tghostEl && ghostEl.parentNode && ghostEl.parentNode.removeChild(ghostEl);\n\n\t\t\t\tif (rootEl === parentEl || (putSortable && putSortable.lastPutMode !== 'clone')) {\n\t\t\t\t\t// Remove clone\n\t\t\t\t\tcloneEl && cloneEl.parentNode && cloneEl.parentNode.removeChild(cloneEl);\n\t\t\t\t}\n\n\t\t\t\tif (dragEl) {\n\t\t\t\t\tif (this.nativeDraggable) {\n\t\t\t\t\t\t_off(dragEl, 'dragend', this);\n\t\t\t\t\t}\n\n\t\t\t\t\t_disableDraggable(dragEl);\n\t\t\t\t\tdragEl.style['will-change'] = '';\n\n\t\t\t\t\t// Remove class's\n\t\t\t\t\t_toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : this.options.ghostClass, false);\n\t\t\t\t\t_toggleClass(dragEl, this.options.chosenClass, false);\n\n\t\t\t\t\t// Drag stop event\n\t\t\t\t\t_dispatchEvent(this, rootEl, 'unchoose', dragEl, parentEl, rootEl, oldIndex, null, evt);\n\n\t\t\t\t\tif (rootEl !== parentEl) {\n\t\t\t\t\t\tnewIndex = _index(dragEl, options.draggable);\n\n\t\t\t\t\t\tif (newIndex >= 0) {\n\t\t\t\t\t\t\t// Add event\n\t\t\t\t\t\t\t_dispatchEvent(null, parentEl, 'add', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\n\t\t\t\t\t\t\t// Remove event\n\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'remove', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\n\t\t\t\t\t\t\t// drag from one list and drop into another\n\t\t\t\t\t\t\t_dispatchEvent(null, parentEl, 'sort', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'sort', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tputSortable && putSortable.save();\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (dragEl.nextSibling !== nextEl) {\n\t\t\t\t\t\t\t// Get the index of the dragged element within its parent\n\t\t\t\t\t\t\tnewIndex = _index(dragEl, options.draggable);\n\n\t\t\t\t\t\t\tif (newIndex >= 0) {\n\t\t\t\t\t\t\t\t// drag & drop within the same list\n\t\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'update', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\t\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'sort', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Sortable.active) {\n\t\t\t\t\t\t/* jshint eqnull:true */\n\t\t\t\t\t\tif (newIndex == null || newIndex === -1) {\n\t\t\t\t\t\t\tnewIndex = oldIndex;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'end', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\n\t\t\t\t\t\t// Save sorting\n\t\t\t\t\t\tthis.save();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tthis._nulling();\n\t\t},\n\n\t\t_nulling: function() {\n\t\t\trootEl =\n\t\t\tdragEl =\n\t\t\tparentEl =\n\t\t\tghostEl =\n\t\t\tnextEl =\n\t\t\tcloneEl =\n\t\t\tlastDownEl =\n\n\t\t\tscrollEl =\n\t\t\tscrollParentEl =\n\t\t\tautoScrolls.length =\n\n\t\t\tpointerElemChangedInterval =\n\t\t\tlastPointerElemX =\n\t\t\tlastPointerElemY =\n\n\t\t\ttapEvt =\n\t\t\ttouchEvt =\n\n\t\t\tmoved =\n\t\t\tnewIndex =\n\t\t\toldIndex =\n\n\t\t\tlastTarget =\n\t\t\tlastDirection =\n\n\t\t\tforRepaintDummy =\n\t\t\trealDragElRect =\n\n\t\t\tputSortable =\n\t\t\tactiveGroup =\n\t\t\tSortable.active = null;\n\n\t\t\tsavedInputChecked.forEach(function (el) {\n\t\t\t\tel.checked = true;\n\t\t\t});\n\n\t\t\tsavedInputChecked.length = 0;\n\t\t},\n\n\t\thandleEvent: function (/**Event*/evt) {\n\t\t\tswitch (evt.type) {\n\t\t\t\tcase 'drop':\n\t\t\t\tcase 'dragend':\n\t\t\t\t\tthis._onDrop(evt);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'dragenter':\n\t\t\t\tcase 'dragover':\n\t\t\t\t\tif (dragEl) {\n\t\t\t\t\t\tthis._onDragOver(evt);\n\t\t\t\t\t\t_globalDragOver(evt);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'selectstart':\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Serializes the item into an array of string.\n\t\t * @returns {String[]}\n\t\t */\n\t\ttoArray: function () {\n\t\t\tvar order = [],\n\t\t\t\tel,\n\t\t\t\tchildren = this.el.children,\n\t\t\t\ti = 0,\n\t\t\t\tn = children.length,\n\t\t\t\toptions = this.options;\n\n\t\t\tfor (; i < n; i++) {\n\t\t\t\tel = children[i];\n\t\t\t\tif (_closest(el, options.draggable, this.el, false)) {\n\t\t\t\t\torder.push(el.getAttribute(options.dataIdAttr) || _generateId(el));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn order;\n\t\t},\n\n\n\t\t/**\n\t\t * Sorts the elements according to the array.\n\t\t * @param  {String[]}  order  order of the items\n\t\t */\n\t\tsort: function (order) {\n\t\t\tvar items = {}, rootEl = this.el;\n\n\t\t\tthis.toArray().forEach(function (id, i) {\n\t\t\t\tvar el = rootEl.children[i];\n\n\t\t\t\tif (_closest(el, this.options.draggable, rootEl, false)) {\n\t\t\t\t\titems[id] = el;\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\torder.forEach(function (id) {\n\t\t\t\tif (items[id]) {\n\t\t\t\t\trootEl.removeChild(items[id]);\n\t\t\t\t\trootEl.appendChild(items[id]);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\n\t\t/**\n\t\t * Save the current sorting\n\t\t */\n\t\tsave: function () {\n\t\t\tvar store = this.options.store;\n\t\t\tstore && store.set && store.set(this);\n\t\t},\n\n\n\t\t/**\n\t\t * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\n\t\t * @param   {HTMLElement}  el\n\t\t * @param   {String}       [selector]  default: `options.draggable`\n\t\t * @returns {HTMLElement|null}\n\t\t */\n\t\tclosest: function (el, selector) {\n\t\t\treturn _closest(el, selector || this.options.draggable, this.el, false);\n\t\t},\n\n\n\t\t/**\n\t\t * Set/get option\n\t\t * @param   {string} name\n\t\t * @param   {*}      [value]\n\t\t * @returns {*}\n\t\t */\n\t\toption: function (name, value) {\n\t\t\tvar options = this.options;\n\n\t\t\tif (value === void 0) {\n\t\t\t\treturn options[name];\n\t\t\t} else {\n\t\t\t\toptions[name] = value;\n\n\t\t\t\tif (name === 'group') {\n\t\t\t\t\t_prepareGroup(options);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Destroy\n\t\t */\n\t\tdestroy: function () {\n\t\t\tvar el = this.el;\n\n\t\t\tel[expando] = null;\n\n\t\t\t_off(el, 'mousedown', this._onTapStart);\n\t\t\t_off(el, 'touchstart', this._onTapStart);\n\t\t\t_off(el, 'pointerdown', this._onTapStart);\n\n\t\t\tif (this.nativeDraggable) {\n\t\t\t\t_off(el, 'dragover', this);\n\t\t\t\t_off(el, 'dragenter', this);\n\t\t\t}\n\t\t\t// Remove draggable attributes\n\t\t\tArray.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\n\t\t\t\tel.removeAttribute('draggable');\n\t\t\t});\n\n\t\t\tthis._onDrop();\n\n\t\t\tsortables.splice(sortables.indexOf(this.el), 1);\n\n\t\t\tthis.el = el = null;\n\t\t},\n\n\t\t_hideClone: function() {\n\t\t\tif (!cloneEl.cloneHidden) {\n\t\t\t\t_css(cloneEl, 'display', 'none');\n\t\t\t\tcloneEl.cloneHidden = true;\n\t\t\t\tif (cloneEl.parentNode && this.options.removeCloneOnHide) {\n\t\t\t\t\tcloneEl.parentNode.removeChild(cloneEl);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_showClone: function(putSortable) {\n\t\t\tif (putSortable.lastPutMode !== 'clone') {\n\t\t\t\tthis._hideClone();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (cloneEl.cloneHidden) {\n\t\t\t\t// show clone at dragEl or original position\n\t\t\t\tif (rootEl.contains(dragEl) && !this.options.group.revertClone) {\n\t\t\t\t\trootEl.insertBefore(cloneEl, dragEl);\n\t\t\t\t} else if (nextEl) {\n\t\t\t\t\trootEl.insertBefore(cloneEl, nextEl);\n\t\t\t\t} else {\n\t\t\t\t\trootEl.appendChild(cloneEl);\n\t\t\t\t}\n\n\t\t\t\tif (this.options.group.revertClone) {\n\t\t\t\t\tthis._animate(dragEl, cloneEl);\n\t\t\t\t}\n\t\t\t\t_css(cloneEl, 'display', '');\n\t\t\t\tcloneEl.cloneHidden = false;\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction _closest(/**HTMLElement*/el, /**String*/selector, /**HTMLElement*/ctx, includeCTX) {\n\t\tif (el) {\n\t\t\tctx = ctx || document;\n\n\t\t\tdo {\n\t\t\t\tif (\n\t\t\t\t\tselector != null &&\n\t\t\t\t\t(\n\t\t\t\t\t\tselector[0] === '>' && el.parentNode === ctx && _matches(el, selector.substring(1)) ||\n\t\t\t\t\t\t_matches(el, selector)\n\t\t\t\t\t) ||\n\t\t\t\t\tincludeCTX && el === ctx\n\t\t\t\t) {\n\t\t\t\t\treturn el;\n\t\t\t\t}\n\n\t\t\t\tif (el === ctx) break;\n\t\t\t\t/* jshint boss:true */\n\t\t\t} while (el = _getParentOrHost(el));\n\t\t}\n\n\t\treturn null;\n\t}\n\n\n\tfunction _getParentOrHost(el) {\n\t\treturn (el.host && el !== document && el.host.nodeType)\n\t\t\t? el.host\n\t\t\t: el.parentNode;\n\t}\n\n\n\tfunction _globalDragOver(/**Event*/evt) {\n\t\tif (evt.dataTransfer) {\n\t\t\tevt.dataTransfer.dropEffect = 'move';\n\t\t}\n\t\tevt.cancelable && evt.preventDefault();\n\t}\n\n\n\tfunction _on(el, event, fn) {\n\t\tel.addEventListener(event, fn, captureMode);\n\t}\n\n\n\tfunction _off(el, event, fn) {\n\t\tel.removeEventListener(event, fn, captureMode);\n\t}\n\n\n\tfunction _toggleClass(el, name, state) {\n\t\tif (el && name) {\n\t\t\tif (el.classList) {\n\t\t\t\tel.classList[state ? 'add' : 'remove'](name);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar className = (' ' + el.className + ' ').replace(R_SPACE, ' ').replace(' ' + name + ' ', ' ');\n\t\t\t\tel.className = (className + (state ? ' ' + name : '')).replace(R_SPACE, ' ');\n\t\t\t}\n\t\t}\n\t}\n\n\n\tfunction _css(el, prop, val) {\n\t\tvar style = el && el.style;\n\n\t\tif (style) {\n\t\t\tif (val === void 0) {\n\t\t\t\tif (document.defaultView && document.defaultView.getComputedStyle) {\n\t\t\t\t\tval = document.defaultView.getComputedStyle(el, '');\n\t\t\t\t}\n\t\t\t\telse if (el.currentStyle) {\n\t\t\t\t\tval = el.currentStyle;\n\t\t\t\t}\n\n\t\t\t\treturn prop === void 0 ? val : val[prop];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (!(prop in style) && prop.indexOf('webkit') === -1) {\n\t\t\t\t\tprop = '-webkit-' + prop;\n\t\t\t\t}\n\n\t\t\t\tstyle[prop] = val + (typeof val === 'string' ? '' : 'px');\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction _matrix(el) {\n\t\tvar appliedTransforms = '';\n\t\tdo {\n\t\t\tvar transform = _css(el, 'transform');\n\n\t\t\tif (transform && transform !== 'none') {\n\t\t\t\tappliedTransforms = transform + ' ' + appliedTransforms;\n\t\t\t}\n\t\t\t/* jshint boss:true */\n\t\t} while (el = el.parentNode);\n\n\t\tif (window.DOMMatrix) {\n\t\t\treturn new DOMMatrix(appliedTransforms);\n\t\t} else if (window.WebKitCSSMatrix) {\n\t\t\treturn new WebKitCSSMatrix(appliedTransforms);\n\t\t} else if (window.CSSMatrix) {\n\t\t\treturn new CSSMatrix(appliedTransforms);\n\t\t}\n\t}\n\n\n\tfunction _find(ctx, tagName, iterator) {\n\t\tif (ctx) {\n\t\t\tvar list = ctx.getElementsByTagName(tagName), i = 0, n = list.length;\n\n\t\t\tif (iterator) {\n\t\t\t\tfor (; i < n; i++) {\n\t\t\t\t\titerator(list[i], i);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn list;\n\t\t}\n\n\t\treturn [];\n\t}\n\n\n\n\tfunction _dispatchEvent(sortable, rootEl, name, targetEl, toEl, fromEl, startIndex, newIndex, originalEvt) {\n\t\tsortable = (sortable || rootEl[expando]);\n\t\tvar evt,\n\t\t\toptions = sortable.options,\n\t\t\tonName = 'on' + name.charAt(0).toUpperCase() + name.substr(1);\n\t\t// Support for new CustomEvent feature\n\t\tif (window.CustomEvent && !IE11OrLess && !Edge) {\n\t\t\tevt = new CustomEvent(name, {\n\t\t\t\tbubbles: true,\n\t\t\t\tcancelable: true\n\t\t\t});\n\t\t} else {\n\t\t\tevt = document.createEvent('Event');\n\t\t\tevt.initEvent(name, true, true);\n\t\t}\n\n\t\tevt.to = toEl || rootEl;\n\t\tevt.from = fromEl || rootEl;\n\t\tevt.item = targetEl || rootEl;\n\t\tevt.clone = cloneEl;\n\n\t\tevt.oldIndex = startIndex;\n\t\tevt.newIndex = newIndex;\n\n\t\tevt.originalEvent = originalEvt;\n\t\tevt.pullMode = putSortable ? putSortable.lastPutMode : undefined;\n\n\t\tif (rootEl) {\n\t\t\trootEl.dispatchEvent(evt);\n\t\t}\n\n\t\tif (options[onName]) {\n\t\t\toptions[onName].call(sortable, evt);\n\t\t}\n\t}\n\n\n\tfunction _onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect, originalEvt, willInsertAfter) {\n\t\tvar evt,\n\t\t\tsortable = fromEl[expando],\n\t\t\tonMoveFn = sortable.options.onMove,\n\t\t\tretVal;\n\t\t// Support for new CustomEvent feature\n\t\tif (window.CustomEvent && !IE11OrLess && !Edge) {\n\t\t\tevt = new CustomEvent('move', {\n\t\t\t\tbubbles: true,\n\t\t\t\tcancelable: true\n\t\t\t});\n\t\t} else {\n\t\t\tevt = document.createEvent('Event');\n\t\t\tevt.initEvent('move', true, true);\n\t\t}\n\n\t\tevt.to = toEl;\n\t\tevt.from = fromEl;\n\t\tevt.dragged = dragEl;\n\t\tevt.draggedRect = dragRect;\n\t\tevt.related = targetEl || toEl;\n\t\tevt.relatedRect = targetRect || _getRect(toEl);\n\t\tevt.willInsertAfter = willInsertAfter;\n\n\t\tevt.originalEvent = originalEvt;\n\n\t\tfromEl.dispatchEvent(evt);\n\n\t\tif (onMoveFn) {\n\t\t\tretVal = onMoveFn.call(sortable, evt, originalEvt);\n\t\t}\n\n\t\treturn retVal;\n\t}\n\n\tfunction _disableDraggable(el) {\n\t\tel.draggable = false;\n\t}\n\n\tfunction _unsilent() {\n\t\t_silent = false;\n\t}\n\n\t/**\n\t * Gets nth child of el, ignoring hidden children, sortable's elements (does not ignore clone if it's visible)\n\t * and non-draggable elements\n\t * @param  {HTMLElement} el       The parent element\n\t * @param  {Number} childNum      The index of the child\n\t * @param  {Object} options       Parent Sortable's options\n\t * @return {HTMLElement}          The child at index childNum, or null if not found\n\t */\n\tfunction _getChild(el, childNum, options) {\n\t\tvar currentChild = 0,\n\t\t\ti = 0,\n\t\t\tchildren = el.children;\n\n\t\twhile (i < children.length) {\n\t\t\tif (\n\t\t\t\tchildren[i].style.display !== 'none' &&\n\t\t\t\tchildren[i] !== ghostEl &&\n\t\t\t\tchildren[i] !== dragEl &&\n\t\t\t\t_closest(children[i], options.draggable, el, false)\n\t\t\t) {\n\t\t\t\tif (currentChild === childNum) {\n\t\t\t\t\treturn children[i];\n\t\t\t\t}\n\t\t\t\tcurrentChild++;\n\t\t\t}\n\n\t\t\ti++;\n\t\t}\n\t\treturn null;\n\t}\n\n\t/**\n\t * Gets the last child in the el, ignoring ghostEl or invisible elements (clones)\n\t * @param  {HTMLElement} el       Parent element\n\t * @return {HTMLElement}          The last child, ignoring ghostEl\n\t */\n\tfunction _lastChild(el) {\n\t\tvar last = el.lastElementChild;\n\n\t\twhile (last && (last === ghostEl || last.style.display === 'none')) {\n\t\t\tlast = last.previousElementSibling;\n\t\t}\n\n\t\treturn last || null;\n\t}\n\n\tfunction _ghostIsLast(evt, axis, el) {\n\t\tvar elRect = _getRect(_lastChild(el)),\n\t\t\tmouseOnAxis = axis === 'vertical' ? evt.clientY : evt.clientX,\n\t\t\tmouseOnOppAxis = axis === 'vertical' ? evt.clientX : evt.clientY,\n\t\t\ttargetS2 = axis === 'vertical' ? elRect.bottom : elRect.right,\n\t\t\ttargetS1Opp = axis === 'vertical' ? elRect.left : elRect.top,\n\t\t\ttargetS2Opp = axis === 'vertical' ? elRect.right : elRect.bottom,\n\t\t\tspacer = 10;\n\n\t\treturn (\n\t\t\taxis === 'vertical' ?\n\t\t\t\t(mouseOnOppAxis > targetS2Opp + spacer || mouseOnOppAxis <= targetS2Opp && mouseOnAxis > targetS2 && mouseOnOppAxis >= targetS1Opp) :\n\t\t\t\t(mouseOnAxis > targetS2 && mouseOnOppAxis > targetS1Opp || mouseOnAxis <= targetS2 && mouseOnOppAxis > targetS2Opp + spacer)\n\t\t);\n\t}\n\n\tfunction _getSwapDirection(evt, target, axis, swapThreshold, invertedSwapThreshold, invertSwap, isLastTarget) {\n\t\tvar targetRect = _getRect(target),\n\t\t\tmouseOnAxis = axis === 'vertical' ? evt.clientY : evt.clientX,\n\t\t\ttargetLength = axis === 'vertical' ? targetRect.height : targetRect.width,\n\t\t\ttargetS1 = axis === 'vertical' ? targetRect.top : targetRect.left,\n\t\t\ttargetS2 = axis === 'vertical' ? targetRect.bottom : targetRect.right,\n\t\t\tdragRect = _getRect(dragEl),\n\t\t\tinvert = false;\n\n\n\t\tif (!invertSwap) {\n\t\t\t// Never invert or create dragEl shadow when target movemenet causes mouse to move past the end of regular swapThreshold\n\t\t\tif (isLastTarget && targetMoveDistance < targetLength * swapThreshold) { // multiplied only by swapThreshold because mouse will already be inside target by (1 - threshold) * targetLength / 2\n\t\t\t\t// check if past first invert threshold on side opposite of lastDirection\n\t\t\t\tif (!pastFirstInvertThresh &&\n\t\t\t\t\t(lastDirection === 1 ?\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tmouseOnAxis > targetS1 + targetLength * invertedSwapThreshold / 2\n\t\t\t\t\t\t) :\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tmouseOnAxis < targetS2 - targetLength * invertedSwapThreshold / 2\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\t// past first invert threshold, do not restrict inverted threshold to dragEl shadow\n\t\t\t\t\tpastFirstInvertThresh = true;\n\t\t\t\t}\n\n\t\t\t\tif (!pastFirstInvertThresh) {\n\t\t\t\t\tvar dragS1 = axis === 'vertical' ? dragRect.top : dragRect.left,\n\t\t\t\t\t\tdragS2 = axis === 'vertical' ? dragRect.bottom : dragRect.right;\n\t\t\t\t\t// dragEl shadow (target move distance shadow)\n\t\t\t\t\tif (\n\t\t\t\t\t\tlastDirection === 1 ?\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tmouseOnAxis < targetS1 + targetMoveDistance // over dragEl shadow\n\t\t\t\t\t\t) :\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tmouseOnAxis > targetS2 - targetMoveDistance\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn lastDirection * -1;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tinvert = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Regular\n\t\t\t\tif (\n\t\t\t\t\tmouseOnAxis > targetS1 + (targetLength * (1 - swapThreshold) / 2) &&\n\t\t\t\t\tmouseOnAxis < targetS2 - (targetLength * (1 - swapThreshold) / 2)\n\t\t\t\t) {\n\t\t\t\t\treturn _getInsertDirection(target);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tinvert = invert || invertSwap;\n\n\t\tif (invert) {\n\t\t\t// Invert of regular\n\t\t\tif (\n\t\t\t\tmouseOnAxis < targetS1 + (targetLength * invertedSwapThreshold / 2) ||\n\t\t\t\tmouseOnAxis > targetS2 - (targetLength * invertedSwapThreshold / 2)\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn ((mouseOnAxis > targetS1 + targetLength / 2) ? 1 : -1);\n\t\t\t}\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\t/**\n\t * Gets the direction dragEl must be swapped relative to target in order to make it\n\t * seem that dragEl has been \"inserted\" into that element's position\n\t * @param  {HTMLElement} target       The target whose position dragEl is being inserted at\n\t * @return {Number}                   Direction dragEl must be swapped\n\t */\n\tfunction _getInsertDirection(target) {\n\t\tvar dragElIndex = _index(dragEl),\n\t\t\ttargetIndex = _index(target);\n\n\t\tif (dragElIndex < targetIndex) {\n\t\t\treturn 1;\n\t\t} else {\n\t\t\treturn -1;\n\t\t}\n\t}\n\n\n\t/**\n\t * Generate id\n\t * @param   {HTMLElement} el\n\t * @returns {String}\n\t * @private\n\t */\n\tfunction _generateId(el) {\n\t\tvar str = el.tagName + el.className + el.src + el.href + el.textContent,\n\t\t\ti = str.length,\n\t\t\tsum = 0;\n\n\t\twhile (i--) {\n\t\t\tsum += str.charCodeAt(i);\n\t\t}\n\n\t\treturn sum.toString(36);\n\t}\n\n\t/**\n\t * Returns the index of an element within its parent for a selected set of\n\t * elements\n\t * @param  {HTMLElement} el\n\t * @param  {selector} selector\n\t * @return {number}\n\t */\n\tfunction _index(el, selector) {\n\t\tvar index = 0;\n\n\t\tif (!el || !el.parentNode) {\n\t\t\treturn -1;\n\t\t}\n\n\t\twhile (el && (el = el.previousElementSibling)) {\n\t\t\tif ((el.nodeName.toUpperCase() !== 'TEMPLATE') && el !== cloneEl) {\n\t\t\t\tindex++;\n\t\t\t}\n\t\t}\n\n\t\treturn index;\n\t}\n\n\tfunction _matches(/**HTMLElement*/el, /**String*/selector) {\n\t\tif (el) {\n\t\t\ttry {\n\t\t\t\tif (el.matches) {\n\t\t\t\t\treturn el.matches(selector);\n\t\t\t\t} else if (el.msMatchesSelector) {\n\t\t\t\t\treturn el.msMatchesSelector(selector);\n\t\t\t\t} else if (el.webkitMatchesSelector) {\n\t\t\t\t\treturn el.webkitMatchesSelector(selector);\n\t\t\t\t}\n\t\t\t} catch(_) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tvar _throttleTimeout;\n\tfunction _throttle(callback, ms) {\n\t\treturn function () {\n\t\t\tif (!_throttleTimeout) {\n\t\t\t\tvar args = arguments,\n\t\t\t\t\t_this = this;\n\n\t\t\t\t_throttleTimeout = setTimeout(function () {\n\t\t\t\t\tif (args.length === 1) {\n\t\t\t\t\t\tcallback.call(_this, args[0]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcallback.apply(_this, args);\n\t\t\t\t\t}\n\n\t\t\t\t\t_throttleTimeout = void 0;\n\t\t\t\t}, ms);\n\t\t\t}\n\t\t};\n\t}\n\n\tfunction _cancelThrottle() {\n\t\tclearTimeout(_throttleTimeout);\n\t\t_throttleTimeout = void 0;\n\t}\n\n\tfunction _extend(dst, src) {\n\t\tif (dst && src) {\n\t\t\tfor (var key in src) {\n\t\t\t\tif (src.hasOwnProperty(key)) {\n\t\t\t\t\tdst[key] = src[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn dst;\n\t}\n\n\tfunction _clone(el) {\n\t\tif (Polymer && Polymer.dom) {\n\t\t\treturn Polymer.dom(el).cloneNode(true);\n\t\t}\n\t\telse if ($) {\n\t\t\treturn $(el).clone(true)[0];\n\t\t}\n\t\telse {\n\t\t\treturn el.cloneNode(true);\n\t\t}\n\t}\n\n\tfunction _saveInputCheckedState(root) {\n\t\tsavedInputChecked.length = 0;\n\n\t\tvar inputs = root.getElementsByTagName('input');\n\t\tvar idx = inputs.length;\n\n\t\twhile (idx--) {\n\t\t\tvar el = inputs[idx];\n\t\t\tel.checked && savedInputChecked.push(el);\n\t\t}\n\t}\n\n\tfunction _nextTick(fn) {\n\t\treturn setTimeout(fn, 0);\n\t}\n\n\tfunction _cancelNextTick(id) {\n\t\treturn clearTimeout(id);\n\t}\n\n\n\t/**\n\t * Returns the \"bounding client rect\" of given element\n\t * @param  {HTMLElement} el                The element whose boundingClientRect is wanted\n\t * @param  {[HTMLElement]} container       the parent the element will be placed in\n\t * @param  {[Boolean]} adjustForTransform  Whether the rect should compensate for parent's transform\n\t * @return {Object}                        The boundingClientRect of el\n\t */\n\tfunction _getRect(el, adjustForTransform, container, adjustForFixed) {\n\t\tif (!el.getBoundingClientRect && el !== win) return;\n\n\t\tvar elRect,\n\t\t\ttop,\n\t\t\tleft,\n\t\t\tbottom,\n\t\t\tright,\n\t\t\theight,\n\t\t\twidth;\n\n\t\tif (el !== win && el !== _getWindowScrollingElement()) {\n\t\t\telRect = el.getBoundingClientRect();\n\t\t\ttop = elRect.top;\n\t\t\tleft = elRect.left;\n\t\t\tbottom = elRect.bottom;\n\t\t\tright = elRect.right;\n\t\t\theight = elRect.height;\n\t\t\twidth = elRect.width;\n\t\t} else {\n\t\t\ttop = 0;\n\t\t\tleft = 0;\n\t\t\tbottom = window.innerHeight;\n\t\t\tright = window.innerWidth;\n\t\t\theight = window.innerHeight;\n\t\t\twidth = window.innerWidth;\n\t\t}\n\n\t\tif (adjustForFixed && el !== win) {\n\t\t\t// Adjust for translate()\n\t\t\tcontainer = container || el.parentNode;\n\n\t\t\t// solves #1123 (see: https://stackoverflow.com/a/37953806/6088312)\n\t\t\t// Not needed on <= IE11\n\t\t\tif (!IE11OrLess) {\n\t\t\t\tdo {\n\t\t\t\t\tif (container && container.getBoundingClientRect && _css(container, 'transform') !== 'none') {\n\t\t\t\t\t\tvar containerRect = container.getBoundingClientRect();\n\n\t\t\t\t\t\t// Set relative to edges of padding box of container\n\t\t\t\t\t\ttop -= containerRect.top + parseInt(_css(container, 'border-top-width'));\n\t\t\t\t\t\tleft -= containerRect.left + parseInt(_css(container, 'border-left-width'));\n\t\t\t\t\t\tbottom = top + elRect.height;\n\t\t\t\t\t\tright = left + elRect.width;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\t/* jshint boss:true */\n\t\t\t\t} while (container = container.parentNode);\n\t\t\t}\n\t\t}\n\n\t\tif (adjustForTransform && el !== win) {\n\t\t\t// Adjust for scale()\n\t\t\tvar matrix = _matrix(container || el),\n\t\t\t\tscaleX = matrix && matrix.a,\n\t\t\t\tscaleY = matrix && matrix.d;\n\n\t\t\tif (matrix) {\n\t\t\t\ttop /= scaleY;\n\t\t\t\tleft /= scaleX;\n\n\t\t\t\twidth /= scaleX;\n\t\t\t\theight /= scaleY;\n\n\t\t\t\tbottom = top + height;\n\t\t\t\tright = left + width;\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\ttop: top,\n\t\t\tleft: left,\n\t\t\tbottom: bottom,\n\t\t\tright: right,\n\t\t\twidth: width,\n\t\t\theight: height\n\t\t};\n\t}\n\n\n\t/**\n\t * Checks if a side of an element is scrolled past a side of it's parents\n\t * @param  {HTMLElement}  el       The element who's side being scrolled out of view is in question\n\t * @param  {String}       side     Side of the element in question ('top', 'left', 'right', 'bottom')\n\t * @return {HTMLElement}           The parent scroll element that the el's side is scrolled past, or null if there is no such element\n\t */\n\tfunction _isScrolledPast(el, side) {\n\t\tvar parent = _getParentAutoScrollElement(el, true),\n\t\t\telSide = _getRect(el)[side];\n\n\t\t/* jshint boss:true */\n\t\twhile (parent) {\n\t\t\tvar parentSide = _getRect(parent)[side],\n\t\t\t\tvisible;\n\n\t\t\tif (side === 'top' || side === 'left') {\n\t\t\t\tvisible = elSide >= parentSide;\n\t\t\t} else {\n\t\t\t\tvisible = elSide <= parentSide;\n\t\t\t}\n\n\t\t\tif (!visible) return parent;\n\n\t\t\tif (parent === _getWindowScrollingElement()) break;\n\n\t\t\tparent = _getParentAutoScrollElement(parent, false);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Returns the scroll offset of the given element, added with all the scroll offsets of parent elements.\n\t * The value is returned in real pixels.\n\t * @param  {HTMLElement} el\n\t * @return {Array}             Offsets in the format of [left, top]\n\t */\n\tfunction _getRelativeScrollOffset(el) {\n\t\tvar offsetLeft = 0,\n\t\t\toffsetTop = 0,\n\t\t\twinScroller = _getWindowScrollingElement();\n\n\t\tif (el) {\n\t\t\tdo {\n\t\t\t\tvar matrix = _matrix(el),\n\t\t\t\t\tscaleX = matrix.a,\n\t\t\t\t\tscaleY = matrix.d;\n\n\t\t\t\toffsetLeft += el.scrollLeft * scaleX;\n\t\t\t\toffsetTop += el.scrollTop * scaleY;\n\t\t\t} while (el !== winScroller && (el = el.parentNode));\n\t\t}\n\n\t\treturn [offsetLeft, offsetTop];\n\t}\n\n\t// Fixed #973:\n\t_on(document, 'touchmove', function(evt) {\n\t\tif ((Sortable.active || awaitingDragStarted) && evt.cancelable) {\n\t\t\tevt.preventDefault();\n\t\t}\n\t});\n\n\n\t// Export utils\n\tSortable.utils = {\n\t\ton: _on,\n\t\toff: _off,\n\t\tcss: _css,\n\t\tfind: _find,\n\t\tis: function (el, selector) {\n\t\t\treturn !!_closest(el, selector, el, false);\n\t\t},\n\t\textend: _extend,\n\t\tthrottle: _throttle,\n\t\tclosest: _closest,\n\t\ttoggleClass: _toggleClass,\n\t\tclone: _clone,\n\t\tindex: _index,\n\t\tnextTick: _nextTick,\n\t\tcancelNextTick: _cancelNextTick,\n\t\tdetectDirection: _detectDirection,\n\t\tgetChild: _getChild\n\t};\n\n\n\t/**\n\t * Create sortable instance\n\t * @param {HTMLElement}  el\n\t * @param {Object}      [options]\n\t */\n\tSortable.create = function (el, options) {\n\t\treturn new Sortable(el, options);\n\t};\n\n\n\t// Export\n\tSortable.version = '1.8.4';\n\treturn Sortable;\n});\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhcHAvbWFuaWZlc3QuanNvbiIsImFwcC9zY3JpcHRzL2NvbW1vbi9zZXR0aW5ncy5qcyIsImFwcC9zY3JpcHRzL3BvcHVwL2luZGV4LmpzIiwiYXBwL3NjcmlwdHMvcG9wdXAvbGF1bmNoZXIuanMiLCJhcHAvc2NyaXB0cy9wb3B1cC9tb2RlbC9hcHBzLmpzIiwiYXBwL3NjcmlwdHMvcG9wdXAvbW9kZWwvZ3JpZC5qcyIsImFwcC9zY3JpcHRzL3BvcHVwL21vZGVsL2luZGV4LmpzIiwiYXBwL3NjcmlwdHMvcG9wdXAvc2VydmljZXMvYXBwcy5qcyIsImFwcC9zY3JpcHRzL3BvcHVwL3NlcnZpY2VzL2ljb25zLmpzIiwiYXBwL3NjcmlwdHMvcG9wdXAvc2VydmljZXMvaW5kZXguanMiLCJhcHAvc2NyaXB0cy9wb3B1cC91aS9hcHBFbGVtZW50QnVpbGRlci5qcyIsImFwcC9zY3JpcHRzL3BvcHVwL3VpL2V2ZW50cy5qcyIsImFwcC9zY3JpcHRzL3BvcHVwL3VpL2luZGV4LmpzIiwiYXBwL3NjcmlwdHMvcG9wdXAvdWkvc2VhcmNoRWxlbWVudEJ1aWxkZXIuanMiLCJub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9saWIvX2VtcHR5LmpzIiwibm9kZV9tb2R1bGVzL2NvbnN0YW50cy1icm93c2VyaWZ5L2NvbnN0YW50cy5qc29uIiwibm9kZV9tb2R1bGVzL2V2ZW50cy9ldmVudHMuanMiLCJub2RlX21vZHVsZXMvc29ydGFibGVqcy9Tb3J0YWJsZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwibW9kdWxlLmV4cG9ydHM9e1xuICAgIFwibmFtZVwiOiBcIl9fTVNHX2FwcE5hbWVfX1wiLFxuICAgIFwidmVyc2lvblwiOiBcIjIuNC4xM1wiLFxuICAgIFwibWFuaWZlc3RfdmVyc2lvblwiOiAyLFxuICAgIFwiaW5jb2duaXRvXCI6IFwic3BsaXRcIixcbiAgICBcImRlc2NyaXB0aW9uXCI6IFwiX19NU0dfYXBwRGVzY3JpcHRpb25fX1wiLFxuICAgIFwiaWNvbnNcIjoge1xuICAgICAgICBcIjE2XCI6IFwiaW1hZ2VzL2ljb24xNi5wbmdcIixcbiAgICAgICAgXCIzMlwiOiBcImltYWdlcy9pY29uMzIucG5nXCIsXG4gICAgICAgIFwiNDhcIjogXCJpbWFnZXMvZ3JpZDQ4LnBuZ1wiLFxuICAgICAgICBcIjEyOFwiOiBcImltYWdlcy9ncmlkMTI4LnBuZ1wiXG4gICAgfSxcbiAgICBcImRlZmF1bHRfbG9jYWxlXCI6IFwiZW5cIixcbiAgICBcImNvbnRlbnRfc2VjdXJpdHlfcG9saWN5XCI6IFwic2NyaXB0LXNyYyAnc2VsZicgJ3Vuc2FmZS1ldmFsJzsgb2JqZWN0LXNyYyAnc2VsZidcIixcbiAgICBcImNvbnRlbnRfc2NyaXB0c1wiOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBcIm1hdGNoZXNcIjogW1xuICAgICAgICAgICAgXCI8YWxsX3VybHM+XCJcbiAgICAgICAgICBdLFxuICAgICAgICAgIFwianNcIjogW1xuICAgICAgICAgICAgXCJzY3JpcHRzL2FuYWx5dGljcy5qc1wiXG4gICAgICAgICAgXSxcbiAgICAgICAgICBcImFsbF9mcmFtZXNcIjogdHJ1ZSxcbiAgICAgICAgICBcInJ1bl9hdFwiOiBcImRvY3VtZW50X2VuZFwiXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgXCJwZXJtaXNzaW9uc1wiOiBbXG4gICAgICAgIFwiPGFsbF91cmxzPlwiLFxuICAgICAgICBcInRhYnNcIixcbiAgICAgICAgXCJhbGFybXNcIixcbiAgICAgICAgXCJ3ZWJSZXF1ZXN0XCIsXG4gICAgICAgIFwid2ViUmVxdWVzdEJsb2NraW5nXCIsXG4gICAgICAgIFwibm90aWZpY2F0aW9uc1wiLFxuICAgICAgICBcIm1hbmFnZW1lbnRcIixcbiAgICAgICAgXCJzdG9yYWdlXCJcbiAgICBdLFxuICAgIFwiYnJvd3Nlcl9hY3Rpb25cIjoge1xuICAgICAgICBcImRlZmF1bHRfaWNvblwiOiB7XG4gICAgICAgICAgICBcIjE5XCI6IFwiaW1hZ2VzL2ljb24xOS5wbmdcIixcbiAgICAgICAgICAgIFwiMzhcIjogXCJpbWFnZXMvaWNvbjM4LnBuZ1wiLFxuICAgICAgICAgICAgXCIxNlwiOiBcImltYWdlcy9pY29uMTYucG5nXCIsXG4gICAgICAgICAgICBcIjMyXCI6IFwiaW1hZ2VzL2ljb24zMi5wbmdcIlxuICAgICAgICB9LFxuICAgICAgICBcImRlZmF1bHRfdGl0bGVcIjogXCJBcHBzXCIsXG4gICAgICAgIFwiZGVmYXVsdF9wb3B1cFwiOiBcInBvcHVwLmh0bWxcIlxuICAgIH0sXG4gICAgXCJiYWNrZ3JvdW5kXCI6IHtcbiAgICAgICAgXCJzY3JpcHRzXCI6IFtcbiAgICAgICAgICAgIFwic2NyaXB0cy9iYWNrZ3JvdW5kLmpzXCJcbiAgICAgICAgXSxcbiAgICAgICAgXCJwZXJzaXN0ZW50XCI6IHRydWVcbiAgICB9LFxuICAgIFwib3B0aW9uc19wYWdlXCI6IFwib3B0aW9ucy5odG1sXCIsXG4gICAgXCJjb21tYW5kc1wiOiB7XG4gICAgICAgIFwiX2V4ZWN1dGVfYnJvd3Nlcl9hY3Rpb25cIjoge1xuICAgICAgICAgICAgXCJzdWdnZXN0ZWRfa2V5XCI6IHtcbiAgICAgICAgICAgICAgICBcIndpbmRvd3NcIjogXCJDdHJsK1BlcmlvZFwiLFxuICAgICAgICAgICAgICAgIFwibWFjXCI6IFwiQ29tbWFuZCtQZXJpb2RcIixcbiAgICAgICAgICAgICAgICBcImNocm9tZW9zXCI6IFwiQ3RybCtQZXJpb2RcIixcbiAgICAgICAgICAgICAgICBcImxpbnV4XCI6IFwiQ3RybCtQZXJpb2RcIlxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcIm9wZW4tYXMtd2luZG93XCI6IHtcbiAgICAgICAgICAgIFwic3VnZ2VzdGVkX2tleVwiOiB7XG4gICAgICAgICAgICAgICAgXCJ3aW5kb3dzXCI6IFwiQ3RybCtDb21tYVwiLFxuICAgICAgICAgICAgICAgIFwibWFjXCI6IFwiQ29tbWFuZCtDb21tYVwiLFxuICAgICAgICAgICAgICAgIFwiY2hyb21lb3NcIjogXCJDdHJsK0NvbW1hXCIsXG4gICAgICAgICAgICAgICAgXCJsaW51eFwiOiBcIkN0cmwrQ29tbWFcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJPcGVuIGFzIHdpbmRvd1wiLFxuICAgICAgICAgICAgXCJnbG9iYWxcIjogdHJ1ZVxuICAgICAgICB9XG4gICAgfVxufVxuIiwiY29uc3QgU0VUVElOR1NfS0VZID0gJ3NldHRpbmdzJztcblxuZXhwb3J0IGNvbnN0IFNFVFRJTkdTID0ge1xuICAgIFNob3dBcHBOYW1lczogJ3Nob3dBcHBOYW1lcycsXG4gICAgTGF1bmNoZXJJY29uQ29sb3I6ICdsYXVuY2hlckljb25Db2xvcicsXG4gICAgTGF1bmNoZXJXaWR0aDogJ2xhdW5jaGVyV2lkdGgnLFxuICAgIEFwcHNQZXJSb3c6ICdhcHBzUGVyUm93JyxcbiAgICBTZWFyY2hCYXI6ICdzZWFyY2hCYXInLFxuICAgIFZlcnNpb246ICd2ZXJzaW9uJyxcbiAgICBBcHBJY29uUGFkZGluZzogJ2FwcEljb25QYWRkaW5nJ1xufTtcblxuZXhwb3J0IGNvbnN0IExFR0FDWV9TRVRUSU5HUyA9IHtcbiAgICBJY29uU2l6ZTogJ2ljb25TaXplJ1xufTtcblxuY29uc3QgY2hyb21lU3RvcmFnZSA9IGNocm9tZS5zdG9yYWdlLmxvY2FsO1xuXG5jb25zdCBDVVJSRU5UX1ZFUlNJT04gPSByZXF1aXJlKCcuLi8uLi9tYW5pZmVzdC5qc29uJykudmVyc2lvbjtcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRTID0ge1xuICAgIFtTRVRUSU5HUy5TaG93QXBwTmFtZXNdOiB0cnVlLFxuICAgIFtTRVRUSU5HUy5TZWFyY2hCYXJdOiB0cnVlLFxuICAgIFtTRVRUSU5HUy5MYXVuY2hlckljb25Db2xvcl06ICcjMDAwMDAwJyxcbiAgICBbU0VUVElOR1MuTGF1bmNoZXJXaWR0aF06IDM1MCxcbiAgICBbU0VUVElOR1MuQXBwc1BlclJvd106IDMsXG4gICAgW1NFVFRJTkdTLkFwcEljb25QYWRkaW5nXTogNSxcbiAgICBbU0VUVElOR1MuVmVyc2lvbl06IENVUlJFTlRfVkVSU0lPTlxufTtcblxuZXhwb3J0IGNsYXNzIFNldHRpbmdzU2VydmljZSB7XG5cbiAgICBnZXQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT5cbiAgICAgICAgICAgICAgICBjaHJvbWVTdG9yYWdlLmdldChTRVRUSU5HU19LRVksXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0+IHJlc29sdmUocmVzcG9uc2VbU0VUVElOR1NfS0VZXSkpKVxuICAgICAgICAgICAgLnRoZW4oc2V0dGluZ3MgPT4gc2V0dGluZ3MgfHwgREVGQVVMVFMpXG4gICAgICAgICAgICAudGhlbihzZXR0aW5ncyA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgcHJvcCBpbiBERUZBVUxUUykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHNldHRpbmdzW3Byb3BdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NbcHJvcF0gPSBERUZBVUxUU1twcm9wXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBzZXR0aW5ncztcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIHNldChzZXR0aW5ncykge1xuICAgICAgICBzZXR0aW5nc1tTRVRUSU5HUy5WZXJzaW9uXSA9IENVUlJFTlRfVkVSU0lPTjtcbiAgICAgICAgbGV0IHN0b3JhZ2VPYmplY3QgPSB7XG4gICAgICAgICAgICBbU0VUVElOR1NfS0VZXTogc2V0dGluZ3NcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBjaHJvbWVTdG9yYWdlLnNldChzdG9yYWdlT2JqZWN0LCAoKSA9PiByZXNvbHZlKHRydWUpKSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgU2V0dGluZ3NTZXJ2aWNlIH0gZnJvbSAnLi4vY29tbW9uL3NldHRpbmdzJztcbmltcG9ydCB7IEFwcHNTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlcyc7XG5pbXBvcnQgQXBwc0xhdW5jaGVyIGZyb20gJy4vbGF1bmNoZXInO1xuXG5sZXQgbGF1bmNoZXIgPSBuZXcgQXBwc0xhdW5jaGVyKG5ldyBBcHBzU2VydmljZSgpLCBuZXcgU2V0dGluZ3NTZXJ2aWNlKCkpO1xubGF1bmNoZXIuaW5pdGlhbGl6ZSgpXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVyciwgZXJyLnN0YWNrKTtcbiAgfSk7XG4iLCJpbXBvcnQgeyBBUFBTX0VWRU5ULCBBcHBzQ29sbGVjdGlvbiwgR3JpZCB9IGZyb20gJy4vbW9kZWwnO1xuaW1wb3J0IHsgU0VUVElOR1MgfSBmcm9tICcuLi9jb21tb24vc2V0dGluZ3MnO1xuaW1wb3J0IFNvcnRhYmxlIGZyb20gJ3NvcnRhYmxlanMnO1xuaW1wb3J0IHtcbiAgICBBcHBFbGVtZW50QnVpbGRlcixcbiAgICBTZWFyY2hFbGVtZW50QnVpbGRlcixcbiAgICBhcHBseUV2ZW50TGlzdGVuZXJzXG59IGZyb20gJy4vdWknO1xuaW1wb3J0IHsgQ0xJRU5UX1JFTkVHX0xJTUlUIH0gZnJvbSAndGxzJztcbmNvbnN0IEFQUFNfTElTVF9FTEVNRU5UID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFwcHMtbGlzdC5maWx0ZXInKTtcbmNvbnN0IFNFQVJDSEVEX0FQUF9MSVNUID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFwcHMtbGlzdC5zZWFyY2gtYXBwcycpO1xuY29uc3QgRE9XTkxPQURfRklFTEQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZG93bmxvYWRlcicpO1xuY29uc3QgQ0xPU0VfU0VBUkNIID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlYXJjaC1jbG9zZScpO1xuY29uc3QgRklORF9BUFBTID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlYXJjaC1pbWcnKTtcblxuY29uc3QgY2hyb21lTWFuYWdlbWVudCA9IGNocm9tZS5tYW5hZ2VtZW50O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBcHBzTGF1bmNoZXIge1xuXG4gICAgY29uc3RydWN0b3IgKGFwcHNTZXJ2aWNlLCBzZXR0aW5nc1NlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5hcHBzU2VydmljZSA9IGFwcHNTZXJ2aWNlO1xuICAgICAgICB0aGlzLnNldHRpbmdzU2VydmljZSA9IHNldHRpbmdzU2VydmljZTtcblxuICAgICAgICB0aGlzLmFwcHMgPSBudWxsO1xuICAgICAgICB0aGlzLmFwcHNHcmlkID0gbnVsbDtcbiAgICAgICAgdGhpcy5hcHBFbGVtZW50c0NhY2hlID0ge307XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBudWxsO1xuICAgICAgICB0aGlzLmFjdGl2ZUFwcElkID0gMDtcbiAgICAgICAgdGhpcy5zb3J0YWJsZUdyaWQgPSBudWxsO1xuXG4gICAgICAgIHRoaXMuYXBwc0xpc3RFbGVtZW50ID0gQVBQU19MSVNUX0VMRU1FTlQ7XG4gICAgICAgIHRoaXMuc2VhcmNoZWRBcHBMaXN0ID0gU0VBUkNIRURfQVBQX0xJU1Q7XG4gICAgICAgIHRoaXMuZG93bmxvYWRGaWVsZCA9IERPV05MT0FEX0ZJRUxEO1xuICAgICAgICB0aGlzLmNsb3NlU2VhcmNoID0gQ0xPU0VfU0VBUkNIO1xuICAgICAgICB0aGlzLmZpbmRBcHBzID0gRklORF9BUFBTO1xuICAgICAgICB0aGlzLmNvbnRhaW5lckhlaWdodCA9IDA7XG4gICAgfVxuXG4gICAgaW5pdGlhbGl6ZSAoKSB7XG4gICAgICAgIC8vIHRoaXMuc2V0dGluZ3NTZXJ2aWNlLmdldCgpIC0gZ2V0IHNldHQuIGZyb20gc3RvcmFnZVxuICAgICAgICAvLyB0aGlzLmFwcHNTZXJ2aWNlLmxvYWQoKSAtIHJldHVybnMgb3JkZXJlZCBhcHAgbGlzdFxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoWyB0aGlzLnNldHRpbmdzU2VydmljZS5nZXQoKSwgdGhpcy5hcHBzU2VydmljZS5sb2FkKCkgXSlcbiAgICAgICAgLnRoZW4oKFsgc2V0dGluZ3MsIGFwcHMgXSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuXG4gICAgICAgICAgICBhcHBseVN0eWxlU2V0dGluZ3Moc2V0dGluZ3MpO1xuXG4gICAgICAgICAgICB0aGlzLmFwcHMgPSBuZXcgQXBwc0NvbGxlY3Rpb24oYXBwcyk7XG4gICAgICAgICAgICB0aGlzLmFwcHNHcmlkID0gbmV3IEdyaWQoYXBwcy5sZW5ndGgsIHNldHRpbmdzW1NFVFRJTkdTLkFwcHNQZXJSb3ddKTtcblxuICAgICAgICAgICAgdGhpcy5kcmF3KGFwcHMpO1xuICAgICAgICAgICAgdGhpcy5tYWtlR3JpZFNvcnRhYmxlKCk7XG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyQXBwRXZlbnRIYW5kbGVycygpO1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplU2VhcmNoQmFyKCk7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVXZWJzdG9yZVNlYXJjaCgpIDtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRm9jdXMoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZHJhdyAoYXBwcykge1xuICAgICAgICB0aGlzLmFwcHNMaXN0RWxlbWVudC5pbm5lckhUTUwgPSAnJztcblxuICAgICAgICAvLyBUT0RPIGNhY2hlIGVsZW1lbnRzXG4gICAgICAgIGFwcHMuZm9yRWFjaChhcHAgPT4ge1xuICAgICAgICAgICAgaWYgKGFwcC5pZCBpbiB0aGlzLmFwcEVsZW1lbnRzQ2FjaGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcHNMaXN0RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmFwcEVsZW1lbnRzQ2FjaGVbYXBwLmlkXSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgYXBwc0xpc3RJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgICAgIGxldCBhcHBFbGVtZW50ID0gQXBwRWxlbWVudEJ1aWxkZXIuY3JlYXRlKGFwcCkuYnVpbGQoKTtcblxuICAgICAgICAgICAgYXBwbHlFdmVudExpc3RlbmVycyhhcHBFbGVtZW50LCB0aGlzKTtcblxuICAgICAgICAgICAgYXBwc0xpc3RJdGVtLmFwcGVuZENoaWxkKGFwcEVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5hcHBzTGlzdEVsZW1lbnQuYXBwZW5kQ2hpbGQoYXBwc0xpc3RJdGVtKTtcblxuICAgICAgICAgICAgdGhpcy5hcHBFbGVtZW50c0NhY2hlW2FwcC5pZF0gPSBhcHBzTGlzdEl0ZW07XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGRyYXdTZXJjaFJlc3VsdHMoc2VhcmNoZWRBcHBzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMpO1xuICAgICAgICB0aGlzLmFwcHNMaXN0RWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB0aGlzLmNsZWFyU2VhcmNoUmVzdWx0cygpO1xuICAgICAgICBjb25zb2xlLmxvZyhzZWFyY2hlZEFwcHMsIHRoaXMuc2VhcmNoZWRBcHBMaXN0KVxuICAgICAgICBzZWFyY2hlZEFwcHMuZm9yRWFjaChhcHAgPT4ge1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnLS0tLS0nLCB0aGlzLmFwcHMuYXBwcylcbiAgICAgICAgICAgIGxldCB0aGVTYW1lQXBwID0gZmFsc2U7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYXBwcy5hcHBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFwcC5uYW1lID09PSB0aGlzLmFwcHMuYXBwc1tpXS5uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0aGUgc2FtZSBhcHAnKVxuICAgICAgICAgICAgICAgICAgICB0aGVTYW1lQXBwID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoZVNhbWVBcHApIHtcbiAgICAgICAgICAgICAgICBsZXQgc2VhcmNoZWRMaXN0SXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgICAgICAgICAgbGV0IGFwcEVsZW1lbnQgPSBTZWFyY2hFbGVtZW50QnVpbGRlci5jcmVhdGUoYXBwKS5idWlsZCgpO1xuICAgIFxuICAgICAgICAgICAgICAgIHNlYXJjaGVkTGlzdEl0ZW0uYXBwZW5kQ2hpbGQoYXBwRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hlZEFwcExpc3QuYXBwZW5kQ2hpbGQoc2VhcmNoZWRMaXN0SXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgIFxuXG4gICAgICAgIH0pXG4gICAgICAgXG5cbiAgICAgICAgLy8gZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgICAgIC8vICAgICB0aGlzLnNlYXJjaGVkQXBwTGlzdC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVNlYXJjaGVkQXBwKGkpKTtcbiAgICAgICAgLy8gfVxuICAgIH1cbiAgICBjbGVhclNlYXJjaFJlc3VsdHMoKSB7XG4gICAgICAgIHRoaXMuc2VhcmNoZWRBcHBMaXN0LmlubmVySFRNTCA9ICcnO1xuICAgIH1cbiAgICBjcmVhdGVTZWFyY2hlZEFwcChpKSB7XG4gICAgICAgIGxldCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgIGxpLmNsYXNzTGlzdC5hZGQoJ3NlYXJjaGVkLWFwcC1pdGVtJyk7XG4gICAgICAgIGxpLnRleHRDb250ZW50ID0gJ3NlYXJjaGVkLWFwcC1pdGVtICcgKyBpO1xuICAgICAgICByZXR1cm4gbGk7XG4gICAgfVxuICAgIHJlZ2lzdGVyQXBwRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgc2F2ZU9yZGVyT25BcHBzRXZlbnRzKHRoaXMuYXBwc1NlcnZpY2UsIHRoaXMuYXBwcyk7XG4gICAgICAgIHVwZGF0ZUdyaWRTaXplT25BcHBzRXZlbnRzKHRoaXMuYXBwc0dyaWQsIHRoaXMuYXBwcyk7XG5cbiAgICAgICAgdGhpcy5hcHBzLm9uKEFQUFNfRVZFTlQuRklMVEVSRUQsICgpID0+IHRoaXMuZHJhdyh0aGlzLmFwcHMuZGlzcGxheSgpKSk7XG4gICAgfVxuXG4gICAgbGF1bmNoICgpIHtcbiAgICAgICAgY2hyb21lTWFuYWdlbWVudC5sYXVuY2hBcHAodGhpcy5hY3RpdmVBcHBJZCk7XG4gICAgICAgIHdpbmRvdy5jbG9zZSgpO1xuICAgIH1cblxuICAgIHVuaW5zdGFsbCAoKSB7XG4gICAgICAgIGNocm9tZU1hbmFnZW1lbnQudW5pbnN0YWxsKHRoaXMuYWN0aXZlQXBwSWQsIHsgc2hvd0NvbmZpcm1EaWFsb2c6IHRydWUgfSk7XG4gICAgICAgIHdpbmRvdy5jbG9zZSgpO1xuICAgIH1cblxuICAgIGZpbHRlciAodGVybSkge1xuICAgICAgICB0aGlzLnNvcnRhYmxlR3JpZC5vcHRpb24oJ2Rpc2FibGVkJywgISF0ZXJtKTtcbiAgICAgICAgdGhpcy5hcHBzLmZpbHRlcih0ZXJtKTtcbiAgICB9XG5cbiAgICB1cGRhdGVBY3RpdmVBcHAoYXBwSWQpIHtcbiAgICAgICAgdGhpcy5hY3RpdmVBcHBJZCA9IGFwcElkO1xuICAgICAgICB0aGlzLmFwcHMuZ2V0SW5kZXhCeUlkKGFwcElkKTtcbiAgICB9XG5cbiAgICBtYWtlR3JpZFNvcnRhYmxlICgpIHtcbiAgICAgICAgbGV0IGN1cnJlbnRFbGVtZW50O1xuXG4gICAgICAgIGxldCBvbkVuZCA9IChldm50KSA9PiB7XG4gICAgICAgICAgICBpZiAoIWN1cnJlbnRFbGVtZW50IHx8IGV2bnQub2xkSW5kZXggPT09IGV2bnQubmV3SW5kZXgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBhcHBJZCA9IGdldEFwcElkRnJvbUFwcExpc3RJdGVtKGN1cnJlbnRFbGVtZW50KTtcbiAgICAgICAgICAgIGxldCBhcHAgPSB0aGlzLmFwcHMuZ2V0QnlJZChhcHBJZCk7XG4gICAgICAgICAgICB0aGlzLmFwcHMucmVvcmRlcihhcHAsIGV2bnQubmV3SW5kZXgpO1xuICAgICAgICAgICAgY3VycmVudEVsZW1lbnQgPSBudWxsO1xuICAgICAgICB9O1xuXG4gICAgICAgIGxldCBvblVwZGF0ZSA9IChldm50KSA9PiB7XG4gICAgICAgICAgICBjdXJyZW50RWxlbWVudCA9IGV2bnQuaXRlbTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnNvcnRhYmxlR3JpZCA9IFNvcnRhYmxlLmNyZWF0ZSh0aGlzLmFwcHNMaXN0RWxlbWVudCwge1xuICAgICAgICAgICAgZHJhZ2dhYmxlOiAnbGknLFxuICAgICAgICAgICAgYW5pbWF0aW9uOiAxNTAsXG4gICAgICAgICAgICBvbkVuZCxcbiAgICAgICAgICAgIG9uVXBkYXRlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGhhbmRsZUZvY3VzKCkge1xuICAgICAgICBsZXQgaGFzU2VhcmNoID0gdGhpcy5zZXR0aW5nc1tTRVRUSU5HUy5TZWFyY2hCYXJdO1xuICAgICAgICBsZXQgc2VsVG9Gb2N1cyA9IGhhc1NlYXJjaCA/XG4gICAgICAgICAgICAnLnNlYXJjaF9pbnB1dCcgOlxuICAgICAgICAgICAgJy5hcHBzLWxpc3QgLmFwcDpmaXJzdC1vZi10eXBlJztcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxUb0ZvY3VzKS5mb2N1cygpO1xuICAgIH1cblxuICAgIGluaXRpYWxpemVTZWFyY2hCYXIoKSB7XG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5nc1tTRVRUSU5HUy5TZWFyY2hCYXJdKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgc2VhcmNoSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dC5zZWFyY2hfaW5wdXQnKTtcbiAgICAgICAgaWYgKCFzZWFyY2hJbnB1dCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VhcmNoSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBlID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfQvdCwINGE0LjQu9GM0YLRgNC1JylcbiAgICAgICAgICAgIGxldCB0ZXJtID0gc2VhcmNoSW5wdXQudmFsdWU7XG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAxMyAmJiB0aGlzLmFwcHMuZmlsdGVyZWQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVBY3RpdmVBcHAodGhpcy5hcHBzLmZpbHRlcmVkWzBdLmlkKTtcbiAgICAgICAgICAgICAgICB0aGlzLmxhdW5jaCgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gNDApIHtcbiAgICAgICAgICAgICAgICAvLyB0aGlzLnVwZGF0ZUFjdGl2ZUFwcCh0aGlzLmFwcHMuZmlsdGVyZWRbMF0uaWQpO1xuICAgICAgICAgICAgICAgIGxldCBhcHBFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcHBzLWxpc3QgLmFwcCcpO1xuICAgICAgICAgICAgICAgIGFwcEVsLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFwcEVsLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgICAvLyBmb3JjZSByZWRyYXcgZWxlbWVudFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmZpbHRlcih0ZXJtKTtcbiAgICAgICAgfSk7XG5cblxuXG4gICAgfVxuICAgIGluaXRpYWxpemVXZWJzdG9yZVNlYXJjaCgpIHtcbiAgICAgICAgbGV0IGRvd25sb2FkSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZG93bmxvYWRlcicpO1xuICAgICAgICBpZiAoIWRvd25sb2FkSW5wdXQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBkb3dubG9hZElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAxMykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbnNpZGUnKVxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVNlYXJjaFJlcXVlc3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZS50YXJnZXQudmFsdWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZVNlYXJjaC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVMaXN0KCdzZWFyY2hlZEFwcExpc3QnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyU2VhcmNoUmVzdWx0cygpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xpc3QoJ2FwcHNMaXN0RWxlbWVudCcpO1xuICAgICAgICAgICAgICAgIC8vdGhpcy5hcHBzTGlzdEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuICAgICAgICAgICAgICAgIHRoaXMuZG93bmxvYWRGaWVsZC52YWx1ZSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jbG9zZVNlYXJjaC5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGRlbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VTZWFyY2guY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZG93bmxvYWRGaWVsZC52YWx1ZSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmNsb3NlU2VhcmNoLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlU2VhcmNoLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICAgICAgdGhpcy5oaWRlTGlzdCgnc2VhcmNoZWRBcHBMaXN0Jyk7XG4gICAgICAgICAgICAvL3RoaXMuc2VhcmNoZWRBcHBMaXN0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICAgICAgdGhpcy5kb3dubG9hZEZpZWxkLnZhbHVlID0gJyc7XG4gICAgICAgICAgICB0aGlzLmNsZWFyU2VhcmNoUmVzdWx0cygpO1xuICAgICAgICAgICAgdGhpcy5zaG93TGlzdCgnYXBwc0xpc3RFbGVtZW50Jyk7XG4gICAgICAgICAgICAvL3RoaXMuYXBwc0xpc3RFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5maW5kQXBwcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4gdGhpcy5oYW5kbGVTZWFyY2hSZXF1ZXN0KCkpO1xuICAgIH1cbiAgICBoYW5kbGVTZWFyY2hSZXF1ZXN0KCkge1xuICAgICAgICAvL3RoaXMuY2xlYXJTZWFyY2hSZXN1bHRzKCk7XG4gICAgICAgIGlmICghdGhpcy5jb250YWluZXJIZWlnaHQpIHtcbiAgICAgICAgICAgIC8vIHNldCBoZWlnaHQgdG8gYm9keVxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhaW5lcicpO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXJIZWlnaHQgPSBjb250YWluZXIuY2xpZW50SGVpZ2h0O1xuICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLmhlaWdodCA9IHRoaXMuY29udGFpbmVySGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFwcHNMaXN0RWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgIHRoaXMuc2VhcmNoZWRBcHBMaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgICB0aGlzLmluc2VydFByZWxvYWRlcigpO1xuXG4gICAgICAgIGNvbnN0IHVybCA9IGBodHRwOi8vbGF1bmNoLWNvbnRyb2wubmV0L2FwaS8/YWN0aW9uPXNlYXJjaCZxPSR7dGhpcy5kb3dubG9hZEZpZWxkLnZhbHVlfWA7XG4gICAgICAgIGNvbnNvbGUubG9nKHVybClcbiAgICAgICAgZmV0Y2godXJsKVxuICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxuICAgICAgICAgICAgLy8udGhlbihyZXNwb25zZSA9PiBKU09OLnBhcnNlKHJlc3BvbnNlKSlcbiAgICAgICAgICAgIC50aGVuKG9iakFycmF5ID0+IHtcbiAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoZWRBcHBMaXN0LmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgdGhpcy5kcmF3U2VyY2hSZXN1bHRzKG9iakFycmF5KSBcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goIChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgfSlcbiAgICB9XG4gICAgaGlkZUxpc3QobGlzdCkge1xuICAgICAgICB0aGlzW2xpc3RdLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgIH1cbiAgICBzaG93TGlzdChsaXN0KSB7XG4gICAgICAgIHRoaXNbbGlzdF0uc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICB9XG4gICAgaW5zZXJ0UHJlbG9hZGVyKCkge1xuICAgICAgICAvL3RoaXMucHJlbG9hZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXG4gICAgICAgIGNvbnN0IGltZyA9IGBcbiAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJzZWFyY2gtcHJlbG9hZGVyXCIgc3JjPVwiLi4vaW1hZ2VzL2xvYWRpbmdfMS5naWZcIiBhbHQ9XCJwcmVsb2FkZXJcIiAvPlxuICAgICAgICBgXG4gICAgICAgIHRoaXMuc2VhcmNoZWRBcHBMaXN0LmlubmVySFRNTCA9IGltZztcbiAgICB9XG5cbn1cblxuZnVuY3Rpb24gZ2V0QXBwSWRGcm9tQXBwTGlzdEl0ZW0gKGxpKSB7XG4gICAgcmV0dXJuIGxpLmNoaWxkTm9kZXNbMF0uZGF0YXNldC5hcHBJZDtcbn1cblxuZnVuY3Rpb24gYXBwbHlTdHlsZVNldHRpbmdzIChzZXR0aW5ncykge1xuICAgIGxldCBjbGFzc2VzID0gW107XG5cbiAgICBpZiAoc2V0dGluZ3NbU0VUVElOR1MuU2hvd0FwcE5hbWVzXSkge1xuICAgICAgICBjbGFzc2VzLnB1c2goJ3Nob3dBcHBOYW1lcycpO1xuICAgIH1cblxuICAgIGlmIChzZXR0aW5nc1tTRVRUSU5HUy5TZWFyY2hCYXJdKSB7XG4gICAgICAgIGNsYXNzZXMucHVzaCgnaGFzU2VhcmNoJyk7XG4gICAgfVxuXG4gICAgd2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc05hbWUgKz0gJyAnICsgY2xhc3Nlcy5qb2luKCcgJyk7XG5cbiAgICBsZXQgbGF1bmNoZXJXaWR0aCA9IHNldHRpbmdzW1NFVFRJTkdTLkxhdW5jaGVyV2lkdGhdO1xuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1sYXVuY2hlcldpZHRoJywgYCR7bGF1bmNoZXJXaWR0aH1weGApO1xuXG4gICAgbGV0IGFwcHNQZXJSb3cgPSBzZXR0aW5nc1tTRVRUSU5HUy5BcHBzUGVyUm93XTtcbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoJy0tYXBwc1BlclJvdycsIGFwcHNQZXJSb3cpO1xuXG4gICAgbGV0IGFwcEljb25QYWRkaW5nID0gc2V0dGluZ3NbU0VUVElOR1MuQXBwSWNvblBhZGRpbmddO1xuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1hcHBJY29uUGFkZGluZycsIGFwcEljb25QYWRkaW5nKTtcbn1cblxuZnVuY3Rpb24gc2F2ZU9yZGVyT25BcHBzRXZlbnRzIChhcHBzU2VydmljZSwgYXBwcykge1xuICAgIGxldCBzYXZlT3JkZXIgPSAoKSA9PiBhcHBzU2VydmljZS5zYXZlT3JkZXIoYXBwcy5jb2xsZWN0aW9uKTtcblxuICAgIGFwcHMub24oQVBQU19FVkVOVC5SRU9SREVSRUQsIHNhdmVPcmRlcik7XG4gICAgYXBwcy5vbihBUFBTX0VWRU5ULkFEREVELCBzYXZlT3JkZXIpO1xuICAgIGFwcHMub24oQVBQU19FVkVOVC5SRU1PVkVELCBzYXZlT3JkZXIpO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVHcmlkU2l6ZU9uQXBwc0V2ZW50cyAoZ3JpZCwgYXBwcykge1xuICAgIGxldCB1cGRhdGVHcmlkU2l6ZSA9ICgpID0+IHtcbiAgICAgICAgbGV0IGl0ZW1zQ291bnQgPSBhcHBzLmRpc3BsYXkoKS5sZW5ndGg7XG4gICAgICAgIGdyaWQuaXRlbXNDb3VudCA9IGl0ZW1zQ291bnQ7XG4gICAgfTtcblxuICAgIGFwcHMub24oQVBQU19FVkVOVC5BRERFRCwgdXBkYXRlR3JpZFNpemUpO1xuICAgIGFwcHMub24oQVBQU19FVkVOVC5SRU1PVkVELCB1cGRhdGVHcmlkU2l6ZSk7XG4gICAgYXBwcy5vbihBUFBTX0VWRU5ULkZJTFRFUkVELCB1cGRhdGVHcmlkU2l6ZSk7XG59XG4iLCJpbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICdldmVudHMnO1xuXG5leHBvcnQgY29uc3QgQVBQU19FVkVOVCA9IHtcbiAgICBBRERFRDogJ2FkZCcsXG4gICAgUkVNT1ZFRDogJ3JlbW92ZWQnLFxuICAgIFJFT1JERVJFRDogJ3Jlb3JkZXJlZCcsXG4gICAgRklMVEVSRUQ6ICdmaWx0ZXJlZCdcbn07XG5cbmV4cG9ydCBjbGFzcyBBcHBzQ29sbGVjdGlvbiBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG5cbiAgICBjb25zdHJ1Y3RvciAoYXBwc0xpc3QpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLmFwcHMgPSBhcHBzTGlzdC5zbGljZSgpO1xuICAgICAgICB0aGlzLmZpbHRlcmVkID0gdGhpcy5hcHBzO1xuXG4gICAgICAgIHRoaXMubWFwQnlJZCA9IHRoaXMuYXBwcy5yZWR1Y2UoKHJlc3VsdCwgYXBwKSA9PiB7XG4gICAgICAgICAgICByZXN1bHRbYXBwLmlkXSA9IGFwcDtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0sXG4gICAgICAgIHt9KTtcbiAgICB9XG5cbiAgICBnZXQgY29sbGVjdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwcHMuc2xpY2UoKTtcbiAgICB9XG5cbiAgICBkaXNwbGF5ICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyZWQ7XG4gICAgfVxuXG4gICAgYWRkIChhcHApIHtcbiAgICAgICAgdGhpcy5hcHBzLnB1c2goYXBwKTtcbiAgICAgICAgdGhpcy5tYXBCeUlkW2FwcC5pZF0gPSBhcHA7XG4gICAgICAgIHRoaXMuZW1pdChBUFBTX0VWRU5ULkFEREVELCBhcHApO1xuICAgIH1cblxuICAgIHJlbW92ZSAoYXBwKSB7XG4gICAgICAgIGxldCBpZHggPSB0aGlzLmFwcHMuaW5kZXhPZihhcHApO1xuICAgICAgICB0aGlzLmFwcHMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgIGRlbGV0ZSB0aGlzLm1hcEJ5SWRbYXBwLmlkXTtcbiAgICAgICAgdGhpcy5lbWl0KEFQUFNfRVZFTlQuUkVNT1ZFRCwgYXBwKTtcbiAgICB9XG5cbiAgICBmaWx0ZXIgKHRlcm0pIHtcbiAgICAgICAgaWYgKCF0ZXJtKSB7XG4gICAgICAgICAgICB0aGlzLmZpbHRlcmVkID0gdGhpcy5jb2xsZWN0aW9uO1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJUZXJtID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuZW1pdChBUFBTX0VWRU5ULkZJTFRFUkVEKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZmlsdGVyVGVybSA9IHRlcm0gPSB0ZXJtLnRvVXBwZXJDYXNlKCk7XG5cbiAgICAgICAgbGV0IGZpbHRlcmVkID0gdGhpcy5hcHBzXG4gICAgICAgICAgICAuZmlsdGVyKHggPT4geC5uYW1lLnRvVXBwZXJDYXNlKCkuaW5kZXhPZih0aGlzLmZpbHRlclRlcm0pICE9PSAtMSk7XG5cbiAgICAgICAgbGV0IG9yZGVyTWFwID0gZmlsdGVyZWQubWFwKCh4LCBpKSA9PiAoeyBpbmRleDogaSwgdmFsdWU6IHgubmFtZS50b1VwcGVyQ2FzZSgpIH0pKTtcbiAgICAgICAgb3JkZXJNYXAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgbGV0IGFJZHggPSBhLnZhbHVlLmluZGV4T2YodGVybSksXG4gICAgICAgICAgICAgICAgYklkeCA9IGIudmFsdWUuaW5kZXhPZih0ZXJtKTtcblxuICAgICAgICAgICAgaWYgKGFJZHggPT09IGJJZHgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYS52YWx1ZSA+IGIudmFsdWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBhSWR4ID4gYklkeDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5maWx0ZXJlZCA9IG9yZGVyTWFwLm1hcChlbCA9PiBmaWx0ZXJlZFtlbC5pbmRleF0pO1xuXG4gICAgICAgIHRoaXMuZW1pdChBUFBTX0VWRU5ULkZJTFRFUkVEKTtcbiAgICB9XG5cbiAgICByZW9yZGVyIChhcHAsIHRvSW5kZXgpIHtcbiAgICAgICAgaWYgKHRoaXMuZmlsdGVyVGVybSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgcmVvcmRlciBmaWx0ZXJlZCBhcHBzIGNvbGxlY3Rpb24uJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWlzVmFsaWRJbmRleCh0b0luZGV4LCB0aGlzLmFwcHMubGVuZ3RoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGFwcCByZW9yZGVyIHRvSW5kZXg6ICR7IHRvSW5kZXggfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGFyciA9IHRoaXMuYXBwcztcbiAgICAgICAgbGV0IGZyb21JbmRleCA9IGFyci5pbmRleE9mKGFwcCk7XG4gICAgICAgIGlmIChmcm9tSW5kZXggPT09IHRvSW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGFyci5zcGxpY2UoZnJvbUluZGV4LCAxKTtcbiAgICAgICAgYXJyLnNwbGljZSh0b0luZGV4LCAwLCBhcHApO1xuXG4gICAgICAgIHRoaXMuZW1pdChBUFBTX0VWRU5ULlJFT1JERVJFRCwgYXBwLCBmcm9tSW5kZXgsIHRvSW5kZXgpO1xuICAgIH1cblxuICAgIGdldEJ5SW5kZXgoaWR4KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwcHNbaWR4XTtcbiAgICB9XG5cbiAgICBnZXRJbmRleEJ5SWQgKGFwcElkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbHRlcmVkLm1hcChhcHAgPT4gYXBwLmlkKS5pbmRleE9mKGFwcElkKTtcbiAgICB9XG5cbiAgICBnZXRCeUlkIChhcHBJZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXBCeUlkW2FwcElkXTtcbiAgICB9XG5cbiAgICBnZXQgbGVuZ3RoICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwcy5sZW5ndGg7XG4gICAgfVxuXG59XG5cbmZ1bmN0aW9uIGlzVmFsaWRJbmRleChpZHgsIGNvbGxlY3Rpb25MZW5ndGgpIHtcbiAgICByZXR1cm4gaWR4ICE9PSB2b2lkIDAgJiZcbiAgICBpZHggIT09IG51bGwgJiZcbiAgICBpZHggPj0gMCAmJlxuICAgIGlkeCA8IGNvbGxlY3Rpb25MZW5ndGg7XG59XG4iLCJjb25zdCBNT1ZFID0ge1xuICAgIExFRlQ6ICdsZWZ0JyxcbiAgICBSSUdIVDogJ3JpZ2h0JyxcbiAgICBVUDogJ3VwJyxcbiAgICBET1dOOiAnZG93bidcbn07XG5cbmV4cG9ydCBjbGFzcyBHcmlkIHtcblxuICAgIGNvbnN0cnVjdG9yIChpdGVtc0NvdW50LCBncmlkV2lkdGgpIHtcbiAgICAgICAgdGhpcy5pdGVtc0NvdW50ID0gaXRlbXNDb3VudDtcbiAgICAgICAgdGhpcy5ncmlkV2lkdGggPSBncmlkV2lkdGg7XG4gICAgfVxuXG4gICAgcm93c0NvdW50ICgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguY2VpbCh0aGlzLml0ZW1zQ291bnQgLyB0aGlzLmdyaWRXaWR0aCk7XG4gICAgfVxuXG4gICAgY2VsbHNDb3VudCAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvd3NDb3VudCgpICogdGhpcy5ncmlkV2lkdGg7XG4gICAgfVxuXG4gICAgcG9zaXRpb25FeGlzdHMgKHBvc2l0aW9uKSB7XG4gICAgICAgIHJldHVybiBwb3NpdGlvbiAvIHRoaXMuZ3JpZFdpZHRoIDwgdGhpcy5pdGVtc0NvdW50IC8gdGhpcy5ncmlkV2lkdGg7XG4gICAgfVxuXG4gICAgdHJhbnNsYXRlUG9zaXRpb24gKHBvc2l0aW9uLCB2ZWN0b3IpIHtcbiAgICAgICAgbGV0IGNlbGxzQ291bnQgPSB0aGlzLmNlbGxzQ291bnQoKTtcbiAgICAgICAgcmV0dXJuIChjZWxsc0NvdW50ICsgcG9zaXRpb24gKyB2ZWN0b3IpICUgY2VsbHNDb3VudDtcbiAgICB9XG5cbiAgICBnZXRMaXN0VmVjdG9yIChtb3ZlLCBncmlkV2lkdGgpIHtcblxuICAgICAgICBpZiAobW92ZSA9PT0gTU9WRS5MRUZUKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobW92ZSA9PT0gTU9WRS5SSUdIVCkge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobW92ZSA9PT0gTU9WRS5VUCkge1xuICAgICAgICAgICAgcmV0dXJuIC1ncmlkV2lkdGg7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobW92ZSA9PT0gTU9WRS5ET1dOKSB7XG4gICAgICAgICAgICByZXR1cm4gZ3JpZFdpZHRoO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIDA7XG5cbiAgICB9XG5cbiAgICBtb3ZlT25HcmlkIChwb3NpdGlvbiwgbW92ZSkge1xuICAgICAgICBsZXQgdmVjdG9yID0gdGhpcy5nZXRMaXN0VmVjdG9yKG1vdmUsIHRoaXMuZ3JpZFdpZHRoKTtcbiAgICAgICAgbGV0IG5ld1BvcyA9IHRoaXMudHJhbnNsYXRlUG9zaXRpb24ocG9zaXRpb24sIHZlY3Rvcik7XG5cbiAgICAgICAgd2hpbGUgKCF0aGlzLnBvc2l0aW9uRXhpc3RzKG5ld1BvcykpIHtcbiAgICAgICAgICAgIHZlY3RvciArPSB0aGlzLmdldExpc3RWZWN0b3IobW92ZSwgdGhpcy5ncmlkV2lkdGgpO1xuICAgICAgICAgICAgbmV3UG9zID0gdGhpcy50cmFuc2xhdGVQb3NpdGlvbihwb3NpdGlvbiwgdmVjdG9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXdQb3M7XG4gICAgfVxufVxuIiwiZXhwb3J0IHsgQXBwc0NvbGxlY3Rpb24sIEFQUFNfRVZFTlQgfSBmcm9tICcuL2FwcHMnO1xuZXhwb3J0IHsgR3JpZCB9IGZyb20gJy4vZ3JpZCc7XG4iLCJjb25zdCBFWFRFTlNJT04gPSAnZXh0ZW5zaW9uJztcbmNvbnN0IFRIRU1FID0gJ3RoZW1lJztcblxuY29uc3QgY2hyb21lTG9jYWxTdG9yYWdlID0gY2hyb21lLnN0b3JhZ2UubG9jYWw7XG5cbmNvbnN0IGdldElkID0geCA9PiB4LmlkO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBcHBzU2VydmljZSB7XG5cbiAgICBzYXZlT3JkZXIgKGFwcHMpIHtcbiAgICAgICAgaWYgKCFhcHBzIHx8ICFhcHBzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGFwcHNPcmRlciA9IEpTT04uc3RyaW5naWZ5KGFwcHMubWFwKGdldElkKSk7XG5cbiAgICAgICAgY2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0KHtcbiAgICAgICAgICAgIG9yZGVyOiBhcHBzT3JkZXJcbiAgICAgICAgfSwgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGNocm9tZS5ydW50aW1lLmxhc3RFcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoY2hyb21lLnJ1bnRpbWUubGFzdEVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgbG9hZCAoKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbIGdldEFwcHNPcmRlcigpLCBnZXRBcHBzKCkgXSlcbiAgICAgICAgLnRoZW4oKFsgb3JkZXJSZXNwb25zZSwgYXBwcyBdKSA9PiB7XG4gICAgICAgICAgICBsZXQgb3JkZXIgPSBvcmRlclJlc3BvbnNlLm9yZGVyO1xuICAgICAgICAgICAgbGV0IG9yZGVyZWRBcHBzID0gY29tcG9zZUFwcHNMaXN0KGFwcHMsIG9yZGVyID8gSlNPTi5wYXJzZShvcmRlcikgOiBudWxsKTtcbiAgICAgICAgICAgIHJldHVybiBvcmRlcmVkQXBwcztcbiAgICAgICAgfSk7XG4gICAgfVxuXG59XG5cbmZ1bmN0aW9uIGdldEFwcHMoKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgIGNocm9tZS5tYW5hZ2VtZW50LmdldEFsbCgoZXh0ZW5zaW9ucykgPT4gcmVzb2x2ZShleHRlbnNpb25zKSk7XG4gICAgfSlcbiAgICAudGhlbigoZXh0ZW5zaW9ucykgPT4ge1xuICAgICAgICByZXR1cm4gZXh0ZW5zaW9ucy5maWx0ZXIoeCA9PiB7XG4gICAgICAgICAgICByZXR1cm4geC50eXBlICE9PSBFWFRFTlNJT04gJiZcbiAgICAgICAgICAgIHgudHlwZSAhPT0gVEhFTUUgJiZcbiAgICAgICAgICAgIHguZW5hYmxlZDtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGNvbXBvc2VBcHBzTGlzdCAoYXBwcywgb3JkZXIpIHtcbiAgICBpZiAoIW9yZGVyIHx8ICFvcmRlci5sZW5ndGgpIHtcbiAgICAgICAgYXBwcyA9IGFwcHMuc2xpY2UoKTtcbiAgICAgICAgYXBwcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICBsZXQgYW5hbWUgPSBhLm5hbWUsXG4gICAgICAgICAgICBibmFtZSA9IGIubmFtZTtcblxuICAgICAgICAgICAgaWYgKGFuYW1lID4gYm5hbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYW5hbWUgPT09IGJuYW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGFwcHM7XG4gICAgfVxuXG4gICAgbGV0IGFwcElkcyA9IGFwcHMubWFwKGdldElkKTtcbiAgICBvcmRlciA9IG9yZGVyLmNvbmNhdChkaWZmZXJlbmNlKGFwcElkcywgb3JkZXIpKTtcblxuICAgIGxldCByZXN1bHQgPSBuZXcgQXJyYXkob3JkZXIubGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9yZGVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBjdXJBcHBJZHggPSBhcHBJZHMuaW5kZXhPZihvcmRlcltpXSk7XG4gICAgICAgIGlmIChjdXJBcHBJZHggPT09IC0xKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlc3VsdFtpXSA9IGFwcHNbY3VyQXBwSWR4XTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0LmZpbHRlcih4ID0+IHgpO1xufVxuXG5mdW5jdGlvbiBnZXRBcHBzT3JkZXIgKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICBjaHJvbWVMb2NhbFN0b3JhZ2UuZ2V0KCdvcmRlcicsIChyZXNwb25zZSkgPT4gcmVzb2x2ZShyZXNwb25zZSkpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBkaWZmZXJlbmNlKGFycjEsIGFycjIpIHtcbiAgICByZXR1cm4gYXJyMS5maWx0ZXIoaSA9PiBhcnIyLmluZGV4T2YoaSkgPT09IC0xKTtcbn1cbiIsImxldCBhcHBJY29uQ2FjaGUgPSB7fTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSWNvblNlcnZpY2Uge1xuXG4gICAgc3RhdGljIGdldEljb25VcmwgKGFwcCkge1xuICAgICAgICBsZXQgY2FjaGVLZXkgPSBnZXRDYWNoZUtleShhcHApO1xuXG4gICAgICAgIGlmIChhcHBJY29uQ2FjaGUuaGFzT3duUHJvcGVydHkoY2FjaGVLZXkpKSB7XG4gICAgICAgICAgICByZXR1cm4gYXBwSWNvbkNhY2hlW2NhY2hlS2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBpY29ucyA9IGFwcC5pY29ucztcblxuICAgICAgICBsZXQgcmVzdWx0ID0gZmluZEljb24oaWNvbnMpO1xuICAgICAgICBhcHBJY29uQ2FjaGVbY2FjaGVLZXldID0gcmVzdWx0O1xuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBmaW5kSWNvbiAoaWNvbnMpIHtcbiAgICByZXR1cm4gaWNvbnMuZmlsdGVyKHggPT4geC5zaXplID09PSBNYXRoLm1heCguLi5pY29ucy5tYXAoaSA9PiBpLnNpemUpKSlcbiAgICAgICAgLm1hcCh4ID0+IHgudXJsKTtcbn1cblxuZnVuY3Rpb24gZ2V0Q2FjaGVLZXkoYXBwKSB7XG4gICAgcmV0dXJuIGFwcC5pZDtcbn1cbiIsImV4cG9ydCB7IGRlZmF1bHQgYXMgQXBwc1NlcnZpY2UgfSBmcm9tICcuL2FwcHMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBJY29uU2VydmljZSB9IGZyb20gJy4vaWNvbnMnO1xuIiwiaW1wb3J0IHsgSWNvblNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcyc7XG5cbmV4cG9ydCBjbGFzcyBBcHBFbGVtZW50QnVpbGRlciB7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHApIHtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgfVxuXG4gICAgc3RhdGljIGNyZWF0ZShhcHApIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBcHBFbGVtZW50QnVpbGRlcihhcHApO1xuICAgIH1cblxuICAgIGJ1aWxkKCkge1xuICAgICAgICBsZXQgeyBhcHAgfSA9IHRoaXM7XG4gICAgICAgIGxldCBpY29uVXJsID0gSWNvblNlcnZpY2UuZ2V0SWNvblVybChhcHApO1xuICAgICAgICBsZXQgcmVzdWx0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHJlc3VsdC5jbGFzc05hbWUgPSAnYXBwJztcbiAgICAgICAgcmVzdWx0LnNldEF0dHJpYnV0ZSgndGl0bGUnLCBhcHAubmFtZSk7XG4gICAgICAgIHJlc3VsdC5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzEnKTtcbiAgICAgICAgcmVzdWx0LmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPVwiYXBwX2NvbnRlbnRcIj4nICtcbiAgICAgICAgICAgIGA8ZGl2IGNsYXNzPVwiYXBwX2ljb25cIiBzdHlsZT1cImJhY2tncm91bmQtaW1hZ2U6IHVybCgnJHsgaWNvblVybCB9JylcIiA+PC9kaXY+YCArXG4gICAgICAgICAgICBgPGRpdiBjbGFzcz1cImFwcF9uYW1lXCIgPiR7IGFwcC5uYW1lIH08L2Rpdj5gICtcbiAgICAgICAgICAgICc8L2Rpdj4nO1xuICAgICAgICByZXN1bHQuZGF0YXNldC5hcHBJZCA9IGFwcC5pZDtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59XG4iLCJjb25zdCBFTlRFUiA9IDEzO1xuY29uc3QgREVMRVRFID0gNDY7XG5jb25zdCBBUlJPV19ET1dOID0gNDA7XG5jb25zdCBBUlJPV19MRUZUID0gMzc7XG5jb25zdCBHUklEX01PVkVTID0ge1xuICAzODogJ3VwJyxcbiAgNDA6ICdkb3duJyxcbiAgMzc6ICdsZWZ0JyxcbiAgMzk6ICdyaWdodCdcbn07XG5cbmxldCBhcHBFdmVudExpc3RlbmVycyA9IHtcbiAga2V5dXA6IFtcbiAgICAgIHVwZGF0ZUZvY3VzT25BcnJvd0tleXMsXG4gICAgICBsYXVuY2hBY3RpdmVBcHBPbkVudGVyS2V5LFxuICAgICAgZGVsZXRlQWN0aXZlQXBwT25EZWxldGVLZXlcbiAgXSxcbiAgbW91c2V1cDogW1xuICAgICAgbGF1bmNoQWN0aXZlQXBwT25DbGljayxcbiAgICAgIGRlbGV0ZUFjdGl2ZUFwcE9uUmlnaHRDbGlja1xuICBdLFxuICBjb250ZXh0bWVudTogW1xuICAgICAgY2FuY2VsRGVmYXVsdEFjdGlvbkZvckNvbnRleHRNZW51XG4gIF0sXG4gIGZvY3VzOiBbXG4gICAgICBjaGFuZ2VBY3RpdmVBcHBPbkZvY3VzXG4gIF1cbn07XG5cbmxldCBib3VuZEV2ZW50TGlzdGVuZXJzO1xuXG5jb25zdCB7IGRvY3VtZW50IH0gPSB3aW5kb3c7XG5cbmV4cG9ydCBmdW5jdGlvbiBhcHBseUV2ZW50TGlzdGVuZXJzKGFwcEVsZW1lbnQsIGxhdW5jaGVyKSB7XG5cbiAgaWYgKCFib3VuZEV2ZW50TGlzdGVuZXJzKSB7XG4gICAgYm91bmRFdmVudExpc3RlbmVycyA9IGJpbmRFdmVudExpc3RlbmVycyhsYXVuY2hlcik7XG4gIH1cblxuICBmb3IgKGxldCBldmVudE5hbWUgaW4gYm91bmRFdmVudExpc3RlbmVycykge1xuICAgIGJvdW5kRXZlbnRMaXN0ZW5lcnNbZXZlbnROYW1lXS5mb3JFYWNoKChsaXN0ZW5lcikgPT4ge1xuICAgICAgYXBwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgbGlzdGVuZXIpO1xuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGJpbmRFdmVudExpc3RlbmVycyAobGF1bmNoZXIpIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKGFwcEV2ZW50TGlzdGVuZXJzKVxuICAucmVkdWNlKChyZXN1bHQsIGV2ZW50TmFtZSkgPT4ge1xuXG4gICAgcmVzdWx0W2V2ZW50TmFtZV0gPSBhcHBFdmVudExpc3RlbmVyc1tldmVudE5hbWVdXG4gICAgLm1hcChsaXN0ZW5lciA9PiBsaXN0ZW5lci5iaW5kKGxhdW5jaGVyKSk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9LFxuICB7fSk7XG59XG5cbmZ1bmN0aW9uIGNoYW5nZUFjdGl2ZUFwcE9uRm9jdXMgKGV2KSB7XG4gIHRoaXMudXBkYXRlQWN0aXZlQXBwKGV2LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hcHBJZCk7XG59XG5cbmZ1bmN0aW9uIGRlbGV0ZUFjdGl2ZUFwcE9uUmlnaHRDbGljayAoZXYpIHtcbiAgaWYgKGV2LndoaWNoICE9PSAzKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIHRoaXMudW5pbnN0YWxsKCk7XG59XG5cbmZ1bmN0aW9uIGNhbmNlbERlZmF1bHRBY3Rpb25Gb3JDb250ZXh0TWVudSAoZXYpIHtcbiAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUZvY3VzT25BcnJvd0tleXMgKGV2KSB7XG4gIGxldCBrZXkgPSBldi5rZXlDb2RlLFxuICBlbCA9IGV2LmN1cnJlbnRUYXJnZXQ7XG5cbiAgaWYgKGtleSA+PSBBUlJPV19MRUZUICYmIGtleSA8PSBBUlJPV19ET1dOKSB7XG4gICAgbGV0IGFwcElkID0gZWwuZGF0YXNldC5hcHBJZDtcbiAgICBsZXQgY3VycmVudEluZGV4ID0gdGhpcy5hcHBzLmdldEluZGV4QnlJZChhcHBJZCk7XG4gICAgbGV0IHRhcmdldEluZGV4ID0gdGhpcy5hcHBzR3JpZC5tb3ZlT25HcmlkKGN1cnJlbnRJbmRleCwgR1JJRF9NT1ZFU1trZXldKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYXBwcy1saXN0IC5hcHAnKVt0YXJnZXRJbmRleF0uZm9jdXMoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBsYXVuY2hBY3RpdmVBcHBPbkVudGVyS2V5IChldikge1xuICBpZiAoZXYua2V5Q29kZSA9PT0gRU5URVIpIHtcbiAgICByZXR1cm4gdGhpcy5sYXVuY2goKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBkZWxldGVBY3RpdmVBcHBPbkRlbGV0ZUtleSAoZXYpIHtcbiAgaWYgKGV2LmtleUNvZGUgPT09IERFTEVURSkge1xuICAgIHRoaXMudW5pbnN0YWxsKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gbGF1bmNoQWN0aXZlQXBwT25DbGljayAoZXYpIHtcbiAgaWYgKGV2LndoaWNoICE9PSAxKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgdGhpcy5sYXVuY2goKTtcbn1cbiIsImV4cG9ydCB7IEFwcEVsZW1lbnRCdWlsZGVyIH0gZnJvbSAnLi9hcHBFbGVtZW50QnVpbGRlcic7XG5leHBvcnQgeyBTZWFyY2hFbGVtZW50QnVpbGRlciB9IGZyb20gJy4vc2VhcmNoRWxlbWVudEJ1aWxkZXInO1xuZXhwb3J0IHsgYXBwbHlFdmVudExpc3RlbmVycyB9IGZyb20gJy4vZXZlbnRzJztcbiIsImltcG9ydCB7IERIX0NIRUNLX1BfTk9UX1BSSU1FIH0gZnJvbSBcImNvbnN0YW50c1wiO1xuXG4vL2ltcG9ydCB7IEljb25TZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMnO1xuXG5leHBvcnQgY2xhc3MgU2VhcmNoRWxlbWVudEJ1aWxkZXIge1xuXG4gICAgY29uc3RydWN0b3IoYXBwKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgIH1cblxuICAgIHN0YXRpYyBjcmVhdGUoYXBwKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2VhcmNoRWxlbWVudEJ1aWxkZXIoYXBwKTtcbiAgICB9XG5cbiAgICBidWlsZCgpIHtcbiAgICAgICAgbGV0IHsgYXBwIH0gPSB0aGlzO1xuICAgICAgICBsZXQgaWNvblVybCA9IGFwcC5pY29uO1xuICAgICAgICBsZXQgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgbGluay5jbGFzc0xpc3QuYWRkKCdhcHAtbGluaycpO1xuICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZSgnaHJlZicsIGFwcC51cmwpO1xuICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZSgndGFyZ2V0JywgJ19ibGFuaycpO1xuICAgICAgICBsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGRpdi5jbGFzc05hbWUgPSAnYXBwJztcbiAgICAgICAgZGl2LnNldEF0dHJpYnV0ZSgndGl0bGUnLCBhcHAuZGVzY3JpcHRpb24pO1xuICAgICAgICBkaXYuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICcxJyk7XG4gICAgICAgIGRpdi5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz1cImFwcF9jb250ZW50XCI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYDxkaXYgY2xhc3M9XCJhcHBfaWNvblwiIHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCckeyBpY29uVXJsIH0nKVwiID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJhZGQtaWNvblwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgPGRpdiBjbGFzcz1cImFwcF9uYW1lXCIgPiR7IGFwcC5uYW1lIH08L2Rpdj5gICtcbiAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nO1xuICAgICAgICBsaW5rLmFwcGVuZENoaWxkKGRpdik7XG4gICAgICAgIC8vIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgICAgLy8gICAgIGNocm9tZS5tYW5hZ2VtZW50LmdlbmVyYXRlQXBwRm9yTGluayhhcHAudXJsLCBhcHAubmFtZSk7XG4gICAgICAgIC8vIH0pXG4gICAgICAgIC8vIHJlc3VsdC5pbm5lckhUTUwgPSBgXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFwcF9jb250ZW50XCI+XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhcHBfaWNvblwiIHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCckeyBpY29uVXJsIH0nKVwiID48L2Rpdj5cbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFwcF9uYW1lXCIgPiR7IGFwcC5uYW1lIH08L2Rpdj5cbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gO1xuICAgICAgICByZXR1cm4gbGluaztcbiAgICB9XG59XG5cbiIsIiIsIm1vZHVsZS5leHBvcnRzPXtcbiAgXCJPX1JET05MWVwiOiAwLFxuICBcIk9fV1JPTkxZXCI6IDEsXG4gIFwiT19SRFdSXCI6IDIsXG4gIFwiU19JRk1UXCI6IDYxNDQwLFxuICBcIlNfSUZSRUdcIjogMzI3NjgsXG4gIFwiU19JRkRJUlwiOiAxNjM4NCxcbiAgXCJTX0lGQ0hSXCI6IDgxOTIsXG4gIFwiU19JRkJMS1wiOiAyNDU3NixcbiAgXCJTX0lGSUZPXCI6IDQwOTYsXG4gIFwiU19JRkxOS1wiOiA0MDk2MCxcbiAgXCJTX0lGU09DS1wiOiA0OTE1MixcbiAgXCJPX0NSRUFUXCI6IDUxMixcbiAgXCJPX0VYQ0xcIjogMjA0OCxcbiAgXCJPX05PQ1RUWVwiOiAxMzEwNzIsXG4gIFwiT19UUlVOQ1wiOiAxMDI0LFxuICBcIk9fQVBQRU5EXCI6IDgsXG4gIFwiT19ESVJFQ1RPUllcIjogMTA0ODU3NixcbiAgXCJPX05PRk9MTE9XXCI6IDI1NixcbiAgXCJPX1NZTkNcIjogMTI4LFxuICBcIk9fU1lNTElOS1wiOiAyMDk3MTUyLFxuICBcIk9fTk9OQkxPQ0tcIjogNCxcbiAgXCJTX0lSV1hVXCI6IDQ0OCxcbiAgXCJTX0lSVVNSXCI6IDI1NixcbiAgXCJTX0lXVVNSXCI6IDEyOCxcbiAgXCJTX0lYVVNSXCI6IDY0LFxuICBcIlNfSVJXWEdcIjogNTYsXG4gIFwiU19JUkdSUFwiOiAzMixcbiAgXCJTX0lXR1JQXCI6IDE2LFxuICBcIlNfSVhHUlBcIjogOCxcbiAgXCJTX0lSV1hPXCI6IDcsXG4gIFwiU19JUk9USFwiOiA0LFxuICBcIlNfSVdPVEhcIjogMixcbiAgXCJTX0lYT1RIXCI6IDEsXG4gIFwiRTJCSUdcIjogNyxcbiAgXCJFQUNDRVNcIjogMTMsXG4gIFwiRUFERFJJTlVTRVwiOiA0OCxcbiAgXCJFQUREUk5PVEFWQUlMXCI6IDQ5LFxuICBcIkVBRk5PU1VQUE9SVFwiOiA0NyxcbiAgXCJFQUdBSU5cIjogMzUsXG4gIFwiRUFMUkVBRFlcIjogMzcsXG4gIFwiRUJBREZcIjogOSxcbiAgXCJFQkFETVNHXCI6IDk0LFxuICBcIkVCVVNZXCI6IDE2LFxuICBcIkVDQU5DRUxFRFwiOiA4OSxcbiAgXCJFQ0hJTERcIjogMTAsXG4gIFwiRUNPTk5BQk9SVEVEXCI6IDUzLFxuICBcIkVDT05OUkVGVVNFRFwiOiA2MSxcbiAgXCJFQ09OTlJFU0VUXCI6IDU0LFxuICBcIkVERUFETEtcIjogMTEsXG4gIFwiRURFU1RBRERSUkVRXCI6IDM5LFxuICBcIkVET01cIjogMzMsXG4gIFwiRURRVU9UXCI6IDY5LFxuICBcIkVFWElTVFwiOiAxNyxcbiAgXCJFRkFVTFRcIjogMTQsXG4gIFwiRUZCSUdcIjogMjcsXG4gIFwiRUhPU1RVTlJFQUNIXCI6IDY1LFxuICBcIkVJRFJNXCI6IDkwLFxuICBcIkVJTFNFUVwiOiA5MixcbiAgXCJFSU5QUk9HUkVTU1wiOiAzNixcbiAgXCJFSU5UUlwiOiA0LFxuICBcIkVJTlZBTFwiOiAyMixcbiAgXCJFSU9cIjogNSxcbiAgXCJFSVNDT05OXCI6IDU2LFxuICBcIkVJU0RJUlwiOiAyMSxcbiAgXCJFTE9PUFwiOiA2MixcbiAgXCJFTUZJTEVcIjogMjQsXG4gIFwiRU1MSU5LXCI6IDMxLFxuICBcIkVNU0dTSVpFXCI6IDQwLFxuICBcIkVNVUxUSUhPUFwiOiA5NSxcbiAgXCJFTkFNRVRPT0xPTkdcIjogNjMsXG4gIFwiRU5FVERPV05cIjogNTAsXG4gIFwiRU5FVFJFU0VUXCI6IDUyLFxuICBcIkVORVRVTlJFQUNIXCI6IDUxLFxuICBcIkVORklMRVwiOiAyMyxcbiAgXCJFTk9CVUZTXCI6IDU1LFxuICBcIkVOT0RBVEFcIjogOTYsXG4gIFwiRU5PREVWXCI6IDE5LFxuICBcIkVOT0VOVFwiOiAyLFxuICBcIkVOT0VYRUNcIjogOCxcbiAgXCJFTk9MQ0tcIjogNzcsXG4gIFwiRU5PTElOS1wiOiA5NyxcbiAgXCJFTk9NRU1cIjogMTIsXG4gIFwiRU5PTVNHXCI6IDkxLFxuICBcIkVOT1BST1RPT1BUXCI6IDQyLFxuICBcIkVOT1NQQ1wiOiAyOCxcbiAgXCJFTk9TUlwiOiA5OCxcbiAgXCJFTk9TVFJcIjogOTksXG4gIFwiRU5PU1lTXCI6IDc4LFxuICBcIkVOT1RDT05OXCI6IDU3LFxuICBcIkVOT1RESVJcIjogMjAsXG4gIFwiRU5PVEVNUFRZXCI6IDY2LFxuICBcIkVOT1RTT0NLXCI6IDM4LFxuICBcIkVOT1RTVVBcIjogNDUsXG4gIFwiRU5PVFRZXCI6IDI1LFxuICBcIkVOWElPXCI6IDYsXG4gIFwiRU9QTk9UU1VQUFwiOiAxMDIsXG4gIFwiRU9WRVJGTE9XXCI6IDg0LFxuICBcIkVQRVJNXCI6IDEsXG4gIFwiRVBJUEVcIjogMzIsXG4gIFwiRVBST1RPXCI6IDEwMCxcbiAgXCJFUFJPVE9OT1NVUFBPUlRcIjogNDMsXG4gIFwiRVBST1RPVFlQRVwiOiA0MSxcbiAgXCJFUkFOR0VcIjogMzQsXG4gIFwiRVJPRlNcIjogMzAsXG4gIFwiRVNQSVBFXCI6IDI5LFxuICBcIkVTUkNIXCI6IDMsXG4gIFwiRVNUQUxFXCI6IDcwLFxuICBcIkVUSU1FXCI6IDEwMSxcbiAgXCJFVElNRURPVVRcIjogNjAsXG4gIFwiRVRYVEJTWVwiOiAyNixcbiAgXCJFV09VTERCTE9DS1wiOiAzNSxcbiAgXCJFWERFVlwiOiAxOCxcbiAgXCJTSUdIVVBcIjogMSxcbiAgXCJTSUdJTlRcIjogMixcbiAgXCJTSUdRVUlUXCI6IDMsXG4gIFwiU0lHSUxMXCI6IDQsXG4gIFwiU0lHVFJBUFwiOiA1LFxuICBcIlNJR0FCUlRcIjogNixcbiAgXCJTSUdJT1RcIjogNixcbiAgXCJTSUdCVVNcIjogMTAsXG4gIFwiU0lHRlBFXCI6IDgsXG4gIFwiU0lHS0lMTFwiOiA5LFxuICBcIlNJR1VTUjFcIjogMzAsXG4gIFwiU0lHU0VHVlwiOiAxMSxcbiAgXCJTSUdVU1IyXCI6IDMxLFxuICBcIlNJR1BJUEVcIjogMTMsXG4gIFwiU0lHQUxSTVwiOiAxNCxcbiAgXCJTSUdURVJNXCI6IDE1LFxuICBcIlNJR0NITERcIjogMjAsXG4gIFwiU0lHQ09OVFwiOiAxOSxcbiAgXCJTSUdTVE9QXCI6IDE3LFxuICBcIlNJR1RTVFBcIjogMTgsXG4gIFwiU0lHVFRJTlwiOiAyMSxcbiAgXCJTSUdUVE9VXCI6IDIyLFxuICBcIlNJR1VSR1wiOiAxNixcbiAgXCJTSUdYQ1BVXCI6IDI0LFxuICBcIlNJR1hGU1pcIjogMjUsXG4gIFwiU0lHVlRBTFJNXCI6IDI2LFxuICBcIlNJR1BST0ZcIjogMjcsXG4gIFwiU0lHV0lOQ0hcIjogMjgsXG4gIFwiU0lHSU9cIjogMjMsXG4gIFwiU0lHU1lTXCI6IDEyLFxuICBcIlNTTF9PUF9BTExcIjogMjE0NzQ4NjcxOSxcbiAgXCJTU0xfT1BfQUxMT1dfVU5TQUZFX0xFR0FDWV9SRU5FR09USUFUSU9OXCI6IDI2MjE0NCxcbiAgXCJTU0xfT1BfQ0lQSEVSX1NFUlZFUl9QUkVGRVJFTkNFXCI6IDQxOTQzMDQsXG4gIFwiU1NMX09QX0NJU0NPX0FOWUNPTk5FQ1RcIjogMzI3NjgsXG4gIFwiU1NMX09QX0NPT0tJRV9FWENIQU5HRVwiOiA4MTkyLFxuICBcIlNTTF9PUF9DUllQVE9QUk9fVExTRVhUX0JVR1wiOiAyMTQ3NDgzNjQ4LFxuICBcIlNTTF9PUF9ET05UX0lOU0VSVF9FTVBUWV9GUkFHTUVOVFNcIjogMjA0OCxcbiAgXCJTU0xfT1BfRVBIRU1FUkFMX1JTQVwiOiAwLFxuICBcIlNTTF9PUF9MRUdBQ1lfU0VSVkVSX0NPTk5FQ1RcIjogNCxcbiAgXCJTU0xfT1BfTUlDUk9TT0ZUX0JJR19TU0xWM19CVUZGRVJcIjogMzIsXG4gIFwiU1NMX09QX01JQ1JPU09GVF9TRVNTX0lEX0JVR1wiOiAxLFxuICBcIlNTTF9PUF9NU0lFX1NTTFYyX1JTQV9QQURESU5HXCI6IDAsXG4gIFwiU1NMX09QX05FVFNDQVBFX0NBX0ROX0JVR1wiOiA1MzY4NzA5MTIsXG4gIFwiU1NMX09QX05FVFNDQVBFX0NIQUxMRU5HRV9CVUdcIjogMixcbiAgXCJTU0xfT1BfTkVUU0NBUEVfREVNT19DSVBIRVJfQ0hBTkdFX0JVR1wiOiAxMDczNzQxODI0LFxuICBcIlNTTF9PUF9ORVRTQ0FQRV9SRVVTRV9DSVBIRVJfQ0hBTkdFX0JVR1wiOiA4LFxuICBcIlNTTF9PUF9OT19DT01QUkVTU0lPTlwiOiAxMzEwNzIsXG4gIFwiU1NMX09QX05PX1FVRVJZX01UVVwiOiA0MDk2LFxuICBcIlNTTF9PUF9OT19TRVNTSU9OX1JFU1VNUFRJT05fT05fUkVORUdPVElBVElPTlwiOiA2NTUzNixcbiAgXCJTU0xfT1BfTk9fU1NMdjJcIjogMTY3NzcyMTYsXG4gIFwiU1NMX09QX05PX1NTTHYzXCI6IDMzNTU0NDMyLFxuICBcIlNTTF9PUF9OT19USUNLRVRcIjogMTYzODQsXG4gIFwiU1NMX09QX05PX1RMU3YxXCI6IDY3MTA4ODY0LFxuICBcIlNTTF9PUF9OT19UTFN2MV8xXCI6IDI2ODQzNTQ1NixcbiAgXCJTU0xfT1BfTk9fVExTdjFfMlwiOiAxMzQyMTc3MjgsXG4gIFwiU1NMX09QX1BLQ1MxX0NIRUNLXzFcIjogMCxcbiAgXCJTU0xfT1BfUEtDUzFfQ0hFQ0tfMlwiOiAwLFxuICBcIlNTTF9PUF9TSU5HTEVfREhfVVNFXCI6IDEwNDg1NzYsXG4gIFwiU1NMX09QX1NJTkdMRV9FQ0RIX1VTRVwiOiA1MjQyODgsXG4gIFwiU1NMX09QX1NTTEVBWV8wODBfQ0xJRU5UX0RIX0JVR1wiOiAxMjgsXG4gIFwiU1NMX09QX1NTTFJFRjJfUkVVU0VfQ0VSVF9UWVBFX0JVR1wiOiAwLFxuICBcIlNTTF9PUF9UTFNfQkxPQ0tfUEFERElOR19CVUdcIjogNTEyLFxuICBcIlNTTF9PUF9UTFNfRDVfQlVHXCI6IDI1NixcbiAgXCJTU0xfT1BfVExTX1JPTExCQUNLX0JVR1wiOiA4Mzg4NjA4LFxuICBcIkVOR0lORV9NRVRIT0RfRFNBXCI6IDIsXG4gIFwiRU5HSU5FX01FVEhPRF9ESFwiOiA0LFxuICBcIkVOR0lORV9NRVRIT0RfUkFORFwiOiA4LFxuICBcIkVOR0lORV9NRVRIT0RfRUNESFwiOiAxNixcbiAgXCJFTkdJTkVfTUVUSE9EX0VDRFNBXCI6IDMyLFxuICBcIkVOR0lORV9NRVRIT0RfQ0lQSEVSU1wiOiA2NCxcbiAgXCJFTkdJTkVfTUVUSE9EX0RJR0VTVFNcIjogMTI4LFxuICBcIkVOR0lORV9NRVRIT0RfU1RPUkVcIjogMjU2LFxuICBcIkVOR0lORV9NRVRIT0RfUEtFWV9NRVRIU1wiOiA1MTIsXG4gIFwiRU5HSU5FX01FVEhPRF9QS0VZX0FTTjFfTUVUSFNcIjogMTAyNCxcbiAgXCJFTkdJTkVfTUVUSE9EX0FMTFwiOiA2NTUzNSxcbiAgXCJFTkdJTkVfTUVUSE9EX05PTkVcIjogMCxcbiAgXCJESF9DSEVDS19QX05PVF9TQUZFX1BSSU1FXCI6IDIsXG4gIFwiREhfQ0hFQ0tfUF9OT1RfUFJJTUVcIjogMSxcbiAgXCJESF9VTkFCTEVfVE9fQ0hFQ0tfR0VORVJBVE9SXCI6IDQsXG4gIFwiREhfTk9UX1NVSVRBQkxFX0dFTkVSQVRPUlwiOiA4LFxuICBcIk5QTl9FTkFCTEVEXCI6IDEsXG4gIFwiUlNBX1BLQ1MxX1BBRERJTkdcIjogMSxcbiAgXCJSU0FfU1NMVjIzX1BBRERJTkdcIjogMixcbiAgXCJSU0FfTk9fUEFERElOR1wiOiAzLFxuICBcIlJTQV9QS0NTMV9PQUVQX1BBRERJTkdcIjogNCxcbiAgXCJSU0FfWDkzMV9QQURESU5HXCI6IDUsXG4gIFwiUlNBX1BLQ1MxX1BTU19QQURESU5HXCI6IDYsXG4gIFwiUE9JTlRfQ09OVkVSU0lPTl9DT01QUkVTU0VEXCI6IDIsXG4gIFwiUE9JTlRfQ09OVkVSU0lPTl9VTkNPTVBSRVNTRURcIjogNCxcbiAgXCJQT0lOVF9DT05WRVJTSU9OX0hZQlJJRFwiOiA2LFxuICBcIkZfT0tcIjogMCxcbiAgXCJSX09LXCI6IDQsXG4gIFwiV19PS1wiOiAyLFxuICBcIlhfT0tcIjogMSxcbiAgXCJVVl9VRFBfUkVVU0VBRERSXCI6IDRcbn1cbiIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG5mdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7XG4gIHRoaXMuX2V2ZW50cyA9IHRoaXMuX2V2ZW50cyB8fCB7fTtcbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gdGhpcy5fbWF4TGlzdGVuZXJzIHx8IHVuZGVmaW5lZDtcbn1cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyO1xuXG4vLyBCYWNrd2FyZHMtY29tcGF0IHdpdGggbm9kZSAwLjEwLnhcbkV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50cyA9IHVuZGVmaW5lZDtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX21heExpc3RlbmVycyA9IHVuZGVmaW5lZDtcblxuLy8gQnkgZGVmYXVsdCBFdmVudEVtaXR0ZXJzIHdpbGwgcHJpbnQgYSB3YXJuaW5nIGlmIG1vcmUgdGhhbiAxMCBsaXN0ZW5lcnMgYXJlXG4vLyBhZGRlZCB0byBpdC4gVGhpcyBpcyBhIHVzZWZ1bCBkZWZhdWx0IHdoaWNoIGhlbHBzIGZpbmRpbmcgbWVtb3J5IGxlYWtzLlxuRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnMgPSAxMDtcblxuLy8gT2J2aW91c2x5IG5vdCBhbGwgRW1pdHRlcnMgc2hvdWxkIGJlIGxpbWl0ZWQgdG8gMTAuIFRoaXMgZnVuY3Rpb24gYWxsb3dzXG4vLyB0aGF0IHRvIGJlIGluY3JlYXNlZC4gU2V0IHRvIHplcm8gZm9yIHVubGltaXRlZC5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24obikge1xuICBpZiAoIWlzTnVtYmVyKG4pIHx8IG4gPCAwIHx8IGlzTmFOKG4pKVxuICAgIHRocm93IFR5cGVFcnJvcignbiBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7XG4gIHRoaXMuX21heExpc3RlbmVycyA9IG47XG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24odHlwZSkge1xuICB2YXIgZXIsIGhhbmRsZXIsIGxlbiwgYXJncywgaSwgbGlzdGVuZXJzO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzKVxuICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuXG4gIC8vIElmIHRoZXJlIGlzIG5vICdlcnJvcicgZXZlbnQgbGlzdGVuZXIgdGhlbiB0aHJvdy5cbiAgaWYgKHR5cGUgPT09ICdlcnJvcicpIHtcbiAgICBpZiAoIXRoaXMuX2V2ZW50cy5lcnJvciB8fFxuICAgICAgICAoaXNPYmplY3QodGhpcy5fZXZlbnRzLmVycm9yKSAmJiAhdGhpcy5fZXZlbnRzLmVycm9yLmxlbmd0aCkpIHtcbiAgICAgIGVyID0gYXJndW1lbnRzWzFdO1xuICAgICAgaWYgKGVyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgdGhyb3cgZXI7IC8vIFVuaGFuZGxlZCAnZXJyb3InIGV2ZW50XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBBdCBsZWFzdCBnaXZlIHNvbWUga2luZCBvZiBjb250ZXh0IHRvIHRoZSB1c2VyXG4gICAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1VuY2F1Z2h0LCB1bnNwZWNpZmllZCBcImVycm9yXCIgZXZlbnQuICgnICsgZXIgKyAnKScpO1xuICAgICAgICBlcnIuY29udGV4dCA9IGVyO1xuICAgICAgICB0aHJvdyBlcnI7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlciA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcblxuICBpZiAoaXNVbmRlZmluZWQoaGFuZGxlcikpXG4gICAgcmV0dXJuIGZhbHNlO1xuXG4gIGlmIChpc0Z1bmN0aW9uKGhhbmRsZXIpKSB7XG4gICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAvLyBmYXN0IGNhc2VzXG4gICAgICBjYXNlIDE6XG4gICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMzpcbiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSwgYXJndW1lbnRzWzJdKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICAvLyBzbG93ZXJcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgICAgICBoYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChpc09iamVjdChoYW5kbGVyKSkge1xuICAgIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgIGxpc3RlbmVycyA9IGhhbmRsZXIuc2xpY2UoKTtcbiAgICBsZW4gPSBsaXN0ZW5lcnMubGVuZ3RoO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKylcbiAgICAgIGxpc3RlbmVyc1tpXS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBtO1xuXG4gIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblxuICBpZiAoIXRoaXMuX2V2ZW50cylcbiAgICB0aGlzLl9ldmVudHMgPSB7fTtcblxuICAvLyBUbyBhdm9pZCByZWN1cnNpb24gaW4gdGhlIGNhc2UgdGhhdCB0eXBlID09PSBcIm5ld0xpc3RlbmVyXCIhIEJlZm9yZVxuICAvLyBhZGRpbmcgaXQgdG8gdGhlIGxpc3RlbmVycywgZmlyc3QgZW1pdCBcIm5ld0xpc3RlbmVyXCIuXG4gIGlmICh0aGlzLl9ldmVudHMubmV3TGlzdGVuZXIpXG4gICAgdGhpcy5lbWl0KCduZXdMaXN0ZW5lcicsIHR5cGUsXG4gICAgICAgICAgICAgIGlzRnVuY3Rpb24obGlzdGVuZXIubGlzdGVuZXIpID9cbiAgICAgICAgICAgICAgbGlzdGVuZXIubGlzdGVuZXIgOiBsaXN0ZW5lcik7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgLy8gT3B0aW1pemUgdGhlIGNhc2Ugb2Ygb25lIGxpc3RlbmVyLiBEb24ndCBuZWVkIHRoZSBleHRyYSBhcnJheSBvYmplY3QuXG4gICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gbGlzdGVuZXI7XG4gIGVsc2UgaWYgKGlzT2JqZWN0KHRoaXMuX2V2ZW50c1t0eXBlXSkpXG4gICAgLy8gSWYgd2UndmUgYWxyZWFkeSBnb3QgYW4gYXJyYXksIGp1c3QgYXBwZW5kLlxuICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5wdXNoKGxpc3RlbmVyKTtcbiAgZWxzZVxuICAgIC8vIEFkZGluZyB0aGUgc2Vjb25kIGVsZW1lbnQsIG5lZWQgdG8gY2hhbmdlIHRvIGFycmF5LlxuICAgIHRoaXMuX2V2ZW50c1t0eXBlXSA9IFt0aGlzLl9ldmVudHNbdHlwZV0sIGxpc3RlbmVyXTtcblxuICAvLyBDaGVjayBmb3IgbGlzdGVuZXIgbGVha1xuICBpZiAoaXNPYmplY3QodGhpcy5fZXZlbnRzW3R5cGVdKSAmJiAhdGhpcy5fZXZlbnRzW3R5cGVdLndhcm5lZCkge1xuICAgIGlmICghaXNVbmRlZmluZWQodGhpcy5fbWF4TGlzdGVuZXJzKSkge1xuICAgICAgbSA9IHRoaXMuX21heExpc3RlbmVycztcbiAgICB9IGVsc2Uge1xuICAgICAgbSA9IEV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzO1xuICAgIH1cblxuICAgIGlmIChtICYmIG0gPiAwICYmIHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGggPiBtKSB7XG4gICAgICB0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkID0gdHJ1ZTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJyhub2RlKSB3YXJuaW5nOiBwb3NzaWJsZSBFdmVudEVtaXR0ZXIgbWVtb3J5ICcgK1xuICAgICAgICAgICAgICAgICAgICAnbGVhayBkZXRlY3RlZC4gJWQgbGlzdGVuZXJzIGFkZGVkLiAnICtcbiAgICAgICAgICAgICAgICAgICAgJ1VzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvIGluY3JlYXNlIGxpbWl0LicsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGgpO1xuICAgICAgaWYgKHR5cGVvZiBjb25zb2xlLnRyYWNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIG5vdCBzdXBwb3J0ZWQgaW4gSUUgMTBcbiAgICAgICAgY29uc29sZS50cmFjZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblxuICB2YXIgZmlyZWQgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBnKCkge1xuICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgZyk7XG5cbiAgICBpZiAoIWZpcmVkKSB7XG4gICAgICBmaXJlZCA9IHRydWU7XG4gICAgICBsaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfVxuXG4gIGcubGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgdGhpcy5vbih0eXBlLCBnKTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8vIGVtaXRzIGEgJ3JlbW92ZUxpc3RlbmVyJyBldmVudCBpZmYgdGhlIGxpc3RlbmVyIHdhcyByZW1vdmVkXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgdmFyIGxpc3QsIHBvc2l0aW9uLCBsZW5ndGgsIGk7XG5cbiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgcmV0dXJuIHRoaXM7XG5cbiAgbGlzdCA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgbGVuZ3RoID0gbGlzdC5sZW5ndGg7XG4gIHBvc2l0aW9uID0gLTE7XG5cbiAgaWYgKGxpc3QgPT09IGxpc3RlbmVyIHx8XG4gICAgICAoaXNGdW5jdGlvbihsaXN0Lmxpc3RlbmVyKSAmJiBsaXN0Lmxpc3RlbmVyID09PSBsaXN0ZW5lcikpIHtcbiAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuICAgIGlmICh0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpO1xuXG4gIH0gZWxzZSBpZiAoaXNPYmplY3QobGlzdCkpIHtcbiAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSA+IDA7KSB7XG4gICAgICBpZiAobGlzdFtpXSA9PT0gbGlzdGVuZXIgfHxcbiAgICAgICAgICAobGlzdFtpXS5saXN0ZW5lciAmJiBsaXN0W2ldLmxpc3RlbmVyID09PSBsaXN0ZW5lcikpIHtcbiAgICAgICAgcG9zaXRpb24gPSBpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocG9zaXRpb24gPCAwKVxuICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICBpZiAobGlzdC5sZW5ndGggPT09IDEpIHtcbiAgICAgIGxpc3QubGVuZ3RoID0gMDtcbiAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgfSBlbHNlIHtcbiAgICAgIGxpc3Quc3BsaWNlKHBvc2l0aW9uLCAxKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3RlbmVyKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHZhciBrZXksIGxpc3RlbmVycztcblxuICBpZiAoIXRoaXMuX2V2ZW50cylcbiAgICByZXR1cm4gdGhpcztcblxuICAvLyBub3QgbGlzdGVuaW5nIGZvciByZW1vdmVMaXN0ZW5lciwgbm8gbmVlZCB0byBlbWl0XG4gIGlmICghdGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApXG4gICAgICB0aGlzLl9ldmVudHMgPSB7fTtcbiAgICBlbHNlIGlmICh0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gZW1pdCByZW1vdmVMaXN0ZW5lciBmb3IgYWxsIGxpc3RlbmVycyBvbiBhbGwgZXZlbnRzXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgZm9yIChrZXkgaW4gdGhpcy5fZXZlbnRzKSB7XG4gICAgICBpZiAoa2V5ID09PSAncmVtb3ZlTGlzdGVuZXInKSBjb250aW51ZTtcbiAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKGtleSk7XG4gICAgfVxuICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCdyZW1vdmVMaXN0ZW5lcicpO1xuICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gIGlmIChpc0Z1bmN0aW9uKGxpc3RlbmVycykpIHtcbiAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVycyk7XG4gIH0gZWxzZSBpZiAobGlzdGVuZXJzKSB7XG4gICAgLy8gTElGTyBvcmRlclxuICAgIHdoaWxlIChsaXN0ZW5lcnMubGVuZ3RoKVxuICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbbGlzdGVuZXJzLmxlbmd0aCAtIDFdKTtcbiAgfVxuICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHZhciByZXQ7XG4gIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgcmV0ID0gW107XG4gIGVsc2UgaWYgKGlzRnVuY3Rpb24odGhpcy5fZXZlbnRzW3R5cGVdKSlcbiAgICByZXQgPSBbdGhpcy5fZXZlbnRzW3R5cGVdXTtcbiAgZWxzZVxuICAgIHJldCA9IHRoaXMuX2V2ZW50c1t0eXBlXS5zbGljZSgpO1xuICByZXR1cm4gcmV0O1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24odHlwZSkge1xuICBpZiAodGhpcy5fZXZlbnRzKSB7XG4gICAgdmFyIGV2bGlzdGVuZXIgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgICBpZiAoaXNGdW5jdGlvbihldmxpc3RlbmVyKSlcbiAgICAgIHJldHVybiAxO1xuICAgIGVsc2UgaWYgKGV2bGlzdGVuZXIpXG4gICAgICByZXR1cm4gZXZsaXN0ZW5lci5sZW5ndGg7XG4gIH1cbiAgcmV0dXJuIDA7XG59O1xuXG5FdmVudEVtaXR0ZXIubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUpIHtcbiAgcmV0dXJuIGVtaXR0ZXIubGlzdGVuZXJDb3VudCh0eXBlKTtcbn07XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nO1xufVxuXG5mdW5jdGlvbiBpc051bWJlcihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInO1xufVxuXG5mdW5jdGlvbiBpc09iamVjdChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDtcbn1cblxuZnVuY3Rpb24gaXNVbmRlZmluZWQoYXJnKSB7XG4gIHJldHVybiBhcmcgPT09IHZvaWQgMDtcbn1cbiIsIi8qKiFcbiAqIFNvcnRhYmxlXG4gKiBAYXV0aG9yXHRSdWJhWGEgICA8dHJhc2hAcnViYXhhLm9yZz5cbiAqIEBhdXRob3JcdG93ZW5tICAgIDxvd2VuMjMzNTVAZ21haWwuY29tPlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuKGZ1bmN0aW9uIHNvcnRhYmxlTW9kdWxlKGZhY3RvcnkpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0aWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0ZGVmaW5lKGZhY3RvcnkpO1xuXHR9XG5cdGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgIT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgIT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHR9XG5cdGVsc2Uge1xuXHRcdC8qIGpzaGludCBzdWI6dHJ1ZSAqL1xuXHRcdHdpbmRvd1tcIlNvcnRhYmxlXCJdID0gZmFjdG9yeSgpO1xuXHR9XG59KShmdW5jdGlvbiBzb3J0YWJsZUZhY3RvcnkoKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8ICF3aW5kb3cuZG9jdW1lbnQpIHtcblx0XHRyZXR1cm4gZnVuY3Rpb24gc29ydGFibGVFcnJvcigpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIlNvcnRhYmxlLmpzIHJlcXVpcmVzIGEgd2luZG93IHdpdGggYSBkb2N1bWVudFwiKTtcblx0XHR9O1xuXHR9XG5cblx0dmFyIGRyYWdFbCxcblx0XHRwYXJlbnRFbCxcblx0XHRnaG9zdEVsLFxuXHRcdGNsb25lRWwsXG5cdFx0cm9vdEVsLFxuXHRcdG5leHRFbCxcblx0XHRsYXN0RG93bkVsLFxuXG5cdFx0c2Nyb2xsRWwsXG5cdFx0c2Nyb2xsUGFyZW50RWwsXG5cdFx0c2Nyb2xsQ3VzdG9tRm4sXG5cblx0XHRvbGRJbmRleCxcblx0XHRuZXdJbmRleCxcblxuXHRcdGFjdGl2ZUdyb3VwLFxuXHRcdHB1dFNvcnRhYmxlLFxuXG5cdFx0YXV0b1Njcm9sbHMgPSBbXSxcblx0XHRzY3JvbGxpbmcgPSBmYWxzZSxcblxuXHRcdGF3YWl0aW5nRHJhZ1N0YXJ0ZWQgPSBmYWxzZSxcblx0XHRpZ25vcmVOZXh0Q2xpY2sgPSBmYWxzZSxcblx0XHRzb3J0YWJsZXMgPSBbXSxcblxuXHRcdHBvaW50ZXJFbGVtQ2hhbmdlZEludGVydmFsLFxuXHRcdGxhc3RQb2ludGVyRWxlbVgsXG5cdFx0bGFzdFBvaW50ZXJFbGVtWSxcblxuXHRcdHRhcEV2dCxcblx0XHR0b3VjaEV2dCxcblxuXHRcdG1vdmVkLFxuXG5cblx0XHRsYXN0VGFyZ2V0LFxuXHRcdGxhc3REaXJlY3Rpb24sXG5cdFx0cGFzdEZpcnN0SW52ZXJ0VGhyZXNoID0gZmFsc2UsXG5cdFx0aXNDaXJjdW1zdGFudGlhbEludmVydCA9IGZhbHNlLFxuXHRcdGxhc3RNb2RlLCAvLyAnc3dhcCcgb3IgJ2luc2VydCdcblxuXHRcdHRhcmdldE1vdmVEaXN0YW5jZSxcblxuXHRcdC8vIEZvciBwb3NpdGlvbmluZyBnaG9zdCBhYnNvbHV0ZWx5XG5cdFx0Z2hvc3RSZWxhdGl2ZVBhcmVudCxcblx0XHRnaG9zdFJlbGF0aXZlUGFyZW50SW5pdGlhbFNjcm9sbCA9IFtdLCAvLyAobGVmdCwgdG9wKVxuXG5cblx0XHRmb3JSZXBhaW50RHVtbXksXG5cdFx0cmVhbERyYWdFbFJlY3QsIC8vIGRyYWdFbCByZWN0IGFmdGVyIGN1cnJlbnQgYW5pbWF0aW9uXG5cblx0XHQvKiogQGNvbnN0ICovXG5cdFx0Ul9TUEFDRSA9IC9cXHMrL2csXG5cblx0XHRleHBhbmRvID0gJ1NvcnRhYmxlJyArIChuZXcgRGF0ZSkuZ2V0VGltZSgpLFxuXG5cdFx0d2luID0gd2luZG93LFxuXHRcdGRvY3VtZW50ID0gd2luLmRvY3VtZW50LFxuXHRcdHBhcnNlSW50ID0gd2luLnBhcnNlSW50LFxuXHRcdHNldFRpbWVvdXQgPSB3aW4uc2V0VGltZW91dCxcblxuXHRcdCQgPSB3aW4ualF1ZXJ5IHx8IHdpbi5aZXB0byxcblx0XHRQb2x5bWVyID0gd2luLlBvbHltZXIsXG5cblx0XHRjYXB0dXJlTW9kZSA9IHtcblx0XHRcdGNhcHR1cmU6IGZhbHNlLFxuXHRcdFx0cGFzc2l2ZTogZmFsc2Vcblx0XHR9LFxuXG5cdFx0SUUxMU9yTGVzcyA9ICEhbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvKD86VHJpZGVudC4qcnZbIDpdPzExXFwufG1zaWV8aWVtb2JpbGUpL2kpLFxuXHRcdEVkZ2UgPSAhIW5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0VkZ2UvaSksXG5cdFx0RmlyZUZveCA9ICEhbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvZmlyZWZveC9pKSxcblx0XHRTYWZhcmkgPSAhIShuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9zYWZhcmkvaSkgJiYgIW5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2Nocm9tZS9pKSAmJiAhbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvYW5kcm9pZC9pKSksXG5cdFx0SU9TID0gISEobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvaVAoYWR8b2R8aG9uZSkvaSkpLFxuXG5cdFx0UG9zaXRpb25HaG9zdEFic29sdXRlbHkgPSBJT1MsXG5cblx0XHRDU1NGbG9hdFByb3BlcnR5ID0gRWRnZSB8fCBJRTExT3JMZXNzID8gJ2Nzc0Zsb2F0JyA6ICdmbG9hdCcsXG5cblx0XHQvLyBUaGlzIHdpbGwgbm90IHBhc3MgZm9yIElFOSwgYmVjYXVzZSBJRTkgRG5EIG9ubHkgd29ya3Mgb24gYW5jaG9yc1xuXHRcdHN1cHBvcnREcmFnZ2FibGUgPSAoJ2RyYWdnYWJsZScgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpLFxuXG5cdFx0c3VwcG9ydENzc1BvaW50ZXJFdmVudHMgPSAoZnVuY3Rpb24oKSB7XG5cdFx0XHQvLyBmYWxzZSB3aGVuIDw9IElFMTFcblx0XHRcdGlmIChJRTExT3JMZXNzKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3gnKTtcblx0XHRcdGVsLnN0eWxlLmNzc1RleHQgPSAncG9pbnRlci1ldmVudHM6YXV0byc7XG5cdFx0XHRyZXR1cm4gZWwuc3R5bGUucG9pbnRlckV2ZW50cyA9PT0gJ2F1dG8nO1xuXHRcdH0pKCksXG5cblx0XHRfc2lsZW50ID0gZmFsc2UsXG5cdFx0X2FsaWduZWRTaWxlbnQgPSBmYWxzZSxcblxuXHRcdGFicyA9IE1hdGguYWJzLFxuXHRcdG1pbiA9IE1hdGgubWluLFxuXHRcdG1heCA9IE1hdGgubWF4LFxuXG5cdFx0c2F2ZWRJbnB1dENoZWNrZWQgPSBbXSxcblxuXHRcdF9kZXRlY3REaXJlY3Rpb24gPSBmdW5jdGlvbihlbCwgb3B0aW9ucykge1xuXHRcdFx0dmFyIGVsQ1NTID0gX2NzcyhlbCksXG5cdFx0XHRcdGVsV2lkdGggPSBwYXJzZUludChlbENTUy53aWR0aClcblx0XHRcdFx0XHQtIHBhcnNlSW50KGVsQ1NTLnBhZGRpbmdMZWZ0KVxuXHRcdFx0XHRcdC0gcGFyc2VJbnQoZWxDU1MucGFkZGluZ1JpZ2h0KVxuXHRcdFx0XHRcdC0gcGFyc2VJbnQoZWxDU1MuYm9yZGVyTGVmdFdpZHRoKVxuXHRcdFx0XHRcdC0gcGFyc2VJbnQoZWxDU1MuYm9yZGVyUmlnaHRXaWR0aCksXG5cdFx0XHRcdGNoaWxkMSA9IF9nZXRDaGlsZChlbCwgMCwgb3B0aW9ucyksXG5cdFx0XHRcdGNoaWxkMiA9IF9nZXRDaGlsZChlbCwgMSwgb3B0aW9ucyksXG5cdFx0XHRcdGZpcnN0Q2hpbGRDU1MgPSBjaGlsZDEgJiYgX2NzcyhjaGlsZDEpLFxuXHRcdFx0XHRzZWNvbmRDaGlsZENTUyA9IGNoaWxkMiAmJiBfY3NzKGNoaWxkMiksXG5cdFx0XHRcdGZpcnN0Q2hpbGRXaWR0aCA9IGZpcnN0Q2hpbGRDU1MgJiYgcGFyc2VJbnQoZmlyc3RDaGlsZENTUy5tYXJnaW5MZWZ0KSArIHBhcnNlSW50KGZpcnN0Q2hpbGRDU1MubWFyZ2luUmlnaHQpICsgX2dldFJlY3QoY2hpbGQxKS53aWR0aCxcblx0XHRcdFx0c2Vjb25kQ2hpbGRXaWR0aCA9IHNlY29uZENoaWxkQ1NTICYmIHBhcnNlSW50KHNlY29uZENoaWxkQ1NTLm1hcmdpbkxlZnQpICsgcGFyc2VJbnQoc2Vjb25kQ2hpbGRDU1MubWFyZ2luUmlnaHQpICsgX2dldFJlY3QoY2hpbGQyKS53aWR0aDtcblxuXHRcdFx0aWYgKGVsQ1NTLmRpc3BsYXkgPT09ICdmbGV4Jykge1xuXHRcdFx0XHRyZXR1cm4gZWxDU1MuZmxleERpcmVjdGlvbiA9PT0gJ2NvbHVtbicgfHwgZWxDU1MuZmxleERpcmVjdGlvbiA9PT0gJ2NvbHVtbi1yZXZlcnNlJ1xuXHRcdFx0XHQ/ICd2ZXJ0aWNhbCcgOiAnaG9yaXpvbnRhbCc7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChlbENTUy5kaXNwbGF5ID09PSAnZ3JpZCcpIHtcblx0XHRcdFx0cmV0dXJuIGVsQ1NTLmdyaWRUZW1wbGF0ZUNvbHVtbnMuc3BsaXQoJyAnKS5sZW5ndGggPD0gMSA/ICd2ZXJ0aWNhbCcgOiAnaG9yaXpvbnRhbCc7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChjaGlsZDEgJiYgZmlyc3RDaGlsZENTUy5mbG9hdCAhPT0gJ25vbmUnKSB7XG5cdFx0XHRcdHZhciB0b3VjaGluZ1NpZGVDaGlsZDIgPSBmaXJzdENoaWxkQ1NTLmZsb2F0ID09PSAnbGVmdCcgPyAnbGVmdCcgOiAncmlnaHQnO1xuXG5cdFx0XHRcdHJldHVybiBjaGlsZDIgJiYgKHNlY29uZENoaWxkQ1NTLmNsZWFyID09PSAnYm90aCcgfHwgc2Vjb25kQ2hpbGRDU1MuY2xlYXIgPT09IHRvdWNoaW5nU2lkZUNoaWxkMikgP1xuXHRcdFx0XHRcdCd2ZXJ0aWNhbCcgOiAnaG9yaXpvbnRhbCc7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiAoY2hpbGQxICYmXG5cdFx0XHRcdChcblx0XHRcdFx0XHRmaXJzdENoaWxkQ1NTLmRpc3BsYXkgPT09ICdibG9jaycgfHxcblx0XHRcdFx0XHRmaXJzdENoaWxkQ1NTLmRpc3BsYXkgPT09ICdmbGV4JyB8fFxuXHRcdFx0XHRcdGZpcnN0Q2hpbGRDU1MuZGlzcGxheSA9PT0gJ3RhYmxlJyB8fFxuXHRcdFx0XHRcdGZpcnN0Q2hpbGRDU1MuZGlzcGxheSA9PT0gJ2dyaWQnIHx8XG5cdFx0XHRcdFx0Zmlyc3RDaGlsZFdpZHRoID49IGVsV2lkdGggJiZcblx0XHRcdFx0XHRlbENTU1tDU1NGbG9hdFByb3BlcnR5XSA9PT0gJ25vbmUnIHx8XG5cdFx0XHRcdFx0Y2hpbGQyICYmXG5cdFx0XHRcdFx0ZWxDU1NbQ1NTRmxvYXRQcm9wZXJ0eV0gPT09ICdub25lJyAmJlxuXHRcdFx0XHRcdGZpcnN0Q2hpbGRXaWR0aCArIHNlY29uZENoaWxkV2lkdGggPiBlbFdpZHRoXG5cdFx0XHRcdCkgP1xuXHRcdFx0XHQndmVydGljYWwnIDogJ2hvcml6b250YWwnXG5cdFx0XHQpO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBEZXRlY3RzIGZpcnN0IG5lYXJlc3QgZW1wdHkgc29ydGFibGUgdG8gWCBhbmQgWSBwb3NpdGlvbiB1c2luZyBlbXB0eUluc2VydFRocmVzaG9sZC5cblx0XHQgKiBAcGFyYW0gIHtOdW1iZXJ9IHggICAgICBYIHBvc2l0aW9uXG5cdFx0ICogQHBhcmFtICB7TnVtYmVyfSB5ICAgICAgWSBwb3NpdGlvblxuXHRcdCAqIEByZXR1cm4ge0hUTUxFbGVtZW50fSAgIEVsZW1lbnQgb2YgdGhlIGZpcnN0IGZvdW5kIG5lYXJlc3QgU29ydGFibGVcblx0XHQgKi9cblx0XHRfZGV0ZWN0TmVhcmVzdEVtcHR5U29ydGFibGUgPSBmdW5jdGlvbih4LCB5KSB7XG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHNvcnRhYmxlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpZiAoX2xhc3RDaGlsZChzb3J0YWJsZXNbaV0pKSBjb250aW51ZTtcblxuXHRcdFx0XHR2YXIgcmVjdCA9IF9nZXRSZWN0KHNvcnRhYmxlc1tpXSksXG5cdFx0XHRcdFx0dGhyZXNob2xkID0gc29ydGFibGVzW2ldW2V4cGFuZG9dLm9wdGlvbnMuZW1wdHlJbnNlcnRUaHJlc2hvbGQsXG5cdFx0XHRcdFx0aW5zaWRlSG9yaXpvbnRhbGx5ID0geCA+PSAocmVjdC5sZWZ0IC0gdGhyZXNob2xkKSAmJiB4IDw9IChyZWN0LnJpZ2h0ICsgdGhyZXNob2xkKSxcblx0XHRcdFx0XHRpbnNpZGVWZXJ0aWNhbGx5ID0geSA+PSAocmVjdC50b3AgLSB0aHJlc2hvbGQpICYmIHkgPD0gKHJlY3QuYm90dG9tICsgdGhyZXNob2xkKTtcblxuXHRcdFx0XHRpZiAoaW5zaWRlSG9yaXpvbnRhbGx5ICYmIGluc2lkZVZlcnRpY2FsbHkpIHtcblx0XHRcdFx0XHRyZXR1cm4gc29ydGFibGVzW2ldO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdF9pc0NsaWVudEluUm93Q29sdW1uID0gZnVuY3Rpb24oeCwgeSwgZWwsIGF4aXMsIG9wdGlvbnMpIHtcblx0XHRcdHZhciB0YXJnZXRSZWN0ID0gX2dldFJlY3QoZWwpLFxuXHRcdFx0XHR0YXJnZXRTMU9wcCA9IGF4aXMgPT09ICd2ZXJ0aWNhbCcgPyB0YXJnZXRSZWN0LmxlZnQgOiB0YXJnZXRSZWN0LnRvcCxcblx0XHRcdFx0dGFyZ2V0UzJPcHAgPSBheGlzID09PSAndmVydGljYWwnID8gdGFyZ2V0UmVjdC5yaWdodCA6IHRhcmdldFJlY3QuYm90dG9tLFxuXHRcdFx0XHRtb3VzZU9uT3BwQXhpcyA9IGF4aXMgPT09ICd2ZXJ0aWNhbCcgPyB4IDogeTtcblxuXHRcdFx0cmV0dXJuIHRhcmdldFMxT3BwIDwgbW91c2VPbk9wcEF4aXMgJiYgbW91c2VPbk9wcEF4aXMgPCB0YXJnZXRTMk9wcDtcblx0XHR9LFxuXG5cdFx0X2lzRWxJblJvd0NvbHVtbiA9IGZ1bmN0aW9uKGVsMSwgZWwyLCBheGlzKSB7XG5cdFx0XHR2YXIgZWwxUmVjdCA9IGVsMSA9PT0gZHJhZ0VsICYmIHJlYWxEcmFnRWxSZWN0IHx8IF9nZXRSZWN0KGVsMSksXG5cdFx0XHRcdGVsMlJlY3QgPSBlbDIgPT09IGRyYWdFbCAmJiByZWFsRHJhZ0VsUmVjdCB8fCBfZ2V0UmVjdChlbDIpLFxuXHRcdFx0XHRlbDFTMU9wcCA9IGF4aXMgPT09ICd2ZXJ0aWNhbCcgPyBlbDFSZWN0LmxlZnQgOiBlbDFSZWN0LnRvcCxcblx0XHRcdFx0ZWwxUzJPcHAgPSBheGlzID09PSAndmVydGljYWwnID8gZWwxUmVjdC5yaWdodCA6IGVsMVJlY3QuYm90dG9tLFxuXHRcdFx0XHRlbDFPcHBMZW5ndGggPSBheGlzID09PSAndmVydGljYWwnID8gZWwxUmVjdC53aWR0aCA6IGVsMVJlY3QuaGVpZ2h0LFxuXHRcdFx0XHRlbDJTMU9wcCA9IGF4aXMgPT09ICd2ZXJ0aWNhbCcgPyBlbDJSZWN0LmxlZnQgOiBlbDJSZWN0LnRvcCxcblx0XHRcdFx0ZWwyUzJPcHAgPSBheGlzID09PSAndmVydGljYWwnID8gZWwyUmVjdC5yaWdodCA6IGVsMlJlY3QuYm90dG9tLFxuXHRcdFx0XHRlbDJPcHBMZW5ndGggPSBheGlzID09PSAndmVydGljYWwnID8gZWwyUmVjdC53aWR0aCA6IGVsMlJlY3QuaGVpZ2h0O1xuXG5cdFx0XHRyZXR1cm4gKFxuXHRcdFx0XHRlbDFTMU9wcCA9PT0gZWwyUzFPcHAgfHxcblx0XHRcdFx0ZWwxUzJPcHAgPT09IGVsMlMyT3BwIHx8XG5cdFx0XHRcdChlbDFTMU9wcCArIGVsMU9wcExlbmd0aCAvIDIpID09PSAoZWwyUzFPcHAgKyBlbDJPcHBMZW5ndGggLyAyKVxuXHRcdFx0KTtcblx0XHR9LFxuXG5cdFx0X2dldFBhcmVudEF1dG9TY3JvbGxFbGVtZW50ID0gZnVuY3Rpb24oZWwsIGluY2x1ZGVTZWxmKSB7XG5cdFx0XHQvLyBza2lwIHRvIHdpbmRvd1xuXHRcdFx0aWYgKCFlbCB8fCAhZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KSByZXR1cm4gX2dldFdpbmRvd1Njcm9sbGluZ0VsZW1lbnQoKTtcblxuXHRcdFx0dmFyIGVsZW0gPSBlbDtcblx0XHRcdHZhciBnb3RTZWxmID0gZmFsc2U7XG5cdFx0XHRkbyB7XG5cdFx0XHRcdC8vIHdlIGRvbid0IG5lZWQgdG8gZ2V0IGVsZW0gY3NzIGlmIGl0IGlzbid0IGV2ZW4gb3ZlcmZsb3dpbmcgaW4gdGhlIGZpcnN0IHBsYWNlIChwZXJmb3JtYW5jZSlcblx0XHRcdFx0aWYgKGVsZW0uY2xpZW50V2lkdGggPCBlbGVtLnNjcm9sbFdpZHRoIHx8IGVsZW0uY2xpZW50SGVpZ2h0IDwgZWxlbS5zY3JvbGxIZWlnaHQpIHtcblx0XHRcdFx0XHR2YXIgZWxlbUNTUyA9IF9jc3MoZWxlbSk7XG5cdFx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdFx0ZWxlbS5jbGllbnRXaWR0aCA8IGVsZW0uc2Nyb2xsV2lkdGggJiYgKGVsZW1DU1Mub3ZlcmZsb3dYID09ICdhdXRvJyB8fCBlbGVtQ1NTLm92ZXJmbG93WCA9PSAnc2Nyb2xsJykgfHxcblx0XHRcdFx0XHRcdGVsZW0uY2xpZW50SGVpZ2h0IDwgZWxlbS5zY3JvbGxIZWlnaHQgJiYgKGVsZW1DU1Mub3ZlcmZsb3dZID09ICdhdXRvJyB8fCBlbGVtQ1NTLm92ZXJmbG93WSA9PSAnc2Nyb2xsJylcblx0XHRcdFx0XHQpIHtcblx0XHRcdFx0XHRcdGlmICghZWxlbSB8fCAhZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QgfHwgZWxlbSA9PT0gZG9jdW1lbnQuYm9keSkgcmV0dXJuIF9nZXRXaW5kb3dTY3JvbGxpbmdFbGVtZW50KCk7XG5cblx0XHRcdFx0XHRcdGlmIChnb3RTZWxmIHx8IGluY2x1ZGVTZWxmKSByZXR1cm4gZWxlbTtcblx0XHRcdFx0XHRcdGdvdFNlbGYgPSB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0LyoganNoaW50IGJvc3M6dHJ1ZSAqL1xuXHRcdFx0fSB3aGlsZSAoZWxlbSA9IGVsZW0ucGFyZW50Tm9kZSk7XG5cblx0XHRcdHJldHVybiBfZ2V0V2luZG93U2Nyb2xsaW5nRWxlbWVudCgpO1xuXHRcdH0sXG5cblx0XHRfZ2V0V2luZG93U2Nyb2xsaW5nRWxlbWVudCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKElFMTFPckxlc3MpIHtcblx0XHRcdFx0cmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiBkb2N1bWVudC5zY3JvbGxpbmdFbGVtZW50O1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHRfc2Nyb2xsQnkgPSBmdW5jdGlvbihlbCwgeCwgeSkge1xuXHRcdFx0ZWwuc2Nyb2xsTGVmdCArPSB4O1xuXHRcdFx0ZWwuc2Nyb2xsVG9wICs9IHk7XG5cdFx0fSxcblxuXHRcdF9hdXRvU2Nyb2xsID0gX3Rocm90dGxlKGZ1bmN0aW9uICgvKipFdmVudCovZXZ0LCAvKipPYmplY3QqL29wdGlvbnMsIC8qKkhUTUxFbGVtZW50Ki9yb290RWwsIC8qKkJvb2xlYW4qL2lzRmFsbGJhY2spIHtcblx0XHRcdC8vIEJ1ZzogaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NTA1NTIxXG5cdFx0XHRpZiAob3B0aW9ucy5zY3JvbGwpIHtcblx0XHRcdFx0dmFyIF90aGlzID0gcm9vdEVsID8gcm9vdEVsW2V4cGFuZG9dIDogd2luZG93LFxuXHRcdFx0XHRcdHNlbnMgPSBvcHRpb25zLnNjcm9sbFNlbnNpdGl2aXR5LFxuXHRcdFx0XHRcdHNwZWVkID0gb3B0aW9ucy5zY3JvbGxTcGVlZCxcblxuXHRcdFx0XHRcdHggPSBldnQuY2xpZW50WCxcblx0XHRcdFx0XHR5ID0gZXZ0LmNsaWVudFksXG5cblx0XHRcdFx0XHR3aW5TY3JvbGxlciA9IF9nZXRXaW5kb3dTY3JvbGxpbmdFbGVtZW50KCksXG5cblx0XHRcdFx0XHRzY3JvbGxUaGlzSW5zdGFuY2UgPSBmYWxzZTtcblxuXHRcdFx0XHQvLyBEZXRlY3Qgc2Nyb2xsRWxcblx0XHRcdFx0aWYgKHNjcm9sbFBhcmVudEVsICE9PSByb290RWwpIHtcblx0XHRcdFx0XHRfY2xlYXJBdXRvU2Nyb2xscygpO1xuXG5cdFx0XHRcdFx0c2Nyb2xsRWwgPSBvcHRpb25zLnNjcm9sbDtcblx0XHRcdFx0XHRzY3JvbGxDdXN0b21GbiA9IG9wdGlvbnMuc2Nyb2xsRm47XG5cblx0XHRcdFx0XHRpZiAoc2Nyb2xsRWwgPT09IHRydWUpIHtcblx0XHRcdFx0XHRcdHNjcm9sbEVsID0gX2dldFBhcmVudEF1dG9TY3JvbGxFbGVtZW50KHJvb3RFbCwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHRzY3JvbGxQYXJlbnRFbCA9IHNjcm9sbEVsO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cblx0XHRcdFx0dmFyIGxheWVyc091dCA9IDA7XG5cdFx0XHRcdHZhciBjdXJyZW50UGFyZW50ID0gc2Nyb2xsRWw7XG5cdFx0XHRcdGRvIHtcblx0XHRcdFx0XHR2YXJcdGVsID0gY3VycmVudFBhcmVudCxcblx0XHRcdFx0XHRcdHJlY3QgPSBfZ2V0UmVjdChlbCksXG5cblx0XHRcdFx0XHRcdHRvcCA9IHJlY3QudG9wLFxuXHRcdFx0XHRcdFx0Ym90dG9tID0gcmVjdC5ib3R0b20sXG5cdFx0XHRcdFx0XHRsZWZ0ID0gcmVjdC5sZWZ0LFxuXHRcdFx0XHRcdFx0cmlnaHQgPSByZWN0LnJpZ2h0LFxuXG5cdFx0XHRcdFx0XHR3aWR0aCA9IHJlY3Qud2lkdGgsXG5cdFx0XHRcdFx0XHRoZWlnaHQgPSByZWN0LmhlaWdodCxcblxuXHRcdFx0XHRcdFx0c2Nyb2xsV2lkdGgsXG5cdFx0XHRcdFx0XHRzY3JvbGxIZWlnaHQsXG5cblx0XHRcdFx0XHRcdGNzcyxcblxuXHRcdFx0XHRcdFx0dngsXG5cdFx0XHRcdFx0XHR2eSxcblxuXHRcdFx0XHRcdFx0Y2FuU2Nyb2xsWCxcblx0XHRcdFx0XHRcdGNhblNjcm9sbFksXG5cblx0XHRcdFx0XHRcdHNjcm9sbFBvc1gsXG5cdFx0XHRcdFx0XHRzY3JvbGxQb3NZO1xuXG5cblx0XHRcdFx0XHRzY3JvbGxXaWR0aCA9IGVsLnNjcm9sbFdpZHRoO1xuXHRcdFx0XHRcdHNjcm9sbEhlaWdodCA9IGVsLnNjcm9sbEhlaWdodDtcblxuXHRcdFx0XHRcdGNzcyA9IF9jc3MoZWwpO1xuXG5cdFx0XHRcdFx0c2Nyb2xsUG9zWCA9IGVsLnNjcm9sbExlZnQ7XG5cdFx0XHRcdFx0c2Nyb2xsUG9zWSA9IGVsLnNjcm9sbFRvcDtcblxuXHRcdFx0XHRcdGlmIChlbCA9PT0gd2luU2Nyb2xsZXIpIHtcblx0XHRcdFx0XHRcdGNhblNjcm9sbFggPSB3aWR0aCA8IHNjcm9sbFdpZHRoICYmIChjc3Mub3ZlcmZsb3dYID09PSAnYXV0bycgfHwgY3NzLm92ZXJmbG93WCA9PT0gJ3Njcm9sbCcgfHwgY3NzLm92ZXJmbG93WCA9PT0gJ3Zpc2libGUnKTtcblx0XHRcdFx0XHRcdGNhblNjcm9sbFkgPSBoZWlnaHQgPCBzY3JvbGxIZWlnaHQgJiYgKGNzcy5vdmVyZmxvd1kgPT09ICdhdXRvJyB8fCBjc3Mub3ZlcmZsb3dZID09PSAnc2Nyb2xsJyB8fCBjc3Mub3ZlcmZsb3dZID09PSAndmlzaWJsZScpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjYW5TY3JvbGxYID0gd2lkdGggPCBzY3JvbGxXaWR0aCAmJiAoY3NzLm92ZXJmbG93WCA9PT0gJ2F1dG8nIHx8IGNzcy5vdmVyZmxvd1ggPT09ICdzY3JvbGwnKTtcblx0XHRcdFx0XHRcdGNhblNjcm9sbFkgPSBoZWlnaHQgPCBzY3JvbGxIZWlnaHQgJiYgKGNzcy5vdmVyZmxvd1kgPT09ICdhdXRvJyB8fCBjc3Mub3ZlcmZsb3dZID09PSAnc2Nyb2xsJyk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0dnggPSBjYW5TY3JvbGxYICYmIChhYnMocmlnaHQgLSB4KSA8PSBzZW5zICYmIChzY3JvbGxQb3NYICsgd2lkdGgpIDwgc2Nyb2xsV2lkdGgpIC0gKGFicyhsZWZ0IC0geCkgPD0gc2VucyAmJiAhIXNjcm9sbFBvc1gpO1xuXG5cdFx0XHRcdFx0dnkgPSBjYW5TY3JvbGxZICYmIChhYnMoYm90dG9tIC0geSkgPD0gc2VucyAmJiAoc2Nyb2xsUG9zWSArIGhlaWdodCkgPCBzY3JvbGxIZWlnaHQpIC0gKGFicyh0b3AgLSB5KSA8PSBzZW5zICYmICEhc2Nyb2xsUG9zWSk7XG5cblxuXHRcdFx0XHRcdGlmICghYXV0b1Njcm9sbHNbbGF5ZXJzT3V0XSkge1xuXHRcdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPD0gbGF5ZXJzT3V0OyBpKyspIHtcblx0XHRcdFx0XHRcdFx0aWYgKCFhdXRvU2Nyb2xsc1tpXSkge1xuXHRcdFx0XHRcdFx0XHRcdGF1dG9TY3JvbGxzW2ldID0ge307XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoYXV0b1Njcm9sbHNbbGF5ZXJzT3V0XS52eCAhPSB2eCB8fCBhdXRvU2Nyb2xsc1tsYXllcnNPdXRdLnZ5ICE9IHZ5IHx8IGF1dG9TY3JvbGxzW2xheWVyc091dF0uZWwgIT09IGVsKSB7XG5cdFx0XHRcdFx0XHRhdXRvU2Nyb2xsc1tsYXllcnNPdXRdLmVsID0gZWw7XG5cdFx0XHRcdFx0XHRhdXRvU2Nyb2xsc1tsYXllcnNPdXRdLnZ4ID0gdng7XG5cdFx0XHRcdFx0XHRhdXRvU2Nyb2xsc1tsYXllcnNPdXRdLnZ5ID0gdnk7XG5cblx0XHRcdFx0XHRcdGNsZWFySW50ZXJ2YWwoYXV0b1Njcm9sbHNbbGF5ZXJzT3V0XS5waWQpO1xuXG5cdFx0XHRcdFx0XHRpZiAoZWwgJiYgKHZ4ICE9IDAgfHwgdnkgIT0gMCkpIHtcblx0XHRcdFx0XHRcdFx0c2Nyb2xsVGhpc0luc3RhbmNlID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0LyoganNoaW50IGxvb3BmdW5jOnRydWUgKi9cblx0XHRcdFx0XHRcdFx0YXV0b1Njcm9sbHNbbGF5ZXJzT3V0XS5waWQgPSBzZXRJbnRlcnZhbCgoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIGVtdWxhdGUgZHJhZyBvdmVyIGR1cmluZyBhdXRvc2Nyb2xsIChmYWxsYmFjayksIGVtdWxhdGluZyBuYXRpdmUgRG5EIGJlaGF2aW91clxuXHRcdFx0XHRcdFx0XHRcdGlmIChpc0ZhbGxiYWNrICYmIHRoaXMubGF5ZXIgPT09IDApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFNvcnRhYmxlLmFjdGl2ZS5fZW11bGF0ZURyYWdPdmVyKHRydWUpO1xuXHRcdFx0XHRcdFx0XHRcdFx0U29ydGFibGUuYWN0aXZlLl9vblRvdWNoTW92ZSh0b3VjaEV2dCwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdHZhciBzY3JvbGxPZmZzZXRZID0gYXV0b1Njcm9sbHNbdGhpcy5sYXllcl0udnkgPyBhdXRvU2Nyb2xsc1t0aGlzLmxheWVyXS52eSAqIHNwZWVkIDogMDtcblx0XHRcdFx0XHRcdFx0XHR2YXIgc2Nyb2xsT2Zmc2V0WCA9IGF1dG9TY3JvbGxzW3RoaXMubGF5ZXJdLnZ4ID8gYXV0b1Njcm9sbHNbdGhpcy5sYXllcl0udnggKiBzcGVlZCA6IDA7XG5cblx0XHRcdFx0XHRcdFx0XHRpZiAoJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mKHNjcm9sbEN1c3RvbUZuKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHNjcm9sbEN1c3RvbUZuLmNhbGwoX3RoaXMsIHNjcm9sbE9mZnNldFgsIHNjcm9sbE9mZnNldFksIGV2dCwgdG91Y2hFdnQsIGF1dG9TY3JvbGxzW3RoaXMubGF5ZXJdLmVsKSAhPT0gJ2NvbnRpbnVlJykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0X3Njcm9sbEJ5KGF1dG9TY3JvbGxzW3RoaXMubGF5ZXJdLmVsLCBzY3JvbGxPZmZzZXRYLCBzY3JvbGxPZmZzZXRZKTtcblx0XHRcdFx0XHRcdFx0fSkuYmluZCh7bGF5ZXI6IGxheWVyc091dH0pLCAyNCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGxheWVyc091dCsrO1xuXHRcdFx0XHR9IHdoaWxlIChvcHRpb25zLmJ1YmJsZVNjcm9sbCAmJiBjdXJyZW50UGFyZW50ICE9PSB3aW5TY3JvbGxlciAmJiAoY3VycmVudFBhcmVudCA9IF9nZXRQYXJlbnRBdXRvU2Nyb2xsRWxlbWVudChjdXJyZW50UGFyZW50LCBmYWxzZSkpKTtcblx0XHRcdFx0c2Nyb2xsaW5nID0gc2Nyb2xsVGhpc0luc3RhbmNlOyAvLyBpbiBjYXNlIGFub3RoZXIgZnVuY3Rpb24gY2F0Y2hlcyBzY3JvbGxpbmcgYXMgZmFsc2UgaW4gYmV0d2VlbiB3aGVuIGl0IGlzIG5vdFxuXHRcdFx0fVxuXHRcdH0sIDMwKSxcblxuXHRcdF9jbGVhckF1dG9TY3JvbGxzID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0YXV0b1Njcm9sbHMuZm9yRWFjaChmdW5jdGlvbihhdXRvU2Nyb2xsKSB7XG5cdFx0XHRcdGNsZWFySW50ZXJ2YWwoYXV0b1Njcm9sbC5waWQpO1xuXHRcdFx0fSk7XG5cdFx0XHRhdXRvU2Nyb2xscyA9IFtdO1xuXHRcdH0sXG5cblx0XHRfcHJlcGFyZUdyb3VwID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcblx0XHRcdGZ1bmN0aW9uIHRvRm4odmFsdWUsIHB1bGwpIHtcblx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uKHRvLCBmcm9tLCBkcmFnRWwsIGV2dCkge1xuXHRcdFx0XHRcdHZhciBzYW1lR3JvdXAgPSB0by5vcHRpb25zLmdyb3VwLm5hbWUgJiZcblx0XHRcdFx0XHRcdFx0XHRcdGZyb20ub3B0aW9ucy5ncm91cC5uYW1lICYmXG5cdFx0XHRcdFx0XHRcdFx0XHR0by5vcHRpb25zLmdyb3VwLm5hbWUgPT09IGZyb20ub3B0aW9ucy5ncm91cC5uYW1lO1xuXG5cdFx0XHRcdFx0aWYgKHZhbHVlID09IG51bGwgJiYgKHB1bGwgfHwgc2FtZUdyb3VwKSkge1xuXHRcdFx0XHRcdFx0Ly8gRGVmYXVsdCBwdWxsIHZhbHVlXG5cdFx0XHRcdFx0XHQvLyBEZWZhdWx0IHB1bGwgYW5kIHB1dCB2YWx1ZSBpZiBzYW1lIGdyb3VwXG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKHZhbHVlID09IG51bGwgfHwgdmFsdWUgPT09IGZhbHNlKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChwdWxsICYmIHZhbHVlID09PSAnY2xvbmUnKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHRcdFx0fSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRcdHJldHVybiB0b0ZuKHZhbHVlKHRvLCBmcm9tLCBkcmFnRWwsIGV2dCksIHB1bGwpKHRvLCBmcm9tLCBkcmFnRWwsIGV2dCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHZhciBvdGhlckdyb3VwID0gKHB1bGwgPyB0byA6IGZyb20pLm9wdGlvbnMuZ3JvdXAubmFtZTtcblxuXHRcdFx0XHRcdFx0cmV0dXJuICh2YWx1ZSA9PT0gdHJ1ZSB8fFxuXHRcdFx0XHRcdFx0KHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUgPT09IG90aGVyR3JvdXApIHx8XG5cdFx0XHRcdFx0XHQodmFsdWUuam9pbiAmJiB2YWx1ZS5pbmRleE9mKG90aGVyR3JvdXApID4gLTEpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cblx0XHRcdHZhciBncm91cCA9IHt9O1xuXHRcdFx0dmFyIG9yaWdpbmFsR3JvdXAgPSBvcHRpb25zLmdyb3VwO1xuXG5cdFx0XHRpZiAoIW9yaWdpbmFsR3JvdXAgfHwgdHlwZW9mIG9yaWdpbmFsR3JvdXAgIT0gJ29iamVjdCcpIHtcblx0XHRcdFx0b3JpZ2luYWxHcm91cCA9IHtuYW1lOiBvcmlnaW5hbEdyb3VwfTtcblx0XHRcdH1cblxuXHRcdFx0Z3JvdXAubmFtZSA9IG9yaWdpbmFsR3JvdXAubmFtZTtcblx0XHRcdGdyb3VwLmNoZWNrUHVsbCA9IHRvRm4ob3JpZ2luYWxHcm91cC5wdWxsLCB0cnVlKTtcblx0XHRcdGdyb3VwLmNoZWNrUHV0ID0gdG9GbihvcmlnaW5hbEdyb3VwLnB1dCk7XG5cdFx0XHRncm91cC5yZXZlcnRDbG9uZSA9IG9yaWdpbmFsR3JvdXAucmV2ZXJ0Q2xvbmU7XG5cblx0XHRcdG9wdGlvbnMuZ3JvdXAgPSBncm91cDtcblx0XHR9LFxuXG5cdFx0X2NoZWNrQWxpZ25tZW50ID0gZnVuY3Rpb24oZXZ0KSB7XG5cdFx0XHRpZiAoIWRyYWdFbCB8fCAhZHJhZ0VsLnBhcmVudE5vZGUpIHJldHVybjtcblx0XHRcdGRyYWdFbC5wYXJlbnROb2RlW2V4cGFuZG9dICYmIGRyYWdFbC5wYXJlbnROb2RlW2V4cGFuZG9dLl9jb21wdXRlSXNBbGlnbmVkKGV2dCk7XG5cdFx0fSxcblxuXHRcdF9pc1RydWVQYXJlbnRTb3J0YWJsZSA9IGZ1bmN0aW9uKGVsLCB0YXJnZXQpIHtcblx0XHRcdHZhciB0cnVlUGFyZW50ID0gdGFyZ2V0O1xuXHRcdFx0d2hpbGUgKCF0cnVlUGFyZW50W2V4cGFuZG9dKSB7XG5cdFx0XHRcdHRydWVQYXJlbnQgPSB0cnVlUGFyZW50LnBhcmVudE5vZGU7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBlbCA9PT0gdHJ1ZVBhcmVudDtcblx0XHR9LFxuXG5cdFx0X2FydGlmaWNhbEJ1YmJsZSA9IGZ1bmN0aW9uKHNvcnRhYmxlLCBvcmlnaW5hbEV2dCwgbWV0aG9kKSB7XG5cdFx0XHQvLyBBcnRpZmljaWFsIElFIGJ1YmJsaW5nXG5cdFx0XHR2YXIgbmV4dFBhcmVudCA9IHNvcnRhYmxlLnBhcmVudE5vZGU7XG5cdFx0XHR3aGlsZSAobmV4dFBhcmVudCAmJiAhbmV4dFBhcmVudFtleHBhbmRvXSkge1xuXHRcdFx0XHRuZXh0UGFyZW50ID0gbmV4dFBhcmVudC5wYXJlbnROb2RlO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAobmV4dFBhcmVudCkge1xuXHRcdFx0XHRuZXh0UGFyZW50W2V4cGFuZG9dW21ldGhvZF0oX2V4dGVuZChvcmlnaW5hbEV2dCwge1xuXHRcdFx0XHRcdGFydGlmaWNpYWxCdWJibGU6IHRydWVcblx0XHRcdFx0fSkpO1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHRfaGlkZUdob3N0Rm9yVGFyZ2V0ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoIXN1cHBvcnRDc3NQb2ludGVyRXZlbnRzICYmIGdob3N0RWwpIHtcblx0XHRcdFx0X2NzcyhnaG9zdEVsLCAnZGlzcGxheScsICdub25lJyk7XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdF91bmhpZGVHaG9zdEZvclRhcmdldCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCFzdXBwb3J0Q3NzUG9pbnRlckV2ZW50cyAmJiBnaG9zdEVsKSB7XG5cdFx0XHRcdF9jc3MoZ2hvc3RFbCwgJ2Rpc3BsYXknLCAnJyk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXG5cdC8vICMxMTg0IGZpeCAtIFByZXZlbnQgY2xpY2sgZXZlbnQgb24gZmFsbGJhY2sgaWYgZHJhZ2dlZCBidXQgaXRlbSBub3QgY2hhbmdlZCBwb3NpdGlvblxuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2dCkge1xuXHRcdGlmIChpZ25vcmVOZXh0Q2xpY2spIHtcblx0XHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0ZXZ0LnN0b3BQcm9wYWdhdGlvbiAmJiBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRldnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uICYmIGV2dC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcblx0XHRcdGlnbm9yZU5leHRDbGljayA9IGZhbHNlO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0fSwgdHJ1ZSk7XG5cblx0dmFyIG5lYXJlc3RFbXB0eUluc2VydERldGVjdEV2ZW50ID0gZnVuY3Rpb24oZXZ0KSB7XG5cdFx0ZXZ0ID0gZXZ0LnRvdWNoZXMgPyBldnQudG91Y2hlc1swXSA6IGV2dDtcblx0XHRpZiAoZHJhZ0VsKSB7XG5cdFx0XHR2YXIgbmVhcmVzdCA9IF9kZXRlY3ROZWFyZXN0RW1wdHlTb3J0YWJsZShldnQuY2xpZW50WCwgZXZ0LmNsaWVudFkpO1xuXG5cdFx0XHRpZiAobmVhcmVzdCkge1xuXHRcdFx0XHRuZWFyZXN0W2V4cGFuZG9dLl9vbkRyYWdPdmVyKHtcblx0XHRcdFx0XHRjbGllbnRYOiBldnQuY2xpZW50WCxcblx0XHRcdFx0XHRjbGllbnRZOiBldnQuY2xpZW50WSxcblx0XHRcdFx0XHR0YXJnZXQ6IG5lYXJlc3QsXG5cdFx0XHRcdFx0cm9vdEVsOiBuZWFyZXN0XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblx0Ly8gV2UgZG8gbm90IHdhbnQgdGhpcyB0byBiZSB0cmlnZ2VyZWQgaWYgY29tcGxldGVkIChidWJibGluZyBjYW5jZWxlZCksIHNvIG9ubHkgZGVmaW5lIGl0IGhlcmVcblx0X29uKGRvY3VtZW50LCAnZHJhZ292ZXInLCBuZWFyZXN0RW1wdHlJbnNlcnREZXRlY3RFdmVudCk7XG5cdF9vbihkb2N1bWVudCwgJ21vdXNlbW92ZScsIG5lYXJlc3RFbXB0eUluc2VydERldGVjdEV2ZW50KTtcblx0X29uKGRvY3VtZW50LCAndG91Y2htb3ZlJywgbmVhcmVzdEVtcHR5SW5zZXJ0RGV0ZWN0RXZlbnQpO1xuXG5cdC8qKlxuXHQgKiBAY2xhc3MgIFNvcnRhYmxlXG5cdCAqIEBwYXJhbSAge0hUTUxFbGVtZW50fSAgZWxcblx0ICogQHBhcmFtICB7T2JqZWN0fSAgICAgICBbb3B0aW9uc11cblx0ICovXG5cdGZ1bmN0aW9uIFNvcnRhYmxlKGVsLCBvcHRpb25zKSB7XG5cdFx0aWYgKCEoZWwgJiYgZWwubm9kZVR5cGUgJiYgZWwubm9kZVR5cGUgPT09IDEpKSB7XG5cdFx0XHR0aHJvdyAnU29ydGFibGU6IGBlbGAgbXVzdCBiZSBIVE1MRWxlbWVudCwgbm90ICcgKyB7fS50b1N0cmluZy5jYWxsKGVsKTtcblx0XHR9XG5cblx0XHR0aGlzLmVsID0gZWw7IC8vIHJvb3QgZWxlbWVudFxuXHRcdHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgPSBfZXh0ZW5kKHt9LCBvcHRpb25zKTtcblxuXG5cdFx0Ly8gRXhwb3J0IGluc3RhbmNlXG5cdFx0ZWxbZXhwYW5kb10gPSB0aGlzO1xuXG5cdFx0Ly8gRGVmYXVsdCBvcHRpb25zXG5cdFx0dmFyIGRlZmF1bHRzID0ge1xuXHRcdFx0Z3JvdXA6IG51bGwsXG5cdFx0XHRzb3J0OiB0cnVlLFxuXHRcdFx0ZGlzYWJsZWQ6IGZhbHNlLFxuXHRcdFx0c3RvcmU6IG51bGwsXG5cdFx0XHRoYW5kbGU6IG51bGwsXG5cdFx0XHRzY3JvbGw6IHRydWUsXG5cdFx0XHRzY3JvbGxTZW5zaXRpdml0eTogMzAsXG5cdFx0XHRzY3JvbGxTcGVlZDogMTAsXG5cdFx0XHRidWJibGVTY3JvbGw6IHRydWUsXG5cdFx0XHRkcmFnZ2FibGU6IC9bdW9dbC9pLnRlc3QoZWwubm9kZU5hbWUpID8gJz5saScgOiAnPionLFxuXHRcdFx0c3dhcFRocmVzaG9sZDogMSwgLy8gcGVyY2VudGFnZTsgMCA8PSB4IDw9IDFcblx0XHRcdGludmVydFN3YXA6IGZhbHNlLCAvLyBpbnZlcnQgYWx3YXlzXG5cdFx0XHRpbnZlcnRlZFN3YXBUaHJlc2hvbGQ6IG51bGwsIC8vIHdpbGwgYmUgc2V0IHRvIHNhbWUgYXMgc3dhcFRocmVzaG9sZCBpZiBkZWZhdWx0XG5cdFx0XHRyZW1vdmVDbG9uZU9uSGlkZTogdHJ1ZSxcblx0XHRcdGRpcmVjdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiBfZGV0ZWN0RGlyZWN0aW9uKGVsLCB0aGlzLm9wdGlvbnMpO1xuXHRcdFx0fSxcblx0XHRcdGdob3N0Q2xhc3M6ICdzb3J0YWJsZS1naG9zdCcsXG5cdFx0XHRjaG9zZW5DbGFzczogJ3NvcnRhYmxlLWNob3NlbicsXG5cdFx0XHRkcmFnQ2xhc3M6ICdzb3J0YWJsZS1kcmFnJyxcblx0XHRcdGlnbm9yZTogJ2EsIGltZycsXG5cdFx0XHRmaWx0ZXI6IG51bGwsXG5cdFx0XHRwcmV2ZW50T25GaWx0ZXI6IHRydWUsXG5cdFx0XHRhbmltYXRpb246IDAsXG5cdFx0XHRlYXNpbmc6IG51bGwsXG5cdFx0XHRzZXREYXRhOiBmdW5jdGlvbiAoZGF0YVRyYW5zZmVyLCBkcmFnRWwpIHtcblx0XHRcdFx0ZGF0YVRyYW5zZmVyLnNldERhdGEoJ1RleHQnLCBkcmFnRWwudGV4dENvbnRlbnQpO1xuXHRcdFx0fSxcblx0XHRcdGRyb3BCdWJibGU6IGZhbHNlLFxuXHRcdFx0ZHJhZ292ZXJCdWJibGU6IGZhbHNlLFxuXHRcdFx0ZGF0YUlkQXR0cjogJ2RhdGEtaWQnLFxuXHRcdFx0ZGVsYXk6IDAsXG5cdFx0XHR0b3VjaFN0YXJ0VGhyZXNob2xkOiBwYXJzZUludCh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbywgMTApIHx8IDEsXG5cdFx0XHRmb3JjZUZhbGxiYWNrOiBmYWxzZSxcblx0XHRcdGZhbGxiYWNrQ2xhc3M6ICdzb3J0YWJsZS1mYWxsYmFjaycsXG5cdFx0XHRmYWxsYmFja09uQm9keTogZmFsc2UsXG5cdFx0XHRmYWxsYmFja1RvbGVyYW5jZTogMCxcblx0XHRcdGZhbGxiYWNrT2Zmc2V0OiB7eDogMCwgeTogMH0sXG5cdFx0XHRzdXBwb3J0UG9pbnRlcjogU29ydGFibGUuc3VwcG9ydFBvaW50ZXIgIT09IGZhbHNlICYmIChcblx0XHRcdFx0KCdQb2ludGVyRXZlbnQnIGluIHdpbmRvdykgfHxcblx0XHRcdFx0d2luZG93Lm5hdmlnYXRvciAmJiAoJ21zUG9pbnRlckVuYWJsZWQnIGluIHdpbmRvdy5uYXZpZ2F0b3IpIC8vIG1pY3Jvc29mdFxuXHRcdFx0KSxcblx0XHRcdGVtcHR5SW5zZXJ0VGhyZXNob2xkOiA1XG5cdFx0fTtcblxuXG5cdFx0Ly8gU2V0IGRlZmF1bHQgb3B0aW9uc1xuXHRcdGZvciAodmFyIG5hbWUgaW4gZGVmYXVsdHMpIHtcblx0XHRcdCEobmFtZSBpbiBvcHRpb25zKSAmJiAob3B0aW9uc1tuYW1lXSA9IGRlZmF1bHRzW25hbWVdKTtcblx0XHR9XG5cblx0XHRfcHJlcGFyZUdyb3VwKG9wdGlvbnMpO1xuXG5cdFx0Ly8gQmluZCBhbGwgcHJpdmF0ZSBtZXRob2RzXG5cdFx0Zm9yICh2YXIgZm4gaW4gdGhpcykge1xuXHRcdFx0aWYgKGZuLmNoYXJBdCgwKSA9PT0gJ18nICYmIHR5cGVvZiB0aGlzW2ZuXSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHR0aGlzW2ZuXSA9IHRoaXNbZm5dLmJpbmQodGhpcyk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gU2V0dXAgZHJhZyBtb2RlXG5cdFx0dGhpcy5uYXRpdmVEcmFnZ2FibGUgPSBvcHRpb25zLmZvcmNlRmFsbGJhY2sgPyBmYWxzZSA6IHN1cHBvcnREcmFnZ2FibGU7XG5cblx0XHRpZiAodGhpcy5uYXRpdmVEcmFnZ2FibGUpIHtcblx0XHRcdC8vIFRvdWNoIHN0YXJ0IHRocmVzaG9sZCBjYW5ub3QgYmUgZ3JlYXRlciB0aGFuIHRoZSBuYXRpdmUgZHJhZ3N0YXJ0IHRocmVzaG9sZFxuXHRcdFx0dGhpcy5vcHRpb25zLnRvdWNoU3RhcnRUaHJlc2hvbGQgPSAxO1xuXHRcdH1cblxuXHRcdC8vIEJpbmQgZXZlbnRzXG5cdFx0aWYgKG9wdGlvbnMuc3VwcG9ydFBvaW50ZXIpIHtcblx0XHRcdF9vbihlbCwgJ3BvaW50ZXJkb3duJywgdGhpcy5fb25UYXBTdGFydCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdF9vbihlbCwgJ21vdXNlZG93bicsIHRoaXMuX29uVGFwU3RhcnQpO1xuXHRcdFx0X29uKGVsLCAndG91Y2hzdGFydCcsIHRoaXMuX29uVGFwU3RhcnQpO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLm5hdGl2ZURyYWdnYWJsZSkge1xuXHRcdFx0X29uKGVsLCAnZHJhZ292ZXInLCB0aGlzKTtcblx0XHRcdF9vbihlbCwgJ2RyYWdlbnRlcicsIHRoaXMpO1xuXHRcdH1cblxuXHRcdHNvcnRhYmxlcy5wdXNoKHRoaXMuZWwpO1xuXG5cdFx0Ly8gUmVzdG9yZSBzb3J0aW5nXG5cdFx0b3B0aW9ucy5zdG9yZSAmJiBvcHRpb25zLnN0b3JlLmdldCAmJiB0aGlzLnNvcnQob3B0aW9ucy5zdG9yZS5nZXQodGhpcykgfHwgW10pO1xuXHR9XG5cblx0U29ydGFibGUucHJvdG90eXBlID0gLyoqIEBsZW5kcyBTb3J0YWJsZS5wcm90b3R5cGUgKi8ge1xuXHRcdGNvbnN0cnVjdG9yOiBTb3J0YWJsZSxcblxuXHRcdF9jb21wdXRlSXNBbGlnbmVkOiBmdW5jdGlvbihldnQpIHtcblx0XHRcdHZhciB0YXJnZXQ7XG5cblx0XHRcdGlmIChnaG9zdEVsICYmICFzdXBwb3J0Q3NzUG9pbnRlckV2ZW50cykge1xuXHRcdFx0XHRfaGlkZUdob3N0Rm9yVGFyZ2V0KCk7XG5cdFx0XHRcdHRhcmdldCA9IGRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQoZXZ0LmNsaWVudFgsIGV2dC5jbGllbnRZKTtcblx0XHRcdFx0X3VuaGlkZUdob3N0Rm9yVGFyZ2V0KCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0YXJnZXQgPSBldnQudGFyZ2V0O1xuXHRcdFx0fVxuXG5cdFx0XHR0YXJnZXQgPSBfY2xvc2VzdCh0YXJnZXQsIHRoaXMub3B0aW9ucy5kcmFnZ2FibGUsIHRoaXMuZWwsIGZhbHNlKTtcblx0XHRcdGlmIChfYWxpZ25lZFNpbGVudCkgcmV0dXJuO1xuXHRcdFx0aWYgKCFkcmFnRWwgfHwgZHJhZ0VsLnBhcmVudE5vZGUgIT09IHRoaXMuZWwpIHJldHVybjtcblxuXHRcdFx0dmFyIGNoaWxkcmVuID0gdGhpcy5lbC5jaGlsZHJlbjtcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0Ly8gRG9uJ3QgY2hhbmdlIGZvciB0YXJnZXQgaW4gY2FzZSBpdCBpcyBjaGFuZ2VkIHRvIGFsaWduZWQgYmVmb3JlIG9uRHJhZ092ZXIgaXMgZmlyZWRcblx0XHRcdFx0aWYgKF9jbG9zZXN0KGNoaWxkcmVuW2ldLCB0aGlzLm9wdGlvbnMuZHJhZ2dhYmxlLCB0aGlzLmVsLCBmYWxzZSkgJiYgY2hpbGRyZW5baV0gIT09IHRhcmdldCkge1xuXHRcdFx0XHRcdGNoaWxkcmVuW2ldLnNvcnRhYmxlTW91c2VBbGlnbmVkID0gX2lzQ2xpZW50SW5Sb3dDb2x1bW4oZXZ0LmNsaWVudFgsIGV2dC5jbGllbnRZLCBjaGlsZHJlbltpXSwgdGhpcy5fZ2V0RGlyZWN0aW9uKGV2dCwgbnVsbCksIHRoaXMub3B0aW9ucyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdC8vIFVzZWQgZm9yIG51bGxpbmcgbGFzdCB0YXJnZXQgd2hlbiBub3QgaW4gZWxlbWVudCwgbm90aGluZyB0byBkbyB3aXRoIGNoZWNraW5nIGlmIGFsaWduZWRcblx0XHRcdGlmICghX2Nsb3Nlc3QodGFyZ2V0LCB0aGlzLm9wdGlvbnMuZHJhZ2dhYmxlLCB0aGlzLmVsLCB0cnVlKSkge1xuXHRcdFx0XHRsYXN0VGFyZ2V0ID0gbnVsbDtcblx0XHRcdH1cblxuXHRcdFx0X2FsaWduZWRTaWxlbnQgPSB0cnVlO1xuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0X2FsaWduZWRTaWxlbnQgPSBmYWxzZTtcblx0XHRcdH0sIDMwKTtcblxuXHRcdH0sXG5cblx0XHRfZ2V0RGlyZWN0aW9uOiBmdW5jdGlvbihldnQsIHRhcmdldCkge1xuXHRcdFx0cmV0dXJuICh0eXBlb2YgdGhpcy5vcHRpb25zLmRpcmVjdGlvbiA9PT0gJ2Z1bmN0aW9uJykgPyB0aGlzLm9wdGlvbnMuZGlyZWN0aW9uLmNhbGwodGhpcywgZXZ0LCB0YXJnZXQsIGRyYWdFbCkgOiB0aGlzLm9wdGlvbnMuZGlyZWN0aW9uO1xuXHRcdH0sXG5cblx0XHRfb25UYXBTdGFydDogZnVuY3Rpb24gKC8qKiBFdmVudHxUb3VjaEV2ZW50ICovZXZ0KSB7XG5cdFx0XHRpZiAoIWV2dC5jYW5jZWxhYmxlKSByZXR1cm47XG5cdFx0XHR2YXIgX3RoaXMgPSB0aGlzLFxuXHRcdFx0XHRlbCA9IHRoaXMuZWwsXG5cdFx0XHRcdG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXG5cdFx0XHRcdHByZXZlbnRPbkZpbHRlciA9IG9wdGlvbnMucHJldmVudE9uRmlsdGVyLFxuXHRcdFx0XHR0eXBlID0gZXZ0LnR5cGUsXG5cdFx0XHRcdHRvdWNoID0gZXZ0LnRvdWNoZXMgJiYgZXZ0LnRvdWNoZXNbMF0sXG5cdFx0XHRcdHRhcmdldCA9ICh0b3VjaCB8fCBldnQpLnRhcmdldCxcblx0XHRcdFx0b3JpZ2luYWxUYXJnZXQgPSBldnQudGFyZ2V0LnNoYWRvd1Jvb3QgJiYgKChldnQucGF0aCAmJiBldnQucGF0aFswXSkgfHwgKGV2dC5jb21wb3NlZFBhdGggJiYgZXZ0LmNvbXBvc2VkUGF0aCgpWzBdKSkgfHwgdGFyZ2V0LFxuXHRcdFx0XHRmaWx0ZXIgPSBvcHRpb25zLmZpbHRlcixcblx0XHRcdFx0c3RhcnRJbmRleDtcblxuXHRcdFx0X3NhdmVJbnB1dENoZWNrZWRTdGF0ZShlbCk7XG5cblxuXHRcdFx0Ly8gSUU6IENhbGxzIGV2ZW50cyBpbiBjYXB0dXJlIG1vZGUgaWYgZXZlbnQgZWxlbWVudCBpcyBuZXN0ZWQuIFRoaXMgZW5zdXJlcyBvbmx5IGNvcnJlY3QgZWxlbWVudCdzIF9vblRhcFN0YXJ0IGdvZXMgdGhyb3VnaC5cblx0XHRcdC8vIFRoaXMgcHJvY2VzcyBpcyBhbHNvIGRvbmUgaW4gX29uRHJhZ092ZXJcblx0XHRcdGlmIChJRTExT3JMZXNzICYmICFldnQuYXJ0aWZpY2lhbEJ1YmJsZSAmJiAhX2lzVHJ1ZVBhcmVudFNvcnRhYmxlKGVsLCB0YXJnZXQpKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gRG9uJ3QgdHJpZ2dlciBzdGFydCBldmVudCB3aGVuIGFuIGVsZW1lbnQgaXMgYmVlbiBkcmFnZ2VkLCBvdGhlcndpc2UgdGhlIGV2dC5vbGRpbmRleCBhbHdheXMgd3Jvbmcgd2hlbiBzZXQgb3B0aW9uLmdyb3VwLlxuXHRcdFx0aWYgKGRyYWdFbCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGlmICgvbW91c2Vkb3dufHBvaW50ZXJkb3duLy50ZXN0KHR5cGUpICYmIGV2dC5idXR0b24gIT09IDAgfHwgb3B0aW9ucy5kaXNhYmxlZCkge1xuXHRcdFx0XHRyZXR1cm47IC8vIG9ubHkgbGVmdCBidXR0b24gYW5kIGVuYWJsZWRcblx0XHRcdH1cblxuXHRcdFx0Ly8gY2FuY2VsIGRuZCBpZiBvcmlnaW5hbCB0YXJnZXQgaXMgY29udGVudCBlZGl0YWJsZVxuXHRcdFx0aWYgKG9yaWdpbmFsVGFyZ2V0LmlzQ29udGVudEVkaXRhYmxlKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0dGFyZ2V0ID0gX2Nsb3Nlc3QodGFyZ2V0LCBvcHRpb25zLmRyYWdnYWJsZSwgZWwsIGZhbHNlKTtcblxuXHRcdFx0aWYgKCF0YXJnZXQpIHtcblx0XHRcdFx0aWYgKElFMTFPckxlc3MpIHtcblx0XHRcdFx0XHRfYXJ0aWZpY2FsQnViYmxlKGVsLCBldnQsICdfb25UYXBTdGFydCcpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGxhc3REb3duRWwgPT09IHRhcmdldCkge1xuXHRcdFx0XHQvLyBJZ25vcmluZyBkdXBsaWNhdGUgYGRvd25gXG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gR2V0IHRoZSBpbmRleCBvZiB0aGUgZHJhZ2dlZCBlbGVtZW50IHdpdGhpbiBpdHMgcGFyZW50XG5cdFx0XHRzdGFydEluZGV4ID0gX2luZGV4KHRhcmdldCwgb3B0aW9ucy5kcmFnZ2FibGUpO1xuXG5cdFx0XHQvLyBDaGVjayBmaWx0ZXJcblx0XHRcdGlmICh0eXBlb2YgZmlsdGVyID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdGlmIChmaWx0ZXIuY2FsbCh0aGlzLCBldnQsIHRhcmdldCwgdGhpcykpIHtcblx0XHRcdFx0XHRfZGlzcGF0Y2hFdmVudChfdGhpcywgb3JpZ2luYWxUYXJnZXQsICdmaWx0ZXInLCB0YXJnZXQsIGVsLCBlbCwgc3RhcnRJbmRleCk7XG5cdFx0XHRcdFx0cHJldmVudE9uRmlsdGVyICYmIGV2dC5jYW5jZWxhYmxlICYmIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdHJldHVybjsgLy8gY2FuY2VsIGRuZFxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmIChmaWx0ZXIpIHtcblx0XHRcdFx0ZmlsdGVyID0gZmlsdGVyLnNwbGl0KCcsJykuc29tZShmdW5jdGlvbiAoY3JpdGVyaWEpIHtcblx0XHRcdFx0XHRjcml0ZXJpYSA9IF9jbG9zZXN0KG9yaWdpbmFsVGFyZ2V0LCBjcml0ZXJpYS50cmltKCksIGVsLCBmYWxzZSk7XG5cblx0XHRcdFx0XHRpZiAoY3JpdGVyaWEpIHtcblx0XHRcdFx0XHRcdF9kaXNwYXRjaEV2ZW50KF90aGlzLCBjcml0ZXJpYSwgJ2ZpbHRlcicsIHRhcmdldCwgZWwsIGVsLCBzdGFydEluZGV4KTtcblx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0aWYgKGZpbHRlcikge1xuXHRcdFx0XHRcdHByZXZlbnRPbkZpbHRlciAmJiBldnQuY2FuY2VsYWJsZSAmJiBldnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRyZXR1cm47IC8vIGNhbmNlbCBkbmRcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAob3B0aW9ucy5oYW5kbGUgJiYgIV9jbG9zZXN0KG9yaWdpbmFsVGFyZ2V0LCBvcHRpb25zLmhhbmRsZSwgZWwsIGZhbHNlKSkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIFByZXBhcmUgYGRyYWdzdGFydGBcblx0XHRcdHRoaXMuX3ByZXBhcmVEcmFnU3RhcnQoZXZ0LCB0b3VjaCwgdGFyZ2V0LCBzdGFydEluZGV4KTtcblx0XHR9LFxuXG5cblx0XHRfaGFuZGxlQXV0b1Njcm9sbDogZnVuY3Rpb24oZXZ0LCBmYWxsYmFjaykge1xuXHRcdFx0aWYgKCFkcmFnRWwgfHwgIXRoaXMub3B0aW9ucy5zY3JvbGwpIHJldHVybjtcblx0XHRcdHZhciB4ID0gZXZ0LmNsaWVudFgsXG5cdFx0XHRcdHkgPSBldnQuY2xpZW50WSxcblxuXHRcdFx0XHRlbGVtID0gZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludCh4LCB5KSxcblx0XHRcdFx0X3RoaXMgPSB0aGlzO1xuXG5cdFx0XHQvLyBJRSBkb2VzIG5vdCBzZWVtIHRvIGhhdmUgbmF0aXZlIGF1dG9zY3JvbGwsXG5cdFx0XHQvLyBFZGdlJ3MgYXV0b3Njcm9sbCBzZWVtcyB0b28gY29uZGl0aW9uYWwsXG5cdFx0XHQvLyBNQUNPUyBTYWZhcmkgZG9lcyBub3QgaGF2ZSBhdXRvc2Nyb2xsLFxuXHRcdFx0Ly8gRmlyZWZveCBhbmQgQ2hyb21lIGFyZSBnb29kXG5cdFx0XHRpZiAoZmFsbGJhY2sgfHwgRWRnZSB8fCBJRTExT3JMZXNzIHx8IFNhZmFyaSkge1xuXHRcdFx0XHRfYXV0b1Njcm9sbChldnQsIF90aGlzLm9wdGlvbnMsIGVsZW0sIGZhbGxiYWNrKTtcblxuXHRcdFx0XHQvLyBMaXN0ZW5lciBmb3IgcG9pbnRlciBlbGVtZW50IGNoYW5nZVxuXHRcdFx0XHR2YXIgb2dFbGVtU2Nyb2xsZXIgPSBfZ2V0UGFyZW50QXV0b1Njcm9sbEVsZW1lbnQoZWxlbSwgdHJ1ZSk7XG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHRzY3JvbGxpbmcgJiZcblx0XHRcdFx0XHQoXG5cdFx0XHRcdFx0XHQhcG9pbnRlckVsZW1DaGFuZ2VkSW50ZXJ2YWwgfHxcblx0XHRcdFx0XHRcdHggIT09IGxhc3RQb2ludGVyRWxlbVggfHxcblx0XHRcdFx0XHRcdHkgIT09IGxhc3RQb2ludGVyRWxlbVlcblx0XHRcdFx0XHQpXG5cdFx0XHRcdCkge1xuXG5cdFx0XHRcdFx0cG9pbnRlckVsZW1DaGFuZ2VkSW50ZXJ2YWwgJiYgY2xlYXJJbnRlcnZhbChwb2ludGVyRWxlbUNoYW5nZWRJbnRlcnZhbCk7XG5cdFx0XHRcdFx0Ly8gRGV0ZWN0IGZvciBwb2ludGVyIGVsZW0gY2hhbmdlLCBlbXVsYXRpbmcgbmF0aXZlIERuRCBiZWhhdmlvdXJcblx0XHRcdFx0XHRwb2ludGVyRWxlbUNoYW5nZWRJbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0aWYgKCFkcmFnRWwpIHJldHVybjtcblx0XHRcdFx0XHRcdC8vIGNvdWxkIGFsc28gY2hlY2sgaWYgc2Nyb2xsIGRpcmVjdGlvbiBvbiBuZXdFbGVtIGNoYW5nZXMgZHVlIHRvIHBhcmVudCBhdXRvc2Nyb2xsaW5nXG5cdFx0XHRcdFx0XHR2YXIgbmV3RWxlbSA9IF9nZXRQYXJlbnRBdXRvU2Nyb2xsRWxlbWVudChkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KHgsIHkpLCB0cnVlKTtcblx0XHRcdFx0XHRcdGlmIChuZXdFbGVtICE9PSBvZ0VsZW1TY3JvbGxlcikge1xuXHRcdFx0XHRcdFx0XHRvZ0VsZW1TY3JvbGxlciA9IG5ld0VsZW07XG5cdFx0XHRcdFx0XHRcdF9jbGVhckF1dG9TY3JvbGxzKCk7XG5cdFx0XHRcdFx0XHRcdF9hdXRvU2Nyb2xsKGV2dCwgX3RoaXMub3B0aW9ucywgb2dFbGVtU2Nyb2xsZXIsIGZhbGxiYWNrKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LCAxMCk7XG5cdFx0XHRcdFx0bGFzdFBvaW50ZXJFbGVtWCA9IHg7XG5cdFx0XHRcdFx0bGFzdFBvaW50ZXJFbGVtWSA9IHk7XG5cdFx0XHRcdH1cblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gaWYgRG5EIGlzIGVuYWJsZWQgKGFuZCBicm93c2VyIGhhcyBnb29kIGF1dG9zY3JvbGxpbmcpLCBmaXJzdCBhdXRvc2Nyb2xsIHdpbGwgYWxyZWFkeSBzY3JvbGwsIHNvIGdldCBwYXJlbnQgYXV0b3Njcm9sbCBvZiBmaXJzdCBhdXRvc2Nyb2xsXG5cdFx0XHRcdGlmICghX3RoaXMub3B0aW9ucy5idWJibGVTY3JvbGwgfHwgX2dldFBhcmVudEF1dG9TY3JvbGxFbGVtZW50KGVsZW0sIHRydWUpID09PSBfZ2V0V2luZG93U2Nyb2xsaW5nRWxlbWVudCgpKSB7XG5cdFx0XHRcdFx0X2NsZWFyQXV0b1Njcm9sbHMoKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0X2F1dG9TY3JvbGwoZXZ0LCBfdGhpcy5vcHRpb25zLCBfZ2V0UGFyZW50QXV0b1Njcm9sbEVsZW1lbnQoZWxlbSwgZmFsc2UpLCBmYWxzZSk7XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdF9wcmVwYXJlRHJhZ1N0YXJ0OiBmdW5jdGlvbiAoLyoqIEV2ZW50ICovZXZ0LCAvKiogVG91Y2ggKi90b3VjaCwgLyoqIEhUTUxFbGVtZW50ICovdGFyZ2V0LCAvKiogTnVtYmVyICovc3RhcnRJbmRleCkge1xuXHRcdFx0dmFyIF90aGlzID0gdGhpcyxcblx0XHRcdFx0ZWwgPSBfdGhpcy5lbCxcblx0XHRcdFx0b3B0aW9ucyA9IF90aGlzLm9wdGlvbnMsXG5cdFx0XHRcdG93bmVyRG9jdW1lbnQgPSBlbC5vd25lckRvY3VtZW50LFxuXHRcdFx0XHRkcmFnU3RhcnRGbjtcblxuXHRcdFx0aWYgKHRhcmdldCAmJiAhZHJhZ0VsICYmICh0YXJnZXQucGFyZW50Tm9kZSA9PT0gZWwpKSB7XG5cdFx0XHRcdHJvb3RFbCA9IGVsO1xuXHRcdFx0XHRkcmFnRWwgPSB0YXJnZXQ7XG5cdFx0XHRcdHBhcmVudEVsID0gZHJhZ0VsLnBhcmVudE5vZGU7XG5cdFx0XHRcdG5leHRFbCA9IGRyYWdFbC5uZXh0U2libGluZztcblx0XHRcdFx0bGFzdERvd25FbCA9IHRhcmdldDtcblx0XHRcdFx0YWN0aXZlR3JvdXAgPSBvcHRpb25zLmdyb3VwO1xuXHRcdFx0XHRvbGRJbmRleCA9IHN0YXJ0SW5kZXg7XG5cblx0XHRcdFx0dGFwRXZ0ID0ge1xuXHRcdFx0XHRcdHRhcmdldDogZHJhZ0VsLFxuXHRcdFx0XHRcdGNsaWVudFg6ICh0b3VjaCB8fCBldnQpLmNsaWVudFgsXG5cdFx0XHRcdFx0Y2xpZW50WTogKHRvdWNoIHx8IGV2dCkuY2xpZW50WVxuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdHRoaXMuX2xhc3RYID0gKHRvdWNoIHx8IGV2dCkuY2xpZW50WDtcblx0XHRcdFx0dGhpcy5fbGFzdFkgPSAodG91Y2ggfHwgZXZ0KS5jbGllbnRZO1xuXG5cdFx0XHRcdGRyYWdFbC5zdHlsZVsnd2lsbC1jaGFuZ2UnXSA9ICdhbGwnO1xuXHRcdFx0XHQvLyB1bmRvIGFuaW1hdGlvbiBpZiBuZWVkZWRcblx0XHRcdFx0ZHJhZ0VsLnN0eWxlLnRyYW5zaXRpb24gPSAnJztcblx0XHRcdFx0ZHJhZ0VsLnN0eWxlLnRyYW5zZm9ybSA9ICcnO1xuXG5cdFx0XHRcdGRyYWdTdGFydEZuID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdC8vIERlbGF5ZWQgZHJhZyBoYXMgYmVlbiB0cmlnZ2VyZWRcblx0XHRcdFx0XHQvLyB3ZSBjYW4gcmUtZW5hYmxlIHRoZSBldmVudHM6IHRvdWNobW92ZS9tb3VzZW1vdmVcblx0XHRcdFx0XHRfdGhpcy5fZGlzYWJsZURlbGF5ZWREcmFnRXZlbnRzKCk7XG5cblx0XHRcdFx0XHRpZiAoIUZpcmVGb3ggJiYgX3RoaXMubmF0aXZlRHJhZ2dhYmxlKSB7XG5cdFx0XHRcdFx0XHRkcmFnRWwuZHJhZ2dhYmxlID0gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBCaW5kIHRoZSBldmVudHM6IGRyYWdzdGFydC9kcmFnZW5kXG5cdFx0XHRcdFx0X3RoaXMuX3RyaWdnZXJEcmFnU3RhcnQoZXZ0LCB0b3VjaCk7XG5cblx0XHRcdFx0XHQvLyBEcmFnIHN0YXJ0IGV2ZW50XG5cdFx0XHRcdFx0X2Rpc3BhdGNoRXZlbnQoX3RoaXMsIHJvb3RFbCwgJ2Nob29zZScsIGRyYWdFbCwgcm9vdEVsLCByb290RWwsIG9sZEluZGV4KTtcblxuXHRcdFx0XHRcdC8vIENob3NlbiBpdGVtXG5cdFx0XHRcdFx0X3RvZ2dsZUNsYXNzKGRyYWdFbCwgb3B0aW9ucy5jaG9zZW5DbGFzcywgdHJ1ZSk7XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0Ly8gRGlzYWJsZSBcImRyYWdnYWJsZVwiXG5cdFx0XHRcdG9wdGlvbnMuaWdub3JlLnNwbGl0KCcsJykuZm9yRWFjaChmdW5jdGlvbiAoY3JpdGVyaWEpIHtcblx0XHRcdFx0XHRfZmluZChkcmFnRWwsIGNyaXRlcmlhLnRyaW0oKSwgX2Rpc2FibGVEcmFnZ2FibGUpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRpZiAob3B0aW9ucy5zdXBwb3J0UG9pbnRlcikge1xuXHRcdFx0XHRcdF9vbihvd25lckRvY3VtZW50LCAncG9pbnRlcnVwJywgX3RoaXMuX29uRHJvcCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0X29uKG93bmVyRG9jdW1lbnQsICdtb3VzZXVwJywgX3RoaXMuX29uRHJvcCk7XG5cdFx0XHRcdFx0X29uKG93bmVyRG9jdW1lbnQsICd0b3VjaGVuZCcsIF90aGlzLl9vbkRyb3ApO1xuXHRcdFx0XHRcdF9vbihvd25lckRvY3VtZW50LCAndG91Y2hjYW5jZWwnLCBfdGhpcy5fb25Ecm9wKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIE1ha2UgZHJhZ0VsIGRyYWdnYWJsZSAobXVzdCBiZSBiZWZvcmUgZGVsYXkgZm9yIEZpcmVGb3gpXG5cdFx0XHRcdGlmIChGaXJlRm94ICYmIHRoaXMubmF0aXZlRHJhZ2dhYmxlKSB7XG5cdFx0XHRcdFx0dGhpcy5vcHRpb25zLnRvdWNoU3RhcnRUaHJlc2hvbGQgPSA0O1xuXHRcdFx0XHRcdGRyYWdFbC5kcmFnZ2FibGUgPSB0cnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gRGVsYXkgaXMgaW1wb3NzaWJsZSBmb3IgbmF0aXZlIERuRCBpbiBFZGdlIG9yIElFXG5cdFx0XHRcdGlmIChvcHRpb25zLmRlbGF5ICYmICghdGhpcy5uYXRpdmVEcmFnZ2FibGUgfHwgIShFZGdlIHx8IElFMTFPckxlc3MpKSkge1xuXHRcdFx0XHRcdC8vIElmIHRoZSB1c2VyIG1vdmVzIHRoZSBwb2ludGVyIG9yIGxldCBnbyB0aGUgY2xpY2sgb3IgdG91Y2hcblx0XHRcdFx0XHQvLyBiZWZvcmUgdGhlIGRlbGF5IGhhcyBiZWVuIHJlYWNoZWQ6XG5cdFx0XHRcdFx0Ly8gZGlzYWJsZSB0aGUgZGVsYXllZCBkcmFnXG5cdFx0XHRcdFx0X29uKG93bmVyRG9jdW1lbnQsICdtb3VzZXVwJywgX3RoaXMuX2Rpc2FibGVEZWxheWVkRHJhZyk7XG5cdFx0XHRcdFx0X29uKG93bmVyRG9jdW1lbnQsICd0b3VjaGVuZCcsIF90aGlzLl9kaXNhYmxlRGVsYXllZERyYWcpO1xuXHRcdFx0XHRcdF9vbihvd25lckRvY3VtZW50LCAndG91Y2hjYW5jZWwnLCBfdGhpcy5fZGlzYWJsZURlbGF5ZWREcmFnKTtcblx0XHRcdFx0XHRfb24ob3duZXJEb2N1bWVudCwgJ21vdXNlbW92ZScsIF90aGlzLl9kZWxheWVkRHJhZ1RvdWNoTW92ZUhhbmRsZXIpO1xuXHRcdFx0XHRcdF9vbihvd25lckRvY3VtZW50LCAndG91Y2htb3ZlJywgX3RoaXMuX2RlbGF5ZWREcmFnVG91Y2hNb3ZlSGFuZGxlcik7XG5cdFx0XHRcdFx0b3B0aW9ucy5zdXBwb3J0UG9pbnRlciAmJiBfb24ob3duZXJEb2N1bWVudCwgJ3BvaW50ZXJtb3ZlJywgX3RoaXMuX2RlbGF5ZWREcmFnVG91Y2hNb3ZlSGFuZGxlcik7XG5cblx0XHRcdFx0XHRfdGhpcy5fZHJhZ1N0YXJ0VGltZXIgPSBzZXRUaW1lb3V0KGRyYWdTdGFydEZuLCBvcHRpb25zLmRlbGF5KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRkcmFnU3RhcnRGbigpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdF9kZWxheWVkRHJhZ1RvdWNoTW92ZUhhbmRsZXI6IGZ1bmN0aW9uICgvKiogVG91Y2hFdmVudHxQb2ludGVyRXZlbnQgKiovZSkge1xuXHRcdFx0dmFyIHRvdWNoID0gZS50b3VjaGVzID8gZS50b3VjaGVzWzBdIDogZTtcblx0XHRcdGlmIChtYXgoYWJzKHRvdWNoLmNsaWVudFggLSB0aGlzLl9sYXN0WCksIGFicyh0b3VjaC5jbGllbnRZIC0gdGhpcy5fbGFzdFkpKVxuXHRcdFx0XHRcdD49IE1hdGguZmxvb3IodGhpcy5vcHRpb25zLnRvdWNoU3RhcnRUaHJlc2hvbGQgLyAodGhpcy5uYXRpdmVEcmFnZ2FibGUgJiYgd2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgMSkpXG5cdFx0XHQpIHtcblx0XHRcdFx0dGhpcy5fZGlzYWJsZURlbGF5ZWREcmFnKCk7XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdF9kaXNhYmxlRGVsYXllZERyYWc6IGZ1bmN0aW9uICgpIHtcblx0XHRcdGRyYWdFbCAmJiBfZGlzYWJsZURyYWdnYWJsZShkcmFnRWwpO1xuXHRcdFx0Y2xlYXJUaW1lb3V0KHRoaXMuX2RyYWdTdGFydFRpbWVyKTtcblxuXHRcdFx0dGhpcy5fZGlzYWJsZURlbGF5ZWREcmFnRXZlbnRzKCk7XG5cdFx0fSxcblxuXHRcdF9kaXNhYmxlRGVsYXllZERyYWdFdmVudHM6IGZ1bmN0aW9uICgpIHtcblx0XHRcdHZhciBvd25lckRvY3VtZW50ID0gdGhpcy5lbC5vd25lckRvY3VtZW50O1xuXHRcdFx0X29mZihvd25lckRvY3VtZW50LCAnbW91c2V1cCcsIHRoaXMuX2Rpc2FibGVEZWxheWVkRHJhZyk7XG5cdFx0XHRfb2ZmKG93bmVyRG9jdW1lbnQsICd0b3VjaGVuZCcsIHRoaXMuX2Rpc2FibGVEZWxheWVkRHJhZyk7XG5cdFx0XHRfb2ZmKG93bmVyRG9jdW1lbnQsICd0b3VjaGNhbmNlbCcsIHRoaXMuX2Rpc2FibGVEZWxheWVkRHJhZyk7XG5cdFx0XHRfb2ZmKG93bmVyRG9jdW1lbnQsICdtb3VzZW1vdmUnLCB0aGlzLl9kZWxheWVkRHJhZ1RvdWNoTW92ZUhhbmRsZXIpO1xuXHRcdFx0X29mZihvd25lckRvY3VtZW50LCAndG91Y2htb3ZlJywgdGhpcy5fZGVsYXllZERyYWdUb3VjaE1vdmVIYW5kbGVyKTtcblx0XHRcdF9vZmYob3duZXJEb2N1bWVudCwgJ3BvaW50ZXJtb3ZlJywgdGhpcy5fZGVsYXllZERyYWdUb3VjaE1vdmVIYW5kbGVyKTtcblx0XHR9LFxuXG5cdFx0X3RyaWdnZXJEcmFnU3RhcnQ6IGZ1bmN0aW9uICgvKiogRXZlbnQgKi9ldnQsIC8qKiBUb3VjaCAqL3RvdWNoKSB7XG5cdFx0XHR0b3VjaCA9IHRvdWNoIHx8IChldnQucG9pbnRlclR5cGUgPT0gJ3RvdWNoJyA/IGV2dCA6IG51bGwpO1xuXG5cdFx0XHRpZiAoIXRoaXMubmF0aXZlRHJhZ2dhYmxlIHx8IHRvdWNoKSB7XG5cdFx0XHRcdGlmICh0aGlzLm9wdGlvbnMuc3VwcG9ydFBvaW50ZXIpIHtcblx0XHRcdFx0XHRfb24oZG9jdW1lbnQsICdwb2ludGVybW92ZScsIHRoaXMuX29uVG91Y2hNb3ZlKTtcblx0XHRcdFx0fSBlbHNlIGlmICh0b3VjaCkge1xuXHRcdFx0XHRcdF9vbihkb2N1bWVudCwgJ3RvdWNobW92ZScsIHRoaXMuX29uVG91Y2hNb3ZlKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRfb24oZG9jdW1lbnQsICdtb3VzZW1vdmUnLCB0aGlzLl9vblRvdWNoTW92ZSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdF9vbihkcmFnRWwsICdkcmFnZW5kJywgdGhpcyk7XG5cdFx0XHRcdF9vbihyb290RWwsICdkcmFnc3RhcnQnLCB0aGlzLl9vbkRyYWdTdGFydCk7XG5cdFx0XHR9XG5cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGlmIChkb2N1bWVudC5zZWxlY3Rpb24pIHtcblx0XHRcdFx0XHQvLyBUaW1lb3V0IG5lY2Nlc3NhcnkgZm9yIElFOVxuXHRcdFx0XHRcdF9uZXh0VGljayhmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRkb2N1bWVudC5zZWxlY3Rpb24uZW1wdHkoKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR3aW5kb3cuZ2V0U2VsZWN0aW9uKCkucmVtb3ZlQWxsUmFuZ2VzKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHRfZHJhZ1N0YXJ0ZWQ6IGZ1bmN0aW9uIChmYWxsYmFjaywgZXZ0KSB7XG5cdFx0XHRhd2FpdGluZ0RyYWdTdGFydGVkID0gZmFsc2U7XG5cdFx0XHRpZiAocm9vdEVsICYmIGRyYWdFbCkge1xuXHRcdFx0XHRpZiAodGhpcy5uYXRpdmVEcmFnZ2FibGUpIHtcblx0XHRcdFx0XHRfb24oZG9jdW1lbnQsICdkcmFnb3ZlcicsIHRoaXMuX2hhbmRsZUF1dG9TY3JvbGwpO1xuXHRcdFx0XHRcdF9vbihkb2N1bWVudCwgJ2RyYWdvdmVyJywgX2NoZWNrQWxpZ25tZW50KTtcblx0XHRcdFx0fVxuXHRcdFx0XHR2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcblxuXHRcdFx0XHQvLyBBcHBseSBlZmZlY3Rcblx0XHRcdFx0IWZhbGxiYWNrICYmIF90b2dnbGVDbGFzcyhkcmFnRWwsIG9wdGlvbnMuZHJhZ0NsYXNzLCBmYWxzZSk7XG5cdFx0XHRcdF90b2dnbGVDbGFzcyhkcmFnRWwsIG9wdGlvbnMuZ2hvc3RDbGFzcywgdHJ1ZSk7XG5cblx0XHRcdFx0Ly8gSW4gY2FzZSBkcmFnZ2luZyBhbiBhbmltYXRlZCBlbGVtZW50XG5cdFx0XHRcdF9jc3MoZHJhZ0VsLCAndHJhbnNmb3JtJywgJycpO1xuXG5cdFx0XHRcdFNvcnRhYmxlLmFjdGl2ZSA9IHRoaXM7XG5cblx0XHRcdFx0ZmFsbGJhY2sgJiYgdGhpcy5fYXBwZW5kR2hvc3QoKTtcblxuXHRcdFx0XHQvLyBEcmFnIHN0YXJ0IGV2ZW50XG5cdFx0XHRcdF9kaXNwYXRjaEV2ZW50KHRoaXMsIHJvb3RFbCwgJ3N0YXJ0JywgZHJhZ0VsLCByb290RWwsIHJvb3RFbCwgb2xkSW5kZXgsIHVuZGVmaW5lZCwgZXZ0KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMuX251bGxpbmcoKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0X2VtdWxhdGVEcmFnT3ZlcjogZnVuY3Rpb24gKGZvckF1dG9TY3JvbGwpIHtcblx0XHRcdGlmICh0b3VjaEV2dCkge1xuXHRcdFx0XHRpZiAodGhpcy5fbGFzdFggPT09IHRvdWNoRXZ0LmNsaWVudFggJiYgdGhpcy5fbGFzdFkgPT09IHRvdWNoRXZ0LmNsaWVudFkgJiYgIWZvckF1dG9TY3JvbGwpIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhpcy5fbGFzdFggPSB0b3VjaEV2dC5jbGllbnRYO1xuXHRcdFx0XHR0aGlzLl9sYXN0WSA9IHRvdWNoRXZ0LmNsaWVudFk7XG5cblx0XHRcdFx0X2hpZGVHaG9zdEZvclRhcmdldCgpO1xuXG5cdFx0XHRcdHZhciB0YXJnZXQgPSBkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KHRvdWNoRXZ0LmNsaWVudFgsIHRvdWNoRXZ0LmNsaWVudFkpO1xuXHRcdFx0XHR2YXIgcGFyZW50ID0gdGFyZ2V0O1xuXG5cdFx0XHRcdHdoaWxlICh0YXJnZXQgJiYgdGFyZ2V0LnNoYWRvd1Jvb3QpIHtcblx0XHRcdFx0XHR0YXJnZXQgPSB0YXJnZXQuc2hhZG93Um9vdC5lbGVtZW50RnJvbVBvaW50KHRvdWNoRXZ0LmNsaWVudFgsIHRvdWNoRXZ0LmNsaWVudFkpO1xuXHRcdFx0XHRcdHBhcmVudCA9IHRhcmdldDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChwYXJlbnQpIHtcblx0XHRcdFx0XHRkbyB7XG5cdFx0XHRcdFx0XHRpZiAocGFyZW50W2V4cGFuZG9dKSB7XG5cdFx0XHRcdFx0XHRcdHZhciBpbnNlcnRlZDtcblxuXHRcdFx0XHRcdFx0XHRpbnNlcnRlZCA9IHBhcmVudFtleHBhbmRvXS5fb25EcmFnT3Zlcih7XG5cdFx0XHRcdFx0XHRcdFx0Y2xpZW50WDogdG91Y2hFdnQuY2xpZW50WCxcblx0XHRcdFx0XHRcdFx0XHRjbGllbnRZOiB0b3VjaEV2dC5jbGllbnRZLFxuXHRcdFx0XHRcdFx0XHRcdHRhcmdldDogdGFyZ2V0LFxuXHRcdFx0XHRcdFx0XHRcdHJvb3RFbDogcGFyZW50XG5cdFx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0XHRcdGlmIChpbnNlcnRlZCAmJiAhdGhpcy5vcHRpb25zLmRyYWdvdmVyQnViYmxlKSB7XG5cdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0dGFyZ2V0ID0gcGFyZW50OyAvLyBzdG9yZSBsYXN0IGVsZW1lbnRcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0LyoganNoaW50IGJvc3M6dHJ1ZSAqL1xuXHRcdFx0XHRcdHdoaWxlIChwYXJlbnQgPSBwYXJlbnQucGFyZW50Tm9kZSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZHJhZ0VsLnBhcmVudE5vZGVbZXhwYW5kb10uX2NvbXB1dGVJc0FsaWduZWQodG91Y2hFdnQpO1xuXG5cdFx0XHRcdF91bmhpZGVHaG9zdEZvclRhcmdldCgpO1xuXHRcdFx0fVxuXHRcdH0sXG5cblxuXHRcdF9vblRvdWNoTW92ZTogZnVuY3Rpb24gKC8qKlRvdWNoRXZlbnQqL2V2dCwgZm9yQXV0b1Njcm9sbCkge1xuXHRcdFx0aWYgKHRhcEV2dCkge1xuXHRcdFx0XHR2YXJcdG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXG5cdFx0XHRcdFx0ZmFsbGJhY2tUb2xlcmFuY2UgPSBvcHRpb25zLmZhbGxiYWNrVG9sZXJhbmNlLFxuXHRcdFx0XHRcdGZhbGxiYWNrT2Zmc2V0ID0gb3B0aW9ucy5mYWxsYmFja09mZnNldCxcblx0XHRcdFx0XHR0b3VjaCA9IGV2dC50b3VjaGVzID8gZXZ0LnRvdWNoZXNbMF0gOiBldnQsXG5cdFx0XHRcdFx0bWF0cml4ID0gZ2hvc3RFbCAmJiBfbWF0cml4KGdob3N0RWwpLFxuXHRcdFx0XHRcdHNjYWxlWCA9IGdob3N0RWwgJiYgbWF0cml4ICYmIG1hdHJpeC5hLFxuXHRcdFx0XHRcdHNjYWxlWSA9IGdob3N0RWwgJiYgbWF0cml4ICYmIG1hdHJpeC5kLFxuXHRcdFx0XHRcdHJlbGF0aXZlU2Nyb2xsT2Zmc2V0ID0gUG9zaXRpb25HaG9zdEFic29sdXRlbHkgJiYgZ2hvc3RSZWxhdGl2ZVBhcmVudCAmJiBfZ2V0UmVsYXRpdmVTY3JvbGxPZmZzZXQoZ2hvc3RSZWxhdGl2ZVBhcmVudCksXG5cdFx0XHRcdFx0ZHggPSAoKHRvdWNoLmNsaWVudFggLSB0YXBFdnQuY2xpZW50WClcblx0XHRcdFx0XHRcdFx0KyBmYWxsYmFja09mZnNldC54KSAvIChzY2FsZVggfHwgMSlcblx0XHRcdFx0XHRcdFx0KyAocmVsYXRpdmVTY3JvbGxPZmZzZXQgPyAocmVsYXRpdmVTY3JvbGxPZmZzZXRbMF0gLSBnaG9zdFJlbGF0aXZlUGFyZW50SW5pdGlhbFNjcm9sbFswXSkgOiAwKSAvIChzY2FsZVggfHwgMSksXG5cdFx0XHRcdFx0ZHkgPSAoKHRvdWNoLmNsaWVudFkgLSB0YXBFdnQuY2xpZW50WSlcblx0XHRcdFx0XHRcdFx0KyBmYWxsYmFja09mZnNldC55KSAvIChzY2FsZVkgfHwgMSlcblx0XHRcdFx0XHRcdFx0KyAocmVsYXRpdmVTY3JvbGxPZmZzZXQgPyAocmVsYXRpdmVTY3JvbGxPZmZzZXRbMV0gLSBnaG9zdFJlbGF0aXZlUGFyZW50SW5pdGlhbFNjcm9sbFsxXSkgOiAwKSAvIChzY2FsZVkgfHwgMSksXG5cdFx0XHRcdFx0dHJhbnNsYXRlM2QgPSBldnQudG91Y2hlcyA/ICd0cmFuc2xhdGUzZCgnICsgZHggKyAncHgsJyArIGR5ICsgJ3B4LDApJyA6ICd0cmFuc2xhdGUoJyArIGR4ICsgJ3B4LCcgKyBkeSArICdweCknO1xuXG5cdFx0XHRcdC8vIG9ubHkgc2V0IHRoZSBzdGF0dXMgdG8gZHJhZ2dpbmcsIHdoZW4gd2UgYXJlIGFjdHVhbGx5IGRyYWdnaW5nXG5cdFx0XHRcdGlmICghU29ydGFibGUuYWN0aXZlICYmICFhd2FpdGluZ0RyYWdTdGFydGVkKSB7XG5cdFx0XHRcdFx0aWYgKGZhbGxiYWNrVG9sZXJhbmNlICYmXG5cdFx0XHRcdFx0XHRtaW4oYWJzKHRvdWNoLmNsaWVudFggLSB0aGlzLl9sYXN0WCksIGFicyh0b3VjaC5jbGllbnRZIC0gdGhpcy5fbGFzdFkpKSA8IGZhbGxiYWNrVG9sZXJhbmNlXG5cdFx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRoaXMuX29uRHJhZ1N0YXJ0KGV2dCwgdHJ1ZSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQhZm9yQXV0b1Njcm9sbCAmJiB0aGlzLl9oYW5kbGVBdXRvU2Nyb2xsKHRvdWNoLCB0cnVlKTtcblxuXHRcdFx0XHRtb3ZlZCA9IHRydWU7XG5cdFx0XHRcdHRvdWNoRXZ0ID0gdG91Y2g7XG5cblx0XHRcdFx0X2NzcyhnaG9zdEVsLCAnd2Via2l0VHJhbnNmb3JtJywgdHJhbnNsYXRlM2QpO1xuXHRcdFx0XHRfY3NzKGdob3N0RWwsICdtb3pUcmFuc2Zvcm0nLCB0cmFuc2xhdGUzZCk7XG5cdFx0XHRcdF9jc3MoZ2hvc3RFbCwgJ21zVHJhbnNmb3JtJywgdHJhbnNsYXRlM2QpO1xuXHRcdFx0XHRfY3NzKGdob3N0RWwsICd0cmFuc2Zvcm0nLCB0cmFuc2xhdGUzZCk7XG5cblx0XHRcdFx0ZXZ0LmNhbmNlbGFibGUgJiYgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdF9hcHBlbmRHaG9zdDogZnVuY3Rpb24gKCkge1xuXHRcdFx0Ly8gQnVnIGlmIHVzaW5nIHNjYWxlKCk6IGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzI2MzcwNThcblx0XHRcdC8vIE5vdCBiZWluZyBhZGp1c3RlZCBmb3Jcblx0XHRcdGlmICghZ2hvc3RFbCkge1xuXHRcdFx0XHR2YXIgY29udGFpbmVyID0gdGhpcy5vcHRpb25zLmZhbGxiYWNrT25Cb2R5ID8gZG9jdW1lbnQuYm9keSA6IHJvb3RFbCxcblx0XHRcdFx0XHRyZWN0ID0gX2dldFJlY3QoZHJhZ0VsLCB0cnVlLCBjb250YWluZXIsICFQb3NpdGlvbkdob3N0QWJzb2x1dGVseSksXG5cdFx0XHRcdFx0Y3NzID0gX2NzcyhkcmFnRWwpLFxuXHRcdFx0XHRcdG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG5cblx0XHRcdFx0Ly8gUG9zaXRpb24gYWJzb2x1dGVseVxuXHRcdFx0XHRpZiAoUG9zaXRpb25HaG9zdEFic29sdXRlbHkpIHtcblx0XHRcdFx0XHQvLyBHZXQgcmVsYXRpdmVseSBwb3NpdGlvbmVkIHBhcmVudFxuXHRcdFx0XHRcdGdob3N0UmVsYXRpdmVQYXJlbnQgPSBjb250YWluZXI7XG5cblx0XHRcdFx0XHR3aGlsZSAoXG5cdFx0XHRcdFx0XHRfY3NzKGdob3N0UmVsYXRpdmVQYXJlbnQsICdwb3NpdGlvbicpID09PSAnc3RhdGljJyAmJlxuXHRcdFx0XHRcdFx0X2NzcyhnaG9zdFJlbGF0aXZlUGFyZW50LCAndHJhbnNmb3JtJykgPT09ICdub25lJyAmJlxuXHRcdFx0XHRcdFx0Z2hvc3RSZWxhdGl2ZVBhcmVudCAhPT0gZG9jdW1lbnRcblx0XHRcdFx0XHQpIHtcblx0XHRcdFx0XHRcdGdob3N0UmVsYXRpdmVQYXJlbnQgPSBnaG9zdFJlbGF0aXZlUGFyZW50LnBhcmVudE5vZGU7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKGdob3N0UmVsYXRpdmVQYXJlbnQgIT09IGRvY3VtZW50KSB7XG5cdFx0XHRcdFx0XHR2YXIgZ2hvc3RSZWxhdGl2ZVBhcmVudFJlY3QgPSBfZ2V0UmVjdChnaG9zdFJlbGF0aXZlUGFyZW50LCB0cnVlKTtcblxuXHRcdFx0XHRcdFx0cmVjdC50b3AgLT0gZ2hvc3RSZWxhdGl2ZVBhcmVudFJlY3QudG9wO1xuXHRcdFx0XHRcdFx0cmVjdC5sZWZ0IC09IGdob3N0UmVsYXRpdmVQYXJlbnRSZWN0LmxlZnQ7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKGdob3N0UmVsYXRpdmVQYXJlbnQgIT09IGRvY3VtZW50LmJvZHkgJiYgZ2hvc3RSZWxhdGl2ZVBhcmVudCAhPT0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSB7XG5cdFx0XHRcdFx0XHRpZiAoZ2hvc3RSZWxhdGl2ZVBhcmVudCA9PT0gZG9jdW1lbnQpIGdob3N0UmVsYXRpdmVQYXJlbnQgPSBfZ2V0V2luZG93U2Nyb2xsaW5nRWxlbWVudCgpO1xuXG5cdFx0XHRcdFx0XHRyZWN0LnRvcCArPSBnaG9zdFJlbGF0aXZlUGFyZW50LnNjcm9sbFRvcDtcblx0XHRcdFx0XHRcdHJlY3QubGVmdCArPSBnaG9zdFJlbGF0aXZlUGFyZW50LnNjcm9sbExlZnQ7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGdob3N0UmVsYXRpdmVQYXJlbnQgPSBfZ2V0V2luZG93U2Nyb2xsaW5nRWxlbWVudCgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRnaG9zdFJlbGF0aXZlUGFyZW50SW5pdGlhbFNjcm9sbCA9IF9nZXRSZWxhdGl2ZVNjcm9sbE9mZnNldChnaG9zdFJlbGF0aXZlUGFyZW50KTtcblx0XHRcdFx0fVxuXG5cblx0XHRcdFx0Z2hvc3RFbCA9IGRyYWdFbC5jbG9uZU5vZGUodHJ1ZSk7XG5cblx0XHRcdFx0X3RvZ2dsZUNsYXNzKGdob3N0RWwsIG9wdGlvbnMuZ2hvc3RDbGFzcywgZmFsc2UpO1xuXHRcdFx0XHRfdG9nZ2xlQ2xhc3MoZ2hvc3RFbCwgb3B0aW9ucy5mYWxsYmFja0NsYXNzLCB0cnVlKTtcblx0XHRcdFx0X3RvZ2dsZUNsYXNzKGdob3N0RWwsIG9wdGlvbnMuZHJhZ0NsYXNzLCB0cnVlKTtcblxuXHRcdFx0XHRfY3NzKGdob3N0RWwsICdib3gtc2l6aW5nJywgJ2JvcmRlci1ib3gnKTtcblx0XHRcdFx0X2NzcyhnaG9zdEVsLCAnbWFyZ2luJywgMCk7XG5cdFx0XHRcdF9jc3MoZ2hvc3RFbCwgJ3RvcCcsIHJlY3QudG9wKTtcblx0XHRcdFx0X2NzcyhnaG9zdEVsLCAnbGVmdCcsIHJlY3QubGVmdCk7XG5cdFx0XHRcdF9jc3MoZ2hvc3RFbCwgJ3dpZHRoJywgcmVjdC53aWR0aCk7XG5cdFx0XHRcdF9jc3MoZ2hvc3RFbCwgJ2hlaWdodCcsIHJlY3QuaGVpZ2h0KTtcblx0XHRcdFx0X2NzcyhnaG9zdEVsLCAnb3BhY2l0eScsICcwLjgnKTtcblx0XHRcdFx0X2NzcyhnaG9zdEVsLCAncG9zaXRpb24nLCAoUG9zaXRpb25HaG9zdEFic29sdXRlbHkgPyAnYWJzb2x1dGUnIDogJ2ZpeGVkJykpO1xuXHRcdFx0XHRfY3NzKGdob3N0RWwsICd6SW5kZXgnLCAnMTAwMDAwJyk7XG5cdFx0XHRcdF9jc3MoZ2hvc3RFbCwgJ3BvaW50ZXJFdmVudHMnLCAnbm9uZScpO1xuXG5cdFx0XHRcdGNvbnRhaW5lci5hcHBlbmRDaGlsZChnaG9zdEVsKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0X29uRHJhZ1N0YXJ0OiBmdW5jdGlvbiAoLyoqRXZlbnQqL2V2dCwgLyoqYm9vbGVhbiovZmFsbGJhY2spIHtcblx0XHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cdFx0XHR2YXIgZGF0YVRyYW5zZmVyID0gZXZ0LmRhdGFUcmFuc2Zlcjtcblx0XHRcdHZhciBvcHRpb25zID0gX3RoaXMub3B0aW9ucztcblxuXHRcdFx0Ly8gU2V0dXAgY2xvbmVcblx0XHRcdGNsb25lRWwgPSBfY2xvbmUoZHJhZ0VsKTtcblxuXHRcdFx0Y2xvbmVFbC5kcmFnZ2FibGUgPSBmYWxzZTtcblx0XHRcdGNsb25lRWwuc3R5bGVbJ3dpbGwtY2hhbmdlJ10gPSAnJztcblxuXHRcdFx0dGhpcy5faGlkZUNsb25lKCk7XG5cblx0XHRcdF90b2dnbGVDbGFzcyhjbG9uZUVsLCBfdGhpcy5vcHRpb25zLmNob3NlbkNsYXNzLCBmYWxzZSk7XG5cblxuXHRcdFx0Ly8gIzExNDM6IElGcmFtZSBzdXBwb3J0IHdvcmthcm91bmRcblx0XHRcdF90aGlzLl9jbG9uZUlkID0gX25leHRUaWNrKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0aWYgKCFfdGhpcy5vcHRpb25zLnJlbW92ZUNsb25lT25IaWRlKSB7XG5cdFx0XHRcdFx0cm9vdEVsLmluc2VydEJlZm9yZShjbG9uZUVsLCBkcmFnRWwpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdF9kaXNwYXRjaEV2ZW50KF90aGlzLCByb290RWwsICdjbG9uZScsIGRyYWdFbCk7XG5cdFx0XHR9KTtcblxuXG5cdFx0XHQhZmFsbGJhY2sgJiYgX3RvZ2dsZUNsYXNzKGRyYWdFbCwgb3B0aW9ucy5kcmFnQ2xhc3MsIHRydWUpO1xuXG5cdFx0XHQvLyBTZXQgcHJvcGVyIGRyb3AgZXZlbnRzXG5cdFx0XHRpZiAoZmFsbGJhY2spIHtcblx0XHRcdFx0aWdub3JlTmV4dENsaWNrID0gdHJ1ZTtcblx0XHRcdFx0X3RoaXMuX2xvb3BJZCA9IHNldEludGVydmFsKF90aGlzLl9lbXVsYXRlRHJhZ092ZXIsIDUwKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIFVuZG8gd2hhdCB3YXMgc2V0IGluIF9wcmVwYXJlRHJhZ1N0YXJ0IGJlZm9yZSBkcmFnIHN0YXJ0ZWRcblx0XHRcdFx0X29mZihkb2N1bWVudCwgJ21vdXNldXAnLCBfdGhpcy5fb25Ecm9wKTtcblx0XHRcdFx0X29mZihkb2N1bWVudCwgJ3RvdWNoZW5kJywgX3RoaXMuX29uRHJvcCk7XG5cdFx0XHRcdF9vZmYoZG9jdW1lbnQsICd0b3VjaGNhbmNlbCcsIF90aGlzLl9vbkRyb3ApO1xuXG5cdFx0XHRcdGlmIChkYXRhVHJhbnNmZXIpIHtcblx0XHRcdFx0XHRkYXRhVHJhbnNmZXIuZWZmZWN0QWxsb3dlZCA9ICdtb3ZlJztcblx0XHRcdFx0XHRvcHRpb25zLnNldERhdGEgJiYgb3B0aW9ucy5zZXREYXRhLmNhbGwoX3RoaXMsIGRhdGFUcmFuc2ZlciwgZHJhZ0VsKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdF9vbihkb2N1bWVudCwgJ2Ryb3AnLCBfdGhpcyk7XG5cblx0XHRcdFx0Ly8gIzEyNzYgZml4OlxuXHRcdFx0XHRfY3NzKGRyYWdFbCwgJ3RyYW5zZm9ybScsICd0cmFuc2xhdGVaKDApJyk7XG5cdFx0XHR9XG5cblx0XHRcdGF3YWl0aW5nRHJhZ1N0YXJ0ZWQgPSB0cnVlO1xuXG5cdFx0XHRfdGhpcy5fZHJhZ1N0YXJ0SWQgPSBfbmV4dFRpY2soX3RoaXMuX2RyYWdTdGFydGVkLmJpbmQoX3RoaXMsIGZhbGxiYWNrLCBldnQpKTtcblx0XHRcdF9vbihkb2N1bWVudCwgJ3NlbGVjdHN0YXJ0JywgX3RoaXMpO1xuXHRcdFx0aWYgKFNhZmFyaSkge1xuXHRcdFx0XHRfY3NzKGRvY3VtZW50LmJvZHksICd1c2VyLXNlbGVjdCcsICdub25lJyk7XG5cdFx0XHR9XG5cdFx0fSxcblxuXG5cdFx0Ly8gUmV0dXJucyB0cnVlIC0gaWYgbm8gZnVydGhlciBhY3Rpb24gaXMgbmVlZGVkIChlaXRoZXIgaW5zZXJ0ZWQgb3IgYW5vdGhlciBjb25kaXRpb24pXG5cdFx0X29uRHJhZ092ZXI6IGZ1bmN0aW9uICgvKipFdmVudCovZXZ0KSB7XG5cdFx0XHR2YXIgZWwgPSB0aGlzLmVsLFxuXHRcdFx0XHR0YXJnZXQgPSBldnQudGFyZ2V0LFxuXHRcdFx0XHRkcmFnUmVjdCxcblx0XHRcdFx0dGFyZ2V0UmVjdCxcblx0XHRcdFx0cmV2ZXJ0LFxuXHRcdFx0XHRvcHRpb25zID0gdGhpcy5vcHRpb25zLFxuXHRcdFx0XHRncm91cCA9IG9wdGlvbnMuZ3JvdXAsXG5cdFx0XHRcdGFjdGl2ZVNvcnRhYmxlID0gU29ydGFibGUuYWN0aXZlLFxuXHRcdFx0XHRpc093bmVyID0gKGFjdGl2ZUdyb3VwID09PSBncm91cCksXG5cdFx0XHRcdGNhblNvcnQgPSBvcHRpb25zLnNvcnQsXG5cdFx0XHRcdF90aGlzID0gdGhpcztcblxuXHRcdFx0aWYgKF9zaWxlbnQpIHJldHVybjtcblxuXHRcdFx0Ly8gSUUgZXZlbnQgb3JkZXIgZml4XG5cdFx0XHRpZiAoSUUxMU9yTGVzcyAmJiAhZXZ0LnJvb3RFbCAmJiAhZXZ0LmFydGlmaWNpYWxCdWJibGUgJiYgIV9pc1RydWVQYXJlbnRTb3J0YWJsZShlbCwgdGFyZ2V0KSkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIFJldHVybiBpbnZvY2F0aW9uIHdoZW4gZHJhZ0VsIGlzIGluc2VydGVkIChvciBjb21wbGV0ZWQpXG5cdFx0XHRmdW5jdGlvbiBjb21wbGV0ZWQoaW5zZXJ0aW9uKSB7XG5cdFx0XHRcdGlmIChpbnNlcnRpb24pIHtcblx0XHRcdFx0XHRpZiAoaXNPd25lcikge1xuXHRcdFx0XHRcdFx0YWN0aXZlU29ydGFibGUuX2hpZGVDbG9uZSgpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRhY3RpdmVTb3J0YWJsZS5fc2hvd0Nsb25lKF90aGlzKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoYWN0aXZlU29ydGFibGUpIHtcblx0XHRcdFx0XHRcdC8vIFNldCBnaG9zdCBjbGFzcyB0byBuZXcgc29ydGFibGUncyBnaG9zdCBjbGFzc1xuXHRcdFx0XHRcdFx0X3RvZ2dsZUNsYXNzKGRyYWdFbCwgcHV0U29ydGFibGUgPyBwdXRTb3J0YWJsZS5vcHRpb25zLmdob3N0Q2xhc3MgOiBhY3RpdmVTb3J0YWJsZS5vcHRpb25zLmdob3N0Q2xhc3MsIGZhbHNlKTtcblx0XHRcdFx0XHRcdF90b2dnbGVDbGFzcyhkcmFnRWwsIG9wdGlvbnMuZ2hvc3RDbGFzcywgdHJ1ZSk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKHB1dFNvcnRhYmxlICE9PSBfdGhpcyAmJiBfdGhpcyAhPT0gU29ydGFibGUuYWN0aXZlKSB7XG5cdFx0XHRcdFx0XHRwdXRTb3J0YWJsZSA9IF90aGlzO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoX3RoaXMgPT09IFNvcnRhYmxlLmFjdGl2ZSkge1xuXHRcdFx0XHRcdFx0cHV0U29ydGFibGUgPSBudWxsO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIEFuaW1hdGlvblxuXHRcdFx0XHRcdGRyYWdSZWN0ICYmIF90aGlzLl9hbmltYXRlKGRyYWdSZWN0LCBkcmFnRWwpO1xuXHRcdFx0XHRcdHRhcmdldCAmJiB0YXJnZXRSZWN0ICYmIF90aGlzLl9hbmltYXRlKHRhcmdldFJlY3QsIHRhcmdldCk7XG5cdFx0XHRcdH1cblxuXG5cdFx0XHRcdC8vIE51bGwgbGFzdFRhcmdldCBpZiBpdCBpcyBub3QgaW5zaWRlIGEgcHJldmlvdXNseSBzd2FwcGVkIGVsZW1lbnRcblx0XHRcdFx0aWYgKCh0YXJnZXQgPT09IGRyYWdFbCAmJiAhZHJhZ0VsLmFuaW1hdGVkKSB8fCAodGFyZ2V0ID09PSBlbCAmJiAhdGFyZ2V0LmFuaW1hdGVkKSkge1xuXHRcdFx0XHRcdGxhc3RUYXJnZXQgPSBudWxsO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIG5vIGJ1YmJsaW5nIGFuZCBub3QgZmFsbGJhY2tcblx0XHRcdFx0aWYgKCFvcHRpb25zLmRyYWdvdmVyQnViYmxlICYmICFldnQucm9vdEVsICYmIHRhcmdldCAhPT0gZG9jdW1lbnQpIHtcblx0XHRcdFx0XHRfdGhpcy5faGFuZGxlQXV0b1Njcm9sbChldnQpO1xuXHRcdFx0XHRcdGRyYWdFbC5wYXJlbnROb2RlW2V4cGFuZG9dLl9jb21wdXRlSXNBbGlnbmVkKGV2dCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQhb3B0aW9ucy5kcmFnb3ZlckJ1YmJsZSAmJiBldnQuc3RvcFByb3BhZ2F0aW9uICYmIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcblxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ2FsbCB3aGVuIGRyYWdFbCBoYXMgYmVlbiBpbnNlcnRlZFxuXHRcdFx0ZnVuY3Rpb24gY2hhbmdlZCgpIHtcblx0XHRcdFx0X2Rpc3BhdGNoRXZlbnQoX3RoaXMsIHJvb3RFbCwgJ2NoYW5nZScsIHRhcmdldCwgZWwsIHJvb3RFbCwgb2xkSW5kZXgsIF9pbmRleChkcmFnRWwsIG9wdGlvbnMuZHJhZ2dhYmxlKSwgZXZ0KTtcblx0XHRcdH1cblxuXG5cdFx0XHRpZiAoZXZ0LnByZXZlbnREZWZhdWx0ICE9PSB2b2lkIDApIHtcblx0XHRcdFx0ZXZ0LmNhbmNlbGFibGUgJiYgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR9XG5cblxuXHRcdFx0bW92ZWQgPSB0cnVlO1xuXG5cdFx0XHR0YXJnZXQgPSBfY2xvc2VzdCh0YXJnZXQsIG9wdGlvbnMuZHJhZ2dhYmxlLCBlbCwgdHJ1ZSk7XG5cblx0XHRcdC8vIHRhcmdldCBpcyBkcmFnRWwgb3IgdGFyZ2V0IGlzIGFuaW1hdGVkXG5cdFx0XHRpZiAoISFfY2xvc2VzdChldnQudGFyZ2V0LCBudWxsLCBkcmFnRWwsIHRydWUpIHx8IHRhcmdldC5hbmltYXRlZCkge1xuXHRcdFx0XHRyZXR1cm4gY29tcGxldGVkKGZhbHNlKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKHRhcmdldCAhPT0gZHJhZ0VsKSB7XG5cdFx0XHRcdGlnbm9yZU5leHRDbGljayA9IGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoYWN0aXZlU29ydGFibGUgJiYgIW9wdGlvbnMuZGlzYWJsZWQgJiZcblx0XHRcdFx0KGlzT3duZXJcblx0XHRcdFx0XHQ/IGNhblNvcnQgfHwgKHJldmVydCA9ICFyb290RWwuY29udGFpbnMoZHJhZ0VsKSkgLy8gUmV2ZXJ0aW5nIGl0ZW0gaW50byB0aGUgb3JpZ2luYWwgbGlzdFxuXHRcdFx0XHRcdDogKFxuXHRcdFx0XHRcdFx0cHV0U29ydGFibGUgPT09IHRoaXMgfHxcblx0XHRcdFx0XHRcdChcblx0XHRcdFx0XHRcdFx0KHRoaXMubGFzdFB1dE1vZGUgPSBhY3RpdmVHcm91cC5jaGVja1B1bGwodGhpcywgYWN0aXZlU29ydGFibGUsIGRyYWdFbCwgZXZ0KSkgJiZcblx0XHRcdFx0XHRcdFx0Z3JvdXAuY2hlY2tQdXQodGhpcywgYWN0aXZlU29ydGFibGUsIGRyYWdFbCwgZXZ0KVxuXHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdClcblx0XHRcdFx0KVxuXHRcdFx0KSB7XG5cdFx0XHRcdHZhciBheGlzID0gdGhpcy5fZ2V0RGlyZWN0aW9uKGV2dCwgdGFyZ2V0KTtcblxuXHRcdFx0XHRkcmFnUmVjdCA9IF9nZXRSZWN0KGRyYWdFbCk7XG5cblx0XHRcdFx0aWYgKHJldmVydCkge1xuXHRcdFx0XHRcdHRoaXMuX2hpZGVDbG9uZSgpO1xuXHRcdFx0XHRcdHBhcmVudEVsID0gcm9vdEVsOyAvLyBhY3R1YWxpemF0aW9uXG5cblx0XHRcdFx0XHRpZiAobmV4dEVsKSB7XG5cdFx0XHRcdFx0XHRyb290RWwuaW5zZXJ0QmVmb3JlKGRyYWdFbCwgbmV4dEVsKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cm9vdEVsLmFwcGVuZENoaWxkKGRyYWdFbCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIGNvbXBsZXRlZCh0cnVlKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHZhciBlbExhc3RDaGlsZCA9IF9sYXN0Q2hpbGQoZWwpO1xuXG5cdFx0XHRcdGlmICghZWxMYXN0Q2hpbGQgfHwgX2dob3N0SXNMYXN0KGV2dCwgYXhpcywgZWwpICYmICFlbExhc3RDaGlsZC5hbmltYXRlZCkge1xuXHRcdFx0XHRcdC8vIGFzc2lnbiB0YXJnZXQgb25seSBpZiBjb25kaXRpb24gaXMgdHJ1ZVxuXHRcdFx0XHRcdGlmIChlbExhc3RDaGlsZCAmJiBlbCA9PT0gZXZ0LnRhcmdldCkge1xuXHRcdFx0XHRcdFx0dGFyZ2V0ID0gZWxMYXN0Q2hpbGQ7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKHRhcmdldCkge1xuXHRcdFx0XHRcdFx0dGFyZ2V0UmVjdCA9IF9nZXRSZWN0KHRhcmdldCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKGlzT3duZXIpIHtcblx0XHRcdFx0XHRcdGFjdGl2ZVNvcnRhYmxlLl9oaWRlQ2xvbmUoKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0YWN0aXZlU29ydGFibGUuX3Nob3dDbG9uZSh0aGlzKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoX29uTW92ZShyb290RWwsIGVsLCBkcmFnRWwsIGRyYWdSZWN0LCB0YXJnZXQsIHRhcmdldFJlY3QsIGV2dCwgISF0YXJnZXQpICE9PSBmYWxzZSkge1xuXHRcdFx0XHRcdFx0ZWwuYXBwZW5kQ2hpbGQoZHJhZ0VsKTtcblx0XHRcdFx0XHRcdHBhcmVudEVsID0gZWw7IC8vIGFjdHVhbGl6YXRpb25cblx0XHRcdFx0XHRcdHJlYWxEcmFnRWxSZWN0ID0gbnVsbDtcblxuXHRcdFx0XHRcdFx0Y2hhbmdlZCgpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGNvbXBsZXRlZCh0cnVlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSBpZiAodGFyZ2V0ICYmIHRhcmdldCAhPT0gZHJhZ0VsICYmIHRhcmdldC5wYXJlbnROb2RlID09PSBlbCkge1xuXHRcdFx0XHRcdHZhciBkaXJlY3Rpb24gPSAwLFxuXHRcdFx0XHRcdFx0dGFyZ2V0QmVmb3JlRmlyc3RTd2FwLFxuXHRcdFx0XHRcdFx0YWxpZ25lZCA9IHRhcmdldC5zb3J0YWJsZU1vdXNlQWxpZ25lZCxcblx0XHRcdFx0XHRcdGRpZmZlcmVudExldmVsID0gZHJhZ0VsLnBhcmVudE5vZGUgIT09IGVsLFxuXHRcdFx0XHRcdFx0c2lkZTEgPSBheGlzID09PSAndmVydGljYWwnID8gJ3RvcCcgOiAnbGVmdCcsXG5cdFx0XHRcdFx0XHRzY3JvbGxlZFBhc3RUb3AgPSBfaXNTY3JvbGxlZFBhc3QodGFyZ2V0LCAndG9wJykgfHwgX2lzU2Nyb2xsZWRQYXN0KGRyYWdFbCwgJ3RvcCcpLFxuXHRcdFx0XHRcdFx0c2Nyb2xsQmVmb3JlID0gc2Nyb2xsZWRQYXN0VG9wID8gc2Nyb2xsZWRQYXN0VG9wLnNjcm9sbFRvcCA6IHZvaWQgMDtcblxuXG5cdFx0XHRcdFx0aWYgKGxhc3RUYXJnZXQgIT09IHRhcmdldCkge1xuXHRcdFx0XHRcdFx0bGFzdE1vZGUgPSBudWxsO1xuXHRcdFx0XHRcdFx0dGFyZ2V0QmVmb3JlRmlyc3RTd2FwID0gX2dldFJlY3QodGFyZ2V0KVtzaWRlMV07XG5cdFx0XHRcdFx0XHRwYXN0Rmlyc3RJbnZlcnRUaHJlc2ggPSBmYWxzZTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBSZWZlcmVuY2U6IGh0dHBzOi8vd3d3Lmx1Y2lkY2hhcnQuY29tL2RvY3VtZW50cy92aWV3LzEwZmEwZTkzLWUzNjItNDEyNi1hY2EyLWI3MDllZTU2YmQ4Yi8wXG5cdFx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdFx0X2lzRWxJblJvd0NvbHVtbihkcmFnRWwsIHRhcmdldCwgYXhpcykgJiYgYWxpZ25lZCB8fFxuXHRcdFx0XHRcdFx0ZGlmZmVyZW50TGV2ZWwgfHxcblx0XHRcdFx0XHRcdHNjcm9sbGVkUGFzdFRvcCB8fFxuXHRcdFx0XHRcdFx0b3B0aW9ucy5pbnZlcnRTd2FwIHx8XG5cdFx0XHRcdFx0XHRsYXN0TW9kZSA9PT0gJ2luc2VydCcgfHxcblx0XHRcdFx0XHRcdC8vIE5lZWRlZCwgaW4gdGhlIGNhc2UgdGhhdCB3ZSBhcmUgaW5zaWRlIHRhcmdldCBhbmQgaW5zZXJ0ZWQgYmVjYXVzZSBub3QgYWxpZ25lZC4uLiBhbGlnbmVkIHdpbGwgc3RheSBmYWxzZSB3aGlsZSBpbnNpZGVcblx0XHRcdFx0XHRcdC8vIGFuZCBsYXN0TW9kZSB3aWxsIGNoYW5nZSB0byAnaW5zZXJ0JywgYnV0IHdlIG11c3Qgc3dhcFxuXHRcdFx0XHRcdFx0bGFzdE1vZGUgPT09ICdzd2FwJ1xuXHRcdFx0XHRcdCkge1xuXHRcdFx0XHRcdFx0Ly8gTmV3IHRhcmdldCB0aGF0IHdlIHdpbGwgYmUgaW5zaWRlXG5cdFx0XHRcdFx0XHRpZiAobGFzdE1vZGUgIT09ICdzd2FwJykge1xuXHRcdFx0XHRcdFx0XHRpc0NpcmN1bXN0YW50aWFsSW52ZXJ0ID0gb3B0aW9ucy5pbnZlcnRTd2FwIHx8IGRpZmZlcmVudExldmVsO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRkaXJlY3Rpb24gPSBfZ2V0U3dhcERpcmVjdGlvbihldnQsIHRhcmdldCwgYXhpcyxcblx0XHRcdFx0XHRcdFx0b3B0aW9ucy5zd2FwVGhyZXNob2xkLCBvcHRpb25zLmludmVydGVkU3dhcFRocmVzaG9sZCA9PSBudWxsID8gb3B0aW9ucy5zd2FwVGhyZXNob2xkIDogb3B0aW9ucy5pbnZlcnRlZFN3YXBUaHJlc2hvbGQsXG5cdFx0XHRcdFx0XHRcdGlzQ2lyY3Vtc3RhbnRpYWxJbnZlcnQsXG5cdFx0XHRcdFx0XHRcdGxhc3RUYXJnZXQgPT09IHRhcmdldCk7XG5cdFx0XHRcdFx0XHRsYXN0TW9kZSA9ICdzd2FwJztcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Ly8gSW5zZXJ0IGF0IHBvc2l0aW9uXG5cdFx0XHRcdFx0XHRkaXJlY3Rpb24gPSBfZ2V0SW5zZXJ0RGlyZWN0aW9uKHRhcmdldCk7XG5cdFx0XHRcdFx0XHRsYXN0TW9kZSA9ICdpbnNlcnQnO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoZGlyZWN0aW9uID09PSAwKSByZXR1cm4gY29tcGxldGVkKGZhbHNlKTtcblxuXHRcdFx0XHRcdHJlYWxEcmFnRWxSZWN0ID0gbnVsbDtcblx0XHRcdFx0XHRsYXN0VGFyZ2V0ID0gdGFyZ2V0O1xuXG5cdFx0XHRcdFx0bGFzdERpcmVjdGlvbiA9IGRpcmVjdGlvbjtcblxuXHRcdFx0XHRcdHRhcmdldFJlY3QgPSBfZ2V0UmVjdCh0YXJnZXQpO1xuXG5cdFx0XHRcdFx0dmFyIG5leHRTaWJsaW5nID0gdGFyZ2V0Lm5leHRFbGVtZW50U2libGluZyxcblx0XHRcdFx0XHRcdGFmdGVyID0gZmFsc2U7XG5cblx0XHRcdFx0XHRhZnRlciA9IGRpcmVjdGlvbiA9PT0gMTtcblxuXHRcdFx0XHRcdHZhciBtb3ZlVmVjdG9yID0gX29uTW92ZShyb290RWwsIGVsLCBkcmFnRWwsIGRyYWdSZWN0LCB0YXJnZXQsIHRhcmdldFJlY3QsIGV2dCwgYWZ0ZXIpO1xuXG5cdFx0XHRcdFx0aWYgKG1vdmVWZWN0b3IgIT09IGZhbHNlKSB7XG5cdFx0XHRcdFx0XHRpZiAobW92ZVZlY3RvciA9PT0gMSB8fCBtb3ZlVmVjdG9yID09PSAtMSkge1xuXHRcdFx0XHRcdFx0XHRhZnRlciA9IChtb3ZlVmVjdG9yID09PSAxKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0X3NpbGVudCA9IHRydWU7XG5cdFx0XHRcdFx0XHRzZXRUaW1lb3V0KF91bnNpbGVudCwgMzApO1xuXG5cdFx0XHRcdFx0XHRpZiAoaXNPd25lcikge1xuXHRcdFx0XHRcdFx0XHRhY3RpdmVTb3J0YWJsZS5faGlkZUNsb25lKCk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRhY3RpdmVTb3J0YWJsZS5fc2hvd0Nsb25lKHRoaXMpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRpZiAoYWZ0ZXIgJiYgIW5leHRTaWJsaW5nKSB7XG5cdFx0XHRcdFx0XHRcdGVsLmFwcGVuZENoaWxkKGRyYWdFbCk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHR0YXJnZXQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZHJhZ0VsLCBhZnRlciA/IG5leHRTaWJsaW5nIDogdGFyZ2V0KTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gVW5kbyBjaHJvbWUncyBzY3JvbGwgYWRqdXN0bWVudFxuXHRcdFx0XHRcdFx0aWYgKHNjcm9sbGVkUGFzdFRvcCkge1xuXHRcdFx0XHRcdFx0XHRfc2Nyb2xsQnkoc2Nyb2xsZWRQYXN0VG9wLCAwLCBzY3JvbGxCZWZvcmUgLSBzY3JvbGxlZFBhc3RUb3Auc2Nyb2xsVG9wKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0cGFyZW50RWwgPSBkcmFnRWwucGFyZW50Tm9kZTsgLy8gYWN0dWFsaXphdGlvblxuXG5cdFx0XHRcdFx0XHQvLyBtdXN0IGJlIGRvbmUgYmVmb3JlIGFuaW1hdGlvblxuXHRcdFx0XHRcdFx0aWYgKHRhcmdldEJlZm9yZUZpcnN0U3dhcCAhPT0gdW5kZWZpbmVkICYmICFpc0NpcmN1bXN0YW50aWFsSW52ZXJ0KSB7XG5cdFx0XHRcdFx0XHRcdHRhcmdldE1vdmVEaXN0YW5jZSA9IGFicyh0YXJnZXRCZWZvcmVGaXJzdFN3YXAgLSBfZ2V0UmVjdCh0YXJnZXQpW3NpZGUxXSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRjaGFuZ2VkKCk7XG5cblx0XHRcdFx0XHRcdHJldHVybiBjb21wbGV0ZWQodHJ1ZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGVsLmNvbnRhaW5zKGRyYWdFbCkpIHtcblx0XHRcdFx0XHRyZXR1cm4gY29tcGxldGVkKGZhbHNlKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoSUUxMU9yTGVzcyAmJiAhZXZ0LnJvb3RFbCkge1xuXHRcdFx0XHRfYXJ0aWZpY2FsQnViYmxlKGVsLCBldnQsICdfb25EcmFnT3ZlcicpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fSxcblxuXHRcdF9hbmltYXRlOiBmdW5jdGlvbiAocHJldlJlY3QsIHRhcmdldCkge1xuXHRcdFx0dmFyIG1zID0gdGhpcy5vcHRpb25zLmFuaW1hdGlvbjtcblxuXHRcdFx0aWYgKG1zKSB7XG5cdFx0XHRcdHZhciBjdXJyZW50UmVjdCA9IF9nZXRSZWN0KHRhcmdldCk7XG5cblx0XHRcdFx0aWYgKHRhcmdldCA9PT0gZHJhZ0VsKSB7XG5cdFx0XHRcdFx0cmVhbERyYWdFbFJlY3QgPSBjdXJyZW50UmVjdDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChwcmV2UmVjdC5ub2RlVHlwZSA9PT0gMSkge1xuXHRcdFx0XHRcdHByZXZSZWN0ID0gX2dldFJlY3QocHJldlJlY3QpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQ2hlY2sgaWYgYWN0dWFsbHkgbW92aW5nIHBvc2l0aW9uXG5cdFx0XHRcdGlmICgocHJldlJlY3QubGVmdCArIHByZXZSZWN0LndpZHRoIC8gMikgIT09IChjdXJyZW50UmVjdC5sZWZ0ICsgY3VycmVudFJlY3Qud2lkdGggLyAyKVxuXHRcdFx0XHRcdHx8IChwcmV2UmVjdC50b3AgKyBwcmV2UmVjdC5oZWlnaHQgLyAyKSAhPT0gKGN1cnJlbnRSZWN0LnRvcCArIGN1cnJlbnRSZWN0LmhlaWdodCAvIDIpXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdHZhciBtYXRyaXggPSBfbWF0cml4KHRoaXMuZWwpLFxuXHRcdFx0XHRcdFx0c2NhbGVYID0gbWF0cml4ICYmIG1hdHJpeC5hLFxuXHRcdFx0XHRcdFx0c2NhbGVZID0gbWF0cml4ICYmIG1hdHJpeC5kO1xuXG5cdFx0XHRcdFx0X2Nzcyh0YXJnZXQsICd0cmFuc2l0aW9uJywgJ25vbmUnKTtcblx0XHRcdFx0XHRfY3NzKHRhcmdldCwgJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUzZCgnXG5cdFx0XHRcdFx0XHQrIChwcmV2UmVjdC5sZWZ0IC0gY3VycmVudFJlY3QubGVmdCkgLyAoc2NhbGVYID8gc2NhbGVYIDogMSkgKyAncHgsJ1xuXHRcdFx0XHRcdFx0KyAocHJldlJlY3QudG9wIC0gY3VycmVudFJlY3QudG9wKSAvIChzY2FsZVkgPyBzY2FsZVkgOiAxKSArICdweCwwKSdcblx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdFx0Zm9yUmVwYWludER1bW15ID0gdGFyZ2V0Lm9mZnNldFdpZHRoOyAvLyByZXBhaW50XG5cdFx0XHRcdFx0X2Nzcyh0YXJnZXQsICd0cmFuc2l0aW9uJywgJ3RyYW5zZm9ybSAnICsgbXMgKyAnbXMnICsgKHRoaXMub3B0aW9ucy5lYXNpbmcgPyAnICcgKyB0aGlzLm9wdGlvbnMuZWFzaW5nIDogJycpKTtcblx0XHRcdFx0XHRfY3NzKHRhcmdldCwgJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUzZCgwLDAsMCknKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdCh0eXBlb2YgdGFyZ2V0LmFuaW1hdGVkID09PSAnbnVtYmVyJykgJiYgY2xlYXJUaW1lb3V0KHRhcmdldC5hbmltYXRlZCk7XG5cdFx0XHRcdHRhcmdldC5hbmltYXRlZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdF9jc3ModGFyZ2V0LCAndHJhbnNpdGlvbicsICcnKTtcblx0XHRcdFx0XHRfY3NzKHRhcmdldCwgJ3RyYW5zZm9ybScsICcnKTtcblx0XHRcdFx0XHR0YXJnZXQuYW5pbWF0ZWQgPSBmYWxzZTtcblx0XHRcdFx0fSwgbXMpO1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHRfb2ZmVXBFdmVudHM6IGZ1bmN0aW9uICgpIHtcblx0XHRcdHZhciBvd25lckRvY3VtZW50ID0gdGhpcy5lbC5vd25lckRvY3VtZW50O1xuXG5cdFx0XHRfb2ZmKGRvY3VtZW50LCAndG91Y2htb3ZlJywgdGhpcy5fb25Ub3VjaE1vdmUpO1xuXHRcdFx0X29mZihkb2N1bWVudCwgJ3BvaW50ZXJtb3ZlJywgdGhpcy5fb25Ub3VjaE1vdmUpO1xuXHRcdFx0X29mZihvd25lckRvY3VtZW50LCAnbW91c2V1cCcsIHRoaXMuX29uRHJvcCk7XG5cdFx0XHRfb2ZmKG93bmVyRG9jdW1lbnQsICd0b3VjaGVuZCcsIHRoaXMuX29uRHJvcCk7XG5cdFx0XHRfb2ZmKG93bmVyRG9jdW1lbnQsICdwb2ludGVydXAnLCB0aGlzLl9vbkRyb3ApO1xuXHRcdFx0X29mZihvd25lckRvY3VtZW50LCAndG91Y2hjYW5jZWwnLCB0aGlzLl9vbkRyb3ApO1xuXHRcdFx0X29mZihkb2N1bWVudCwgJ3NlbGVjdHN0YXJ0JywgdGhpcyk7XG5cdFx0fSxcblxuXHRcdF9vbkRyb3A6IGZ1bmN0aW9uICgvKipFdmVudCovZXZ0KSB7XG5cdFx0XHR2YXIgZWwgPSB0aGlzLmVsLFxuXHRcdFx0XHRvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuXHRcdFx0YXdhaXRpbmdEcmFnU3RhcnRlZCA9IGZhbHNlO1xuXHRcdFx0c2Nyb2xsaW5nID0gZmFsc2U7XG5cdFx0XHRpc0NpcmN1bXN0YW50aWFsSW52ZXJ0ID0gZmFsc2U7XG5cdFx0XHRwYXN0Rmlyc3RJbnZlcnRUaHJlc2ggPSBmYWxzZTtcblxuXHRcdFx0Y2xlYXJJbnRlcnZhbCh0aGlzLl9sb29wSWQpO1xuXG5cdFx0XHRjbGVhckludGVydmFsKHBvaW50ZXJFbGVtQ2hhbmdlZEludGVydmFsKTtcblx0XHRcdF9jbGVhckF1dG9TY3JvbGxzKCk7XG5cdFx0XHRfY2FuY2VsVGhyb3R0bGUoKTtcblxuXHRcdFx0Y2xlYXJUaW1lb3V0KHRoaXMuX2RyYWdTdGFydFRpbWVyKTtcblxuXHRcdFx0X2NhbmNlbE5leHRUaWNrKHRoaXMuX2Nsb25lSWQpO1xuXHRcdFx0X2NhbmNlbE5leHRUaWNrKHRoaXMuX2RyYWdTdGFydElkKTtcblxuXHRcdFx0Ly8gVW5iaW5kIGV2ZW50c1xuXHRcdFx0X29mZihkb2N1bWVudCwgJ21vdXNlbW92ZScsIHRoaXMuX29uVG91Y2hNb3ZlKTtcblxuXG5cdFx0XHRpZiAodGhpcy5uYXRpdmVEcmFnZ2FibGUpIHtcblx0XHRcdFx0X29mZihkb2N1bWVudCwgJ2Ryb3AnLCB0aGlzKTtcblx0XHRcdFx0X29mZihlbCwgJ2RyYWdzdGFydCcsIHRoaXMuX29uRHJhZ1N0YXJ0KTtcblx0XHRcdFx0X29mZihkb2N1bWVudCwgJ2RyYWdvdmVyJywgdGhpcy5faGFuZGxlQXV0b1Njcm9sbCk7XG5cdFx0XHRcdF9vZmYoZG9jdW1lbnQsICdkcmFnb3ZlcicsIF9jaGVja0FsaWdubWVudCk7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChTYWZhcmkpIHtcblx0XHRcdFx0X2Nzcyhkb2N1bWVudC5ib2R5LCAndXNlci1zZWxlY3QnLCAnJyk7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuX29mZlVwRXZlbnRzKCk7XG5cblx0XHRcdGlmIChldnQpIHtcblx0XHRcdFx0aWYgKG1vdmVkKSB7XG5cdFx0XHRcdFx0ZXZ0LmNhbmNlbGFibGUgJiYgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0IW9wdGlvbnMuZHJvcEJ1YmJsZSAmJiBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRnaG9zdEVsICYmIGdob3N0RWwucGFyZW50Tm9kZSAmJiBnaG9zdEVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZ2hvc3RFbCk7XG5cblx0XHRcdFx0aWYgKHJvb3RFbCA9PT0gcGFyZW50RWwgfHwgKHB1dFNvcnRhYmxlICYmIHB1dFNvcnRhYmxlLmxhc3RQdXRNb2RlICE9PSAnY2xvbmUnKSkge1xuXHRcdFx0XHRcdC8vIFJlbW92ZSBjbG9uZVxuXHRcdFx0XHRcdGNsb25lRWwgJiYgY2xvbmVFbC5wYXJlbnROb2RlICYmIGNsb25lRWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjbG9uZUVsKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChkcmFnRWwpIHtcblx0XHRcdFx0XHRpZiAodGhpcy5uYXRpdmVEcmFnZ2FibGUpIHtcblx0XHRcdFx0XHRcdF9vZmYoZHJhZ0VsLCAnZHJhZ2VuZCcsIHRoaXMpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdF9kaXNhYmxlRHJhZ2dhYmxlKGRyYWdFbCk7XG5cdFx0XHRcdFx0ZHJhZ0VsLnN0eWxlWyd3aWxsLWNoYW5nZSddID0gJyc7XG5cblx0XHRcdFx0XHQvLyBSZW1vdmUgY2xhc3Mnc1xuXHRcdFx0XHRcdF90b2dnbGVDbGFzcyhkcmFnRWwsIHB1dFNvcnRhYmxlID8gcHV0U29ydGFibGUub3B0aW9ucy5naG9zdENsYXNzIDogdGhpcy5vcHRpb25zLmdob3N0Q2xhc3MsIGZhbHNlKTtcblx0XHRcdFx0XHRfdG9nZ2xlQ2xhc3MoZHJhZ0VsLCB0aGlzLm9wdGlvbnMuY2hvc2VuQ2xhc3MsIGZhbHNlKTtcblxuXHRcdFx0XHRcdC8vIERyYWcgc3RvcCBldmVudFxuXHRcdFx0XHRcdF9kaXNwYXRjaEV2ZW50KHRoaXMsIHJvb3RFbCwgJ3VuY2hvb3NlJywgZHJhZ0VsLCBwYXJlbnRFbCwgcm9vdEVsLCBvbGRJbmRleCwgbnVsbCwgZXZ0KTtcblxuXHRcdFx0XHRcdGlmIChyb290RWwgIT09IHBhcmVudEVsKSB7XG5cdFx0XHRcdFx0XHRuZXdJbmRleCA9IF9pbmRleChkcmFnRWwsIG9wdGlvbnMuZHJhZ2dhYmxlKTtcblxuXHRcdFx0XHRcdFx0aWYgKG5ld0luZGV4ID49IDApIHtcblx0XHRcdFx0XHRcdFx0Ly8gQWRkIGV2ZW50XG5cdFx0XHRcdFx0XHRcdF9kaXNwYXRjaEV2ZW50KG51bGwsIHBhcmVudEVsLCAnYWRkJywgZHJhZ0VsLCBwYXJlbnRFbCwgcm9vdEVsLCBvbGRJbmRleCwgbmV3SW5kZXgsIGV2dCk7XG5cblx0XHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIGV2ZW50XG5cdFx0XHRcdFx0XHRcdF9kaXNwYXRjaEV2ZW50KHRoaXMsIHJvb3RFbCwgJ3JlbW92ZScsIGRyYWdFbCwgcGFyZW50RWwsIHJvb3RFbCwgb2xkSW5kZXgsIG5ld0luZGV4LCBldnQpO1xuXG5cdFx0XHRcdFx0XHRcdC8vIGRyYWcgZnJvbSBvbmUgbGlzdCBhbmQgZHJvcCBpbnRvIGFub3RoZXJcblx0XHRcdFx0XHRcdFx0X2Rpc3BhdGNoRXZlbnQobnVsbCwgcGFyZW50RWwsICdzb3J0JywgZHJhZ0VsLCBwYXJlbnRFbCwgcm9vdEVsLCBvbGRJbmRleCwgbmV3SW5kZXgsIGV2dCk7XG5cdFx0XHRcdFx0XHRcdF9kaXNwYXRjaEV2ZW50KHRoaXMsIHJvb3RFbCwgJ3NvcnQnLCBkcmFnRWwsIHBhcmVudEVsLCByb290RWwsIG9sZEluZGV4LCBuZXdJbmRleCwgZXZ0KTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0cHV0U29ydGFibGUgJiYgcHV0U29ydGFibGUuc2F2ZSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdGlmIChkcmFnRWwubmV4dFNpYmxpbmcgIT09IG5leHRFbCkge1xuXHRcdFx0XHRcdFx0XHQvLyBHZXQgdGhlIGluZGV4IG9mIHRoZSBkcmFnZ2VkIGVsZW1lbnQgd2l0aGluIGl0cyBwYXJlbnRcblx0XHRcdFx0XHRcdFx0bmV3SW5kZXggPSBfaW5kZXgoZHJhZ0VsLCBvcHRpb25zLmRyYWdnYWJsZSk7XG5cblx0XHRcdFx0XHRcdFx0aWYgKG5ld0luZGV4ID49IDApIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBkcmFnICYgZHJvcCB3aXRoaW4gdGhlIHNhbWUgbGlzdFxuXHRcdFx0XHRcdFx0XHRcdF9kaXNwYXRjaEV2ZW50KHRoaXMsIHJvb3RFbCwgJ3VwZGF0ZScsIGRyYWdFbCwgcGFyZW50RWwsIHJvb3RFbCwgb2xkSW5kZXgsIG5ld0luZGV4LCBldnQpO1xuXHRcdFx0XHRcdFx0XHRcdF9kaXNwYXRjaEV2ZW50KHRoaXMsIHJvb3RFbCwgJ3NvcnQnLCBkcmFnRWwsIHBhcmVudEVsLCByb290RWwsIG9sZEluZGV4LCBuZXdJbmRleCwgZXZ0KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmIChTb3J0YWJsZS5hY3RpdmUpIHtcblx0XHRcdFx0XHRcdC8qIGpzaGludCBlcW51bGw6dHJ1ZSAqL1xuXHRcdFx0XHRcdFx0aWYgKG5ld0luZGV4ID09IG51bGwgfHwgbmV3SW5kZXggPT09IC0xKSB7XG5cdFx0XHRcdFx0XHRcdG5ld0luZGV4ID0gb2xkSW5kZXg7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRfZGlzcGF0Y2hFdmVudCh0aGlzLCByb290RWwsICdlbmQnLCBkcmFnRWwsIHBhcmVudEVsLCByb290RWwsIG9sZEluZGV4LCBuZXdJbmRleCwgZXZ0KTtcblxuXHRcdFx0XHRcdFx0Ly8gU2F2ZSBzb3J0aW5nXG5cdFx0XHRcdFx0XHR0aGlzLnNhdmUoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXHRcdFx0dGhpcy5fbnVsbGluZygpO1xuXHRcdH0sXG5cblx0XHRfbnVsbGluZzogZnVuY3Rpb24oKSB7XG5cdFx0XHRyb290RWwgPVxuXHRcdFx0ZHJhZ0VsID1cblx0XHRcdHBhcmVudEVsID1cblx0XHRcdGdob3N0RWwgPVxuXHRcdFx0bmV4dEVsID1cblx0XHRcdGNsb25lRWwgPVxuXHRcdFx0bGFzdERvd25FbCA9XG5cblx0XHRcdHNjcm9sbEVsID1cblx0XHRcdHNjcm9sbFBhcmVudEVsID1cblx0XHRcdGF1dG9TY3JvbGxzLmxlbmd0aCA9XG5cblx0XHRcdHBvaW50ZXJFbGVtQ2hhbmdlZEludGVydmFsID1cblx0XHRcdGxhc3RQb2ludGVyRWxlbVggPVxuXHRcdFx0bGFzdFBvaW50ZXJFbGVtWSA9XG5cblx0XHRcdHRhcEV2dCA9XG5cdFx0XHR0b3VjaEV2dCA9XG5cblx0XHRcdG1vdmVkID1cblx0XHRcdG5ld0luZGV4ID1cblx0XHRcdG9sZEluZGV4ID1cblxuXHRcdFx0bGFzdFRhcmdldCA9XG5cdFx0XHRsYXN0RGlyZWN0aW9uID1cblxuXHRcdFx0Zm9yUmVwYWludER1bW15ID1cblx0XHRcdHJlYWxEcmFnRWxSZWN0ID1cblxuXHRcdFx0cHV0U29ydGFibGUgPVxuXHRcdFx0YWN0aXZlR3JvdXAgPVxuXHRcdFx0U29ydGFibGUuYWN0aXZlID0gbnVsbDtcblxuXHRcdFx0c2F2ZWRJbnB1dENoZWNrZWQuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcblx0XHRcdFx0ZWwuY2hlY2tlZCA9IHRydWU7XG5cdFx0XHR9KTtcblxuXHRcdFx0c2F2ZWRJbnB1dENoZWNrZWQubGVuZ3RoID0gMDtcblx0XHR9LFxuXG5cdFx0aGFuZGxlRXZlbnQ6IGZ1bmN0aW9uICgvKipFdmVudCovZXZ0KSB7XG5cdFx0XHRzd2l0Y2ggKGV2dC50eXBlKSB7XG5cdFx0XHRcdGNhc2UgJ2Ryb3AnOlxuXHRcdFx0XHRjYXNlICdkcmFnZW5kJzpcblx0XHRcdFx0XHR0aGlzLl9vbkRyb3AoZXZ0KTtcblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlICdkcmFnZW50ZXInOlxuXHRcdFx0XHRjYXNlICdkcmFnb3Zlcic6XG5cdFx0XHRcdFx0aWYgKGRyYWdFbCkge1xuXHRcdFx0XHRcdFx0dGhpcy5fb25EcmFnT3ZlcihldnQpO1xuXHRcdFx0XHRcdFx0X2dsb2JhbERyYWdPdmVyKGV2dCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ3NlbGVjdHN0YXJ0Jzpcblx0XHRcdFx0XHRldnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9LFxuXG5cblx0XHQvKipcblx0XHQgKiBTZXJpYWxpemVzIHRoZSBpdGVtIGludG8gYW4gYXJyYXkgb2Ygc3RyaW5nLlxuXHRcdCAqIEByZXR1cm5zIHtTdHJpbmdbXX1cblx0XHQgKi9cblx0XHR0b0FycmF5OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgb3JkZXIgPSBbXSxcblx0XHRcdFx0ZWwsXG5cdFx0XHRcdGNoaWxkcmVuID0gdGhpcy5lbC5jaGlsZHJlbixcblx0XHRcdFx0aSA9IDAsXG5cdFx0XHRcdG4gPSBjaGlsZHJlbi5sZW5ndGgsXG5cdFx0XHRcdG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG5cblx0XHRcdGZvciAoOyBpIDwgbjsgaSsrKSB7XG5cdFx0XHRcdGVsID0gY2hpbGRyZW5baV07XG5cdFx0XHRcdGlmIChfY2xvc2VzdChlbCwgb3B0aW9ucy5kcmFnZ2FibGUsIHRoaXMuZWwsIGZhbHNlKSkge1xuXHRcdFx0XHRcdG9yZGVyLnB1c2goZWwuZ2V0QXR0cmlidXRlKG9wdGlvbnMuZGF0YUlkQXR0cikgfHwgX2dlbmVyYXRlSWQoZWwpKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gb3JkZXI7XG5cdFx0fSxcblxuXG5cdFx0LyoqXG5cdFx0ICogU29ydHMgdGhlIGVsZW1lbnRzIGFjY29yZGluZyB0byB0aGUgYXJyYXkuXG5cdFx0ICogQHBhcmFtICB7U3RyaW5nW119ICBvcmRlciAgb3JkZXIgb2YgdGhlIGl0ZW1zXG5cdFx0ICovXG5cdFx0c29ydDogZnVuY3Rpb24gKG9yZGVyKSB7XG5cdFx0XHR2YXIgaXRlbXMgPSB7fSwgcm9vdEVsID0gdGhpcy5lbDtcblxuXHRcdFx0dGhpcy50b0FycmF5KCkuZm9yRWFjaChmdW5jdGlvbiAoaWQsIGkpIHtcblx0XHRcdFx0dmFyIGVsID0gcm9vdEVsLmNoaWxkcmVuW2ldO1xuXG5cdFx0XHRcdGlmIChfY2xvc2VzdChlbCwgdGhpcy5vcHRpb25zLmRyYWdnYWJsZSwgcm9vdEVsLCBmYWxzZSkpIHtcblx0XHRcdFx0XHRpdGVtc1tpZF0gPSBlbDtcblx0XHRcdFx0fVxuXHRcdFx0fSwgdGhpcyk7XG5cblx0XHRcdG9yZGVyLmZvckVhY2goZnVuY3Rpb24gKGlkKSB7XG5cdFx0XHRcdGlmIChpdGVtc1tpZF0pIHtcblx0XHRcdFx0XHRyb290RWwucmVtb3ZlQ2hpbGQoaXRlbXNbaWRdKTtcblx0XHRcdFx0XHRyb290RWwuYXBwZW5kQ2hpbGQoaXRlbXNbaWRdKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSxcblxuXG5cdFx0LyoqXG5cdFx0ICogU2F2ZSB0aGUgY3VycmVudCBzb3J0aW5nXG5cdFx0ICovXG5cdFx0c2F2ZTogZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyIHN0b3JlID0gdGhpcy5vcHRpb25zLnN0b3JlO1xuXHRcdFx0c3RvcmUgJiYgc3RvcmUuc2V0ICYmIHN0b3JlLnNldCh0aGlzKTtcblx0XHR9LFxuXG5cblx0XHQvKipcblx0XHQgKiBGb3IgZWFjaCBlbGVtZW50IGluIHRoZSBzZXQsIGdldCB0aGUgZmlyc3QgZWxlbWVudCB0aGF0IG1hdGNoZXMgdGhlIHNlbGVjdG9yIGJ5IHRlc3RpbmcgdGhlIGVsZW1lbnQgaXRzZWxmIGFuZCB0cmF2ZXJzaW5nIHVwIHRocm91Z2ggaXRzIGFuY2VzdG9ycyBpbiB0aGUgRE9NIHRyZWUuXG5cdFx0ICogQHBhcmFtICAge0hUTUxFbGVtZW50fSAgZWxcblx0XHQgKiBAcGFyYW0gICB7U3RyaW5nfSAgICAgICBbc2VsZWN0b3JdICBkZWZhdWx0OiBgb3B0aW9ucy5kcmFnZ2FibGVgXG5cdFx0ICogQHJldHVybnMge0hUTUxFbGVtZW50fG51bGx9XG5cdFx0ICovXG5cdFx0Y2xvc2VzdDogZnVuY3Rpb24gKGVsLCBzZWxlY3Rvcikge1xuXHRcdFx0cmV0dXJuIF9jbG9zZXN0KGVsLCBzZWxlY3RvciB8fCB0aGlzLm9wdGlvbnMuZHJhZ2dhYmxlLCB0aGlzLmVsLCBmYWxzZSk7XG5cdFx0fSxcblxuXG5cdFx0LyoqXG5cdFx0ICogU2V0L2dldCBvcHRpb25cblx0XHQgKiBAcGFyYW0gICB7c3RyaW5nfSBuYW1lXG5cdFx0ICogQHBhcmFtICAgeyp9ICAgICAgW3ZhbHVlXVxuXHRcdCAqIEByZXR1cm5zIHsqfVxuXHRcdCAqL1xuXHRcdG9wdGlvbjogZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG5cdFx0XHR2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcblxuXHRcdFx0aWYgKHZhbHVlID09PSB2b2lkIDApIHtcblx0XHRcdFx0cmV0dXJuIG9wdGlvbnNbbmFtZV07XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRvcHRpb25zW25hbWVdID0gdmFsdWU7XG5cblx0XHRcdFx0aWYgKG5hbWUgPT09ICdncm91cCcpIHtcblx0XHRcdFx0XHRfcHJlcGFyZUdyb3VwKG9wdGlvbnMpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSxcblxuXG5cdFx0LyoqXG5cdFx0ICogRGVzdHJveVxuXHRcdCAqL1xuXHRcdGRlc3Ryb3k6IGZ1bmN0aW9uICgpIHtcblx0XHRcdHZhciBlbCA9IHRoaXMuZWw7XG5cblx0XHRcdGVsW2V4cGFuZG9dID0gbnVsbDtcblxuXHRcdFx0X29mZihlbCwgJ21vdXNlZG93bicsIHRoaXMuX29uVGFwU3RhcnQpO1xuXHRcdFx0X29mZihlbCwgJ3RvdWNoc3RhcnQnLCB0aGlzLl9vblRhcFN0YXJ0KTtcblx0XHRcdF9vZmYoZWwsICdwb2ludGVyZG93bicsIHRoaXMuX29uVGFwU3RhcnQpO1xuXG5cdFx0XHRpZiAodGhpcy5uYXRpdmVEcmFnZ2FibGUpIHtcblx0XHRcdFx0X29mZihlbCwgJ2RyYWdvdmVyJywgdGhpcyk7XG5cdFx0XHRcdF9vZmYoZWwsICdkcmFnZW50ZXInLCB0aGlzKTtcblx0XHRcdH1cblx0XHRcdC8vIFJlbW92ZSBkcmFnZ2FibGUgYXR0cmlidXRlc1xuXHRcdFx0QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChlbC5xdWVyeVNlbGVjdG9yQWxsKCdbZHJhZ2dhYmxlXScpLCBmdW5jdGlvbiAoZWwpIHtcblx0XHRcdFx0ZWwucmVtb3ZlQXR0cmlidXRlKCdkcmFnZ2FibGUnKTtcblx0XHRcdH0pO1xuXG5cdFx0XHR0aGlzLl9vbkRyb3AoKTtcblxuXHRcdFx0c29ydGFibGVzLnNwbGljZShzb3J0YWJsZXMuaW5kZXhPZih0aGlzLmVsKSwgMSk7XG5cblx0XHRcdHRoaXMuZWwgPSBlbCA9IG51bGw7XG5cdFx0fSxcblxuXHRcdF9oaWRlQ2xvbmU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCFjbG9uZUVsLmNsb25lSGlkZGVuKSB7XG5cdFx0XHRcdF9jc3MoY2xvbmVFbCwgJ2Rpc3BsYXknLCAnbm9uZScpO1xuXHRcdFx0XHRjbG9uZUVsLmNsb25lSGlkZGVuID0gdHJ1ZTtcblx0XHRcdFx0aWYgKGNsb25lRWwucGFyZW50Tm9kZSAmJiB0aGlzLm9wdGlvbnMucmVtb3ZlQ2xvbmVPbkhpZGUpIHtcblx0XHRcdFx0XHRjbG9uZUVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoY2xvbmVFbCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0X3Nob3dDbG9uZTogZnVuY3Rpb24ocHV0U29ydGFibGUpIHtcblx0XHRcdGlmIChwdXRTb3J0YWJsZS5sYXN0UHV0TW9kZSAhPT0gJ2Nsb25lJykge1xuXHRcdFx0XHR0aGlzLl9oaWRlQ2xvbmUoKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoY2xvbmVFbC5jbG9uZUhpZGRlbikge1xuXHRcdFx0XHQvLyBzaG93IGNsb25lIGF0IGRyYWdFbCBvciBvcmlnaW5hbCBwb3NpdGlvblxuXHRcdFx0XHRpZiAocm9vdEVsLmNvbnRhaW5zKGRyYWdFbCkgJiYgIXRoaXMub3B0aW9ucy5ncm91cC5yZXZlcnRDbG9uZSkge1xuXHRcdFx0XHRcdHJvb3RFbC5pbnNlcnRCZWZvcmUoY2xvbmVFbCwgZHJhZ0VsKTtcblx0XHRcdFx0fSBlbHNlIGlmIChuZXh0RWwpIHtcblx0XHRcdFx0XHRyb290RWwuaW5zZXJ0QmVmb3JlKGNsb25lRWwsIG5leHRFbCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cm9vdEVsLmFwcGVuZENoaWxkKGNsb25lRWwpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHRoaXMub3B0aW9ucy5ncm91cC5yZXZlcnRDbG9uZSkge1xuXHRcdFx0XHRcdHRoaXMuX2FuaW1hdGUoZHJhZ0VsLCBjbG9uZUVsKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRfY3NzKGNsb25lRWwsICdkaXNwbGF5JywgJycpO1xuXHRcdFx0XHRjbG9uZUVsLmNsb25lSGlkZGVuID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdGZ1bmN0aW9uIF9jbG9zZXN0KC8qKkhUTUxFbGVtZW50Ki9lbCwgLyoqU3RyaW5nKi9zZWxlY3RvciwgLyoqSFRNTEVsZW1lbnQqL2N0eCwgaW5jbHVkZUNUWCkge1xuXHRcdGlmIChlbCkge1xuXHRcdFx0Y3R4ID0gY3R4IHx8IGRvY3VtZW50O1xuXG5cdFx0XHRkbyB7XG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHRzZWxlY3RvciAhPSBudWxsICYmXG5cdFx0XHRcdFx0KFxuXHRcdFx0XHRcdFx0c2VsZWN0b3JbMF0gPT09ICc+JyAmJiBlbC5wYXJlbnROb2RlID09PSBjdHggJiYgX21hdGNoZXMoZWwsIHNlbGVjdG9yLnN1YnN0cmluZygxKSkgfHxcblx0XHRcdFx0XHRcdF9tYXRjaGVzKGVsLCBzZWxlY3Rvcilcblx0XHRcdFx0XHQpIHx8XG5cdFx0XHRcdFx0aW5jbHVkZUNUWCAmJiBlbCA9PT0gY3R4XG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdHJldHVybiBlbDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChlbCA9PT0gY3R4KSBicmVhaztcblx0XHRcdFx0LyoganNoaW50IGJvc3M6dHJ1ZSAqL1xuXHRcdFx0fSB3aGlsZSAoZWwgPSBfZ2V0UGFyZW50T3JIb3N0KGVsKSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXG5cdGZ1bmN0aW9uIF9nZXRQYXJlbnRPckhvc3QoZWwpIHtcblx0XHRyZXR1cm4gKGVsLmhvc3QgJiYgZWwgIT09IGRvY3VtZW50ICYmIGVsLmhvc3Qubm9kZVR5cGUpXG5cdFx0XHQ/IGVsLmhvc3Rcblx0XHRcdDogZWwucGFyZW50Tm9kZTtcblx0fVxuXG5cblx0ZnVuY3Rpb24gX2dsb2JhbERyYWdPdmVyKC8qKkV2ZW50Ki9ldnQpIHtcblx0XHRpZiAoZXZ0LmRhdGFUcmFuc2Zlcikge1xuXHRcdFx0ZXZ0LmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0ID0gJ21vdmUnO1xuXHRcdH1cblx0XHRldnQuY2FuY2VsYWJsZSAmJiBldnQucHJldmVudERlZmF1bHQoKTtcblx0fVxuXG5cblx0ZnVuY3Rpb24gX29uKGVsLCBldmVudCwgZm4pIHtcblx0XHRlbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBmbiwgY2FwdHVyZU1vZGUpO1xuXHR9XG5cblxuXHRmdW5jdGlvbiBfb2ZmKGVsLCBldmVudCwgZm4pIHtcblx0XHRlbC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBmbiwgY2FwdHVyZU1vZGUpO1xuXHR9XG5cblxuXHRmdW5jdGlvbiBfdG9nZ2xlQ2xhc3MoZWwsIG5hbWUsIHN0YXRlKSB7XG5cdFx0aWYgKGVsICYmIG5hbWUpIHtcblx0XHRcdGlmIChlbC5jbGFzc0xpc3QpIHtcblx0XHRcdFx0ZWwuY2xhc3NMaXN0W3N0YXRlID8gJ2FkZCcgOiAncmVtb3ZlJ10obmFtZSk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0dmFyIGNsYXNzTmFtZSA9ICgnICcgKyBlbC5jbGFzc05hbWUgKyAnICcpLnJlcGxhY2UoUl9TUEFDRSwgJyAnKS5yZXBsYWNlKCcgJyArIG5hbWUgKyAnICcsICcgJyk7XG5cdFx0XHRcdGVsLmNsYXNzTmFtZSA9IChjbGFzc05hbWUgKyAoc3RhdGUgPyAnICcgKyBuYW1lIDogJycpKS5yZXBsYWNlKFJfU1BBQ0UsICcgJyk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblxuXHRmdW5jdGlvbiBfY3NzKGVsLCBwcm9wLCB2YWwpIHtcblx0XHR2YXIgc3R5bGUgPSBlbCAmJiBlbC5zdHlsZTtcblxuXHRcdGlmIChzdHlsZSkge1xuXHRcdFx0aWYgKHZhbCA9PT0gdm9pZCAwKSB7XG5cdFx0XHRcdGlmIChkb2N1bWVudC5kZWZhdWx0VmlldyAmJiBkb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKSB7XG5cdFx0XHRcdFx0dmFsID0gZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShlbCwgJycpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2UgaWYgKGVsLmN1cnJlbnRTdHlsZSkge1xuXHRcdFx0XHRcdHZhbCA9IGVsLmN1cnJlbnRTdHlsZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBwcm9wID09PSB2b2lkIDAgPyB2YWwgOiB2YWxbcHJvcF07XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0aWYgKCEocHJvcCBpbiBzdHlsZSkgJiYgcHJvcC5pbmRleE9mKCd3ZWJraXQnKSA9PT0gLTEpIHtcblx0XHRcdFx0XHRwcm9wID0gJy13ZWJraXQtJyArIHByb3A7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRzdHlsZVtwcm9wXSA9IHZhbCArICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJyA/ICcnIDogJ3B4Jyk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gX21hdHJpeChlbCkge1xuXHRcdHZhciBhcHBsaWVkVHJhbnNmb3JtcyA9ICcnO1xuXHRcdGRvIHtcblx0XHRcdHZhciB0cmFuc2Zvcm0gPSBfY3NzKGVsLCAndHJhbnNmb3JtJyk7XG5cblx0XHRcdGlmICh0cmFuc2Zvcm0gJiYgdHJhbnNmb3JtICE9PSAnbm9uZScpIHtcblx0XHRcdFx0YXBwbGllZFRyYW5zZm9ybXMgPSB0cmFuc2Zvcm0gKyAnICcgKyBhcHBsaWVkVHJhbnNmb3Jtcztcblx0XHRcdH1cblx0XHRcdC8qIGpzaGludCBib3NzOnRydWUgKi9cblx0XHR9IHdoaWxlIChlbCA9IGVsLnBhcmVudE5vZGUpO1xuXG5cdFx0aWYgKHdpbmRvdy5ET01NYXRyaXgpIHtcblx0XHRcdHJldHVybiBuZXcgRE9NTWF0cml4KGFwcGxpZWRUcmFuc2Zvcm1zKTtcblx0XHR9IGVsc2UgaWYgKHdpbmRvdy5XZWJLaXRDU1NNYXRyaXgpIHtcblx0XHRcdHJldHVybiBuZXcgV2ViS2l0Q1NTTWF0cml4KGFwcGxpZWRUcmFuc2Zvcm1zKTtcblx0XHR9IGVsc2UgaWYgKHdpbmRvdy5DU1NNYXRyaXgpIHtcblx0XHRcdHJldHVybiBuZXcgQ1NTTWF0cml4KGFwcGxpZWRUcmFuc2Zvcm1zKTtcblx0XHR9XG5cdH1cblxuXG5cdGZ1bmN0aW9uIF9maW5kKGN0eCwgdGFnTmFtZSwgaXRlcmF0b3IpIHtcblx0XHRpZiAoY3R4KSB7XG5cdFx0XHR2YXIgbGlzdCA9IGN0eC5nZXRFbGVtZW50c0J5VGFnTmFtZSh0YWdOYW1lKSwgaSA9IDAsIG4gPSBsaXN0Lmxlbmd0aDtcblxuXHRcdFx0aWYgKGl0ZXJhdG9yKSB7XG5cdFx0XHRcdGZvciAoOyBpIDwgbjsgaSsrKSB7XG5cdFx0XHRcdFx0aXRlcmF0b3IobGlzdFtpXSwgaSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGxpc3Q7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIFtdO1xuXHR9XG5cblxuXG5cdGZ1bmN0aW9uIF9kaXNwYXRjaEV2ZW50KHNvcnRhYmxlLCByb290RWwsIG5hbWUsIHRhcmdldEVsLCB0b0VsLCBmcm9tRWwsIHN0YXJ0SW5kZXgsIG5ld0luZGV4LCBvcmlnaW5hbEV2dCkge1xuXHRcdHNvcnRhYmxlID0gKHNvcnRhYmxlIHx8IHJvb3RFbFtleHBhbmRvXSk7XG5cdFx0dmFyIGV2dCxcblx0XHRcdG9wdGlvbnMgPSBzb3J0YWJsZS5vcHRpb25zLFxuXHRcdFx0b25OYW1lID0gJ29uJyArIG5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnN1YnN0cigxKTtcblx0XHQvLyBTdXBwb3J0IGZvciBuZXcgQ3VzdG9tRXZlbnQgZmVhdHVyZVxuXHRcdGlmICh3aW5kb3cuQ3VzdG9tRXZlbnQgJiYgIUlFMTFPckxlc3MgJiYgIUVkZ2UpIHtcblx0XHRcdGV2dCA9IG5ldyBDdXN0b21FdmVudChuYW1lLCB7XG5cdFx0XHRcdGJ1YmJsZXM6IHRydWUsXG5cdFx0XHRcdGNhbmNlbGFibGU6IHRydWVcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKTtcblx0XHRcdGV2dC5pbml0RXZlbnQobmFtZSwgdHJ1ZSwgdHJ1ZSk7XG5cdFx0fVxuXG5cdFx0ZXZ0LnRvID0gdG9FbCB8fCByb290RWw7XG5cdFx0ZXZ0LmZyb20gPSBmcm9tRWwgfHwgcm9vdEVsO1xuXHRcdGV2dC5pdGVtID0gdGFyZ2V0RWwgfHwgcm9vdEVsO1xuXHRcdGV2dC5jbG9uZSA9IGNsb25lRWw7XG5cblx0XHRldnQub2xkSW5kZXggPSBzdGFydEluZGV4O1xuXHRcdGV2dC5uZXdJbmRleCA9IG5ld0luZGV4O1xuXG5cdFx0ZXZ0Lm9yaWdpbmFsRXZlbnQgPSBvcmlnaW5hbEV2dDtcblx0XHRldnQucHVsbE1vZGUgPSBwdXRTb3J0YWJsZSA/IHB1dFNvcnRhYmxlLmxhc3RQdXRNb2RlIDogdW5kZWZpbmVkO1xuXG5cdFx0aWYgKHJvb3RFbCkge1xuXHRcdFx0cm9vdEVsLmRpc3BhdGNoRXZlbnQoZXZ0KTtcblx0XHR9XG5cblx0XHRpZiAob3B0aW9uc1tvbk5hbWVdKSB7XG5cdFx0XHRvcHRpb25zW29uTmFtZV0uY2FsbChzb3J0YWJsZSwgZXZ0KTtcblx0XHR9XG5cdH1cblxuXG5cdGZ1bmN0aW9uIF9vbk1vdmUoZnJvbUVsLCB0b0VsLCBkcmFnRWwsIGRyYWdSZWN0LCB0YXJnZXRFbCwgdGFyZ2V0UmVjdCwgb3JpZ2luYWxFdnQsIHdpbGxJbnNlcnRBZnRlcikge1xuXHRcdHZhciBldnQsXG5cdFx0XHRzb3J0YWJsZSA9IGZyb21FbFtleHBhbmRvXSxcblx0XHRcdG9uTW92ZUZuID0gc29ydGFibGUub3B0aW9ucy5vbk1vdmUsXG5cdFx0XHRyZXRWYWw7XG5cdFx0Ly8gU3VwcG9ydCBmb3IgbmV3IEN1c3RvbUV2ZW50IGZlYXR1cmVcblx0XHRpZiAod2luZG93LkN1c3RvbUV2ZW50ICYmICFJRTExT3JMZXNzICYmICFFZGdlKSB7XG5cdFx0XHRldnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ21vdmUnLCB7XG5cdFx0XHRcdGJ1YmJsZXM6IHRydWUsXG5cdFx0XHRcdGNhbmNlbGFibGU6IHRydWVcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKTtcblx0XHRcdGV2dC5pbml0RXZlbnQoJ21vdmUnLCB0cnVlLCB0cnVlKTtcblx0XHR9XG5cblx0XHRldnQudG8gPSB0b0VsO1xuXHRcdGV2dC5mcm9tID0gZnJvbUVsO1xuXHRcdGV2dC5kcmFnZ2VkID0gZHJhZ0VsO1xuXHRcdGV2dC5kcmFnZ2VkUmVjdCA9IGRyYWdSZWN0O1xuXHRcdGV2dC5yZWxhdGVkID0gdGFyZ2V0RWwgfHwgdG9FbDtcblx0XHRldnQucmVsYXRlZFJlY3QgPSB0YXJnZXRSZWN0IHx8IF9nZXRSZWN0KHRvRWwpO1xuXHRcdGV2dC53aWxsSW5zZXJ0QWZ0ZXIgPSB3aWxsSW5zZXJ0QWZ0ZXI7XG5cblx0XHRldnQub3JpZ2luYWxFdmVudCA9IG9yaWdpbmFsRXZ0O1xuXG5cdFx0ZnJvbUVsLmRpc3BhdGNoRXZlbnQoZXZ0KTtcblxuXHRcdGlmIChvbk1vdmVGbikge1xuXHRcdFx0cmV0VmFsID0gb25Nb3ZlRm4uY2FsbChzb3J0YWJsZSwgZXZ0LCBvcmlnaW5hbEV2dCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJldFZhbDtcblx0fVxuXG5cdGZ1bmN0aW9uIF9kaXNhYmxlRHJhZ2dhYmxlKGVsKSB7XG5cdFx0ZWwuZHJhZ2dhYmxlID0gZmFsc2U7XG5cdH1cblxuXHRmdW5jdGlvbiBfdW5zaWxlbnQoKSB7XG5cdFx0X3NpbGVudCA9IGZhbHNlO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdldHMgbnRoIGNoaWxkIG9mIGVsLCBpZ25vcmluZyBoaWRkZW4gY2hpbGRyZW4sIHNvcnRhYmxlJ3MgZWxlbWVudHMgKGRvZXMgbm90IGlnbm9yZSBjbG9uZSBpZiBpdCdzIHZpc2libGUpXG5cdCAqIGFuZCBub24tZHJhZ2dhYmxlIGVsZW1lbnRzXG5cdCAqIEBwYXJhbSAge0hUTUxFbGVtZW50fSBlbCAgICAgICBUaGUgcGFyZW50IGVsZW1lbnRcblx0ICogQHBhcmFtICB7TnVtYmVyfSBjaGlsZE51bSAgICAgIFRoZSBpbmRleCBvZiB0aGUgY2hpbGRcblx0ICogQHBhcmFtICB7T2JqZWN0fSBvcHRpb25zICAgICAgIFBhcmVudCBTb3J0YWJsZSdzIG9wdGlvbnNcblx0ICogQHJldHVybiB7SFRNTEVsZW1lbnR9ICAgICAgICAgIFRoZSBjaGlsZCBhdCBpbmRleCBjaGlsZE51bSwgb3IgbnVsbCBpZiBub3QgZm91bmRcblx0ICovXG5cdGZ1bmN0aW9uIF9nZXRDaGlsZChlbCwgY2hpbGROdW0sIG9wdGlvbnMpIHtcblx0XHR2YXIgY3VycmVudENoaWxkID0gMCxcblx0XHRcdGkgPSAwLFxuXHRcdFx0Y2hpbGRyZW4gPSBlbC5jaGlsZHJlbjtcblxuXHRcdHdoaWxlIChpIDwgY2hpbGRyZW4ubGVuZ3RoKSB7XG5cdFx0XHRpZiAoXG5cdFx0XHRcdGNoaWxkcmVuW2ldLnN0eWxlLmRpc3BsYXkgIT09ICdub25lJyAmJlxuXHRcdFx0XHRjaGlsZHJlbltpXSAhPT0gZ2hvc3RFbCAmJlxuXHRcdFx0XHRjaGlsZHJlbltpXSAhPT0gZHJhZ0VsICYmXG5cdFx0XHRcdF9jbG9zZXN0KGNoaWxkcmVuW2ldLCBvcHRpb25zLmRyYWdnYWJsZSwgZWwsIGZhbHNlKVxuXHRcdFx0KSB7XG5cdFx0XHRcdGlmIChjdXJyZW50Q2hpbGQgPT09IGNoaWxkTnVtKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGNoaWxkcmVuW2ldO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGN1cnJlbnRDaGlsZCsrO1xuXHRcdFx0fVxuXG5cdFx0XHRpKys7XG5cdFx0fVxuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdldHMgdGhlIGxhc3QgY2hpbGQgaW4gdGhlIGVsLCBpZ25vcmluZyBnaG9zdEVsIG9yIGludmlzaWJsZSBlbGVtZW50cyAoY2xvbmVzKVxuXHQgKiBAcGFyYW0gIHtIVE1MRWxlbWVudH0gZWwgICAgICAgUGFyZW50IGVsZW1lbnRcblx0ICogQHJldHVybiB7SFRNTEVsZW1lbnR9ICAgICAgICAgIFRoZSBsYXN0IGNoaWxkLCBpZ25vcmluZyBnaG9zdEVsXG5cdCAqL1xuXHRmdW5jdGlvbiBfbGFzdENoaWxkKGVsKSB7XG5cdFx0dmFyIGxhc3QgPSBlbC5sYXN0RWxlbWVudENoaWxkO1xuXG5cdFx0d2hpbGUgKGxhc3QgJiYgKGxhc3QgPT09IGdob3N0RWwgfHwgbGFzdC5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScpKSB7XG5cdFx0XHRsYXN0ID0gbGFzdC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuXHRcdH1cblxuXHRcdHJldHVybiBsYXN0IHx8IG51bGw7XG5cdH1cblxuXHRmdW5jdGlvbiBfZ2hvc3RJc0xhc3QoZXZ0LCBheGlzLCBlbCkge1xuXHRcdHZhciBlbFJlY3QgPSBfZ2V0UmVjdChfbGFzdENoaWxkKGVsKSksXG5cdFx0XHRtb3VzZU9uQXhpcyA9IGF4aXMgPT09ICd2ZXJ0aWNhbCcgPyBldnQuY2xpZW50WSA6IGV2dC5jbGllbnRYLFxuXHRcdFx0bW91c2VPbk9wcEF4aXMgPSBheGlzID09PSAndmVydGljYWwnID8gZXZ0LmNsaWVudFggOiBldnQuY2xpZW50WSxcblx0XHRcdHRhcmdldFMyID0gYXhpcyA9PT0gJ3ZlcnRpY2FsJyA/IGVsUmVjdC5ib3R0b20gOiBlbFJlY3QucmlnaHQsXG5cdFx0XHR0YXJnZXRTMU9wcCA9IGF4aXMgPT09ICd2ZXJ0aWNhbCcgPyBlbFJlY3QubGVmdCA6IGVsUmVjdC50b3AsXG5cdFx0XHR0YXJnZXRTMk9wcCA9IGF4aXMgPT09ICd2ZXJ0aWNhbCcgPyBlbFJlY3QucmlnaHQgOiBlbFJlY3QuYm90dG9tLFxuXHRcdFx0c3BhY2VyID0gMTA7XG5cblx0XHRyZXR1cm4gKFxuXHRcdFx0YXhpcyA9PT0gJ3ZlcnRpY2FsJyA/XG5cdFx0XHRcdChtb3VzZU9uT3BwQXhpcyA+IHRhcmdldFMyT3BwICsgc3BhY2VyIHx8IG1vdXNlT25PcHBBeGlzIDw9IHRhcmdldFMyT3BwICYmIG1vdXNlT25BeGlzID4gdGFyZ2V0UzIgJiYgbW91c2VPbk9wcEF4aXMgPj0gdGFyZ2V0UzFPcHApIDpcblx0XHRcdFx0KG1vdXNlT25BeGlzID4gdGFyZ2V0UzIgJiYgbW91c2VPbk9wcEF4aXMgPiB0YXJnZXRTMU9wcCB8fCBtb3VzZU9uQXhpcyA8PSB0YXJnZXRTMiAmJiBtb3VzZU9uT3BwQXhpcyA+IHRhcmdldFMyT3BwICsgc3BhY2VyKVxuXHRcdCk7XG5cdH1cblxuXHRmdW5jdGlvbiBfZ2V0U3dhcERpcmVjdGlvbihldnQsIHRhcmdldCwgYXhpcywgc3dhcFRocmVzaG9sZCwgaW52ZXJ0ZWRTd2FwVGhyZXNob2xkLCBpbnZlcnRTd2FwLCBpc0xhc3RUYXJnZXQpIHtcblx0XHR2YXIgdGFyZ2V0UmVjdCA9IF9nZXRSZWN0KHRhcmdldCksXG5cdFx0XHRtb3VzZU9uQXhpcyA9IGF4aXMgPT09ICd2ZXJ0aWNhbCcgPyBldnQuY2xpZW50WSA6IGV2dC5jbGllbnRYLFxuXHRcdFx0dGFyZ2V0TGVuZ3RoID0gYXhpcyA9PT0gJ3ZlcnRpY2FsJyA/IHRhcmdldFJlY3QuaGVpZ2h0IDogdGFyZ2V0UmVjdC53aWR0aCxcblx0XHRcdHRhcmdldFMxID0gYXhpcyA9PT0gJ3ZlcnRpY2FsJyA/IHRhcmdldFJlY3QudG9wIDogdGFyZ2V0UmVjdC5sZWZ0LFxuXHRcdFx0dGFyZ2V0UzIgPSBheGlzID09PSAndmVydGljYWwnID8gdGFyZ2V0UmVjdC5ib3R0b20gOiB0YXJnZXRSZWN0LnJpZ2h0LFxuXHRcdFx0ZHJhZ1JlY3QgPSBfZ2V0UmVjdChkcmFnRWwpLFxuXHRcdFx0aW52ZXJ0ID0gZmFsc2U7XG5cblxuXHRcdGlmICghaW52ZXJ0U3dhcCkge1xuXHRcdFx0Ly8gTmV2ZXIgaW52ZXJ0IG9yIGNyZWF0ZSBkcmFnRWwgc2hhZG93IHdoZW4gdGFyZ2V0IG1vdmVtZW5ldCBjYXVzZXMgbW91c2UgdG8gbW92ZSBwYXN0IHRoZSBlbmQgb2YgcmVndWxhciBzd2FwVGhyZXNob2xkXG5cdFx0XHRpZiAoaXNMYXN0VGFyZ2V0ICYmIHRhcmdldE1vdmVEaXN0YW5jZSA8IHRhcmdldExlbmd0aCAqIHN3YXBUaHJlc2hvbGQpIHsgLy8gbXVsdGlwbGllZCBvbmx5IGJ5IHN3YXBUaHJlc2hvbGQgYmVjYXVzZSBtb3VzZSB3aWxsIGFscmVhZHkgYmUgaW5zaWRlIHRhcmdldCBieSAoMSAtIHRocmVzaG9sZCkgKiB0YXJnZXRMZW5ndGggLyAyXG5cdFx0XHRcdC8vIGNoZWNrIGlmIHBhc3QgZmlyc3QgaW52ZXJ0IHRocmVzaG9sZCBvbiBzaWRlIG9wcG9zaXRlIG9mIGxhc3REaXJlY3Rpb25cblx0XHRcdFx0aWYgKCFwYXN0Rmlyc3RJbnZlcnRUaHJlc2ggJiZcblx0XHRcdFx0XHQobGFzdERpcmVjdGlvbiA9PT0gMSA/XG5cdFx0XHRcdFx0XHQoXG5cdFx0XHRcdFx0XHRcdG1vdXNlT25BeGlzID4gdGFyZ2V0UzEgKyB0YXJnZXRMZW5ndGggKiBpbnZlcnRlZFN3YXBUaHJlc2hvbGQgLyAyXG5cdFx0XHRcdFx0XHQpIDpcblx0XHRcdFx0XHRcdChcblx0XHRcdFx0XHRcdFx0bW91c2VPbkF4aXMgPCB0YXJnZXRTMiAtIHRhcmdldExlbmd0aCAqIGludmVydGVkU3dhcFRocmVzaG9sZCAvIDJcblx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHQpXG5cdFx0XHRcdClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdC8vIHBhc3QgZmlyc3QgaW52ZXJ0IHRocmVzaG9sZCwgZG8gbm90IHJlc3RyaWN0IGludmVydGVkIHRocmVzaG9sZCB0byBkcmFnRWwgc2hhZG93XG5cdFx0XHRcdFx0cGFzdEZpcnN0SW52ZXJ0VGhyZXNoID0gdHJ1ZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICghcGFzdEZpcnN0SW52ZXJ0VGhyZXNoKSB7XG5cdFx0XHRcdFx0dmFyIGRyYWdTMSA9IGF4aXMgPT09ICd2ZXJ0aWNhbCcgPyBkcmFnUmVjdC50b3AgOiBkcmFnUmVjdC5sZWZ0LFxuXHRcdFx0XHRcdFx0ZHJhZ1MyID0gYXhpcyA9PT0gJ3ZlcnRpY2FsJyA/IGRyYWdSZWN0LmJvdHRvbSA6IGRyYWdSZWN0LnJpZ2h0O1xuXHRcdFx0XHRcdC8vIGRyYWdFbCBzaGFkb3cgKHRhcmdldCBtb3ZlIGRpc3RhbmNlIHNoYWRvdylcblx0XHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0XHRsYXN0RGlyZWN0aW9uID09PSAxID9cblx0XHRcdFx0XHRcdChcblx0XHRcdFx0XHRcdFx0bW91c2VPbkF4aXMgPCB0YXJnZXRTMSArIHRhcmdldE1vdmVEaXN0YW5jZSAvLyBvdmVyIGRyYWdFbCBzaGFkb3dcblx0XHRcdFx0XHRcdCkgOlxuXHRcdFx0XHRcdFx0KFxuXHRcdFx0XHRcdFx0XHRtb3VzZU9uQXhpcyA+IHRhcmdldFMyIC0gdGFyZ2V0TW92ZURpc3RhbmNlXG5cdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0KVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHJldHVybiBsYXN0RGlyZWN0aW9uICogLTE7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGludmVydCA9IHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIFJlZ3VsYXJcblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdG1vdXNlT25BeGlzID4gdGFyZ2V0UzEgKyAodGFyZ2V0TGVuZ3RoICogKDEgLSBzd2FwVGhyZXNob2xkKSAvIDIpICYmXG5cdFx0XHRcdFx0bW91c2VPbkF4aXMgPCB0YXJnZXRTMiAtICh0YXJnZXRMZW5ndGggKiAoMSAtIHN3YXBUaHJlc2hvbGQpIC8gMilcblx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0cmV0dXJuIF9nZXRJbnNlcnREaXJlY3Rpb24odGFyZ2V0KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGludmVydCA9IGludmVydCB8fCBpbnZlcnRTd2FwO1xuXG5cdFx0aWYgKGludmVydCkge1xuXHRcdFx0Ly8gSW52ZXJ0IG9mIHJlZ3VsYXJcblx0XHRcdGlmIChcblx0XHRcdFx0bW91c2VPbkF4aXMgPCB0YXJnZXRTMSArICh0YXJnZXRMZW5ndGggKiBpbnZlcnRlZFN3YXBUaHJlc2hvbGQgLyAyKSB8fFxuXHRcdFx0XHRtb3VzZU9uQXhpcyA+IHRhcmdldFMyIC0gKHRhcmdldExlbmd0aCAqIGludmVydGVkU3dhcFRocmVzaG9sZCAvIDIpXG5cdFx0XHQpXG5cdFx0XHR7XG5cdFx0XHRcdHJldHVybiAoKG1vdXNlT25BeGlzID4gdGFyZ2V0UzEgKyB0YXJnZXRMZW5ndGggLyAyKSA/IDEgOiAtMSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIDA7XG5cdH1cblxuXHQvKipcblx0ICogR2V0cyB0aGUgZGlyZWN0aW9uIGRyYWdFbCBtdXN0IGJlIHN3YXBwZWQgcmVsYXRpdmUgdG8gdGFyZ2V0IGluIG9yZGVyIHRvIG1ha2UgaXRcblx0ICogc2VlbSB0aGF0IGRyYWdFbCBoYXMgYmVlbiBcImluc2VydGVkXCIgaW50byB0aGF0IGVsZW1lbnQncyBwb3NpdGlvblxuXHQgKiBAcGFyYW0gIHtIVE1MRWxlbWVudH0gdGFyZ2V0ICAgICAgIFRoZSB0YXJnZXQgd2hvc2UgcG9zaXRpb24gZHJhZ0VsIGlzIGJlaW5nIGluc2VydGVkIGF0XG5cdCAqIEByZXR1cm4ge051bWJlcn0gICAgICAgICAgICAgICAgICAgRGlyZWN0aW9uIGRyYWdFbCBtdXN0IGJlIHN3YXBwZWRcblx0ICovXG5cdGZ1bmN0aW9uIF9nZXRJbnNlcnREaXJlY3Rpb24odGFyZ2V0KSB7XG5cdFx0dmFyIGRyYWdFbEluZGV4ID0gX2luZGV4KGRyYWdFbCksXG5cdFx0XHR0YXJnZXRJbmRleCA9IF9pbmRleCh0YXJnZXQpO1xuXG5cdFx0aWYgKGRyYWdFbEluZGV4IDwgdGFyZ2V0SW5kZXgpIHtcblx0XHRcdHJldHVybiAxO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gLTE7XG5cdFx0fVxuXHR9XG5cblxuXHQvKipcblx0ICogR2VuZXJhdGUgaWRcblx0ICogQHBhcmFtICAge0hUTUxFbGVtZW50fSBlbFxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfVxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0ZnVuY3Rpb24gX2dlbmVyYXRlSWQoZWwpIHtcblx0XHR2YXIgc3RyID0gZWwudGFnTmFtZSArIGVsLmNsYXNzTmFtZSArIGVsLnNyYyArIGVsLmhyZWYgKyBlbC50ZXh0Q29udGVudCxcblx0XHRcdGkgPSBzdHIubGVuZ3RoLFxuXHRcdFx0c3VtID0gMDtcblxuXHRcdHdoaWxlIChpLS0pIHtcblx0XHRcdHN1bSArPSBzdHIuY2hhckNvZGVBdChpKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gc3VtLnRvU3RyaW5nKDM2KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRoZSBpbmRleCBvZiBhbiBlbGVtZW50IHdpdGhpbiBpdHMgcGFyZW50IGZvciBhIHNlbGVjdGVkIHNldCBvZlxuXHQgKiBlbGVtZW50c1xuXHQgKiBAcGFyYW0gIHtIVE1MRWxlbWVudH0gZWxcblx0ICogQHBhcmFtICB7c2VsZWN0b3J9IHNlbGVjdG9yXG5cdCAqIEByZXR1cm4ge251bWJlcn1cblx0ICovXG5cdGZ1bmN0aW9uIF9pbmRleChlbCwgc2VsZWN0b3IpIHtcblx0XHR2YXIgaW5kZXggPSAwO1xuXG5cdFx0aWYgKCFlbCB8fCAhZWwucGFyZW50Tm9kZSkge1xuXHRcdFx0cmV0dXJuIC0xO1xuXHRcdH1cblxuXHRcdHdoaWxlIChlbCAmJiAoZWwgPSBlbC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nKSkge1xuXHRcdFx0aWYgKChlbC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpICE9PSAnVEVNUExBVEUnKSAmJiBlbCAhPT0gY2xvbmVFbCkge1xuXHRcdFx0XHRpbmRleCsrO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBpbmRleDtcblx0fVxuXG5cdGZ1bmN0aW9uIF9tYXRjaGVzKC8qKkhUTUxFbGVtZW50Ki9lbCwgLyoqU3RyaW5nKi9zZWxlY3Rvcikge1xuXHRcdGlmIChlbCkge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0aWYgKGVsLm1hdGNoZXMpIHtcblx0XHRcdFx0XHRyZXR1cm4gZWwubWF0Y2hlcyhzZWxlY3Rvcik7XG5cdFx0XHRcdH0gZWxzZSBpZiAoZWwubXNNYXRjaGVzU2VsZWN0b3IpIHtcblx0XHRcdFx0XHRyZXR1cm4gZWwubXNNYXRjaGVzU2VsZWN0b3Ioc2VsZWN0b3IpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGVsLndlYmtpdE1hdGNoZXNTZWxlY3Rvcikge1xuXHRcdFx0XHRcdHJldHVybiBlbC53ZWJraXRNYXRjaGVzU2VsZWN0b3Ioc2VsZWN0b3IpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGNhdGNoKF8pIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdHZhciBfdGhyb3R0bGVUaW1lb3V0O1xuXHRmdW5jdGlvbiBfdGhyb3R0bGUoY2FsbGJhY2ssIG1zKSB7XG5cdFx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0XHRcdGlmICghX3Rocm90dGxlVGltZW91dCkge1xuXHRcdFx0XHR2YXIgYXJncyA9IGFyZ3VtZW50cyxcblx0XHRcdFx0XHRfdGhpcyA9IHRoaXM7XG5cblx0XHRcdFx0X3Rocm90dGxlVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdGlmIChhcmdzLmxlbmd0aCA9PT0gMSkge1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2suY2FsbChfdGhpcywgYXJnc1swXSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNhbGxiYWNrLmFwcGx5KF90aGlzLCBhcmdzKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRfdGhyb3R0bGVUaW1lb3V0ID0gdm9pZCAwO1xuXHRcdFx0XHR9LCBtcyk7XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXG5cdGZ1bmN0aW9uIF9jYW5jZWxUaHJvdHRsZSgpIHtcblx0XHRjbGVhclRpbWVvdXQoX3Rocm90dGxlVGltZW91dCk7XG5cdFx0X3Rocm90dGxlVGltZW91dCA9IHZvaWQgMDtcblx0fVxuXG5cdGZ1bmN0aW9uIF9leHRlbmQoZHN0LCBzcmMpIHtcblx0XHRpZiAoZHN0ICYmIHNyYykge1xuXHRcdFx0Zm9yICh2YXIga2V5IGluIHNyYykge1xuXHRcdFx0XHRpZiAoc3JjLmhhc093blByb3BlcnR5KGtleSkpIHtcblx0XHRcdFx0XHRkc3Rba2V5XSA9IHNyY1trZXldO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRzdDtcblx0fVxuXG5cdGZ1bmN0aW9uIF9jbG9uZShlbCkge1xuXHRcdGlmIChQb2x5bWVyICYmIFBvbHltZXIuZG9tKSB7XG5cdFx0XHRyZXR1cm4gUG9seW1lci5kb20oZWwpLmNsb25lTm9kZSh0cnVlKTtcblx0XHR9XG5cdFx0ZWxzZSBpZiAoJCkge1xuXHRcdFx0cmV0dXJuICQoZWwpLmNsb25lKHRydWUpWzBdO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdHJldHVybiBlbC5jbG9uZU5vZGUodHJ1ZSk7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gX3NhdmVJbnB1dENoZWNrZWRTdGF0ZShyb290KSB7XG5cdFx0c2F2ZWRJbnB1dENoZWNrZWQubGVuZ3RoID0gMDtcblxuXHRcdHZhciBpbnB1dHMgPSByb290LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbnB1dCcpO1xuXHRcdHZhciBpZHggPSBpbnB1dHMubGVuZ3RoO1xuXG5cdFx0d2hpbGUgKGlkeC0tKSB7XG5cdFx0XHR2YXIgZWwgPSBpbnB1dHNbaWR4XTtcblx0XHRcdGVsLmNoZWNrZWQgJiYgc2F2ZWRJbnB1dENoZWNrZWQucHVzaChlbCk7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gX25leHRUaWNrKGZuKSB7XG5cdFx0cmV0dXJuIHNldFRpbWVvdXQoZm4sIDApO1xuXHR9XG5cblx0ZnVuY3Rpb24gX2NhbmNlbE5leHRUaWNrKGlkKSB7XG5cdFx0cmV0dXJuIGNsZWFyVGltZW91dChpZCk7XG5cdH1cblxuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRoZSBcImJvdW5kaW5nIGNsaWVudCByZWN0XCIgb2YgZ2l2ZW4gZWxlbWVudFxuXHQgKiBAcGFyYW0gIHtIVE1MRWxlbWVudH0gZWwgICAgICAgICAgICAgICAgVGhlIGVsZW1lbnQgd2hvc2UgYm91bmRpbmdDbGllbnRSZWN0IGlzIHdhbnRlZFxuXHQgKiBAcGFyYW0gIHtbSFRNTEVsZW1lbnRdfSBjb250YWluZXIgICAgICAgdGhlIHBhcmVudCB0aGUgZWxlbWVudCB3aWxsIGJlIHBsYWNlZCBpblxuXHQgKiBAcGFyYW0gIHtbQm9vbGVhbl19IGFkanVzdEZvclRyYW5zZm9ybSAgV2hldGhlciB0aGUgcmVjdCBzaG91bGQgY29tcGVuc2F0ZSBmb3IgcGFyZW50J3MgdHJhbnNmb3JtXG5cdCAqIEByZXR1cm4ge09iamVjdH0gICAgICAgICAgICAgICAgICAgICAgICBUaGUgYm91bmRpbmdDbGllbnRSZWN0IG9mIGVsXG5cdCAqL1xuXHRmdW5jdGlvbiBfZ2V0UmVjdChlbCwgYWRqdXN0Rm9yVHJhbnNmb3JtLCBjb250YWluZXIsIGFkanVzdEZvckZpeGVkKSB7XG5cdFx0aWYgKCFlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QgJiYgZWwgIT09IHdpbikgcmV0dXJuO1xuXG5cdFx0dmFyIGVsUmVjdCxcblx0XHRcdHRvcCxcblx0XHRcdGxlZnQsXG5cdFx0XHRib3R0b20sXG5cdFx0XHRyaWdodCxcblx0XHRcdGhlaWdodCxcblx0XHRcdHdpZHRoO1xuXG5cdFx0aWYgKGVsICE9PSB3aW4gJiYgZWwgIT09IF9nZXRXaW5kb3dTY3JvbGxpbmdFbGVtZW50KCkpIHtcblx0XHRcdGVsUmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcdFx0dG9wID0gZWxSZWN0LnRvcDtcblx0XHRcdGxlZnQgPSBlbFJlY3QubGVmdDtcblx0XHRcdGJvdHRvbSA9IGVsUmVjdC5ib3R0b207XG5cdFx0XHRyaWdodCA9IGVsUmVjdC5yaWdodDtcblx0XHRcdGhlaWdodCA9IGVsUmVjdC5oZWlnaHQ7XG5cdFx0XHR3aWR0aCA9IGVsUmVjdC53aWR0aDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dG9wID0gMDtcblx0XHRcdGxlZnQgPSAwO1xuXHRcdFx0Ym90dG9tID0gd2luZG93LmlubmVySGVpZ2h0O1xuXHRcdFx0cmlnaHQgPSB3aW5kb3cuaW5uZXJXaWR0aDtcblx0XHRcdGhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcblx0XHRcdHdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG5cdFx0fVxuXG5cdFx0aWYgKGFkanVzdEZvckZpeGVkICYmIGVsICE9PSB3aW4pIHtcblx0XHRcdC8vIEFkanVzdCBmb3IgdHJhbnNsYXRlKClcblx0XHRcdGNvbnRhaW5lciA9IGNvbnRhaW5lciB8fCBlbC5wYXJlbnROb2RlO1xuXG5cdFx0XHQvLyBzb2x2ZXMgIzExMjMgKHNlZTogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzM3OTUzODA2LzYwODgzMTIpXG5cdFx0XHQvLyBOb3QgbmVlZGVkIG9uIDw9IElFMTFcblx0XHRcdGlmICghSUUxMU9yTGVzcykge1xuXHRcdFx0XHRkbyB7XG5cdFx0XHRcdFx0aWYgKGNvbnRhaW5lciAmJiBjb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0ICYmIF9jc3MoY29udGFpbmVyLCAndHJhbnNmb3JtJykgIT09ICdub25lJykge1xuXHRcdFx0XHRcdFx0dmFyIGNvbnRhaW5lclJlY3QgPSBjb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cblx0XHRcdFx0XHRcdC8vIFNldCByZWxhdGl2ZSB0byBlZGdlcyBvZiBwYWRkaW5nIGJveCBvZiBjb250YWluZXJcblx0XHRcdFx0XHRcdHRvcCAtPSBjb250YWluZXJSZWN0LnRvcCArIHBhcnNlSW50KF9jc3MoY29udGFpbmVyLCAnYm9yZGVyLXRvcC13aWR0aCcpKTtcblx0XHRcdFx0XHRcdGxlZnQgLT0gY29udGFpbmVyUmVjdC5sZWZ0ICsgcGFyc2VJbnQoX2Nzcyhjb250YWluZXIsICdib3JkZXItbGVmdC13aWR0aCcpKTtcblx0XHRcdFx0XHRcdGJvdHRvbSA9IHRvcCArIGVsUmVjdC5oZWlnaHQ7XG5cdFx0XHRcdFx0XHRyaWdodCA9IGxlZnQgKyBlbFJlY3Qud2lkdGg7XG5cblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQvKiBqc2hpbnQgYm9zczp0cnVlICovXG5cdFx0XHRcdH0gd2hpbGUgKGNvbnRhaW5lciA9IGNvbnRhaW5lci5wYXJlbnROb2RlKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoYWRqdXN0Rm9yVHJhbnNmb3JtICYmIGVsICE9PSB3aW4pIHtcblx0XHRcdC8vIEFkanVzdCBmb3Igc2NhbGUoKVxuXHRcdFx0dmFyIG1hdHJpeCA9IF9tYXRyaXgoY29udGFpbmVyIHx8IGVsKSxcblx0XHRcdFx0c2NhbGVYID0gbWF0cml4ICYmIG1hdHJpeC5hLFxuXHRcdFx0XHRzY2FsZVkgPSBtYXRyaXggJiYgbWF0cml4LmQ7XG5cblx0XHRcdGlmIChtYXRyaXgpIHtcblx0XHRcdFx0dG9wIC89IHNjYWxlWTtcblx0XHRcdFx0bGVmdCAvPSBzY2FsZVg7XG5cblx0XHRcdFx0d2lkdGggLz0gc2NhbGVYO1xuXHRcdFx0XHRoZWlnaHQgLz0gc2NhbGVZO1xuXG5cdFx0XHRcdGJvdHRvbSA9IHRvcCArIGhlaWdodDtcblx0XHRcdFx0cmlnaHQgPSBsZWZ0ICsgd2lkdGg7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHRvcDogdG9wLFxuXHRcdFx0bGVmdDogbGVmdCxcblx0XHRcdGJvdHRvbTogYm90dG9tLFxuXHRcdFx0cmlnaHQ6IHJpZ2h0LFxuXHRcdFx0d2lkdGg6IHdpZHRoLFxuXHRcdFx0aGVpZ2h0OiBoZWlnaHRcblx0XHR9O1xuXHR9XG5cblxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGEgc2lkZSBvZiBhbiBlbGVtZW50IGlzIHNjcm9sbGVkIHBhc3QgYSBzaWRlIG9mIGl0J3MgcGFyZW50c1xuXHQgKiBAcGFyYW0gIHtIVE1MRWxlbWVudH0gIGVsICAgICAgIFRoZSBlbGVtZW50IHdobydzIHNpZGUgYmVpbmcgc2Nyb2xsZWQgb3V0IG9mIHZpZXcgaXMgaW4gcXVlc3Rpb25cblx0ICogQHBhcmFtICB7U3RyaW5nfSAgICAgICBzaWRlICAgICBTaWRlIG9mIHRoZSBlbGVtZW50IGluIHF1ZXN0aW9uICgndG9wJywgJ2xlZnQnLCAncmlnaHQnLCAnYm90dG9tJylcblx0ICogQHJldHVybiB7SFRNTEVsZW1lbnR9ICAgICAgICAgICBUaGUgcGFyZW50IHNjcm9sbCBlbGVtZW50IHRoYXQgdGhlIGVsJ3Mgc2lkZSBpcyBzY3JvbGxlZCBwYXN0LCBvciBudWxsIGlmIHRoZXJlIGlzIG5vIHN1Y2ggZWxlbWVudFxuXHQgKi9cblx0ZnVuY3Rpb24gX2lzU2Nyb2xsZWRQYXN0KGVsLCBzaWRlKSB7XG5cdFx0dmFyIHBhcmVudCA9IF9nZXRQYXJlbnRBdXRvU2Nyb2xsRWxlbWVudChlbCwgdHJ1ZSksXG5cdFx0XHRlbFNpZGUgPSBfZ2V0UmVjdChlbClbc2lkZV07XG5cblx0XHQvKiBqc2hpbnQgYm9zczp0cnVlICovXG5cdFx0d2hpbGUgKHBhcmVudCkge1xuXHRcdFx0dmFyIHBhcmVudFNpZGUgPSBfZ2V0UmVjdChwYXJlbnQpW3NpZGVdLFxuXHRcdFx0XHR2aXNpYmxlO1xuXG5cdFx0XHRpZiAoc2lkZSA9PT0gJ3RvcCcgfHwgc2lkZSA9PT0gJ2xlZnQnKSB7XG5cdFx0XHRcdHZpc2libGUgPSBlbFNpZGUgPj0gcGFyZW50U2lkZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZpc2libGUgPSBlbFNpZGUgPD0gcGFyZW50U2lkZTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCF2aXNpYmxlKSByZXR1cm4gcGFyZW50O1xuXG5cdFx0XHRpZiAocGFyZW50ID09PSBfZ2V0V2luZG93U2Nyb2xsaW5nRWxlbWVudCgpKSBicmVhaztcblxuXHRcdFx0cGFyZW50ID0gX2dldFBhcmVudEF1dG9TY3JvbGxFbGVtZW50KHBhcmVudCwgZmFsc2UpO1xuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRoZSBzY3JvbGwgb2Zmc2V0IG9mIHRoZSBnaXZlbiBlbGVtZW50LCBhZGRlZCB3aXRoIGFsbCB0aGUgc2Nyb2xsIG9mZnNldHMgb2YgcGFyZW50IGVsZW1lbnRzLlxuXHQgKiBUaGUgdmFsdWUgaXMgcmV0dXJuZWQgaW4gcmVhbCBwaXhlbHMuXG5cdCAqIEBwYXJhbSAge0hUTUxFbGVtZW50fSBlbFxuXHQgKiBAcmV0dXJuIHtBcnJheX0gICAgICAgICAgICAgT2Zmc2V0cyBpbiB0aGUgZm9ybWF0IG9mIFtsZWZ0LCB0b3BdXG5cdCAqL1xuXHRmdW5jdGlvbiBfZ2V0UmVsYXRpdmVTY3JvbGxPZmZzZXQoZWwpIHtcblx0XHR2YXIgb2Zmc2V0TGVmdCA9IDAsXG5cdFx0XHRvZmZzZXRUb3AgPSAwLFxuXHRcdFx0d2luU2Nyb2xsZXIgPSBfZ2V0V2luZG93U2Nyb2xsaW5nRWxlbWVudCgpO1xuXG5cdFx0aWYgKGVsKSB7XG5cdFx0XHRkbyB7XG5cdFx0XHRcdHZhciBtYXRyaXggPSBfbWF0cml4KGVsKSxcblx0XHRcdFx0XHRzY2FsZVggPSBtYXRyaXguYSxcblx0XHRcdFx0XHRzY2FsZVkgPSBtYXRyaXguZDtcblxuXHRcdFx0XHRvZmZzZXRMZWZ0ICs9IGVsLnNjcm9sbExlZnQgKiBzY2FsZVg7XG5cdFx0XHRcdG9mZnNldFRvcCArPSBlbC5zY3JvbGxUb3AgKiBzY2FsZVk7XG5cdFx0XHR9IHdoaWxlIChlbCAhPT0gd2luU2Nyb2xsZXIgJiYgKGVsID0gZWwucGFyZW50Tm9kZSkpO1xuXHRcdH1cblxuXHRcdHJldHVybiBbb2Zmc2V0TGVmdCwgb2Zmc2V0VG9wXTtcblx0fVxuXG5cdC8vIEZpeGVkICM5NzM6XG5cdF9vbihkb2N1bWVudCwgJ3RvdWNobW92ZScsIGZ1bmN0aW9uKGV2dCkge1xuXHRcdGlmICgoU29ydGFibGUuYWN0aXZlIHx8IGF3YWl0aW5nRHJhZ1N0YXJ0ZWQpICYmIGV2dC5jYW5jZWxhYmxlKSB7XG5cdFx0XHRldnQucHJldmVudERlZmF1bHQoKTtcblx0XHR9XG5cdH0pO1xuXG5cblx0Ly8gRXhwb3J0IHV0aWxzXG5cdFNvcnRhYmxlLnV0aWxzID0ge1xuXHRcdG9uOiBfb24sXG5cdFx0b2ZmOiBfb2ZmLFxuXHRcdGNzczogX2Nzcyxcblx0XHRmaW5kOiBfZmluZCxcblx0XHRpczogZnVuY3Rpb24gKGVsLCBzZWxlY3Rvcikge1xuXHRcdFx0cmV0dXJuICEhX2Nsb3Nlc3QoZWwsIHNlbGVjdG9yLCBlbCwgZmFsc2UpO1xuXHRcdH0sXG5cdFx0ZXh0ZW5kOiBfZXh0ZW5kLFxuXHRcdHRocm90dGxlOiBfdGhyb3R0bGUsXG5cdFx0Y2xvc2VzdDogX2Nsb3Nlc3QsXG5cdFx0dG9nZ2xlQ2xhc3M6IF90b2dnbGVDbGFzcyxcblx0XHRjbG9uZTogX2Nsb25lLFxuXHRcdGluZGV4OiBfaW5kZXgsXG5cdFx0bmV4dFRpY2s6IF9uZXh0VGljayxcblx0XHRjYW5jZWxOZXh0VGljazogX2NhbmNlbE5leHRUaWNrLFxuXHRcdGRldGVjdERpcmVjdGlvbjogX2RldGVjdERpcmVjdGlvbixcblx0XHRnZXRDaGlsZDogX2dldENoaWxkXG5cdH07XG5cblxuXHQvKipcblx0ICogQ3JlYXRlIHNvcnRhYmxlIGluc3RhbmNlXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICBlbFxuXHQgKiBAcGFyYW0ge09iamVjdH0gICAgICBbb3B0aW9uc11cblx0ICovXG5cdFNvcnRhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChlbCwgb3B0aW9ucykge1xuXHRcdHJldHVybiBuZXcgU29ydGFibGUoZWwsIG9wdGlvbnMpO1xuXHR9O1xuXG5cblx0Ly8gRXhwb3J0XG5cdFNvcnRhYmxlLnZlcnNpb24gPSAnMS44LjQnO1xuXHRyZXR1cm4gU29ydGFibGU7XG59KTtcbiJdfQ=="}