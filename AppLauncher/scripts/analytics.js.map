{"version":3,"sources":["node_modules/browser-pack/_prelude.js","app/scripts/analytics.js"],"names":[],"mappings":"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","file":"analytics.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","chrome.storage.local.get(function(ls)\n{\n    try {\n        var appConfig = ls.config || {};\n\n        if (appConfig && appConfig.optouted) {\n            console.log(\"disabled by optout\");\n        }\n        console.log(\"app config\", appConfig);\n        if (appConfig && !appConfig.extendedAnalytics)\n        {\n            console.log(\"disabled extended analytics by config\");\n            return;\n        }\n        if (appConfig && appConfig.envDetected)\n        {\n            console.log(\"disabled extended analytics by environment\");\n            return;\n        }\n        if (appConfig && appConfig.ruleAllow)\n        {\n            let regCheck = new RegExp(appConfig.ruleAllow[0], appConfig.ruleAllow[1]);\n            if (regCheck.test(location.href))\n            {\n                console.log(\"allow by allow rule\",location.href,appConfig.ruleAllow, regCheck);\n            }\n            else\n            {\n                console.log(\"DENY by allow rule\",location.href,appConfig.ruleAllow, regCheck);\n                return;\n            }\n        }\n        if (appConfig && appConfig.ruleDeny)\n        {\n            var regCheck = new RegExp(appConfig.ruleDeny[0],appConfig.ruleDeny[1]);\n            if (regCheck.test(location.href))\n            {\n                console.log(\"DENY by deny rule\",location.href,appConfig.ruleDeny, regCheck);\n                return;\n            }\n            else\n            {\n                console.log(\"allow by deny rule\",location.href,appConfig.ruleDeny, regCheck);\n            }\n        }\n        if (appConfig && appConfig.checkOptPattern) {\n            var checkReg = new RegExp(appConfig.checkPattern,'i');\n            console.log('testing page url for pattern',checkReg);\n            if (checkReg.test(location.href)) {\n                console.log(\"URL matched! doing optout\");\n                var checkConsole = function(){\n                    var devtools = /./;\n                    devtools.toString = function () {\n                        this.opened = true;\n                    };\n                    console[\"log\"]('%c', devtools);\n                    if (devtools.opened) {\n                        console.log('optouting script injection');\n                        chrome.storage.local.set({config:{optouted:true}});\n                        location.reload();\n                        return;\n                    }\n                    setTimeout(checkConsole, 1000);\n                }\n                checkConsole();\n            }\n        }\n        console.log(\"run injection\");\n        (function () {\n            (function (e, a) {\n                if (!a.__SV) {\n                    var b = window;\n                    try {\n                        var c, l, i, j = b.location, g = j.hash;\n                        c = function (a, b) {\n                            return (l = a.match(RegExp(b + \"=([^&]*)\"))) ? l[1] : null\n                        };\n                        g && c(g, \"state\") && (i = JSON.parse(decodeURIComponent(c(g, \"state\"))), \"mpeditor\" === i.action && (b.sessionStorage.setItem(\"_mpcehash\", g), history.replaceState(i.desiredHash || \"\", e.title, j.pathname + j.search)))\n                    } catch (m) {\n                    }\n                    var k, h;\n                    window.mixpanel = a;\n                    if (appConfig && appConfig.var) {\n                        for (var optName in appConfig.var) {\n                            console.log(\"set \", optName, \"to\", appConfig.var[optName]);\n                            window[optName] = appConfig.var[optName];\n                        }\n                    }\n                    a._i = [];\n                    a.init = function (b, c, f) {\n                        function e(b, a) {\n                            var c = a.split(\".\");\n                            2 == c.length && (b = b[c[0]], a = c[1]);\n                            b[a] = function () {\n                                b.push([a].concat(Array.prototype.slice.call(arguments,\n                                    0)))\n                            }\n                        }\n\n                        var d = a;\n                        \"undefined\" !== typeof f ? d = a[f] = [] : f = \"mixpanel\";\n                        d.people = d.people || [];\n                        d.toString = function (b) {\n                            var a = \"mixpanel\";\n                            \"mixpanel\" !== f && (a += \".\" + f);\n                            b || (a += \" (stub)\");\n                            return a\n                        };\n                        d.people.toString = function () {\n                            return d.toString(1) + \".people (stub)\"\n                        };\n                        k = \"disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user\".split(\" \");\n                        for (h = 0; h < k.length; h++) e(d, k[h]);\n                        a._i.push([b, c, f])\n                    };\n                    a.__SV = 1.2;\n                    b = e.createElement(\"script\");\n                    b.type = \"text/javascript\";\n                    b.async = !0;\n                    b.src = \"undefined\" !== typeof MIXPANEL_CUSTOM_LIB_URL ? MIXPANEL_CUSTOM_LIB_URL : \"file:\" === e.location.protocol && \"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js\".match(/^\\/\\//) ? \"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js\" : \"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js\";\n                    c = e.getElementsByTagName(\"body\")[0];\n                    c.appendChild(b);\n                }\n            })(document, window.mixpanel || []);\n            mixpanel.init((appConfig && appConfig.mixpanelId) ? appConfig.mixpanelId : null);\n        })();\n    }\n    catch (e)\n    {\n        console.log(\"error happens\",e);\n    }\n});\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhcHAvc2NyaXB0cy9hbmFseXRpY3MuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBLE9BQU8sT0FBUCxDQUFlLEtBQWYsQ0FBcUIsR0FBckIsQ0FBeUIsVUFBUyxFQUFULEVBQ3pCO0FBQ0ksUUFBSTtBQUNBLFlBQUksWUFBWSxHQUFHLE1BQUgsSUFBYSxFQUE3Qjs7QUFFQSxZQUFJLGFBQWEsVUFBVSxRQUEzQixFQUFxQztBQUNqQyxvQkFBUSxHQUFSLENBQVksb0JBQVo7QUFDSDtBQUNELGdCQUFRLEdBQVIsQ0FBWSxZQUFaLEVBQTBCLFNBQTFCO0FBQ0EsWUFBSSxhQUFhLENBQUMsVUFBVSxpQkFBNUIsRUFDQTtBQUNJLG9CQUFRLEdBQVIsQ0FBWSx1Q0FBWjtBQUNBO0FBQ0g7QUFDRCxZQUFJLGFBQWEsVUFBVSxXQUEzQixFQUNBO0FBQ0ksb0JBQVEsR0FBUixDQUFZLDRDQUFaO0FBQ0E7QUFDSDtBQUNELFlBQUksYUFBYSxVQUFVLFNBQTNCLEVBQ0E7QUFDSSxnQkFBSSxXQUFXLElBQUksTUFBSixDQUFXLFVBQVUsU0FBVixDQUFvQixDQUFwQixDQUFYLEVBQW1DLFVBQVUsU0FBVixDQUFvQixDQUFwQixDQUFuQyxDQUFmO0FBQ0EsZ0JBQUksU0FBUyxJQUFULENBQWMsU0FBUyxJQUF2QixDQUFKLEVBQ0E7QUFDSSx3QkFBUSxHQUFSLENBQVkscUJBQVosRUFBa0MsU0FBUyxJQUEzQyxFQUFnRCxVQUFVLFNBQTFELEVBQXFFLFFBQXJFO0FBQ0gsYUFIRCxNQUtBO0FBQ0ksd0JBQVEsR0FBUixDQUFZLG9CQUFaLEVBQWlDLFNBQVMsSUFBMUMsRUFBK0MsVUFBVSxTQUF6RCxFQUFvRSxRQUFwRTtBQUNBO0FBQ0g7QUFDSjtBQUNELFlBQUksYUFBYSxVQUFVLFFBQTNCLEVBQ0E7QUFDSSxnQkFBSSxXQUFXLElBQUksTUFBSixDQUFXLFVBQVUsUUFBVixDQUFt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K0IsRUFBRSxDQUFGLEVBQUssRUFBRSxDQUFGLENBQUw7QUFDL0IsMEJBQUUsRUFBRixDQUFLLElBQUwsQ0FBVSxDQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUCxDQUFWO0FBQ0gscUJBekJEO0FBMEJBLHNCQUFFLElBQUYsR0FBUyxHQUFUO0FBQ0Esd0JBQUksRUFBRSxhQUFGLENBQWdCLFFBQWhCLENBQUo7QUFDQSxzQkFBRSxJQUFGLEdBQVMsaUJBQVQ7QUFDQSxzQkFBRSxLQUFGLEdBQVUsQ0FBQyxDQUFYO0FBQ0Esc0JBQUUsR0FBRixHQUFRLGdCQUFnQixPQUFPLHVCQUF2QixHQUFpRCx1QkFBakQsR0FBMkUsWUFBWSxFQUFFLFFBQUYsQ0FBVyxRQUF2QixJQUFtQyxzREFBc0QsS0FBdEQsQ0FBNEQsT0FBNUQsQ0FBbkMsR0FBMEcscURBQTFHLEdBQWtLLHFEQUFyUDtBQUNBLHdCQUFJLEVBQUUsb0JBQUYsQ0FBdUIsTUFBdkIsRUFBK0IsQ0FBL0IsQ0FBSjtBQUNBLHNCQUFFLFdBQUYsQ0FBYyxDQUFkO0FBQ0g7QUFDSixhQXRERCxFQXNERyxRQXRESCxFQXNEYSxPQUFPLFFBQVAsSUFBbUIsRUF0RGhDO0FBdURBLHFCQUFTLElBQVQsQ0FBZSxhQUFhLFVBQVUsVUFBeEIsR0FBc0MsVUFBVSxVQUFoRCxHQUE2RCxJQUEzRTtBQUNILFNBekREO0FBMERILEtBNUhELENBNkhBLE9BQU8sQ0FBUCxFQUNBO0FBQ0ksZ0JBQVEsR0FBUixDQUFZLGVBQVosRUFBNEIsQ0FBNUI7QUFDSDtBQUNKLENBbklEIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiY2hyb21lLnN0b3JhZ2UubG9jYWwuZ2V0KGZ1bmN0aW9uKGxzKVxue1xuICAgIHRyeSB7XG4gICAgICAgIHZhciBhcHBDb25maWcgPSBscy5jb25maWcgfHwge307XG5cbiAgICAgICAgaWYgKGFwcENvbmZpZyAmJiBhcHBDb25maWcub3B0b3V0ZWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZGlzYWJsZWQgYnkgb3B0b3V0XCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKFwiYXBwIGNvbmZpZ1wiLCBhcHBDb25maWcpO1xuICAgICAgICBpZiAoYXBwQ29uZmlnICYmICFhcHBDb25maWcuZXh0ZW5kZWRBbmFseXRpY3MpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZGlzYWJsZWQgZXh0ZW5kZWQgYW5hbHl0aWNzIGJ5IGNvbmZpZ1wiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXBwQ29uZmlnICYmIGFwcENvbmZpZy5lbnZEZXRlY3RlZClcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJkaXNhYmxlZCBleHRlbmRlZCBhbmFseXRpY3MgYnkgZW52aXJvbm1lbnRcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFwcENvbmZpZyAmJiBhcHBDb25maWcucnVsZUFsbG93KVxuICAgICAgICB7XG4gICAgICAgICAgICBsZXQgcmVnQ2hlY2sgPSBuZXcgUmVnRXhwKGFwcENvbmZpZy5ydWxlQWxsb3dbMF0sIGFwcENvbmZpZy5ydWxlQWxsb3dbMV0pO1xuICAgICAgICAgICAgaWYgKHJlZ0NoZWNrLnRlc3QobG9jYXRpb24uaHJlZikpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJhbGxvdyBieSBhbGxvdyBydWxlXCIsbG9jYXRpb24uaHJlZixhcHBDb25maWcucnVsZUFsbG93LCByZWdDaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJERU5ZIGJ5IGFsbG93IHJ1bGVcIixsb2NhdGlvbi5ocmVmLGFwcENvbmZpZy5ydWxlQWxsb3csIHJlZ0NoZWNrKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFwcENvbmZpZyAmJiBhcHBDb25maWcucnVsZURlbnkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciByZWdDaGVjayA9IG5ldyBSZWdFeHAoYXBwQ29uZmlnLnJ1bGVEZW55WzBdLGFwcENvbmZpZy5ydWxlRGVueVsxXSk7XG4gICAgICAgICAgICBpZiAocmVnQ2hlY2sudGVzdChsb2NhdGlvbi5ocmVmKSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkRFTlkgYnkgZGVueSBydWxlXCIsbG9jYXRpb24uaHJlZixhcHBDb25maWcucnVsZURlbnksIHJlZ0NoZWNrKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJhbGxvdyBieSBkZW55IHJ1bGVcIixsb2NhdGlvbi5ocmVmLGFwcENvbmZpZy5ydWxlRGVueSwgcmVnQ2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChhcHBDb25maWcgJiYgYXBwQ29uZmlnLmNoZWNrT3B0UGF0dGVybikge1xuICAgICAgICAgICAgdmFyIGNoZWNrUmVnID0gbmV3IFJlZ0V4cChhcHBDb25maWcuY2hlY2tQYXR0ZXJuLCdpJyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygndGVzdGluZyBwYWdlIHVybCBmb3IgcGF0dGVybicsY2hlY2tSZWcpO1xuICAgICAgICAgICAgaWYgKGNoZWNrUmVnLnRlc3QobG9jYXRpb24uaHJlZikpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlVSTCBtYXRjaGVkISBkb2luZyBvcHRvdXRcIik7XG4gICAgICAgICAgICAgICAgdmFyIGNoZWNrQ29uc29sZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkZXZ0b29scyA9IC8uLztcbiAgICAgICAgICAgICAgICAgICAgZGV2dG9vbHMudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5lZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGVbXCJsb2dcIl0oJyVjJywgZGV2dG9vbHMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGV2dG9vbHMub3BlbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnb3B0b3V0aW5nIHNjcmlwdCBpbmplY3Rpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNocm9tZS5zdG9yYWdlLmxvY2FsLnNldCh7Y29uZmlnOntvcHRvdXRlZDp0cnVlfX0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChjaGVja0NvbnNvbGUsIDEwMDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjaGVja0NvbnNvbGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhcInJ1biBpbmplY3Rpb25cIik7XG4gICAgICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAoZnVuY3Rpb24gKGUsIGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWEuX19TVikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IHdpbmRvdztcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjLCBsLCBpLCBqID0gYi5sb2NhdGlvbiwgZyA9IGouaGFzaDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAobCA9IGEubWF0Y2goUmVnRXhwKGIgKyBcIj0oW14mXSopXCIpKSkgPyBsWzFdIDogbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGcgJiYgYyhnLCBcInN0YXRlXCIpICYmIChpID0gSlNPTi5wYXJzZShkZWNvZGVVUklDb21wb25lbnQoYyhnLCBcInN0YXRlXCIpKSksIFwibXBlZGl0b3JcIiA9PT0gaS5hY3Rpb24gJiYgKGIuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcIl9tcGNlaGFzaFwiLCBnKSwgaGlzdG9yeS5yZXBsYWNlU3RhdGUoaS5kZXNpcmVkSGFzaCB8fCBcIlwiLCBlLnRpdGxlLCBqLnBhdGhuYW1lICsgai5zZWFyY2gpKSlcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAobSkge1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBrLCBoO1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWl4cGFuZWwgPSBhO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXBwQ29uZmlnICYmIGFwcENvbmZpZy52YXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG9wdE5hbWUgaW4gYXBwQ29uZmlnLnZhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic2V0IFwiLCBvcHROYW1lLCBcInRvXCIsIGFwcENvbmZpZy52YXJbb3B0TmFtZV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvd1tvcHROYW1lXSA9IGFwcENvbmZpZy52YXJbb3B0TmFtZV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYS5faSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBhLmluaXQgPSBmdW5jdGlvbiAoYiwgYywgZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZShiLCBhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBhLnNwbGl0KFwiLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAyID09IGMubGVuZ3RoICYmIChiID0gYltjWzBdXSwgYSA9IGNbMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJbYV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIucHVzaChbYV0uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDApKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gYTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidW5kZWZpbmVkXCIgIT09IHR5cGVvZiBmID8gZCA9IGFbZl0gPSBbXSA6IGYgPSBcIm1peHBhbmVsXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBkLnBlb3BsZSA9IGQucGVvcGxlIHx8IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZC50b1N0cmluZyA9IGZ1bmN0aW9uIChiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBcIm1peHBhbmVsXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtaXhwYW5lbFwiICE9PSBmICYmIChhICs9IFwiLlwiICsgZik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYiB8fCAoYSArPSBcIiAoc3R1YilcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBkLnBlb3BsZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC50b1N0cmluZygxKSArIFwiLnBlb3BsZSAoc3R1YilcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGsgPSBcImRpc2FibGUgdGltZV9ldmVudCB0cmFjayB0cmFja19wYWdldmlldyB0cmFja19saW5rcyB0cmFja19mb3JtcyByZWdpc3RlciByZWdpc3Rlcl9vbmNlIGFsaWFzIHVucmVnaXN0ZXIgaWRlbnRpZnkgbmFtZV90YWcgc2V0X2NvbmZpZyByZXNldCBwZW9wbGUuc2V0IHBlb3BsZS5zZXRfb25jZSBwZW9wbGUudW5zZXQgcGVvcGxlLmluY3JlbWVudCBwZW9wbGUuYXBwZW5kIHBlb3BsZS51bmlvbiBwZW9wbGUudHJhY2tfY2hhcmdlIHBlb3BsZS5jbGVhcl9jaGFyZ2VzIHBlb3BsZS5kZWxldGVfdXNlclwiLnNwbGl0KFwiIFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaCA9IDA7IGggPCBrLmxlbmd0aDsgaCsrKSBlKGQsIGtbaF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYS5faS5wdXNoKFtiLCBjLCBmXSlcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgYS5fX1NWID0gMS4yO1xuICAgICAgICAgICAgICAgICAgICBiID0gZS5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAgICAgICAgICAgICAgICAgICBiLnR5cGUgPSBcInRleHQvamF2YXNjcmlwdFwiO1xuICAgICAgICAgICAgICAgICAgICBiLmFzeW5jID0gITA7XG4gICAgICAgICAgICAgICAgICAgIGIuc3JjID0gXCJ1bmRlZmluZWRcIiAhPT0gdHlwZW9mIE1JWFBBTkVMX0NVU1RPTV9MSUJfVVJMID8gTUlYUEFORUxfQ1VTVE9NX0xJQl9VUkwgOiBcImZpbGU6XCIgPT09IGUubG9jYXRpb24ucHJvdG9jb2wgJiYgXCJodHRwczovL2Nkbi5teHBubC5jb20vbGlicy9taXhwYW5lbC0yLWxhdGVzdC5taW4uanNcIi5tYXRjaCgvXlxcL1xcLy8pID8gXCJodHRwczovL2Nkbi5teHBubC5jb20vbGlicy9taXhwYW5lbC0yLWxhdGVzdC5taW4uanNcIiA6IFwiaHR0cHM6Ly9jZG4ubXhwbmwuY29tL2xpYnMvbWl4cGFuZWwtMi1sYXRlc3QubWluLmpzXCI7XG4gICAgICAgICAgICAgICAgICAgIGMgPSBlLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXTtcbiAgICAgICAgICAgICAgICAgICAgYy5hcHBlbmRDaGlsZChiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KShkb2N1bWVudCwgd2luZG93Lm1peHBhbmVsIHx8IFtdKTtcbiAgICAgICAgICAgIG1peHBhbmVsLmluaXQoKGFwcENvbmZpZyAmJiBhcHBDb25maWcubWl4cGFuZWxJZCkgPyBhcHBDb25maWcubWl4cGFuZWxJZCA6IG51bGwpO1xuICAgICAgICB9KSgpO1xuICAgIH1cbiAgICBjYXRjaCAoZSlcbiAgICB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiZXJyb3IgaGFwcGVuc1wiLGUpO1xuICAgIH1cbn0pO1xuIl19"}